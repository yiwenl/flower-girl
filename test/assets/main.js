!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="/assets/",e(0)}([function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var n in e)t.style[n]=e[n]}var s=n(178),a=(r(s),n(2)),u=i(a),l=n(3),h=(r(l),n(71)),c=r(h),f=n(31),d=r(f),p=n(207),m=(r(p),n(154)),v=r(m);window.PIXI=u;var y=void 0;window.og||(window.og={gid:"countdown-test",gameDir:"",gameContainerId:"og-game-holder",isFullScreen:window.self===window.top,exitGameUrl:"http://bbc.co.uk/",environment:"test",embedVars:{statsCounterName:"testCounterName",statsAppName:"TestAppName"}}),window.og.embedVars||(window.og.embedVars={statsAppName:"worst-wtich"}),window.ASSET_URL="assets/",window.config={app:"com/__PACKAGE_NAME__/app/__APP_ROOT_CLASS_NAME__"},window.console||(window.console={log:function(t){}}),window.console.log||(window.console.log=function(t){}),window.DEVICE_SCALE=window.devicePixelRatio||1,window.initGame=function(){var t=new v.default;if(t.supported){var e=function(){document.getElementById("container");window.scrollTo(0,0),r.resize(window.innerWidth,window.innerHeight)};y=(0,d.default)(),window.ASSET_URL=y.gameDir+"assets/";var n=location.href.indexOf("http://dev.goodboydigital.com/")>-1;n&&(ASSET_URL="http://dev.goodboydigital.com/client/bbc-assets/doctor-who/assets/");var i=y.gameContainerId;i||(i="og-game-holder");var r=new c.default;window.app=r;var s=document.getElementById(i);s.appendChild(r.view),o(document.body,{background:"black"}),o(s,{background:"black",position:"absolute",zIndex:"-1",top:0,left:0}),o(r.view,{position:"absolute",top:0,left:0}),window.addEventListener("resize",function(){e()}),e()}}},function(t,e){"use strict";e.__esModule=!0;var n={tunnelDepth:100,tunnelRadius:20,numSegTunnel:40,time:255*Math.random(),noiseScale:.005,noiseRange:7.5,initSpeed:.005,speed:.01,objectSpeed:93,magnitude:1.25,indexTable:0,textureSpeed:2.2,itemRotateAngle:.02,speedIncrease:.002,direction:1,planeDist:10,fov:50,initDistance:150,trialLength:4,rockRotateSpeed:.05,ringLayerRange:3,numPickupsToLevelUp:30,gateRotationSpeed:1e-6,controlSensitivity:{desktop:.5,mobile:1},turn:{numLevelsToInvert:4,numInvertLevels:2,angleThreshold:30},pickupEffects:{effectDuration:15,magnetRange:10},difficulties:[10,20,25],sharing:{useCurrentURL:!1},onBoarding:{flyingInDuration:1.5,flyingOutDuration:1.5,messagePosition:-.1,messageDelay:10,messageHold:3},attackFromPast:{asteroidSpeed:1.1,timeBetween:.75}};e.default=n,t.exports=e.default},function(t,e,n){var i,i;(function(e){/*!
	 * pixi.js - v4.5.1
	 * Compiled Wed, 03 May 2017 17:16:58 UTC
	 *
	 * pixi.js is licensed under the MIT License.
	 * http://www.opensource.org/licenses/mit-license
	 */
!function(e){t.exports=e()}(function(){var t;return function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){var l="function"==typeof i&&i;if(!u&&l)return i(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var s="function"==typeof i&&i,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";"use restrict";function i(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var r=32;n.INT_BITS=r,n.INT_MAX=2147483647,n.INT_MIN=-1<<r-1,n.sign=function(t){return(t>0)-(t<0)},n.abs=function(t){var e=t>>r-1;return(t^e)-e},n.min=function(t,e){return e^(t^e)&-(t<e)},n.max=function(t,e){return t^(t^e)&-(t<e)},n.isPow2=function(t){return!(t&t-1||!t)},n.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1},n.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},n.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},n.countTrailingZeros=i,n.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},n.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},n.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var o=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,i=e,r=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--r;t[e]=i<<r&255}}(o),n.reverse=function(t){return o[255&t]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},n.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},n.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},n.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},n.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},n.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},{}],2:[function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i=e&&e.length,o=i?e[0]*n:t.length,a=r(t,0,o,n,!0),u=[];if(!a)return u;var l,h,f,d,p,m,v;if(i&&(a=c(t,e,a,n)),t.length>80*n){l=f=t[0],h=d=t[1];for(var y=n;y<o;y+=n)p=t[y],m=t[y+1],p<l&&(l=p),m<h&&(h=m),p>f&&(f=p),m>d&&(d=m);v=Math.max(f-l,d-h)}return s(a,u,n,l,h,v),u}function r(t,e,n,i,r){var o,s;if(r===I(t,e,n,i)>0)for(o=e;o<n;o+=i)s=O(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=O(o,t[o],t[o+1],s);return s&&w(s,s.next)&&(A(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var n,i=t;do if(n=!1,i.steiner||!w(i,i.next)&&0!==x(i.prev,i,i.next))i=i.next;else{if(A(i),i=e=i.prev,i===i.next)return null;n=!0}while(n||i!==e);return e}function s(t,e,n,i,r,c,f){if(t){!f&&c&&m(t,i,r,c);for(var d,p,v=t;t.prev!==t.next;)if(d=t.prev,p=t.next,c?u(t,i,r,c):a(t))e.push(d.i/n),e.push(t.i/n),e.push(p.i/n),A(t),t=p.next,v=p.next;else if(t=p,t===v){f?1===f?(t=l(t,e,n),s(t,e,n,i,r,c,2)):2===f&&h(t,e,n,i,r,c):s(o(t),e,n,i,r,c,1);break}}}function a(t){var e=t.prev,n=t,i=t.next;if(x(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(g(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&x(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,o=t,s=t.next;if(x(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,u=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,l=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,h=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=y(a,u,e,n,i),f=y(l,h,e,n,i),d=t.nextZ;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function l(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!w(r,o)&&T(r,i,i.next,o)&&M(r,o)&&M(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),A(i),A(i.next),i=t=o),i=i.next}while(i!==t);return i}function h(t,e,n,i,r,a){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var h=P(u,l);return u=o(u,u.next),h=o(h,h.next),s(u,e,n,i,r,a),void s(h,e,n,i,r,a)}l=l.next}u=u.next}while(u!==t)}function c(t,e,n,i){var s,a,u,l,h,c=[];for(s=0,a=e.length;s<a;s++)u=e[s]*i,l=s<a-1?e[s+1]*i:t.length,h=r(t,u,l,i,!1),h===h.next&&(h.steiner=!0),c.push(_(h));for(c.sort(f),s=0;s<c.length;s++)d(c[s],n),n=o(n,n.next);return n}function f(t,e){return t.x-e.x}function d(t,e){if(e=p(t,e)){var n=P(e,t);o(n,n.next)}}function p(t,e){var n,i=e,r=t.x,o=t.y,s=-(1/0);do{if(o<=i.y&&o>=i.next.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var u,l=n,h=n.x,c=n.y,f=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=h&&g(o<c?r:s,o,h,c,o<c?s:r,o,i.x,i.y)&&(u=Math.abs(o-i.y)/(r-i.x),(u<f||u===f&&i.x>n.x)&&M(i,t)&&(n=i,f=u)),i=i.next;return n}function m(t,e,n,i){var r=t;do null===r.z&&(r.z=y(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,v(r)}function v(t){var e,n,i,r,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<l&&(a++,i=i.nextZ,i);e++);for(u=l;a>0||u>0&&i;)0===a?(r=i,i=i.nextZ,u--):0!==u&&i?n.z<=i.z?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,u--):(r=n,n=n.nextZ,a--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(s>1);return t}function y(t,e,n,i,r){return t=32767*(t-n)/r,e=32767*(e-i)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function _(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function g(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!S(t,e)&&M(t,e)&&M(e,t)&&E(t,e)}function x(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function T(t,e,n,i){return!!(w(t,e)&&w(n,i)||w(t,i)&&w(n,e))||x(t,e,n)>0!=x(t,e,i)>0&&x(n,i,t)>0!=x(n,i,e)>0}function S(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&T(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function M(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function E(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function P(t,e){var n=new C(t.i,t.x,t.y),i=new C(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function O(t,e,n,i){var r=new C(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}e.exports=i,i.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(I(t,0,o,n));if(r)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(I(t,l,h,n))}var c=0;for(a=0;a<i.length;a+=3){var f=i[a]*n,d=i[a+1]*n,p=i[a+2]*n;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},{}],3:[function(t,e,n){"use strict";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new i,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)s.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=a?a+t:t,i=this._events[n];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},o.prototype.emit=function(t,e,n,i,r,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,l,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,r),!0;case 6:return h.fn.call(h.context,e,n,i,r,o),!0}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u)}else{var f,d=h.length;for(l=0;l<d;l++)switch(h[l].once&&this.removeListener(t,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,e);break;case 3:h[l].fn.call(h[l].context,e,n);break;case 4:h[l].fn.call(h[l].context,e,n,i);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];h[l].fn.apply(h[l].context,u)}}return!0},o.prototype.on=function(t,e,n){var i=new r(e,n||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},o.prototype.once=function(t,e,n){var i=new r(e,n||this,!0),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,r){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventsCount?this._events=new i:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||(0===--this._eventsCount?this._events=new i:delete this._events[o]);else{for(var u=0,l=[],h=s.length;u<h;u++)(s[u].fn!==e||r&&!s[u].once||n&&s[u].context!==n)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:0===--this._eventsCount?this._events=new i:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new i:delete this._events[e])):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,"undefined"!=typeof e&&(e.exports=o)},{}],4:[function(e,n,i){/**
	 * isMobile.js v0.4.0
	 *
	 * A simple library to detect Apple phones and tablets,
	 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
	 * and any kind of seven inch device, via user agent sniffing.
	 *
	 * @author: Kai Mallea (kmallea@gmail.com)
	 *
	 * @license: http://creativecommons.org/publicdomain/zero/1.0/
	 */
!function(e){var i=/iPhone/i,r=/iPod/i,o=/iPad/i,s=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,u=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,h=/IEMobile/i,c=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,f=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,m=/(CriOS|Chrome)(?=.*\bMobile\b)/i,v=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,y=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),_=function(t,e){return t.test(e)},g=function(t){var e=t||navigator.userAgent,n=e.split("[FBAN");if("undefined"!=typeof n[1]&&(e=n[0]),n=e.split("Twitter"),"undefined"!=typeof n[1]&&(e=n[0]),this.apple={phone:_(i,e),ipod:_(r,e),tablet:!_(i,e)&&_(o,e),device:_(i,e)||_(r,e)||_(o,e)},this.amazon={phone:_(u,e),tablet:!_(u,e)&&_(l,e),device:_(u,e)||_(l,e)},this.android={phone:_(u,e)||_(s,e),tablet:!_(u,e)&&!_(s,e)&&(_(l,e)||_(a,e)),device:_(u,e)||_(l,e)||_(s,e)||_(a,e)},this.windows={phone:_(h,e),tablet:_(c,e),device:_(h,e)||_(c,e)},this.other={blackberry:_(f,e),blackberry10:_(d,e),opera:_(p,e),firefox:_(v,e),chrome:_(m,e),device:_(f,e)||_(d,e)||_(p,e)||_(v,e)||_(m,e)},this.seven_inch=_(y,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},b=function(){var t=new g;return t.Class=g,t};"undefined"!=typeof n&&n.exports&&"undefined"==typeof window?n.exports=g:"undefined"!=typeof n&&n.exports&&"undefined"!=typeof window?n.exports=b():"function"==typeof t&&t.amd?t("isMobile",[],e.isMobile=b()):e.isMobile=b()}(this)},{}],5:[function(t,e,n){var i=function(t,e){this.items=[],this._name=t,this.dispatch=this.emit=this.run=i.generateRun(t,e||0)},r=i.prototype;r.add=function(t){t[this._name]&&(this.remove(t),this.items.push(t))},r.remove=function(t){var e=this.items.indexOf(t);e!==-1&&this.items.splice(e,1)},r.contains=function(t){return this.items.indexOf(t)!==-1},r.removeAll=function(){this.items.length=0},Object.defineProperty(r,"empty",{get:function(){return 0===this.items.length}}),i.generateRun=function(t,e){var n=t+"|"+e,r=i.hash[n];if(!r){if(e>0){for(var o="arg0",s=1;s<e;s++)o+=",arg"+s;r=new Function(o,"var items = this.items; for(var i=0;i<items.length;i++){ items[i]."+t+"("+o+"); }")}else r=new Function("var items = this.items; for(var i=0;i<items.length;i++){ items[i]."+t+"(); }");i.hash[n]=r}return r},i.hash={},e.exports=i},{}],6:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,n,r){void 0===n&&(n=!1),i(this,t),this._fn=e,this._once=n,this._thisArg=r,this._next=this._prev=this._owner=null}return o(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),a=function(){function t(){i(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return r(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return r(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=s,n.default=a,e.exports=n.default},{}],7:[function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}var o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(t,e){for(var n,r,a=i(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var l in n)o.call(n,l)&&(a[l]=n[l]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(n);for(var h=0;h<r.length;h++)s.call(n,r[h])&&(a[r[h]]=n[r[h]])}}return a}},{}],8:[function(t,e,n){"use strict";e.exports=function(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=n.parser[e.strictMode?"strict":"loose"].exec(t),r={},o=14;o--;)r[n.key[o]]=i[o]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,function(t,e,i){e&&(r[n.q.name][e]=i)}),r}},{}],9:[function(t,e,n){(function(t){function e(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,r="/"===s.charAt(0))}return n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(t){var r=n.isAbsolute(t),o="/"===s(t,-1);return t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var r=i(t.split("/")),o=i(e.split("/")),s=Math.min(r.length,o.length),a=s,u=0;u<s;u++)if(r[u]!==o[u]){a=u;break}for(var l=[],u=a;u<r.length;u++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:27}],10:[function(t,e,n){var i=new ArrayBuffer(0),r=function(t,e,n,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=i,n&&this.upload(n),this._updateID=0};r.prototype.upload=function(t,e,n){n||this.bind();var i=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?i.bufferSubData(this.type,e,t):i.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){var t=this.gl;t.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,n){return new r(t,t.ARRAY_BUFFER,e,n)},r.createIndexBuffer=function(t,e,n){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,n)},r.create=function(t,e,n,i){return new r(t,e,n,i)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=r},{}],11:[function(t,e,n){var i=t("./GLTexture"),r=function(t,e,n){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=n||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new i(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,n,i){this.bind();var r=this.gl;r.clearColor(t,e,n,i),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var n=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,n,o){var s=i.fromData(t,null,e,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(t,e,n);return a.enableTexture(s),a.unbind(),a},r.createFloat32=function(t,e,n,o){var s=new i.fromData(t,o,e,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(t,e,n);return a.enableTexture(s),a.unbind(),a},e.exports=r},{"./GLTexture":13}],12:[function(t,e,n){var i=t("./shader/compileProgram"),r=t("./shader/extractAttributes"),o=t("./shader/extractUniforms"),s=t("./shader/setPrecision"),a=t("./shader/generateUniformAccessObject"),u=function(t,e,n,u,l){this.gl=t,u&&(e=s(e,u),n=s(n,u)),this.program=i(t,e,n,l),this.attributes=r(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData)};u.prototype.bind=function(){this.gl.useProgram(this.program)},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var t=this.gl;t.deleteProgram(this.program)},e.exports=u},{"./shader/compileProgram":18,"./shader/extractAttributes":20,"./shader/extractUniforms":21,"./shader/generateUniformAccessObject":22,"./shader/setPrecision":26}],13:[function(t,e,n){var i=function(t,e,n,i,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=n||-1,this.format=i||t.RGBA,this.type=r||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var n=t.videoWidth||t.width,i=t.videoHeight||t.height;i!==this.height||n!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=n,this.height=i};var r=!1;i.prototype.uploadData=function(t,e,n){this.bind();var i=this.gl;if(t instanceof Float32Array){if(!r){var o=i.getExtension("OES_texture_float");if(!o)throw new Error("floating point textures not available");r=!0}this.type=i.FLOAT}else this.type=this.type||i.UNSIGNED_BYTE;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||n!==this.height?i.texImage2D(i.TEXTURE_2D,0,this.format,e,n,0,this.format,this.type,t||null):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e,n,this.format,this.type,t||null),this.width=e,this.height=n},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){var t=this.gl;t.deleteTexture(this.texture)},i.fromSource=function(t,e,n){var r=new i(t);return r.premultiplyAlpha=n||!1,r.upload(e),r},i.fromData=function(t,e,n,r){var o=new i(t);return o.uploadData(e,n,r),o},e.exports=i},{}],14:[function(t,e,n){function i(t,e){if(this.nativeVaoExtension=null,i.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var n=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(n),attribState:new Array(n)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=t("./setVertexAttribArrays");i.prototype.constructor=i,e.exports=i,i.FORCE_NATIVE=!1,i.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},i.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},i.prototype.activate=function(){for(var t=this.gl,e=null,n=0;n<this.attributes.length;n++){var i=this.attributes[n];e!==i.buffer&&(i.buffer.bind(),e=i.buffer),t.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||t.FLOAT,i.normalized||!1,i.stride||0,i.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},i.prototype.addAttribute=function(t,e,n,i,r,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:n||this.gl.FLOAT,normalized:i||!1,stride:r||0,start:o||0}),this.dirty=!0,this},i.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},i.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},i.prototype.draw=function(t,e,n){var i=this.gl;return this.indexBuffer?i.drawElements(t,e||this.indexBuffer.data.length,i.UNSIGNED_SHORT,2*(n||0)):i.drawArrays(t,n,e||this.getSize()),this},i.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},i.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":17}],15:[function(t,e,n){var i=function(t,e){var n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!n)throw new Error("This browser does not support webGL. Try using the canvas renderer");return n};e.exports=i},{}],16:[function(t,e,n){var i={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};"undefined"!=typeof e&&e.exports&&(e.exports=i),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=i)},{"./GLBuffer":10,"./GLFramebuffer":11,"./GLShader":12,"./GLTexture":13,"./VertexArrayObject":14,"./createContext":15,"./setVertexAttribArrays":17,"./shader":23}],17:[function(t,e,n){var i=function(t,e,n){var i;if(n){var r=n.tempAttribState,o=n.attribState;for(i=0;i<r.length;i++)r[i]=!1;for(i=0;i<e.length;i++)r[e[i].attribute.location]=!0;for(i=0;i<o.length;i++)o[i]!==r[i]&&(o[i]=r[i],n.attribState[i]?t.enableVertexAttribArray(i):t.disableVertexAttribArray(i))}else for(i=0;i<e.length;i++){var s=e[i];t.enableVertexAttribArray(s.attribute.location)}};e.exports=i},{}],18:[function(t,e,n){var i=function(t,e,n,i){var o=r(t,t.VERTEX_SHADER,e),s=r(t,t.FRAGMENT_SHADER,n),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),i)for(var u in i)t.bindAttribLocation(a,i[u],u);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(""!==t.getProgramInfoLog(a),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a},r=function(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:null};e.exports=i},{}],19:[function(t,e,n){var i=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},r=function(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e};e.exports=i},{}],20:[function(t,e,n){var i=t("./mapType"),r=t("./mapSize"),o=function(t,e){for(var n={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var u=t.getActiveAttrib(e,a),l=i(t,u.type);n[u.name]={type:l,size:r(l),location:t.getAttribLocation(e,u.name),pointer:s}}return n},s=function(t,e,n,i){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,n||0,i||0)};e.exports=o},{"./mapSize":24,"./mapType":25}],21:[function(t,e,n){var i=t("./mapType"),r=t("./defaultValue"),o=function(t,e){for(var n={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),u=a.name.replace(/\[.*?\]/,""),l=i(t,a.type);n[u]={type:l,size:a.size,location:t.getUniformLocation(e,u),value:r(l,a.size)}}return n};e.exports=o},{"./defaultValue":19,"./mapType":25}],22:[function(t,e,n){var i=function(t,e){var n={data:{}};n.gl=t;for(var i=Object.keys(e),a=0;a<i.length;a++){var u=i[a],l=u.split("."),h=l[l.length-1],c=s(l,n),f=e[u];c.data[h]=f,c.gl=t,Object.defineProperty(c,h,{get:r(h),set:o(h,f)})}return n},r=function(t){var e=a.replace("%%",t);return new Function(e)},o=function(t,e){var n,i=u.replace(/%%/g,t);return n=1===e.size?l[e.type]:h[e.type],n&&(i+="\nthis.gl."+n+";"),new Function("value",i)},s=function(t,e){for(var n=e,i=0;i<t.length-1;i++){var r=n[t[i]]||{data:{}};n[t[i]]=r,n=r}return n},a=["return this.data.%%.value;"].join("\n"),u=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),l={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},h={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};e.exports=i},{}],23:[function(t,e,n){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":18,"./defaultValue":19,"./extractAttributes":20,"./extractUniforms":21,"./generateUniformAccessObject":22,"./mapSize":24,"./mapType":25,"./setPrecision":26}],24:[function(t,e,n){var i=function(t){return r[t]},r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=i},{}],25:[function(t,e,n){var i=function(t,e){if(!r){var n=Object.keys(o);r={};for(var i=0;i<n.length;++i){var s=n[i];r[t[s]]=o[s]}}return r[e]},r=null,o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=i},{}],26:[function(t,e,n){var i=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};e.exports=i},{}],27:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?m=p.concat(m):y=-1,m.length&&u())}function u(){if(!v){var t=o(a);v=!0;for(var e=m.length;e;){for(p=m,m=[];++y<e;)p&&p[y].run();y=-1,e=m.length}p=null,v=!1,s(t)}}function l(t,e){this.fun=t,this.array=e}function h(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(t){c=i}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,m=[],v=!1,y=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new l(t,e)),1!==m.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=h,d.addListener=h,d.once=h,d.off=h,d.removeListener=h,d.removeAllListeners=h,d.emit=h,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],28:[function(n,i,r){(function(e){!function(n){function o(t){throw new RangeError(k[t])}function s(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function a(t,e){var n=t.split("@"),i="";n.length>1&&(i=n[0]+"@",t=n[1]),t=t.replace(D,".");var r=t.split("."),o=s(r,e).join(".");return i+o}function u(t){for(var e,n,i=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(n=t.charCodeAt(r++),56320==(64512&n)?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--)):i.push(e);return i}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=j(t>>>10&1023|55296),t=56320|1023&t),e+=j(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:T}function c(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,n){var i=0;for(t=n?F(t/P):t>>1,t+=F(t/e);t>L*M>>1;i+=T)t=F(t/L);return F(i+(L+1)*t/(t+E))}function d(t){var e,n,i,r,s,a,u,c,d,p,m=[],v=t.length,y=0,_=A,g=O;for(n=t.lastIndexOf(C),n<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&o("not-basic"),m.push(t.charCodeAt(i));for(r=n>0?n+1:0;r<v;){for(s=y,a=1,u=T;r>=v&&o("invalid-input"),c=h(t.charCodeAt(r++)),(c>=T||c>F((w-y)/a))&&o("overflow"),y+=c*a,d=u<=g?S:u>=g+M?M:u-g,!(c<d);u+=T)p=T-d,a>F(w/p)&&o("overflow"),a*=p;e=m.length+1,g=f(y-s,e,0==s),F(y/e)>w-_&&o("overflow"),_+=F(y/e),y%=e,m.splice(y++,0,_)}return l(m)}function p(t){var e,n,i,r,s,a,l,h,d,p,m,v,y,_,g,b=[];for(t=u(t),v=t.length,e=A,n=0,s=O,a=0;a<v;++a)m=t[a],m<128&&b.push(j(m));for(i=r=b.length,r&&b.push(C);i<v;){for(l=w,a=0;a<v;++a)m=t[a],m>=e&&m<l&&(l=m);for(y=i+1,l-e>F((w-n)/y)&&o("overflow"),n+=(l-e)*y,e=l,a=0;a<v;++a)if(m=t[a],m<e&&++n>w&&o("overflow"),m==e){for(h=n,d=T;p=d<=s?S:d>=s+M?M:d-s,!(h<p);d+=T)g=h-p,_=T-p,b.push(j(c(p+g%_,0))),h=F(g/_);b.push(j(c(h,0))),s=f(n,y,i==r),n=0,++i}++n,++e}return b.join("")}function m(t){return a(t,function(t){return I.test(t)?d(t.slice(4).toLowerCase()):t})}function v(t){return a(t,function(t){return R.test(t)?"xn--"+p(t):t})}var y="object"==typeof r&&r&&!r.nodeType&&r,_="object"==typeof i&&i&&!i.nodeType&&i,g="object"==typeof e&&e;g.global!==g&&g.window!==g&&g.self!==g||(n=g);var b,x,w=2147483647,T=36,S=1,M=26,E=38,P=700,O=72,A=128,C="-",I=/^xn--/,R=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=T-S,F=Math.floor,j=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:u,encode:l},decode:d,encode:p,toASCII:v,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return b});else if(y&&_)if(i.exports==y)_.exports=b;else for(x in b)b.hasOwnProperty(x)&&(y[x]=b[x]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var h=0;h<l;++h){var c,f,d,p,m=t[h].replace(a,"%20"),v=m.indexOf(n);v>=0?(c=m.substr(0,v),f=m.substr(v+1)):(c=m,f=""),d=decodeURIComponent(c),p=decodeURIComponent(f),i(s,d)?r(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],30:[function(t,e,n){"use strict";function i(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?i(s(t),function(s){var a=encodeURIComponent(r(s))+n;return o(t[s])?i(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],31:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":29,"./encode":30}],32:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=t("mini-signals"),u=r(a),l=t("parse-uri"),h=r(l),c=t("./async"),f=i(c),d=t("./Resource"),p=r(d),m=100,v=/(#[\w-]+)?$/,y=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;o(this,t),this.baseUrl=n,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,n){return e._loadResource(t,n)},this._queue=f.queue(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new u.default,this.onError=new u.default,this.onLoad=new u.default,this.onStart=new u.default,this.onComplete=new u.default}return t.prototype.add=function(t,e,n,i){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"===("undefined"==typeof t?"undefined":s(t))&&(i=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(i=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new p.default(t,e,n),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=n.parentResource,a=[],u=0;u<o.children.length;++u)o.children[u].isComplete||a.push(o.children[u]);var l=o.progressChunk*(a.length+1),h=l/(a.length+2);o.children.push(this.resources[t]),o.progressChunk=h;for(var c=0;c<a.length;++c)a[c].progressChunk=h;this.resources[t].progressChunk=h;
}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},t.prototype._prepareUrl=function(t){var e=(0,h.default)(t,{strictMode:!0}),n=void 0;if(n=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var i=v.exec(n)[0];n=n.substr(0,n.length-i.length),n+=n.indexOf("?")!==-1?"&"+this.defaultQueryString:"?"+this.defaultQueryString,n+=i}return n},t.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,f.eachSeries(this._beforeMiddleware,function(e,i){e.call(n,t,function(){i(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())})},t.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,t._dequeue(),this._resourcesParsing.push(t),f.eachSeries(this._afterMiddleware,function(n,i){n.call(e,t,i)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&(e.progress=m,e._onComplete())})},t}();n.default=y},{"./Resource":33,"./async":34,"mini-signals":6,"parse-uri":8}],33:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){}function s(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function a(t){return t.toString().replace("object ","")}n.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("parse-uri"),h=i(l),c=t("mini-signals"),f=i(c),d=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),p=null,m=0,v=200,y=204,_=1223,g=2,b=function(){function t(e,n,i){if(r(this,t),"string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=o,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new f.default,this.onProgress=new f.default,this.onComplete=new f.default,this.onAfterMiddleware=new f.default}return t.setExtensionLoadType=function(e,n){s(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){s(t._xhrTypeMap,e,n)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var n=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(n)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:d&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,n){n||(n=t+"/"+e.substr(e.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=e,i.type=n,i},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(a(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(a(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(a(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,n="",i="undefined"==typeof e.status?v:e.status;""!==e.responseType&&"text"!==e.responseType&&"undefined"!=typeof e.responseType||(n=e.responseText),i===m&&n.length>0?i=v:i===_&&(i=y);var r=i/100|0;if(r!==g)return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(n,"text/xml")}else{var s=document.createElement("div");s.innerHTML=n,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||n;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,p||(p=document.createElement("a")),p.href=t,t=(0,h.default)(p.href,{strictMode:!0});var n=!t.port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&i===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var i=t.indexOf("?");i!==-1&&(t=t.substring(0,i)),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},u(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();n.default=b,b.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},b.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},b.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},b.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},b._loadTypeMap={gif:b.LOAD_TYPE.IMAGE,png:b.LOAD_TYPE.IMAGE,bmp:b.LOAD_TYPE.IMAGE,jpg:b.LOAD_TYPE.IMAGE,jpeg:b.LOAD_TYPE.IMAGE,tif:b.LOAD_TYPE.IMAGE,tiff:b.LOAD_TYPE.IMAGE,webp:b.LOAD_TYPE.IMAGE,tga:b.LOAD_TYPE.IMAGE,svg:b.LOAD_TYPE.IMAGE,"svg+xml":b.LOAD_TYPE.IMAGE,mp3:b.LOAD_TYPE.AUDIO,ogg:b.LOAD_TYPE.AUDIO,wav:b.LOAD_TYPE.AUDIO,mp4:b.LOAD_TYPE.VIDEO,webm:b.LOAD_TYPE.VIDEO},b._xhrTypeMap={xhtml:b.XHR_RESPONSE_TYPE.DOCUMENT,html:b.XHR_RESPONSE_TYPE.DOCUMENT,htm:b.XHR_RESPONSE_TYPE.DOCUMENT,xml:b.XHR_RESPONSE_TYPE.DOCUMENT,tmx:b.XHR_RESPONSE_TYPE.DOCUMENT,svg:b.XHR_RESPONSE_TYPE.DOCUMENT,tsx:b.XHR_RESPONSE_TYPE.DOCUMENT,gif:b.XHR_RESPONSE_TYPE.BLOB,png:b.XHR_RESPONSE_TYPE.BLOB,bmp:b.XHR_RESPONSE_TYPE.BLOB,jpg:b.XHR_RESPONSE_TYPE.BLOB,jpeg:b.XHR_RESPONSE_TYPE.BLOB,tif:b.XHR_RESPONSE_TYPE.BLOB,tiff:b.XHR_RESPONSE_TYPE.BLOB,webp:b.XHR_RESPONSE_TYPE.BLOB,tga:b.XHR_RESPONSE_TYPE.BLOB,json:b.XHR_RESPONSE_TYPE.JSON,text:b.XHR_RESPONSE_TYPE.TEXT,txt:b.XHR_RESPONSE_TYPE.TEXT,ttf:b.XHR_RESPONSE_TYPE.BUFFER,otf:b.XHR_RESPONSE_TYPE.BUFFER},b.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":6,"parse-uri":8}],34:[function(t,e,n){"use strict";function i(){}function r(t,e,n){var i=0,r=t.length;!function o(s){return s||i===r?void(n&&n(s)):void e(t[i++],o)}()}function o(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function s(t,e){function n(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())return void setTimeout(function(){return a.drain()},1);var r={data:t,callback:"function"==typeof n?n:i};e?a._tasks.unshift(r):a._tasks.push(r),setTimeout(function(){return a.process()},1)}function r(t){return function(){s-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a={_tasks:[],concurrency:e,saturated:i,unsaturated:i,buffer:e/4,empty:i,drain:i,error:i,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){s=0,a.drain=i,a.started=!1,a._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),s+=1,s===a.concurrency&&a.saturated(),t(e.data,o(r(e)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){a.paused!==!0&&(a.paused=!0)},resume:function(){if(a.paused!==!1){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}n.__esModule=!0,n.eachSeries=r,n.queue=s},{}],35:[function(t,e,n){"use strict";function i(t){for(var e="",n=0;n<t.length;){for(var i=[0,0,0],o=[0,0,0,0],s=0;s<i.length;++s)n<t.length?i[s]=255&t.charCodeAt(n++):i[s]=0;o[0]=i[0]>>2,o[1]=(3&i[0])<<4|i[1]>>4,o[2]=(15&i[1])<<2|i[2]>>6,o[3]=63&i[2];var a=n-(t.length-1);switch(a){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var u=0;u<o.length;++u)e+=r.charAt(o[u])}return e}n.__esModule=!0,n.encodeBinary=i;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],36:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=t("./Loader"),s=r(o),a=t("./Resource"),u=r(a),l=t("./async"),h=i(l),c=t("./b64"),f=i(c);s.default.Resource=u.default,s.default.async=h,s.default.base64=f,e.exports=s.default,n.default=s.default},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===a.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=function(){var n=h.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=a.default.TYPE.IMAGE,t.data.onload=function(){h.revokeObjectURL(n),t.data.onload=null,e()},{v:void 0}}();if("object"===("undefined"==typeof n?"undefined":o(n)))return n.v}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+l.default.encodeBinary(t.xhr.responseText),t.type=a.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}n.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.blobMiddlewareFactory=r;var s=t("../../Resource"),a=i(s),u=t("../../b64"),l=i(u),h=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(t,e,n){"use strict";function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,n){if(t&&l.isObject(t)&&t instanceof i)return t;var r=new i;return r.parse(t,e,n),r}function o(t){return l.isString(t)&&(t=r(t)),t instanceof i?t.format():i.prototype.format.call(t)}function s(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}var u=t("punycode"),l=t("./util");n.parse=r,n.resolve=s,n.resolveObject=a,n.format=o,n.Url=i;var h=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),m=["'"].concat(p),v=["%","/","?",";","#"].concat(m),y=["/","?","#"],_=255,g=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=t("querystring");i.prototype.parse=function(t,e,n){if(!l.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),r=i!==-1&&i<t.indexOf("#")?"?":"#",o=t.split(r),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(r);var a=t;if(a=a.trim(),!n&&1===t.split("#").length){var c=f.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var d=h.exec(a);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,a=a.substr(d.length)}if(n||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var M="//"===a.substr(0,2);!M||d&&w[d]||(a=a.substr(2),this.slashes=!0)}if(!w[d]&&(M||d&&!T[d])){for(var E=-1,P=0;P<y.length;P++){var O=a.indexOf(y[P]);O!==-1&&(E===-1||O<E)&&(E=O)}var A,C;C=E===-1?a.lastIndexOf("@"):a.lastIndexOf("@",E),C!==-1&&(A=a.slice(0,C),a=a.slice(C+1),this.auth=decodeURIComponent(A)),E=-1;for(var P=0;P<v.length;P++){var O=a.indexOf(v[P]);O!==-1&&(E===-1||O<E)&&(E=O)}E===-1&&(E=a.length),this.host=a.slice(0,E),a=a.slice(E),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var R=this.hostname.split(/\./),P=0,D=R.length;P<D;P++){var k=R[P];if(k&&!k.match(g)){for(var L="",F=0,j=k.length;F<j;F++)L+=k.charCodeAt(F)>127?"x":k[F];if(!L.match(g)){var B=R.slice(0,P),N=R.slice(P+1),U=k.match(b);U&&(B.push(U[1]),N.unshift(U[2])),N.length&&(a="/"+N.join(".")+a),this.hostname=B.join(".");break}}}this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=u.toASCII(this.hostname));var z=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+z,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x[p])for(var P=0,D=m.length;P<D;P++){var X=m[P];if(a.indexOf(X)!==-1){var G=encodeURIComponent(X);G===X&&(G=escape(X)),a=a.split(X).join(G)}}var H=a.indexOf("#");H!==-1&&(this.hash=a.substr(H),a=a.slice(0,H));var Y=a.indexOf("?");if(Y!==-1?(this.search=a.substr(Y),this.query=a.substr(Y+1),e&&(this.query=S.parse(this.query)),a=a.slice(0,Y)):e&&(this.search="",this.query={}),a&&(this.pathname=a),T[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",W=this.search||"";this.path=z+W}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||T[e])&&r!==!1?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+r+n+s+i},i.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(l.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var h=a[u];"protocol"!==h&&(n[h]=t[h])}return T[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!T[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||w[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),g=_||y||n.host&&t.pathname,b=g,x=n.pathname&&n.pathname.split("/")||[],p=t.pathname&&t.pathname.split("/")||[],S=n.protocol&&!T[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),g=g&&(""===p[0]||""===x[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),n.search=t.search,n.query=t.query;else if(!l.isNullOrUndefined(t.search)){if(S){n.hostname=n.host=x.shift();var M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");M&&(n.auth=M.shift(),n.host=n.hostname=M.shift())}return n.search=t.search,n.query=t.query,l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=x.slice(-1)[0],P=(n.host||t.host||x.length>1)&&("."===E||".."===E)||""===E,O=0,A=x.length;A>=0;A--)E=x[A],"."===E?x.splice(A,1):".."===E?(x.splice(A,1),O++):O&&(x.splice(A,1),O--);if(!g&&!b)for(;O--;O)x.unshift("..");!g||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),P&&"/"!==x.join("/").substr(-1)&&x.push("");var C=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(S){n.hostname=n.host=C?"":x.length?x.shift():"";var M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");M&&(n.auth=M.shift(),n.host=n.hostname=M.shift())}return g=g||n.host&&x.length,g&&!C&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":39,punycode:28,querystring:31}],39:[function(t,e,n){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],40:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var s=t("../core"),a=r(s),u=t("ismobilejs"),l=i(u),h=t("./accessibleTarget"),c=i(h);a.utils.mixins.delayMixin(a.DisplayObject.prototype,c.default);var f=9,d=100,p=0,m=0,v=2,y=1,_=-1e3,g=-1e3,b=2,x=function(){function t(e){o(this,t),!l.default.tablet&&!l.default.phone||navigator.isCocoonJS||this.createTouchHook();var n=document.createElement("div");n.style.width=d+"px",n.style.height=d+"px",n.style.position="absolute",n.style.top=p+"px",n.style.left=m+"px",n.style.zIndex=v,this.div=n,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=y+"px",e.style.height=y+"px",e.style.position="absolute",e.style.top=_+"px",e.style.left=g+"px",e.style.zIndex=b,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,n=e.length-1;n>=0;n--)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,n=t.height/this.renderer.height,i=this.div;i.style.left=t.left+"px",i.style.top=t.top+"px",i.style.width=this.renderer.width+"px",i.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var o=this.children[r];if(o.renderId!==this.renderId)o._accessibleActive=!1,a.utils.removeItems(this.children,r,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,r--,0===this.children.length&&this.deactivate();else{i=o._accessibleDiv;var s=o.hitArea,u=o.worldTransform;o.hitArea?(i.style.left=(u.tx+s.x*u.a)*e+"px",i.style.top=(u.ty+s.y*u.d)*n+"px",i.style.width=s.width*u.a*e+"px",i.style.height=s.height*u.d*n+"px"):(s=o.getBounds(),this.capHitArea(s),i.style.left=s.x*e+"px",i.style.top=s.y*n+"px",i.style.width=s.width*e+"px",i.style.height=s.height*n+"px")}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=d+"px",e.style.height=d+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=v,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title="displayObject "+this.tabIndex),t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){t.keyCode===f&&this.activate()},t.prototype._onMouseMove=function(){this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();n.default=x,a.WebGLRenderer.registerPlugin("accessibility",x),a.CanvasRenderer.registerPlugin("accessibility",x)},{"../core":67,"./accessibleTarget":41,ismobilejs:4}],41:[function(t,e,n){"use strict";n.__esModule=!0,n.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("./accessibleTarget");Object.defineProperty(n,"accessibleTarget",{enumerable:!0,get:function(){return i(r).default}});var o=t("./AccessibilityManager");Object.defineProperty(n,"AccessibilityManager",{enumerable:!0,get:function(){return i(o).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./autoDetectRenderer"),a=t("./display/Container"),u=i(a),l=t("./ticker"),h=t("./settings"),c=i(h),f=t("./const"),d=function(){function t(e,n,i,o,a){r(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:n||c.default.RENDER_OPTIONS.height,forceCanvas:!!o,sharedTicker:!!a},i)),this._options=e=Object.assign({sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,s.autoDetectRenderer)(e),this.stage=new u.default,this._ticker=null,this.ticker=e.sharedTicker?l.shared:new l.Ticker,this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t){var e=this._ticker;this.ticker=null,e.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},o(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,f.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){
return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();n.default=d},{"./autoDetectRenderer":44,"./const":45,"./display/Container":47,"./settings":122,"./ticker":156}],44:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e,n,i){var r=t&&t.forceCanvas;return void 0!==i&&(r=i),!r&&a.isWebGLSupported()?new c.default(t,e,n):new l.default(t,e,n)}n.__esModule=!0,n.autoDetectRenderer=o;var s=t("./utils"),a=r(s),u=t("./renderers/canvas/CanvasRenderer"),l=i(u),h=t("./renderers/webgl/WebGLRenderer"),c=i(h)},{"./renderers/canvas/CanvasRenderer":79,"./renderers/webgl/WebGLRenderer":85,"./utils":162}],45:[function(t,e,n){"use strict";n.__esModule=!0;n.VERSION="4.5.1",n.PI_2=2*Math.PI,n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},n.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NONE:17},n.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},n.FORMATS={RGBA:6408,RGB:6407,ALPHA:6406,LUMINANCE:6409,LUMINANCE_ALPHA:6410,DEPTH_COMPONENT:6402,DEPTH_STENCIL:34041},n.TARGETS={TEXTURE_2D:3553,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074},n.TYPES={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,FLOAT:5126,HALF_FLOAT:36193},n.SCALE_MODES={LINEAR:1,NEAREST:0},n.WRAP_MODES={CLAMP:33071,REPEAT:10497,MIRRORED_REPEAT:33648},n.GC_MODES={AUTO:0,MANUAL:1},n.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,n.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,n.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,n.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},n.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},n.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},n.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},n.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],46:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=t("../math"),o=function(){function t(){i(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:(t=t||new r.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,i=this.maxX,r=this.maxY,o=t[0],s=t[1];e=o<e?o:e,n=s<n?s:n,i=o>i?o:i,r=s>r?s:r,o=t[2],s=t[3],e=o<e?o:e,n=s<n?s:n,i=o>i?o:i,r=s>r?s:r,o=t[4],s=t[5],e=o<e?o:e,n=s<n?s:n,i=o>i?o:i,r=s>r?s:r,o=t[6],s=t[7],e=o<e?o:e,n=s<n?s:n,i=o>i?o:i,r=s>r?s:r,this.minX=e,this.minY=n,this.maxX=i,this.maxY=r},t.prototype.addFrame=function(t,e,n,i,r){var o=t.worldTransform,s=o.a,a=o.b,u=o.c,l=o.d,h=o.tx,c=o.ty,f=this.minX,d=this.minY,p=this.maxX,m=this.maxY,v=s*e+u*n+h,y=a*e+l*n+c;f=v<f?v:f,d=y<d?y:d,p=v>p?v:p,m=y>m?y:m,v=s*i+u*n+h,y=a*i+l*n+c,f=v<f?v:f,d=y<d?y:d,p=v>p?v:p,m=y>m?y:m,v=s*e+u*r+h,y=a*e+l*r+c,f=v<f?v:f,d=y<d?y:d,p=v>p?v:p,m=y>m?y:m,v=s*i+u*r+h,y=a*i+l*r+c,f=v<f?v:f,d=y<d?y:d,p=v>p?v:p,m=y>m?y:m,this.minX=f,this.minY=d,this.maxX=p,this.maxY=m},t.prototype.addVertices=function(t,e,n,i){for(var r=t.worldTransform,o=r.a,s=r.b,a=r.c,u=r.d,l=r.tx,h=r.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,m=n;m<i;m+=2){var v=e[m],y=e[m+1],_=o*v+a*y+l,g=u*y+s*v+h;c=_<c?_:c,f=g<f?g:f,d=_>d?_:d,p=g>p?g:p}this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,i=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=r&&i<=o){var s=this.minX,a=this.minY,u=this.maxX,l=this.maxY;this.minX=n<s?n:s,this.minY=i<a?i:a,this.maxX=r>u?r:u,this.maxY=o>l?o:l}},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=r&&i<=o){var s=this.minX,a=this.minY,u=this.maxX,l=this.maxY;this.minX=n<s?n:s,this.minY=i<a?i:a,this.maxX=r>u?r:u,this.maxY=o>l?o:l}},t}();n.default=o},{"../math":72}],47:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../utils"),l=t("./DisplayObject"),h=i(l),c=function(t){function e(){r(this,e);var n=o(this,t.call(this));return n.children=[],n}return s(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.addChild(arguments[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),i=this.getChildIndex(e);this.children[n]=e,this.children[i]=t,this.onChildrenChange(n<i?n:i)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(t);(0,u.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.removeChild(arguments[n]);else{var i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,(0,u.removeItems)(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,u.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=t,i="number"==typeof e?e:this.children.length,r=i-n,o=void 0;if(r>0&&r<=i){o=this.children.splice(n,r);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.batch.flush();var e=this._filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var i=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}n&&t.mask.push(this,this._mask),this._renderWebGL(t);for(var r=0,o=this.children.length;r<o;r++)this.children[r].renderWebGL(t);t.batch.flush(),n&&t.mask.pop(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.mask.pushMask(this._mask),this._renderCanvas(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderCanvas(t);this._mask&&t.mask.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var n="boolean"==typeof e?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(n)for(var r=0;r<i.length;++r)i[r].destroy(e)},a(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}]),e}(h.default);n.default=c,c.prototype.containerUpdateTransform=c.prototype.updateTransform},{"../utils":162,"./DisplayObject":48}],48:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("eventemitter3"),l=i(u),h=t("../const"),c=t("../settings"),f=i(c),d=t("./TransformStatic"),p=i(d),m=t("./Transform"),v=i(m),y=t("./Bounds"),_=i(y),g=t("../math"),b=function(t){function e(){r(this,e);var n=o(this,t.call(this)),i=f.default.TRANSFORM_MODE===h.TRANSFORM_MODE.STATIC?p.default:v.default;return n.tempDisplayObjectParent=null,n.transform=new i,n.alpha=1,n.visible=!0,n.renderable=!0,n.parent=null,n.worldAlpha=1,n.filterArea=null,n._filters=null,n._enabledFilters=null,n._bounds=new _.default,n._boundsID=0,n._lastBoundsID=-1,n._boundsRect=null,n._localBoundsRect=null,n._mask=null,n._destroyed=!1,n}return s(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new g.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new g.Rectangle),t=this._localBoundsRect);var i=this.getBounds(!1,t);return this.parent=n,this.transform=e,i},e.prototype.toGlobal=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,i){return e&&(t=e.toGlobal(t,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=n?n:1,this.scale.y=i?i:1,this.rotation=r,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},a(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(l.default);n.default=b,b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform},{"../const":45,"../math":72,"../settings":122,"./Bounds":46,"./Transform":49,"./TransformStatic":51,eventemitter3:3}],49:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../math"),l=t("./TransformBase"),h=i(l),c=function(t){function e(){r(this,e);var n=o(this,t.call(this));return n.position=new u.Point(0,0),n.scale=new u.Point(1,1),n.skew=new u.ObservablePoint(n.updateSkew,n,0,0),n.pivot=new u.Point(0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n}return s(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var n=t.worldTransform,i=this.worldTransform;i.a=e.a*n.a+e.b*n.c,i.b=e.a*n.b+e.b*n.d,i.c=e.c*n.a+e.d*n.c,i.d=e.c*n.b+e.d*n.d,i.tx=e.tx*n.a+e.ty*n.c+n.tx,i.ty=e.tx*n.b+e.ty*n.d+n.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(h.default);n.default=c},{"../math":72,"./TransformBase":50}],50:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=t("../math"),o=function(){function t(){i(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,n=this.worldTransform,i=this.localTransform;n.a=i.a*e.a+i.b*e.c,n.b=i.a*e.b+i.b*e.d,n.c=i.c*e.a+i.d*e.c,n.d=i.c*e.b+i.d*e.d,n.tx=i.tx*e.a+i.ty*e.c+e.tx,n.ty=i.tx*e.b+i.ty*e.d+e.ty,this._worldID++},t}();n.default=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},{"../math":72}],51:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../math"),l=t("./TransformBase"),h=i(l),c=function(t){function e(){r(this,e);var n=o(this,t.call(this));return n.position=new u.ObservablePoint(n.onChange,n,0,0),n.scale=new u.ObservablePoint(n.onChange,n,1,1),n.pivot=new u.ObservablePoint(n.onChange,n,0,0),n.skew=new u.ObservablePoint(n.updateSkew,n,0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n._localID=0,n._currentLocalID=0,n}return s(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,i=this.worldTransform;i.a=e.a*n.a+e.b*n.c,i.b=e.a*n.b+e.b*n.d,i.c=e.c*n.a+e.d*n.c,i.d=e.c*n.b+e.d*n.d,i.tx=e.tx*n.a+e.ty*n.c+n.tx,i.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(h.default);n.default=c},{"../math":72,"./TransformBase":50}],52:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5126,s=arguments[4],a=arguments[5],u=arguments[6];i(this,t),this.buffer=e,this.size=n,this.normalized=r,this.type=o,this.stride=s,this.start=a,this.instance=u}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,i,r,o){return new t(e,n,i,r,o)},t}();e.exports=r},{}],53:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=0,o=function(){function t(e){i(this,t),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=!1,this.static=!0,this.id=r++}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.destroy=function(){for(var t=0;t<this._glBuffers.length;t++)this._glBuffers[t].destroy();this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();n.default=o},{}],54:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("./Attribute"),s=i(o),a=t("./Buffer"),u=i(a),l=t("../utils/interleaveTypedArrays"),h=i(l),c=t("../utils/getBufferType"),f=i(c),d={5126:4,5123:2,5121:1},p=0,m={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint16Array:Uint16Array},v=function(){function t(e,n){r(this,t),this.buffers=e||[],this.indexBuffer=null,this.attributes=n||{},this.glVertexArrayObjects={},this.id=p++}return t.prototype.addAttribute=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4],o=arguments[5],a=arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new u.default(e));var h=t.split("|");if(h.length>1){for(var c=0;c<h.length;c++)this.addAttribute(h[c],e,n,i,r);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new s.default(f,n,i,r,o,a,l),this},t.prototype.getAttribute=function(t){return this.buffers[this.attributes[t].buffer]},t.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new u.default(t)),t.index=!0,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t=[],e=[],n=new u.default,i=void 0;for(i in this.attributes){var r=this.attributes[i],o=this.buffers[r.buffer];t.push(o.data),e.push(r.size*d[r.type]/4),r.buffer=0}for(n.data=(0,h.default)(t,e),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.destroy=function(){for(var t=0;t<this.glVertexArrayObjects.length;t++)this.glVertexArrayObjects[t].destroy();this.glVertexArrayObjects=null;for(var e=0;e<this.buffers.length;e++)this.buffers[e].destroy();this.buffers=null,this.indexBuffer.destroy(),this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new u.default(this.buffers[n].data.slice());for(var i in this.attributes){var r=this.attributes[i];e.attributes[i]=new s.default(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var n=new t,i=[],r=[],o=[],s=void 0,a=0;a<e.length;a++){s=e[a];for(var l=0;l<s.buffers.length;l++)r[l]=r[l]||0,r[l]+=s.buffers[l].data.length,o[l]=0}for(var h=0;h<s.buffers.length;h++)i[h]=new(m[(0,f.default)(s.buffers[h].data)])(r[h]),n.buffers[h]=new u.default(i[h]);for(var c=0;c<e.length;c++){s=e[c];for(var p=0;p<s.buffers.length;p++)i[p].set(s.buffers[p].data,o[p]),o[p]+=s.buffers[p].data.length}if(n.attributes=s.attributes,s.indexBuffer){n.indexBuffer=n.buffers[s.buffers.indexOf(s.indexBuffer)],n.indexBuffer.index=!0;for(var v=0,y=0,_=0,g=0,b=0;b<s.buffers.length;b++)if(s.buffers[b]!==s.indexBuffer){g=b;break}for(var x in s.attributes){var w=s.attributes[x];(0|w.buffer)===g&&(y+=w.size*d[w.type]/4)}for(var T=0;T<e.length;T++){for(var S=e[T].indexBuffer.data,M=0;M<S.length;M++)n.indexBuffer.data[M+_]+=v;v+=s.buffers[g].data.length/y,_+=S.length}}return n},t}();n.default=v},{"../utils/getBufferType":160,"../utils/interleaveTypedArrays":163,"./Attribute":52,"./Buffer":53}],55:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../display/Container"),u=i(a),l=t("../textures/RenderTexture"),h=i(l),c=t("../textures/Texture"),f=i(c),d=t("./GraphicsData"),p=i(d),m=t("../sprites/Sprite"),v=i(m),y=t("../math"),_=t("../utils"),g=t("../const"),b=t("../display/Bounds"),x=i(b),w=t("./utils/bezierCurveTo"),T=i(w),S=t("../renderers/canvas/CanvasRenderer"),M=i(S),E=void 0,P=new y.Matrix,O=new y.Point,A=new Float32Array(4),C=new Float32Array(4),I=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(this,e);var i=o(this,t.call(this));return i.fillAlpha=1,i.lineWidth=0,i.nativeLines=n,i.lineColor=0,i.graphicsData=[],i.tint=16777215,i._prevTint=16777215,i.blendMode=g.BLEND_MODES.NORMAL,i.currentPath=null,i._webGL={},i.isMask=!1,i.boundsPadding=0,i._localBounds=new x.default,i.dirty=0,i.fastRectDirty=-1,i.clearDirty=0,i.boundsDirty=-1,i.cachedSpriteDirty=!1,i._spriteRect=null,i._fastRect=!1,i}return s(e,t),e.prototype.clone=function t(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var n=0;n<this.graphicsData.length;++n)t.graphicsData.push(this.graphicsData[n].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this.currentPath)if(this.currentPath.shape.points.length){var i=new y.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var n=new y.Polygon([t,e]);return n.closed=!1,this.drawShape(n),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,n,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r=20,o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var u=o[o.length-2],l=o[o.length-1],h=1;h<=r;++h){var c=h/r;s=u+(t-u)*c,a=l+(e-l)*c,o.push(s+(t+(n-t)*c-s)*c,a+(e+(i-e)*c-a)*c)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,n,i,r,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);
var s=this.currentPath.shape.points,a=s[s.length-2],u=s[s.length-1];return s.length-=2,(0,T.default)(a,u,t,e,n,i,r,o,s),this.dirty++,this},e.prototype.arcTo=function(t,e,n,i,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],u=a-e,l=s-t,h=i-e,c=n-t,f=Math.abs(u*c-l*h);if(f<1e-8||0===r)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=u*u+l*l,p=h*h+c*c,m=u*h+l*c,v=r*Math.sqrt(d)/f,y=r*Math.sqrt(p)/f,_=v*m/d,g=y*m/p,b=v*c+y*l,x=v*h+y*u,w=l*(y+_),T=u*(y+_),S=c*(v+g),M=h*(v+g),E=Math.atan2(T-x,w-b),P=Math.atan2(M-x,S-b);this.arc(b+t,x+e,r,E,P,l*h>c*u)}return this.dirty++,this},e.prototype.arc=function(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i===r)return this;!o&&r<=i?r+=2*Math.PI:o&&i<=r&&(i+=2*Math.PI);var s=r-i,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var u=t+Math.cos(i)*n,l=e+Math.sin(i)*n,h=this.currentPath?this.currentPath.shape.points:null;h?h[h.length-2]===u&&h[h.length-1]===l||h.push(u,l):(this.moveTo(u,l),h=this.currentPath.shape.points);for(var c=s/(2*a),f=2*c,d=Math.cos(c),p=Math.sin(c),m=a-1,v=m%1/m,y=0;y<=m;++y){var _=y+v*y,g=c+i+f*_,b=Math.cos(g),x=-Math.sin(g);h.push((d*b+p*x)*n+t,(d*-x+p*b)*n+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,n,i){return this.drawShape(new y.Rectangle(t,e,n,i)),this},e.prototype.drawRoundedRect=function(t,e,n,i,r){return this.drawShape(new y.RoundedRectangle(t,e,n,i,r)),this},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new y.Circle(t,e,n)),this},e.prototype.drawEllipse=function(t,e,n,i){return this.drawShape(new y.Ellipse(t,e,n,i)),this},e.prototype.drawPolygon=function(t){var e=t,n=!0;if(e instanceof y.Polygon&&(n=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}var r=new y.Polygon(e);return r.closed=n,this.drawShape(r),this},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===g.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.batch.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new v.default(new f.default(f.default.WHITE)));var n=this._spriteRect;if(16777215===this.tint)n.tint=this.graphicsData[0].fillColor;else{var i=A,r=C;(0,_.hex2rgb)(this.graphicsData[0].fillColor,i),(0,_.hex2rgb)(this.tint,r),i[0]*=r[0],i[1]*=r[1],i[2]*=r[2],n.tint=(0,_.rgb2hex)(i)}n.alpha=this.graphicsData[0].fillAlpha,n.worldAlpha=this.worldAlpha*n.alpha,n.blendMode=this.blendMode,n._texture._frame.width=e.width,n._texture._frame.height=e.height,n.transform.worldTransform=this.transform.worldTransform,n.anchor.set(-e.x/e.width,-e.y/e.height),n._onAnchorUpdate(),n._renderWebGL(t)},e.prototype._renderCanvas=function(t){this.isMask!==!0&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,O);for(var e=this.graphicsData,n=0;n<e.length;++n){var i=e[n];if(i.fill&&i.shape&&i.shape.contains(O.x,O.y))return!0}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),n=1/0,i=-(1/0);if(this.graphicsData.length)for(var r=0,o=0,s=0,a=0,u=0,l=0;l<this.graphicsData.length;l++){var h=this.graphicsData[l],c=h.type,f=h.lineWidth;if(r=h.shape,c===g.SHAPES.RECT||c===g.SHAPES.RREC)o=r.x-f/2,s=r.y-f/2,a=r.width+f,u=r.height+f,t=o<t?o:t,e=o+a>e?o+a:e,n=s<n?s:n,i=s+u>i?s+u:i;else if(c===g.SHAPES.CIRC)o=r.x,s=r.y,a=r.radius+f/2,u=r.radius+f/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,n=s-u<n?s-u:n,i=s+u>i?s+u:i;else if(c===g.SHAPES.ELIP)o=r.x,s=r.y,a=r.width+f/2,u=r.height+f/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,n=s-u<n?s-u:n,i=s+u>i?s+u:i;else for(var d=r.points,p=0,m=0,v=0,y=0,_=0,b=0,x=0,w=0,T=0;T+2<d.length;T+=2)o=d[T],s=d[T+1],p=d[T+2],m=d[T+3],v=Math.abs(p-o),y=Math.abs(m-s),u=f,a=Math.sqrt(v*v+y*y),a<1e-9||(_=(u/a*y+v)/2,b=(u/a*v+y)/2,x=(p+o)/2,w=(m+s)/2,t=x-_<t?x-_:t,e=x+_>e?x+_:e,n=w-b<n?w-b:n,i=w+b>i?w+b:i)}else t=0,e=0,n=0,i=0;var S=this.boundsPadding;this._localBounds.minX=t-S,this._localBounds.maxX=e+2*S,this._localBounds.minY=n-S,this._localBounds.maxY=i+2*S},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new p.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===g.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getLocalBounds(),i=h.default.create(n.width,n.height,t,e);E||(E=new M.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(P),P.invert(),P.tx-=n.x,P.ty-=n.y,E.render(this,i,!0,P);var r=f.default.fromCanvas(i.baseTexture._canvasRenderTarget.canvas,t,"graphics");return r.baseTexture.resolution=e,r.baseTexture.update(),r},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();for(var i in this._webgl)for(var r=0;r<this._webgl[i].data.length;++r)this._webgl[i].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(u.default);n.default=I,I._SPRITE_TEXTURE=null},{"../const":45,"../display/Bounds":46,"../display/Container":47,"../math":72,"../renderers/canvas/CanvasRenderer":79,"../sprites/Sprite":129,"../textures/RenderTexture":142,"../textures/Texture":144,"../utils":162,"./GraphicsData":56,"./utils/bezierCurveTo":58}],56:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(e,n,r,o,s,a,u,l){i(this,t),this.lineWidth=e,this.nativeLines=u,this.lineColor=n,this.lineAlpha=r,this._lineTint=n,this.fillColor=o,this.fillAlpha=s,this._fillTint=o,this.fill=a,this.holes=[],this.shape=l,this.type=l.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();n.default=r},{}],57:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../../renderers/canvas/CanvasRenderer"),s=i(o),a=t("../../const"),u=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,n=e.context,i=t.worldAlpha,r=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),n.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var u=t.graphicsData[s],l=u.shape,h=u._fillTint,c=u._lineTint;if(n.lineWidth=u.lineWidth,u.type===a.SHAPES.POLY){n.beginPath(),this.renderPolygon(l.points,l.closed,n);for(var f=0;f<u.holes.length;f++)this.renderPolygon(u.holes[f].points,!0,n);u.fill&&(n.globalAlpha=u.fillAlpha*i,n.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*i,n.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.stroke())}else if(u.type===a.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(n.globalAlpha=u.fillAlpha*i,n.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.fillRect(l.x,l.y,l.width,l.height)),u.lineWidth&&(n.globalAlpha=u.lineAlpha*i,n.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.strokeRect(l.x,l.y,l.width,l.height));else if(u.type===a.SHAPES.CIRC)n.beginPath(),n.arc(l.x,l.y,l.radius,0,2*Math.PI),n.closePath(),u.fill&&(n.globalAlpha=u.fillAlpha*i,n.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*i,n.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.stroke());else if(u.type===a.SHAPES.ELIP){var d=2*l.width,p=2*l.height,m=l.x-d/2,v=l.y-p/2;n.beginPath();var y=.5522848,_=d/2*y,g=p/2*y,b=m+d,x=v+p,w=m+d/2,T=v+p/2;n.moveTo(m,T),n.bezierCurveTo(m,T-g,w-_,v,w,v),n.bezierCurveTo(w+_,v,b,T-g,b,T),n.bezierCurveTo(b,T+g,w+_,x,w,x),n.bezierCurveTo(w-_,x,m,T+g,m,T),n.closePath(),u.fill&&(n.globalAlpha=u.fillAlpha*i,n.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*i,n.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.stroke())}else if(u.type===a.SHAPES.RREC){var S=l.x,M=l.y,E=l.width,P=l.height,O=l.radius,A=Math.min(E,P)/2|0;O=O>A?A:O,n.beginPath(),n.moveTo(S,M+O),n.lineTo(S,M+P-O),n.quadraticCurveTo(S,M+P,S+O,M+P),n.lineTo(S+E-O,M+P),n.quadraticCurveTo(S+E,M+P,S+E,M+P-O),n.lineTo(S+E,M+O),n.quadraticCurveTo(S+E,M,S+E-O,M),n.lineTo(S+O,M),n.quadraticCurveTo(S,M,S,M+O),n.closePath(),(u.fillColor||0===u.fillColor)&&(n.globalAlpha=u.fillAlpha*i,n.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*i,n.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,n=(t.tint>>8&255)/255,i=(255&t.tint)/255,r=0;r<t.graphicsData.length;++r){var o=t.graphicsData[r],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*i*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*i*255}},t.prototype.renderPolygon=function(t,e,n){n.moveTo(t[0],t[1]);for(var i=1;i<t.length/2;++i)n.lineTo(t[2*i],t[2*i+1]);e&&n.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();n.default=u,s.default.registerPlugin("graphics",u)},{"../../const":45,"../../renderers/canvas/CanvasRenderer":79}],58:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,s,a){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],l=20,h=0,c=0,f=0,d=0,p=0;u.push(t,e);for(var m=1,v=0;m<=l;++m)v=m/l,h=1-v,c=h*h,f=c*h,d=v*v,p=d*v,u.push(f*t+3*c*v*n+3*h*d*r+p*s,f*e+3*c*v*i+3*h*d*o+p*a);return u}n.__esModule=!0,n.default=i},{}],59:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../utils"),u=t("../../const"),l=t("../../renderers/webgl/utils/ObjectRenderer"),h=i(l),c=t("../../renderers/webgl/WebGLRenderer"),f=i(c),d=t("../../geometry/Geometry"),p=(i(d),t("../../geometry/Buffer")),m=(i(p),t("./WebGLGraphicsData")),v=i(m),y=t("./shaders/PrimitiveShader"),_=i(y),g=t("./utils/buildPoly"),b=i(g),x=t("./utils/buildRectangle"),w=i(x),T=t("./utils/buildRoundedRectangle"),S=i(T),M=t("./utils/buildCircle"),E=i(M),P=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.graphicsDataPool=[],i.primitiveShader=new _.default,i.primitiveShader.uniforms.globals=n.globalUniforms,i.gl=n.gl,i.CONTEXT_UID=0,i}return s(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.destroy=function(){h.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,n=e.gl,i=void 0,r=t._webGL[this.CONTEXT_UID];r&&t.dirty===r.dirty||(this.updateGraphics(t),r=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.state.setBlendMode(t.blendMode);for(var s=0,u=r.data.length;s<u;s++)i=r.data[s],o.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),o.uniforms.tint=(0,a.hex2rgb)(t.tint),o.uniforms.alpha=t.worldAlpha,e.shader.bind(o),e.geometry.bind(i.geometry,e.shader.getGLShader()),t.nativeLines?e.geometry.draw(n.LINES,i.indices.length/6):e.geometry.draw(n.TRIANGLE_STRIP,i.indices.length)},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,n=t._webGL[this.CONTEXT_UID];if(n||(n=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),n.dirty=t.dirty,t.clearDirty!==n.clearDirty){n.clearDirty=t.clearDirty;for(var i=0;i<n.data.length;i++)this.graphicsDataPool.push(n.data[i]);n.data.length=0,n.lastIndex=0}for(var r=void 0,o=n.lastIndex;o<t.graphicsData.length;o++){var s=t.graphicsData[o];r=this.getWebGLData(n,0),s.type===u.SHAPES.POLY&&(0,b.default)(s,r),s.type===u.SHAPES.RECT?(0,w.default)(s,r):s.type===u.SHAPES.CIRC||s.type===u.SHAPES.ELIP?(0,E.default)(s,r):s.type===u.SHAPES.RREC&&(0,S.default)(s,r),n.lastIndex++}for(var a=0;a<n.data.length;a++)r=n.data[a],r.dirty&&r.upload()},e.prototype.getWebGLData=function(t,e){var n=t.data[t.data.length-1];return(!n||n.points.length>32e4)&&(n=this.graphicsDataPool.pop()||new v.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(h.default);n.default=P,f.default.registerPlugin("graphics",P)},{"../../const":45,"../../geometry/Buffer":53,"../../geometry/Geometry":54,"../../renderers/webgl/WebGLRenderer":85,"../../renderers/webgl/utils/ObjectRenderer":117,"../../utils":162,"./WebGLGraphicsData":60,"./shaders/PrimitiveShader":61,"./utils/buildCircle":62,"./utils/buildPoly":64,"./utils/buildRectangle":65,"./utils/buildRoundedRectangle":66}],60:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../../geometry/Geometry"),s=i(o),a=t("../../geometry/Buffer"),u=i(a),l=function(){function t(e,n,i){r(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=new u.default,this.indexBuffer=new u.default,this.dirty=!0,this.shader=n,this.geometry=(new s.default).addAttribute("aVertexPosition|aColor",this.buffer).addIndex(this.indexBuffer)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.update(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.update(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();n.default=l},{"../../geometry/Buffer":53,"../../geometry/Geometry":54}],61:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../../shader/Shader"),u=i(a),l=t("../../../shader/Program"),h=i(l),c=(t("../../../const"),function(t){function e(){r(this,e);var n=h.default.from(["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"));return o(this,t.call(this,n,{}))}return s(e,t),e}(u.default));n.default=c},{"../../../const":45,"../../../shader/Program":123,"../../../shader/Shader":124}],62:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=t.shape,i=n.x,r=n.y,o=void 0,l=void 0;if(t.type===a.SHAPES.CIRC?(o=n.radius,l=n.radius):(o=n.width,l=n.height),0!==o&&0!==l){var h=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),c=2*Math.PI/h;if(t.fill){var f=(0,u.hex2rgb)(t.fillColor),d=t.fillAlpha,p=f[0]*d,m=f[1]*d,v=f[2]*d,y=e.points,_=e.indices,g=y.length/6;_.push(g);for(var b=0;b<h+1;b++)y.push(i,r,p,m,v,d),y.push(i+Math.sin(c*b)*o,r+Math.cos(c*b)*l,p,m,v,d),_.push(g++,g++);_.push(g-1)}if(t.lineWidth){var x=t.points;t.points=[];for(var w=0;w<h+1;w++)t.points.push(i+Math.sin(c*w)*o,r+Math.cos(c*w)*l);(0,s.default)(t,e),t.points=x}}}n.__esModule=!0,n.default=r;var o=t("./buildLine"),s=i(o),a=t("../../../const"),u=t("../../../utils")},{"../../../const":45,"../../../utils":162,"./buildLine":63}],63:[function(t,e,n){"use strict";function i(t,e){var n=t.points;if(0!==n.length){var i=new o.Point(n[0],n[1]),r=new o.Point(n[n.length-2],n[n.length-1]);if(i.x===r.x&&i.y===r.y){n=n.slice(),n.pop(),n.pop(),r=new o.Point(n[n.length-2],n[n.length-1]);var a=r.x+.5*(i.x-r.x),u=r.y+.5*(i.y-r.y);n.unshift(a,u),n.push(a,u)}var l=e.points,h=e.indices,c=n.length/2,f=n.length,d=l.length/6,p=t.lineWidth/2,m=(0,s.hex2rgb)(t.lineColor),v=t.lineAlpha,y=m[0]*v,_=m[1]*v,g=m[2]*v,b=n[0],x=n[1],w=n[2],T=n[3],S=0,M=0,E=-(x-T),P=b-w,O=0,A=0,C=0,I=0,R=Math.sqrt(E*E+P*P);E/=R,P/=R,E*=p,P*=p,l.push(b-E,x-P,y,_,g,v),l.push(b+E,x+P,y,_,g,v);for(var D=1;D<c-1;++D){b=n[2*(D-1)],x=n[2*(D-1)+1],w=n[2*D],T=n[2*D+1],S=n[2*(D+1)],M=n[2*(D+1)+1],E=-(x-T),P=b-w,R=Math.sqrt(E*E+P*P),E/=R,P/=R,E*=p,P*=p,O=-(T-M),A=w-S,R=Math.sqrt(O*O+A*A),O/=R,A/=R,O*=p,A*=p;var k=-P+x-(-P+T),L=-E+w-(-E+b),F=(-E+b)*(-P+T)-(-E+w)*(-P+x),j=-A+M-(-A+T),B=-O+w-(-O+S),N=(-O+S)*(-A+T)-(-O+w)*(-A+M),U=k*B-j*L;if(Math.abs(U)<.1)U+=10.1,l.push(w-E,T-P,y,_,g,v),l.push(w+E,T+P,y,_,g,v);else{var z=(L*N-B*F)/U,V=(j*F-k*N)/U,X=(z-w)*(z-w)+(V-T)*(V-T);X>196*p*p?(C=E-O,I=P-A,R=Math.sqrt(C*C+I*I),C/=R,I/=R,C*=p,I*=p,l.push(w-C,T-I),l.push(y,_,g,v),l.push(w+C,T+I),l.push(y,_,g,v),l.push(w-C,T-I),l.push(y,_,g,v),f++):(l.push(z,V),l.push(y,_,g,v),l.push(w-(z-w),T-(V-T)),l.push(y,_,g,v))}}b=n[2*(c-2)],x=n[2*(c-2)+1],w=n[2*(c-1)],T=n[2*(c-1)+1],E=-(x-T),P=b-w,R=Math.sqrt(E*E+P*P),E/=R,P/=R,E*=p,P*=p,l.push(w-E,T-P),l.push(y,_,g,v),l.push(w+E,T+P),l.push(y,_,g,v),h.push(d);for(var G=0;G<f;++G)h.push(d++);h.push(d-1)}}function r(t,e){var n=0,i=t.points;if(0!==i.length){var r=e.points,o=i.length/2,a=(0,s.hex2rgb)(t.lineColor),u=t.lineAlpha,l=a[0]*u,h=a[1]*u,c=a[2]*u;for(n=1;n<o;n++){var f=i[2*(n-1)],d=i[2*(n-1)+1],p=i[2*n],m=i[2*n+1];r.push(f,d),r.push(l,h,c,u),r.push(p,m),r.push(l,h,c,u)}}}n.__esModule=!0,n.default=function(t,e){t.nativeLines?r(t,e):i(t,e)};var o=t("../../../math"),s=t("../../../utils")},{"../../../math":72,"../../../utils":162}],64:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&n.length>=6){for(var i=[],r=t.holes,o=0;o<r.length;o++){var u=r[o];i.push(n.length/2),n=n.concat(u.points)}var h=e.points,c=e.indices,f=n.length/2,d=(0,a.hex2rgb)(t.fillColor),p=t.fillAlpha,m=d[0]*p,v=d[1]*p,y=d[2]*p,_=(0,l.default)(n,i,2);if(!_)return;for(var g=h.length/6,b=0;b<_.length;b+=3)c.push(_[b]+g),c.push(_[b]+g),c.push(_[b+1]+g),c.push(_[b+2]+g),c.push(_[b+2]+g);for(var x=0;x<f;x++)h.push(n[2*x],n[2*x+1],m,v,y,p)}t.lineWidth>0&&(0,s.default)(t,e)}n.__esModule=!0,n.default=r;var o=t("./buildLine"),s=i(o),a=t("../../../utils"),u=t("earcut"),l=i(u)},{"../../../utils":162,"./buildLine":63,earcut:2}],65:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=t.shape,i=n.x,r=n.y,o=n.width,u=n.height;if(t.fill){var l=(0,a.hex2rgb)(t.fillColor),h=t.fillAlpha,c=l[0]*h,f=l[1]*h,d=l[2]*h,p=e.points,m=e.indices,v=p.length/6;p.push(i,r),p.push(c,f,d,h),p.push(i+o,r),p.push(c,f,d,h),p.push(i,r+u),p.push(c,f,d,h),p.push(i+o,r+u),p.push(c,f,d,h),m.push(v,v,v+1,v+2,v+3,v+3)}if(t.lineWidth){var y=t.points;t.points=[i,r,i+o,r,i+o,r+u,i,r+u,i,r],(0,s.default)(t,e),t.points=y}}n.__esModule=!0,n.default=r;var o=t("./buildLine"),s=i(o),a=t("../../../utils")},{"../../../utils":162,"./buildLine":63}],66:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=t.shape,i=n.x,r=n.y,o=n.width,a=n.height,l=n.radius,f=[];if(f.push(i,r+l),s(i,r+a-l,i,r+a,i+l,r+a,f),s(i+o-l,r+a,i+o,r+a,i+o,r+a-l,f),s(i+o,r+l,i+o,r,i+o-l,r,f),s(i+l,r,i,r,i,r+l+1e-10,f),t.fill){for(var d=(0,c.hex2rgb)(t.fillColor),p=t.fillAlpha,m=d[0]*p,v=d[1]*p,y=d[2]*p,_=e.points,g=e.indices,b=_.length/6,x=(0,u.default)(f,null,2),w=0,T=x.length;w<T;w+=3)g.push(x[w]+b),g.push(x[w]+b),g.push(x[w+1]+b),g.push(x[w+2]+b),g.push(x[w+2]+b);for(var S=0,M=f.length;S<M;S++)_.push(f[S],f[++S],m,v,y,p)}if(t.lineWidth){var E=t.points;t.points=f,(0,h.default)(t,e),t.points=E}}function o(t,e,n){var i=e-t;return t+i*n}function s(t,e,n,i,r,s){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=20,l=a,h=0,c=0,f=0,d=0,p=0,m=0,v=0,y=0;v<=u;++v)y=v/u,h=o(t,n,y),c=o(e,i,y),f=o(n,r,y),d=o(i,s,y),p=o(h,f,y),m=o(c,d,y),l.push(p,m);return l}n.__esModule=!0,n.default=r;var a=t("earcut"),u=i(a),l=t("./buildLine"),h=i(l),c=t("../../../utils")},{"../../../utils":162,"./buildLine":63,earcut:2}],67:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.autoDetectRenderer=n.Application=n.Filter=n.SpriteMaskFilter=n.UniformGroup=n.Program=n.Shader=n.Quad=n.RenderTarget=n.ObjectRenderer=n.State=n.WebGLSystem=n.CanvasRenderTarget=n.TextureUvs=n.VideoBaseTexture=n.BaseRenderTexture=n.RenderTexture=n.Texture=n.BaseTexture=n.CubeTexture=n.FrameBuffer=n.Spritesheet=n.CanvasGraphicsRenderer=n.GraphicsRenderer=n.GraphicsData=n.Graphics=n.TextMetrics=n.TextStyle=n.Text=n.SpriteRenderer=n.CanvasTinter=n.CanvasSpriteRenderer=n.Sprite=n.TransformBase=n.TransformStatic=n.Transform=n.Container=n.DisplayObject=n.Bounds=n.glCore=n.WebGLRenderer=n.CanvasRenderer=n.ticker=n.utils=n.settings=void 0;var o=t("./const");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./math");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})});var a=t("pixi-gl-core");Object.defineProperty(n,"glCore",{enumerable:!0,get:function(){return r(a).default}});var u=t("./display/Bounds");Object.defineProperty(n,"Bounds",{enumerable:!0,get:function(){return r(u).default}});var l=t("./display/DisplayObject");Object.defineProperty(n,"DisplayObject",{enumerable:!0,get:function(){return r(l).default}});var h=t("./display/Container");Object.defineProperty(n,"Container",{enumerable:!0,get:function(){return r(h).default}});var c=t("./display/Transform");Object.defineProperty(n,"Transform",{enumerable:!0,get:function(){return r(c).default}});var f=t("./display/TransformStatic");Object.defineProperty(n,"TransformStatic",{enumerable:!0,get:function(){return r(f).default}});var d=t("./display/TransformBase");Object.defineProperty(n,"TransformBase",{enumerable:!0,get:function(){return r(d).default}});var p=t("./sprites/Sprite");Object.defineProperty(n,"Sprite",{enumerable:!0,get:function(){return r(p).default}});var m=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(n,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(m).default}});var v=t("./sprites/canvas/CanvasTinter");Object.defineProperty(n,"CanvasTinter",{enumerable:!0,get:function(){return r(v).default}});var y=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(n,"SpriteRenderer",{enumerable:!0,get:function(){return r(y).default}});var _=t("./text/Text");Object.defineProperty(n,"Text",{enumerable:!0,get:function(){return r(_).default}});var g=t("./text/TextStyle");Object.defineProperty(n,"TextStyle",{enumerable:!0,get:function(){return r(g).default}});var b=t("./text/TextMetrics");Object.defineProperty(n,"TextMetrics",{enumerable:!0,get:function(){return r(b).default}});var x=t("./graphics/Graphics");Object.defineProperty(n,"Graphics",{enumerable:!0,get:function(){return r(x).default}});var w=t("./graphics/GraphicsData");Object.defineProperty(n,"GraphicsData",{enumerable:!0,get:function(){return r(w).default}});var T=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(n,"GraphicsRenderer",{enumerable:!0,get:function(){return r(T).default}});var S=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(n,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(S).default}});var M=t("./textures/Spritesheet");Object.defineProperty(n,"Spritesheet",{enumerable:!0,get:function(){return r(M).default}});var E=t("./textures/FrameBuffer");Object.defineProperty(n,"FrameBuffer",{enumerable:!0,get:function(){return r(E).default}});var P=t("./textures/CubeTexture");Object.defineProperty(n,"CubeTexture",{enumerable:!0,get:function(){return r(P).default}});var O=t("./textures/BaseTexture");Object.defineProperty(n,"BaseTexture",{enumerable:!0,get:function(){return r(O).default}});var A=t("./textures/Texture");Object.defineProperty(n,"Texture",{enumerable:!0,get:function(){return r(A).default}});var C=t("./textures/RenderTexture");Object.defineProperty(n,"RenderTexture",{enumerable:!0,get:function(){return r(C).default}});var I=t("./textures/BaseRenderTexture");Object.defineProperty(n,"BaseRenderTexture",{enumerable:!0,get:function(){return r(I).default}});var R=t("./textures/VideoBaseTexture");Object.defineProperty(n,"VideoBaseTexture",{enumerable:!0,get:function(){return r(R).default}});var D=t("./textures/TextureUvs");Object.defineProperty(n,"TextureUvs",{enumerable:!0,get:function(){return r(D).default}});var k=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(n,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(k).default}});var L=t("./renderers/webgl/systems/WebGLSystem");Object.defineProperty(n,"WebGLSystem",{enumerable:!0,get:function(){return r(L).default}});var F=t("./renderers/webgl/State");Object.defineProperty(n,"State",{enumerable:!0,get:function(){return r(F).default}});var j=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(n,"ObjectRenderer",{enumerable:!0,get:function(){return r(j).default}});var B=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(n,"RenderTarget",{enumerable:!0,get:function(){return r(B).default}});var N=t("./renderers/webgl/utils/Quad");Object.defineProperty(n,"Quad",{enumerable:!0,get:function(){return r(N).default}});var U=t("./shader/Shader");Object.defineProperty(n,"Shader",{enumerable:!0,get:function(){return r(U).default}});var z=t("./shader/Program");Object.defineProperty(n,"Program",{enumerable:!0,get:function(){return r(z).default}});var V=t("./shader/UniformGroup");Object.defineProperty(n,"UniformGroup",{enumerable:!0,get:function(){return r(V).default}});var X=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(n,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(X).default}});var G=t("./renderers/webgl/filters/Filter");Object.defineProperty(n,"Filter",{enumerable:!0,get:function(){return r(G).default}});var H=t("./Application");Object.defineProperty(n,"Application",{enumerable:!0,get:function(){return r(H).default}});var Y=t("./autoDetectRenderer");Object.defineProperty(n,"autoDetectRenderer",{enumerable:!0,get:function(){return Y.autoDetectRenderer}});var W=t("./utils"),q=i(W),Z=t("./ticker"),K=i(Z),Q=t("./settings"),J=r(Q),$=t("./renderers/canvas/CanvasRenderer"),tt=r($),et=t("./renderers/webgl/WebGLRenderer"),nt=r(et);n.settings=J.default,n.utils=q,n.ticker=K,n.CanvasRenderer=tt.default,n.WebGLRenderer=nt.default},{"./Application":43,"./autoDetectRenderer":44,"./const":45,"./display/Bounds":46,"./display/Container":47,"./display/DisplayObject":48,"./display/Transform":49,"./display/TransformBase":50,"./display/TransformStatic":51,"./graphics/Graphics":55,"./graphics/GraphicsData":56,"./graphics/canvas/CanvasGraphicsRenderer":57,"./graphics/webgl/GraphicsRenderer":59,"./math":72,"./renderers/canvas/CanvasRenderer":79,"./renderers/canvas/utils/CanvasRenderTarget":81,"./renderers/webgl/State":84,"./renderers/webgl/WebGLRenderer":85,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":88,"./renderers/webgl/systems/WebGLSystem":98,"./renderers/webgl/utils/ObjectRenderer":117,"./renderers/webgl/utils/Quad":118,"./renderers/webgl/utils/RenderTarget":119,"./settings":122,"./shader/Program":123,"./shader/Shader":124,"./shader/UniformGroup":125,"./sprites/Sprite":129,"./sprites/canvas/CanvasSpriteRenderer":130,"./sprites/canvas/CanvasTinter":131,"./sprites/webgl/SpriteRenderer":133,"./text/Text":135,"./text/TextMetrics":136,"./text/TextStyle":137,"./textures/BaseRenderTexture":138,"./textures/BaseTexture":139,"./textures/CubeTexture":140,"./textures/FrameBuffer":141,"./textures/RenderTexture":142,"./textures/Spritesheet":143,"./textures/Texture":144,"./textures/TextureUvs":145,"./textures/VideoBaseTexture":146,"./ticker":156,"./utils":162,"pixi-gl-core":16}],68:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t<0?-1:t>0?1:0}function o(){for(var t=0;t<16;t++){var e=[];d.push(e);for(var n=0;n<16;n++)for(var i=r(u[t]*u[n]+h[t]*l[n]),o=r(l[t]*u[n]+c[t]*l[n]),s=r(u[t]*h[n]+h[t]*c[n]),p=r(l[t]*h[n]+c[t]*c[n]),m=0;m<16;m++)if(u[m]===i&&l[m]===o&&h[m]===s&&c[m]===p){e.push(m);break}}for(var v=0;v<16;v++){var y=new a.default;
y.set(u[v],l[v],h[v],c[v],0,0),f.push(y)}}n.__esModule=!0;var s=t("./Matrix"),a=i(s),u=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],l=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],c=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],f=[],d=[];o();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return u[t]},uY:function(t){return l[t]},vX:function(t){return h[t]},vY:function(t){return c[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return d[t][e]},sub:function(t,e){return d[t][p.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=f[p.inv(e)];r.tx=n,r.ty=i,t.append(r)}};n.default=p},{"./Matrix":69}],69:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./Point"),a=i(s),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r(this,t),this.a=e,this.b=n,this.c=i,this.d=o,this.tx=s,this.ty=a,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,i,r,o){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new a.default;var n=t.x,i=t.y;return e.x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new a.default;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,r=t.y;return e.x=this.d*n*i+-this.c*n*r+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*r+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a,r=this.c,o=this.tx;return this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=r*e-this.d*n,this.d=r*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,i=this.c,r=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*n+t.b*r,this.c=t.c*e+t.d*i,this.d=t.c*n+t.d*r,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,n,i,r,o,s,a,u){var l=Math.sin(s),h=Math.cos(s),c=Math.cos(u),f=Math.sin(u),d=-Math.sin(a),p=Math.cos(a),m=h*r,v=l*r,y=-l*o,_=h*o;return this.a=c*m+f*y,this.b=c*v+f*_,this.c=d*m+p*y,this.d=d*v+p*_,this.tx=t+(n*m+i*y),this.ty=e+(n*v+i*_),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,i=this.c,r=this.d,o=-Math.atan2(-i,r),s=Math.atan2(n,e),a=Math.abs(o+s);return a<1e-5?(t.rotation=s,e<0&&r>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(i*i+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.tx,o=t*i-e*n;return this.a=i/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-i*r)/o,this.ty=-(t*this.ty-e*r)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},o(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();n.default=u},{"./Point":71}],70:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this._x=r,this._y=o,this.cb=e,this.scope=n}return t.prototype.set=function(t,e){var n=t||0,i=e||(0!==e?n:0);this._x===n&&this._y===i||(this._x=n,this._y=i,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();n.default=o},{}],71:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.x=e,this.y=n}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();n.default=r},{}],72:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("./Point");Object.defineProperty(n,"Point",{enumerable:!0,get:function(){return i(r).default}});var o=t("./ObservablePoint");Object.defineProperty(n,"ObservablePoint",{enumerable:!0,get:function(){return i(o).default}});var s=t("./Matrix");Object.defineProperty(n,"Matrix",{enumerable:!0,get:function(){return i(s).default}});var a=t("./GroupD8");Object.defineProperty(n,"GroupD8",{enumerable:!0,get:function(){return i(a).default}});var u=t("./shapes/Circle");Object.defineProperty(n,"Circle",{enumerable:!0,get:function(){return i(u).default}});var l=t("./shapes/Ellipse");Object.defineProperty(n,"Ellipse",{enumerable:!0,get:function(){return i(l).default}});var h=t("./shapes/Polygon");Object.defineProperty(n,"Polygon",{enumerable:!0,get:function(){return i(h).default}});var c=t("./shapes/Rectangle");Object.defineProperty(n,"Rectangle",{enumerable:!0,get:function(){return i(c).default}});var f=t("./shapes/RoundedRectangle");Object.defineProperty(n,"RoundedRectangle",{enumerable:!0,get:function(){return i(f).default}})},{"./GroupD8":68,"./Matrix":69,"./ObservablePoint":70,"./Point":71,"./shapes/Circle":73,"./shapes/Ellipse":74,"./shapes/Polygon":75,"./shapes/Rectangle":76,"./shapes/RoundedRectangle":77}],73:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("./Rectangle"),s=i(o),a=t("../../const"),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.x=e,this.y=n,this.radius=i,this.type=a.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-t,r=this.y-e;return i*=i,r*=r,i+r<=n},t.prototype.getBounds=function(){return new s.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();n.default=u},{"../../const":45,"./Rectangle":76}],74:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("./Rectangle"),s=i(o),a=t("../../const"),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.x=e,this.y=n,this.width=i,this.height=o,this.type=a.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(e-this.y)/this.height;return n*=n,i*=i,n+i<=1},t.prototype.getBounds=function(){return new s.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();n.default=u},{"../../const":45,"./Rectangle":76}],75:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../Point"),s=i(o),a=t("../../const"),u=function(){function t(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];if(r(this,t),Array.isArray(n[0])&&(n=n[0]),n[0]instanceof s.default){for(var o=[],u=0,l=n.length;u<l;u++)o.push(n[u].x,n[u].y);n=o}this.closed=!0,this.points=n,this.type=a.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var n=!1,i=this.points.length/2,r=0,o=i-1;r<i;o=r++){var s=this.points[2*r],a=this.points[2*r+1],u=this.points[2*o],l=this.points[2*o+1],h=a>e!=l>e&&t<(u-s)*((e-a)/(l-a))+s;h&&(n=!n)}return n},t}();n.default=u},{"../../const":45,"../Point":71}],76:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../../const"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.x=e,this.y=n,this.width=r,this.height=s,this.type=o.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=n-e,this.y=i,this.height=r-i},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();n.default=s},{"../../const":45}],77:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=t("../../const"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;i(this,t),this.x=e,this.y=n,this.width=o,this.height=s,this.radius=a,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),i=e-(this.y+this.radius),r=this.radius*this.radius;if(n*n+i*i<=r)return!0;if(n=t-(this.x+this.width-this.radius),n*n+i*i<=r)return!0;if(i=e-(this.y+this.height-this.radius),n*n+i*i<=r)return!0;if(n=t-(this.x+this.radius),n*n+i*i<=r)return!0}return!1},t}();n.default=o},{"../../const":45}],78:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../utils"),l=t("../math"),h=t("../const"),c=t("../settings"),f=i(c),d=t("../display/Container"),p=i(d),m=t("../textures/RenderTexture"),v=i(m),y=t("eventemitter3"),_=i(y),g=new l.Matrix,b=function(t){function e(n,i,s,a){r(this,e);var c=o(this,t.call(this));return(0,u.sayHello)(n),"number"==typeof i&&(i=Object.assign({width:i,height:s||f.default.RENDER_OPTIONS.height},a)),i=Object.assign({},f.default.RENDER_OPTIONS,i),c.options=i,c.type=h.RENDERER_TYPE.UNKNOWN,c.screen=new l.Rectangle(0,0,i.width,i.height),c.view=i.view||document.createElement("canvas"),c.resolution=i.resolution||f.default.RESOLUTION,c.transparent=i.transparent,c.autoResize=i.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=i.preserveDrawingBuffer,c.clearBeforeRender=i.clearBeforeRender,c.roundPixels=i.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=i.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new p.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return s(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,n){var i=t.getLocalBounds(),r=v.default.create(0|i.width,0|i.height,e,n);return g.tx=-i.x,g.ty=-i.y,this.render(t,r,!1,g,!0),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=h.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},a(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,u.hex2string)(t),(0,u.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(_.default);n.default=b},{"../const":45,"../display/Container":47,"../math":72,"../settings":122,"../textures/RenderTexture":142,"../utils":162,eventemitter3:3}],79:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../SystemRenderer"),u=i(a),l=t("./utils/CanvasMaskManager"),h=i(l),c=t("./utils/CanvasRenderTarget"),f=i(c),d=t("./utils/mapCanvasBlendModesToPixi"),p=i(d),m=t("../../utils"),v=t("../../const"),y=t("../../settings"),_=i(y),g=function(t){function e(n,i,s){r(this,e);var a=o(this,t.call(this,"Canvas",n,i,s));return a.type=v.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.refresh=!0,a.maskManager=new h.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,p.default)(),a._activeBlendMode=null,a.context=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return s(e,t),e.prototype.render=function(t,e,n,i,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new f.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(e||(this._lastObjectRendered=t),!r){var a=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;i?(i.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,s.globalCompositeOperation=this.blendModes[v.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==n?n:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var l=this.context;this.context=s,t.renderCanvas(this),this.context=l,this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=_.default.SCALE_MODE===v.SCALE_MODES.LINEAR)},e}(u.default);n.default=g,m.pluginTarget.mixin(g)},{"../../const":45,"../../settings":122,"../../utils":162,"../SystemRenderer":78,"./utils/CanvasMaskManager":80,"./utils/CanvasRenderTarget":81,"./utils/mapCanvasBlendModesToPixi":83}],80:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=t("../../../const"),o=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var n=t.alpha,i=t.transform.worldTransform,r=e.resolution;e.context.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=n},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,n=t.graphicsData.length;if(0!==n){e.beginPath();for(var i=0;i<n;i++){var o=t.graphicsData[i],s=o.shape;if(o.type===r.SHAPES.POLY){var a=s.points;e.moveTo(a[0],a[1]);for(var u=1;u<a.length/2;u++)e.lineTo(a[2*u],a[2*u+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===r.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===r.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===r.SHAPES.ELIP){var l=2*s.width,h=2*s.height,c=s.x-l/2,f=s.y-h/2,d=.5522848,p=l/2*d,m=h/2*d,v=c+l,y=f+h,_=c+l/2,g=f+h/2;e.moveTo(c,g),e.bezierCurveTo(c,g-m,_-p,f,_,f),e.bezierCurveTo(_+p,f,v,g-m,v,g),e.bezierCurveTo(v,g+m,_+p,y,_,y),e.bezierCurveTo(_-p,y,c,g+m,c,g),e.closePath()}else if(o.type===r.SHAPES.RREC){var b=s.x,x=s.y,w=s.width,T=s.height,S=s.radius,M=Math.min(w,T)/2|0;S=S>M?M:S,e.moveTo(b,x+S),e.lineTo(b,x+T-S),e.quadraticCurveTo(b,x+T,b+S,x+T),e.lineTo(b+w-S,x+T),e.quadraticCurveTo(b+w,x+T,b+w,x+T-S),e.lineTo(b+w,x+S),e.quadraticCurveTo(b+w,x,b+w-S,x),e.lineTo(b+S,x),e.quadraticCurveTo(b,x,b,x+S),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore()},t.prototype.destroy=function(){},t}();n.default=o},{"../../../const":45}],81:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("../../../settings"),a=i(s),u=function(){function t(e,n,i){r(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||a.default.RESOLUTION,this.resize(e,n)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},o(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();n.default=u},{"../../../settings":122}],82:[function(t,e,n){"use strict";function i(t){var e=document.createElement("canvas");e.width=6,e.height=1;var n=e.getContext("2d");return n.fillStyle=t,n.fillRect(0,0,6,1),e}function r(){if("undefined"==typeof document)return!1;var t=i("#ff00ff"),e=i("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var r=n.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var o=r.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}n.__esModule=!0,n.default=r},{}],83:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,a.default)()?(t[o.BLEND_MODES.NORMAL]="source-over",t[o.BLEND_MODES.ADD]="lighter",t[o.BLEND_MODES.MULTIPLY]="multiply",t[o.BLEND_MODES.SCREEN]="screen",t[o.BLEND_MODES.OVERLAY]="overlay",t[o.BLEND_MODES.DARKEN]="darken",t[o.BLEND_MODES.LIGHTEN]="lighten",t[o.BLEND_MODES.COLOR_DODGE]="color-dodge",t[o.BLEND_MODES.COLOR_BURN]="color-burn",t[o.BLEND_MODES.HARD_LIGHT]="hard-light",t[o.BLEND_MODES.SOFT_LIGHT]="soft-light",t[o.BLEND_MODES.DIFFERENCE]="difference",t[o.BLEND_MODES.EXCLUSION]="exclusion",t[o.BLEND_MODES.HUE]="hue",t[o.BLEND_MODES.SATURATION]="saturate",t[o.BLEND_MODES.COLOR]="color",t[o.BLEND_MODES.LUMINOSITY]="luminosity"):(t[o.BLEND_MODES.NORMAL]="source-over",t[o.BLEND_MODES.ADD]="lighter",t[o.BLEND_MODES.MULTIPLY]="source-over",t[o.BLEND_MODES.SCREEN]="source-over",t[o.BLEND_MODES.OVERLAY]="source-over",t[o.BLEND_MODES.DARKEN]="source-over",t[o.BLEND_MODES.LIGHTEN]="source-over",t[o.BLEND_MODES.COLOR_DODGE]="source-over",t[o.BLEND_MODES.COLOR_BURN]="source-over",t[o.BLEND_MODES.HARD_LIGHT]="source-over",t[o.BLEND_MODES.SOFT_LIGHT]="source-over",t[o.BLEND_MODES.DIFFERENCE]="source-over",t[o.BLEND_MODES.EXCLUSION]="source-over",t[o.BLEND_MODES.HUE]="source-over",t[o.BLEND_MODES.SATURATION]="source-over",t[o.BLEND_MODES.COLOR]="source-over",t[o.BLEND_MODES.LUMINOSITY]="source-over"),t}n.__esModule=!0,n.default=r;var o=t("../../../const"),s=t("./canUseNewCanvasBlendModes"),a=i(s)},{"../../../const":45,"./canUseNewCanvasBlendModes":82}],84:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=0,s=1,a=2,u=3,l=4,h=function(){function t(){i(this,t),this.data=0,this.blendMode=0,this.polygonOffset=0,this.blend=!0}return r(t,[{key:"blend",get:function(){return!!(this.data&1<<o)},set:function(t){!!(this.data&1<<o)!==t&&(this.data^=1<<o)}},{key:"offsets",get:function(){return!!(this.data&1<<s)},set:function(t){!!(this.data&1<<s)!==t&&(this.data^=1<<s)}},{key:"culling",get:function(){return!!(this.data&1<<a)},set:function(t){!!(this.data&1<<a)!==t&&(this.data^=1<<a)}},{key:"depthTest",get:function(){return!!(this.data&1<<u)},set:function(t){!!(this.data&1<<u)!==t&&(this.data^=1<<u)}},{key:"clockwiseFrontFace",get:function(){return!!(this.data&1<<l)},set:function(t){!!(this.data&1<<l)!==t&&(this.data^=1<<l)}},{key:"blendMode",get:function(){return this._blendMode},set:function(t){this.blend=17!==t,this._blendMode=t}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t}}]),t}();n.default=h},{}],85:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../SystemRenderer"),u=i(a),l=t("./systems/MaskSystem"),h=i(l),c=t("./systems/StencilSystem"),f=i(c),d=t("./systems/FilterSystem"),p=i(d),m=t("./systems/FramebufferSystem"),v=i(m),y=t("./systems/RenderTextureSystem"),_=i(y),g=t("./systems/textures/TextureSystem"),b=i(g),x=t("./systems/ProjectionSystem"),w=i(x),T=t("./systems/StateSystem"),S=i(T),M=t("./systems/geometry/GeometrySystem"),E=i(M),P=t("./systems/shader/ShaderSystem"),O=i(P),A=t("./systems/ContextSystem"),C=i(A),I=t("./systems/BatchSystem"),R=i(I),D=t("./systems/textures/TextureGCSystem"),k=(i(D),t("../../utils")),L=t("./systems/geometry/VertexArrayObject"),F=i(L),j=t("../../const"),B=t("../../shader/UniformGroup"),N=i(B),U=t("../../math"),z=t("mini-runner"),V=i(z),X=function(t){function e(n,i,s){r(this,e);var a=o(this,t.call(this,"WebGL",n,i,s));return a.type=j.RENDERER_TYPE.WEBGL,a.gl=null,a.CONTEXT_UID=0,a.legacy=!!n.legacy,a.legacy&&(F.default.FORCE_NATIVE=!0),a.runners={destroy:new V.default("destroy"),contextChange:new V.default("contextChange",1),reset:new V.default("reset"),update:new V.default("update"),postrender:new V.default("postrender"),prerender:new V.default("prerender"),resize:new V.default("resize",2)},a._backgroundColorRgba[3]=a.transparent?0:1,a.globalUniforms=new N.default({projectionMatrix:new U.Matrix},!1),a.addSystem(h.default,"mask").addSystem(C.default,"context").addSystem(S.default,"state").addSystem(O.default,"shader").addSystem(b.default,"texture").addSystem(E.default,"geometry").addSystem(v.default,"framebuffer").addSystem(f.default,"stencil").addSystem(w.default,"projection").addSystem(p.default,"filter").addSystem(_.default,"renderTexture").addSystem(R.default,"batch"),a.initPlugins(),n.context?a.context.initFromContext(n.context):a.context.initFromOptions({alpha:a.transparent,antialias:n.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer}),a.renderingToScreen=!0,a._nextTextureLocation=0,a._initContext(),a}return s(e,t),e.prototype.addSystem=function(t,e){e||(e=t.name);var n=new t(this);if(this[e])throw new Error("Whoops! "+e+" is already a manger");this[e]=n;for(var i in this.runners)this.runners[i].add(n);return this},e.prototype._initContext=function(){var t=this.gl,e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(e),this.emptyTextures=new Array(e);for(var n={_glTextures:{}},i=0;i<e;i++)this.boundTextures[i]=n;this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,n,i,r){if(this.renderingToScreen=!e,this.runners.prerender.run(),this.emit("prerender"),!this.context.isLost){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!r){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.renderWebGL(this),this.batch.currentRenderer.flush(),this.runners.postrender.run(),this.emit("postrender")}},e.prototype.resize=function(t,e){u.default.prototype.resize.call(this,t,e),this.runners.resize.run(t,e)},e.prototype.reset=function(){return this.runners.reset.run(),this},e.prototype.destroy=function(e){
t.prototype.destroy.call(this,e),this.destroyPlugins(),this.runners.destroy.run(),this.gl=null},e}(u.default);n.default=X,k.pluginTarget.mixin(X)},{"../../const":45,"../../math":72,"../../shader/UniformGroup":125,"../../utils":162,"../SystemRenderer":78,"./systems/BatchSystem":89,"./systems/ContextSystem":90,"./systems/FilterSystem":91,"./systems/FramebufferSystem":92,"./systems/MaskSystem":93,"./systems/ProjectionSystem":94,"./systems/RenderTextureSystem":95,"./systems/StateSystem":96,"./systems/StencilSystem":97,"./systems/geometry/GeometrySystem":100,"./systems/geometry/VertexArrayObject":101,"./systems/shader/ShaderSystem":104,"./systems/textures/TextureGCSystem":115,"./systems/textures/TextureSystem":116,"mini-runner":5}],86:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../../shader/Shader"),u=i(a),l=t("../../../shader/Program"),h=i(l),c=t("../../../const"),f=t("../../../settings"),d=i(f),p=function(t){function e(n,i,s){r(this,e);var a=h.default.from(n,i),u=o(this,t.call(this,a,s));return u.blendMode=c.BLEND_MODES.NORMAL,u.padding=4,u.resolution=d.default.RESOLUTION,u.enabled=!0,u.autoFit=!0,u}return s(e,t),e.prototype.apply=function(t,e,n,i,r){t.applyFilter(this,e,n,i,r)},e}(u.default);n.default=p},{"../../../const":45,"../../../settings":122,"../../../shader/Program":123,"../../../shader/Shader":124}],87:[function(t,e,n){"use strict";function i(t,e,n){var i=t.identity();return i.translate(e.x/n.width,e.y/n.height),i.scale(n.width,n.height),i}function r(t,e,n){var i=t.identity();i.translate(e.x/n.width,e.y/n.height);var r=n.width/e.width,o=n.height/e.height;return i.scale(r,o),i}function o(t,e,n,i){var r=i.worldTransform.copy(s.Matrix.TEMP_MATRIX),o=i._texture.baseTexture,a=t.identity(),u=n.height/n.width;a.translate(e.x/n.width,e.y/n.height),a.scale(1,u);var l=n.width/o.width,h=n.height/o.height;return r.tx/=o.width*l,r.ty/=o.width*l,r.invert(),a.prepend(r),a.scale(1,1/u),a.scale(l,h),a.translate(i.anchor.x,i.anchor.y),a}n.__esModule=!0,n.calculateScreenSpaceMatrix=i,n.calculateNormalizedScreenSpaceMatrix=r,n.calculateSpriteMatrix=o;var s=t("../../../math")},{"../../../math":72}],88:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../Filter"),u=i(a),l=t("../../../../math"),h=(t("path"),function(t){function e(n){r(this,e);var i=new l.Matrix,s=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return n.renderable=!1,s.maskSprite=n,s.maskMatrix=i,s}return s(e,t),e.prototype.apply=function(t,e,n){var i=this.maskSprite;this.uniforms.mask=i._texture,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i),this.uniforms.alpha=i.worldAlpha,t.applyFilter(this,e,n)},e}(u.default));n.default=h},{"../../../../math":72,"../Filter":86,path:9}],89:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./WebGLSystem"),u=i(a),l=t("../utils/ObjectRenderer"),h=i(l),c=(t("../../../math"),function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.emptyRenderer=new h.default(n),i.currentRenderer=i.emptyRenderer,i}return s(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.renderer.state.setState(t.state),this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e}(u.default));n.default=c},{"../../../math":72,"../utils/ObjectRenderer":117,"./WebGLSystem":98}],90:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("./WebGLSystem"),l=i(u),h=(t("../../../math"),0),c=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),n.view.addEventListener("webglcontextlost",i.handleContextLost,!1),n.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return s(e,t),e.prototype.contextChange=function(t){this.gl=t,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=h++,this.renderer.runners.contextChange.run(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!n)throw new Error("This browser does not support webGL. Try using the canvas renderer");return n},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext()},e.prototype.postrender=function(){this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes();!e.stencil},a(e,[{key:"isLost",get:function(){return!this.gl||this.gl.isContextLost()}}]),e}(l.default);n.default=c},{"../../../math":72,"./WebGLSystem":98}],91:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var u=t("./WebGLSystem"),l=r(u),h=t("../utils/RenderTarget"),c=r(h),f=t("../utils/Quad"),d=r(f),p=t("../../../math"),m=t("../filters/filterTransforms"),v=i(m),y=t("bit-twiddle"),_=r(y),g=function t(){a(this,t),this.renderTarget=null,this.sourceFrame=new p.Rectangle,this.destinationFrame=new p.Rectangle,this.filters=[],this.target=null,this.resolution=1},b=function(t){function e(n){a(this,e);var i=o(this,t.call(this,n));return i.shaderCache={},i.pool={},i.filterData=null,i}return s(e,t),e.prototype.contextChange=function(){this.gl=this.renderer.gl,this.quad=new d.default(this.gl,this.renderer.state.attribState)},e.prototype.pushFilter=function(t,e){var n=this.renderer,i=this.filterData;if(!i){i=this.renderer._activeRenderTarget.filterStack;var r=new g;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=n._activeRenderTarget,this.renderer._activeRenderTarget.filterData=i={index:0,stack:[r]},this.filterData=i}var o=i.stack[++i.index];o||(o=i.stack[i.index]=new g);var s=e[0].resolution,a=0|e[0].padding,u=t.filterArea||t.getBounds(!0),l=o.sourceFrame,h=o.destinationFrame;l.x=(u.x*s|0)/s,l.y=(u.y*s|0)/s,l.width=(u.width*s|0)/s,l.height=(u.height*s|0)/s,i.stack[0].renderTarget.transform||e[0].autoFit&&l.fit(i.stack[0].destinationFrame),l.pad(a),h.width=l.width,h.height=l.height;var c=this.getPotRenderTarget(n.gl,l.width,l.height,s);o.target=t,o.filters=e,o.resolution=s,o.renderTarget=c,c.setFrame(h,l),n.bindRenderTarget(c),c.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],n=t.stack[t.index];this.quad.map(n.renderTarget.size,n.sourceFrame).upload();var i=n.filters;if(1===i.length)i[0].apply(this,n.renderTarget,e.renderTarget,!1,n),this.freePotRenderTarget(n.renderTarget);else{var r=n.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,n.resolution);o.setFrame(n.destinationFrame,n.sourceFrame),o.clear();var s=0;for(s=0;s<i.length-1;++s){i[s].apply(this,r,o,!0,n);var a=r;r=o,o=a}i[s].apply(this,r,e.renderTarget,!1,n),this.freePotRenderTarget(r),this.freePotRenderTarget(o)}t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,n,i){var r=this.renderer,o=r.gl,s=t.glShaders[r.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey],s||(s=new Shader(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s)):s=t.glShaders[r.CONTEXT_UID]=new Shader(this.gl,t.vertexSrc,t.fragmentSrc),r.bindVao(null),this.quad.initVao(s)),r.bindVao(this.quad.vao),r.bindRenderTarget(n),i&&(o.disable(o.SCISSOR_TEST),r.clear(),o.enable(o.SCISSOR_TEST)),n===r.maskSystem.scissorRenderTarget&&r.maskSystem.pushScissorMask(null,r.maskSystem.scissorData),r.bindShader(s);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(s,t),r.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var n=e.uniformData,i=e.uniforms,r=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var u in n)if("sampler2D"===n[u].type&&0!==i[u]){if(i[u].baseTexture)t.uniforms[u]=this.renderer.bindTexture(i[u].baseTexture,r);else{t.uniforms[u]=r;var l=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],l.activeTexture(l.TEXTURE0+r),i[u].texture.bind()}r++}else if("mat3"===n[u].type)void 0!==i[u].a?t.uniforms[u]=i[u].toArray(!0):t.uniforms[u]=i[u];else if("vec2"===n[u].type)if(void 0!==i[u].x){var h=t.uniforms[u]||new Float32Array(2);h[0]=i[u].x,h[1]=i[u].y,t.uniforms[u]=h}else t.uniforms[u]=i[u];else"float"===n[u].type?t.uniforms.data[u].value!==n[u]&&(t.uniforms[u]=i[u]):t.uniforms[u]=i[u]},e.prototype.getRenderTarget=function(t,e){var n=this.filterData.stack[this.filterData.index],i=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,e||n.resolution);return i.setFrame(n.destinationFrame,n.sourceFrame),i},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return v.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return v.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var n=this.filterData.stack[this.filterData.index];return v.calculateSpriteMatrix(t,n.sourceFrame,n.renderTarget.size,e)},e.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,n,i){e=_.default.nextPow2(e*i),n=_.default.nextPow2(n*i);var r=(65535&e)<<16|65535&n;this.pool[r]||(this.pool[r]=[]);var o=this.pool[r].pop();if(!o){var s=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new c.default(t,e,n,null,1),t.bindTexture(t.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=i,o.defaultFrame.width=o.size.width=e/i,o.defaultFrame.height=o.size.height=n/i,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var n=0;n<e.length;n++)e[n].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,n=t.size.height*t.resolution,i=(65535&e)<<16|65535&n;this.pool[i].push(t)},e}(l.default);n.default=b},{"../../../math":72,"../filters/filterTransforms":87,"../utils/Quad":118,"../utils/RenderTarget":119,"./WebGLSystem":98,"bit-twiddle":1}],92:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./WebGLSystem"),u=i(a),l=function(t){function e(n){return r(this,e),o(this,t.call(this,n))}return s(e,t),e.prototype.contextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.drawBufferExtension=this.gl.getExtension("WEBGL_draw_buffers")},e.prototype.bind=function(t){var e=this.gl;if(t){var n=t.glFrameBuffers[this.CONTEXT_UID]||this.initFramebuffer(t);e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var i=0;i<t.colorTextures.length;i++)t.colorTextures[i].texturePart?this.renderer.texture.unbind(t.colorTextures[i].texture):this.renderer.texture.unbind(t.colorTextures[i]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e.viewport(0,0,t.width,t.height)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.clear=function(t,e,n,i){var r=this.gl;r.clearColor(t,e,n,i),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},e.prototype.initFramebuffer=function(t){var e=this.gl,n={framebuffer:e.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFrameBuffers[this.CONTEXT_UID]=n,n},e.prototype.resizeFramebuffer=function(t){var e=this.gl;t.glFrameBuffers[this.CONTEXT_UID];(t.stencil||t.depth)&&(e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height))},e.prototype.updateFramebuffer=function(t){var e=this.gl,n=t.glFrameBuffers[this.CONTEXT_UID],i=t.colorTextures,r=i.length;this.drawBufferExtension||(r=Math.min(r,1));for(var o=[],s=0;s<r;s++){var a=t.colorTextures[s];a.texturePart?(this.renderer.texture.bind(a.texture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+s,e.TEXTURE_CUBE_MAP_NEGATIVE_X+a.side,a.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+s,e.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,0)),o.push(e.COLOR_ATTACHMENT0+s)}if(this.drawBufferExtension&&o.length>1&&this.drawBufferExtension.drawBuffersWEBGL(o),t.depthTexture){var u=e.getExtension("WEBKIT_WEBGL_depth_texture");if(u){var l=t.depthTexture;this.renderer.texture.bind(l,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,0)}}(t.stencil||t.depth)&&(n.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height))},e}(u.default);n.default=l},{"./WebGLSystem":98}],93:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./WebGLSystem"),u=i(a),l=t("../filters/spriteMask/SpriteMaskFilter"),h=i(l),c=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.scissor=!1,i.scissorData=null,i.scissorRenderTarget=null,i.enableScissor=!1,i.alphaMaskPool=[],i.alphaMaskIndex=0,i}return s(e,t),e.prototype.push=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencil.stencilMaskStack.length&&e.isFastRect()){var n=e.worldTransform,i=Math.atan2(n.b,n.a);i=Math.round(i*(180/Math.PI)),i%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.pop=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencil.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new h.default(e)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterSystem.pushFilter(t,n),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterSystem.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.batch.flush(),this.renderer.stencil.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.stencil.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var n=this.renderer._activeRenderTarget,i=e.getBounds();i.fit(n.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(i.x*r,(n.root?n.size.height-i.y-i.height:i.y)*r,i.width*r,i.height*r),this.scissorRenderTarget=n,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(u.default);n.default=c},{"../filters/spriteMask/SpriteMaskFilter":88,"./WebGLSystem":98}],94:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./WebGLSystem"),u=i(a),l=t("../../../math"),h=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.projectionMatrix=new l.Matrix,i}return s(e,t),e.prototype.update=function(t,e,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n),this.renderer.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,this.renderer.globalUniforms.update();var i=this.renderer.gl,r=1;this.destinationFrame!==this.sourceFrame&&i.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*r|0,this.destinationFrame.height*r|0),i.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*r|0,this.destinationFrame.height*r|0)},e.prototype.calculateProjection=function(t,e,n){var i=this.projectionMatrix;i.identity(),n?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},e.prototype.setTransform=function(t){},e}(u.default);n.default=h},{"../../../math":72,"./WebGLSystem":98}],95:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./WebGLSystem"),u=i(a),l=t("../../../math"),h=new l.Rectangle,c=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.clearColor=n._backgroundColorRgba,i.defaultMaskStack=[],i}return s(e,t),e.prototype.bind=function(t){if(this.renderTexture!==t){this.renderTexture=t;var e=this.renderer;t?(this.renderer.framebuffer.bind(t.baseTexture.frameBuffer),this.renderer.projection.update(t.frame,t.frame,!1),this.renderer.stencil.setMaskStack(t.baseTexture.stencilMaskStack)):(e.framebuffer.bind(null),h.width=e.width,h.height=e.height,this.renderer.projection.update(h,h,!0),this.renderer.stencil.setMaskStack(this.defaultMaskStack));e.shader.getGLShader()}},e.prototype.clear=function(t){t=this.renderTexture?t||this.renderTexture.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.resize=function(t,e){this.bind(null)},e}(u.default);n.default=c},{"../../../math":72,"./WebGLSystem":98}],96:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../utils/mapWebGLBlendModesToPixi"),u=i(a),l=t("./WebGLSystem"),h=i(l),c=t("../State"),f=i(c),d=0,p=1,m=2,v=3,y=4,_=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.gl=null,i.maxAttribs=null,i.nativeVaoExtension=null,i.attribState=null,i.stateId=0,i.polygonOffset=0,i.blendMode=17,i.map=[],i.map[d]=i.setBlend,i.map[p]=i.setOffset,i.map[m]=i.setCullFace,i.map[v]=i.setDepthTest,i.map[y]=i.setFrontFace,i.checks=[],i.defaultState=new f.default,i.defaultState.blend=!0,i.defaultState.depth=!0,i}return s(e,t),e.prototype.contextChange=function(t){this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,u.default)(t),this.setState(this.defaultState),this.reset()},e.prototype.setState=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){t!==this.blendMode&&(this.blendMode=t,this.gl.blendFunc(this.blendModes[t][0],this.blendModes[t][1]))},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var n=1;n<this.maxAttribs;n++)this.gl.disableVertexAttribArray(n)},e.prototype.reset=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes(),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&n===-1?this.checks.push(t):e||n===-1||this.checks.splice(n,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e}(h.default);n.default=_},{"../State":84,"../utils/mapWebGLBlendModesToPixi":121,"./WebGLSystem":98}],97:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./WebGLSystem"),u=i(a),l=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.stencilMaskStack=null,i}return s(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.batch.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,n=this.stencilMaskStack;0===n.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.ALWAYS,1,1)),n.push(t),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,n.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},e.prototype.popStencil=function(){this.renderer.batch.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack,n=e.pop();0===e.length?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(n),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,e.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP))},e.prototype.destroy=function(){t.prototype.destroy.call(this,this),this.stencilMaskStack.stencilStack=null},e}(u.default);n.default=l},{"./WebGLSystem":98}],98:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(e){i(this,t),this.renderer=e,this.renderer.runners.contextChange.add(this)}return t.prototype.contextChange=function(){},t.prototype.destroy=function(){this.renderer.runners.contextChange.remove(this),this.renderer=null},t}();n.default=r},{}],99:[function(t,e,n){"use strict";var i=new ArrayBuffer(0),r=function(t,e,n,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=i,n&&this.upload(n),this._updateID=0};r.prototype.upload=function(t,e,n){n||this.bind();var i=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?i.bufferSubData(this.type,e,t):i.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){var t=this.gl;t.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,n){return new r(t,t.ARRAY_BUFFER,e,n)},r.createIndexBuffer=function(t,e,n){
return new r(t,t.ELEMENT_ARRAY_BUFFER,e,n)},r.create=function(t,e,n,i){return new r(t,e,n,i)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=r},{}],100:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../WebGLSystem"),u=i(a),l=(t("../../../../math"),t("./VertexArrayObject")),h=i(l),c=t("./GLBuffer"),f=i(c),d=t("./setVertexAttribArrays"),p=(i(d),{5126:4,5123:2,5121:1}),m=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i._activeVao=null,i}return s(e,t),e.prototype.contextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(t,e){var n=t.glVertexArrayObjects[this.CONTEXT_UID]||this.initGeometryVao(t,e);this.bindVao(n);for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i],o=r._glBuffers[this.CONTEXT_UID];r._updateID!==o._updateID&&(o._updateID=r._updateID,o.upload(r.data,0))}},e.prototype.initGeometryVao=function(t,e){var n=this.gl;this.bindVao(null);for(var i=this.createVao(),r=t.buffers,o=t.attributes,s=0;s<r.length;s++){var a=r[s];a._glBuffers[this.CONTEXT_UID]||(a.index?a._glBuffers[this.CONTEXT_UID]=f.default.createIndexBuffer(n,a.data):a._glBuffers[this.CONTEXT_UID]=f.default.createVertexBuffer(n,a.data,a.static?n.STATIC_DRAW:n.DYNAMIC_DRAW))}t.indexBuffer&&i.addIndex(t.indexBuffer._glBuffers[this.CONTEXT_UID]);var u={},l={};for(var h in r)u[h]=0,l[h]=0;for(var c in o)u[o[c].buffer]+=e.attributes[c].size*p[o[c].type];for(var d in o){var m=o[d],v=e.attributes[d];void 0===m.stride&&(u[m.buffer]===v.size*p[m.type]?m.stride=0:m.stride=u[m.buffer]),void 0===m.start&&(m.start=l[m.buffer],l[m.buffer]+=v.size*p[m.type])}for(var y in o){var _=o[y],g=r[_.buffer],b=g._glBuffers[this.CONTEXT_UID];i.addAttribute(b,e.attributes[y],_.type||5126,_.normalized,_.stride,_.start,_.instance)}return t.glVertexArrayObjects[this.CONTEXT_UID]=i,i},e.prototype.draw=function(t,e,n,i){this._activeVao.draw(t,e,n,i)},e.prototype.createVao=function(){return new h.default(this.gl,this.renderer.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e}(u.default);n.default=m},{"../../../../math":72,"../WebGLSystem":98,"./GLBuffer":99,"./VertexArrayObject":101,"./setVertexAttribArrays":102}],101:[function(t,e,n){"use strict";function i(t,e){if(this.nativeVaoExtension=null,i.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),this.instanceExt=t.getExtension("ANGLE_instanced_arrays")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var n=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(n),attribState:new Array(n)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=t("./setVertexAttribArrays");i.prototype.constructor=i,e.exports=i,i.FORCE_NATIVE=!1,i.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},i.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},i.prototype.activate=function(){for(var t=this.gl,e=null,n=0;n<this.attributes.length;n++){var i=this.attributes[n];e!==i.buffer&&(i.buffer.bind(),e=i.buffer),t.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||t.FLOAT,i.normalized||!1,i.stride||0,i.start||0),i.instance&&this.instanceExt&&this.instanceExt.vertexAttribDivisorANGLE(i.attribute.location,1)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},i.prototype.addAttribute=function(t,e,n,i,r,o,s){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:n||this.gl.FLOAT,normalized:i||!1,stride:r||0,start:o||0,instance:s}),this.instancedMesh=this.instancedMesh||s,this.dirty=!0,this},i.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},i.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},i.prototype.draw=function(t,e,n,i){var r=this.gl;return this.indexBuffer?this.instancedMesh?this.instanceExt.drawElementsInstancedANGLE(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(n||0),i||1):r.drawElements(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(n||0)):this.instancedMesh?this.instanceExt.drawArrayInstancedANGLE(t,n,e||this.getSize(),i||1):r.drawArrays(t,n,e||this.getSize()),this},i.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},i.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":102}],102:[function(t,e,n){"use strict";var i=function(t,e,n){var i;if(n){var r=n.tempAttribState,o=n.attribState;for(i=0;i<r.length;i++)r[i]=!1;for(i=0;i<e.length;i++)r[e[i].attribute.location]=!0;for(i=0;i<o.length;i++)o[i]!==r[i]&&(o[i]=r[i],n.attribState[i]?t.enableVertexAttribArray(i):t.disableVertexAttribArray(i))}else for(i=0;i<e.length;i++){var s=e[i];t.enableVertexAttribArray(s.attribute.location)}};e.exports=i},{}],103:[function(t,e,n){"use strict";var i=t("./shader/compileProgram"),r=t("./shader/extractAttributes"),o=t("./shader/extractUniforms"),s=t("./shader/setPrecision"),a=t("./shader/generateUniformAccessObject"),u=function(t,e,n,u,l){this.gl=t,u&&(e=s(e,u),n=s(n,u)),this.program=i(t,e,n,l),this.attributes=r(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData),this.uniformGroups={}};u.prototype.bind=function(){this.gl.useProgram(this.program)},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var t=this.gl;t.deleteProgram(this.program)},e.exports=u},{"./shader/compileProgram":105,"./shader/extractAttributes":107,"./shader/extractUniforms":108,"./shader/generateUniformAccessObject":109,"./shader/setPrecision":113}],104:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../WebGLSystem"),u=i(a),l=t("./GLShader"),h=i(l),c=t("../../../../const"),f=t("../../../../shader/generateUniformsSync2"),d=i(f),p=0,m=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.gl=null,i.shader=null,i.id=p++,i}return s(e,t),e.prototype.contextChange=function(t){this.gl=t},e.prototype.bind=function(t,e){var n=t.program,i=n.glShaders[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader!==t&&(this.shader=t,i.bind()),e||this.syncUniformGroup(t.uniformGroup),i},e.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glShaders[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},e.prototype.setUniformsGroups=function(t){var e=this.getGLShader(),n=t[0],i=n.syncUniforms[this.shader.program.id]||this.createSynGroups(n);i(e.uniformData,n.uniforms,this.renderer)},e.prototype.syncUniformGroup=function(t){var e=this.getGLShader();if(!t.static||t.dirtyId!==e.uniformGroups[t.id]){e.uniformGroups[t.id]=t.dirtyId;var n=t.syncUniforms[this.shader.program.id]||this.createSynGroups(t);n(e.uniformData,t.uniforms,this.renderer)}},e.prototype.createSynGroups=function(t){return t.syncUniforms[this.shader.program.id]=(0,d.default)(t,this.shader.program.uniformData),t.syncUniforms[this.shader.program.id]},e.prototype.getGLShader=function(){return this.shader?this.shader.program.glShaders[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=t.program,n={};for(var i in e.attributeData)n[i]=e.attributeData[i].location;var r=new h.default(this.gl,e.vertexSrc,e.fragmentSrc,c.PRECISION.DEFAULT,n);return e.glShaders[this.renderer.CONTEXT_UID]=r,r},e.prototype.destroy=function(){this.destroyed=!0},e}(u.default);n.default=m},{"../../../../const":45,"../../../../shader/generateUniformsSync2":128,"../WebGLSystem":98,"./GLShader":103}],105:[function(t,e,n){"use strict";var i=function(t,e,n,i){var o=r(t,t.VERTEX_SHADER,e),s=r(t,t.FRAGMENT_SHADER,n),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),i)for(var u in i)t.bindAttribLocation(a,i[u],u);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(""!==t.getProgramInfoLog(a),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a},r=function(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:null};e.exports=i},{}],106:[function(t,e,n){"use strict";var i=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},r=function(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e};e.exports=i},{}],107:[function(t,e,n){"use strict";var i=t("./mapType"),r=t("./mapSize"),o=function(t,e){for(var n={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var u=t.getActiveAttrib(e,a),l=i(t,u.type);n[u.name]={type:l,size:r(l),location:t.getAttribLocation(e,u.name),pointer:s}}return n},s=function(t,e,n,i){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,n||0,i||0)};e.exports=o},{"./mapSize":111,"./mapType":112}],108:[function(t,e,n){"use strict";var i=t("./mapType"),r=t("./defaultValue"),o=function(t,e){for(var n={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),u=a.name.replace(/\[.*?\]/,""),l=i(t,a.type);n[u]={type:l,size:a.size,location:t.getUniformLocation(e,u),value:r(l,a.size)}}return n};e.exports=o},{"./defaultValue":106,"./mapType":112}],109:[function(t,e,n){"use strict";var i=function(t,e){var n={data:{}};n.gl=t;for(var i=Object.keys(e),a=0;a<i.length;a++){var u=i[a],l=u.split("."),h=l[l.length-1],c=s(l,n),f=e[u];c.data[h]=f,c.gl=t,Object.defineProperty(c,h,{get:r(h),set:o(h,f)})}return n},r=function(t){var e=a.replace("%%",t);return new Function(e)},o=function(t,e){var n,i=u.replace(/%%/g,t);return n=1===e.size?l[e.type]:h[e.type],n&&(i+="\nthis.gl."+n+";"),new Function("value",i)},s=function(t,e){for(var n=e,i=0;i<t.length-1;i++){var r=n[t[i]]||{data:{}};n[t[i]]=r,n=r}return n},a=["return this.data.%%.value;"].join("\n"),u=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),l={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)",samplerCube:"uniform1i(location, value)"},h={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)",samplerCube:"uniform1i(location, value)"};e.exports=i},{}],110:[function(t,e,n){"use strict";e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":105,"./defaultValue":106,"./extractAttributes":107,"./extractUniforms":108,"./generateUniformAccessObject":109,"./mapSize":111,"./mapType":112,"./setPrecision":113}],111:[function(t,e,n){"use strict";var i=function(t){return r[t]},r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=i},{}],112:[function(t,e,n){"use strict";var i=function(t,e){if(!r){var n=Object.keys(o);r={};for(var i=0;i<n.length;++i){var s=n[i];r[t[s]]=o[s]}}return r[e]},r=null,o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"};e.exports=i},{}],113:[function(t,e,n){"use strict";var i=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};e.exports=i},{}],114:[function(t,e,n){"use strict";var i=function(t,e,n,i,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=n||-1,this.format=i||t.RGBA,this.type=r||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var n=t.videoWidth||t.width,i=t.videoHeight||t.height;i!==this.height||n!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=n,this.height=i};var r=!1;i.prototype.uploadData=function(t,e,n){this.bind();var i=this.gl;if(t instanceof Float32Array){if(!r){var o=i.getExtension("OES_texture_float");if(!o)throw new Error("floating point textures not available");r=!0}this.type=i.FLOAT}else this.type=this.type||i.UNSIGNED_BYTE;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||n!==this.height?i.texImage2D(i.TEXTURE_2D,0,this.format,e,n,0,this.format,this.type,t||null):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e,n,this.format,this.type,t||null),this.width=e,this.height=n},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){var t=this.gl;t.deleteTexture(this.texture)},i.fromSource=function(t,e,n){var r=new i(t);return r.premultiplyAlpha=n||!1,r.upload(e),r},i.fromData=function(t,e,n,r){var o=new i(t);return o.uploadData(e,n,r),o},e.exports=i},{}],115:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../WebGLSystem"),u=i(a),l=t("../../../../const"),h=t("../../../../settings"),c=i(h),f=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.count=0,i.checkCount=0,i.maxIdle=c.default.GC_MAX_IDLE,i.checkCountMax=c.default.GC_MAX_CHECK_COUNT,i.mode=c.default.GC_MODE,i}return s(e,t),e.prototype.postrender=function(){this.count++,this.mode!==l.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,i=0;i<e.length;i++){var r=e[i];!r.frameBuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[i]=null,n=!0)}if(n){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},e.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},e}(u.default);n.default=f},{"../../../../const":45,"../../../../settings":122,"../WebGLSystem":98}],116:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../WebGLSystem"),u=i(a),l=t("./GLTexture"),h=i(l),c=t("../../../../utils"),f=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.boundTextures=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],i.currentLocation=-1,i.managedTextures=[],i}return s(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.emptyTextures={},this.emptyTextures[t.TEXTURE_2D]=new h.default.fromData(this.gl,null,1,1),this.emptyTextures[t.TEXTURE_CUBE_MAP]=new h.default(this.gl),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var e=0;e<6;e++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var e=0;e<this.boundTextures.length;e++)this.bind(null,e)},e.prototype.bind=function(t,e){var n=this.gl;if(e=e||0,this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),t){if(t=t.baseTexture||t,t.valid){var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);n.bindTexture(t.target,i.texture),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,this.updateTexture(t)),this.boundTextures[e]=t}}else n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.unbind=function(t){for(var e=this.gl,n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),this.boundTextures[n]=null)},e.prototype.initTexture=function(t){var e=(this.gl,new h.default(this.gl,-1,-1,t.format,t.type));return e.premultiplyAlpha=t.premultiplyAlpha,e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID],n=this.gl;if(t.target===n.TEXTURE_CUBE_MAP)for(var i=0;i<t.sides.length;i++){var r=t.sides[i];r.resource?r.resource.uploadable?n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+r.side,0,t.format,t.format,t.type,r.resource.source):n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+r.side,0,t.format,t.width,t.height,0,t.format,t.type,r.resource.source):n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+r.side,0,t.format,t.width,t.height,0,t.format,t.type,null)}else t.resource?t.resource.uploadable?e.upload(t.resource.source):e.uploadData(t.resource.source,t.width,t.height):e.uploadData(null,t.width,t.height);this.setStyle(t)},e.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t._glTextures[this.renderer.CONTEXT_UID]&&(this.unbind(t),t._glTextures[this.renderer.CONTEXT_UID].destroy(),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.renderer.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&(0,c.removeItems)(this.managedTextures,n,1)}},e.prototype.setStyle=function(t){var e=this.gl;e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode),t.mipmap?e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,t.scaleMode?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,t.scaleMode?e.LINEAR:e.NEAREST),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,t.scaleMode?e.LINEAR:e.NEAREST)},e}(u.default);n.default=f},{"../../../../utils":162,"../WebGLSystem":98,"./GLTexture":114}],117:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../systems/WebGLSystem"),u=i(a),l=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return s(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(u.default);n.default=l},{"../systems/WebGLSystem":98}],118:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("pixi-gl-core"),u=(i(a),t("../../../utils/createIndicesForQuads")),l=i(u),h=t("../../../geometry/Geometry"),c=i(h),f=function(t){function e(){r(this,e);var n=o(this,t.call(this));n.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),n.uvs=new Float32Array([0,0,1,0,1,1,0,1]),n.interleaved=new Float32Array(16);for(var i=0;i<4;i++)n.interleaved[4*i]=n.vertices[2*i],n.interleaved[4*i+1]=n.vertices[2*i+1],n.interleaved[4*i+2]=n.uvs[2*i],n.interleaved[4*i+3]=n.uvs[2*i+1];return n.indices=(0,l.default)(1),n.addAttribute("aVertexPosition",n.vertices).addAttribute("aTextureCoord",n.uvs).addIndex(n.indices),n}return s(e,t),e.prototype.initVao=function(t){},e.prototype.map=function(t,e){var n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+e.width/t.width,this.uvs[3]=i,this.uvs[4]=n+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=n,this.uvs[7]=i+e.height/t.height,n=e.x,i=e.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+e.width,this.vertices[3]=i,this.vertices[4]=n+e.width,this.vertices[5]=i+e.height,this.vertices[6]=n,this.vertices[7]=i+e.height,this},e.prototype.upload=function(){return this.getAttribute("aVertexPosition").update(),void this.getAttribute("aTextureCoord").update()},e.prototype.destroy=function(){},e}(c.default);n.default=f},{"../../../geometry/Geometry":54,"../../../utils/createIndicesForQuads":158,"pixi-gl-core":16}],119:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../../../math"),s=t("../../../const"),a=t("../../../settings"),u=i(a),l=t("pixi-gl-core"),h=function(){function t(e,n,i,a,h,c){r(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new o.Rectangle(0,0,1,1),this.resolution=h||u.default.RESOLUTION,this.projectionMatrix=new o.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new o.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==a?a:u.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new l.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===s.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(n,i)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame&&t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var n=this.projectionMatrix;e=e||t,n.identity(),this.root?(n.a=1/t.width*2,n.d=-1/t.height*2,n.tx=-1-e.x*n.a,n.ty=1-e.y*n.d):(n.a=1/t.width*2,n.d=1/t.height*2,n.tx=-1-e.x*n.a,n.ty=-1-e.y*n.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var n=this.frame||this.size;this.calculateProjection(n)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();n.default=h},{"../../../const":45,"../../../math":72,"../../../settings":122,"pixi-gl-core":16}],120:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var i=a.replace(/%forloop%/gi,o(t));if(e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}function o(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}n.__esModule=!0,n.default=r;var s=t("pixi-gl-core"),a=(i(s),["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n"))},{"pixi-gl-core":16}],121:[function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.NONE]=[0,0],e}n.__esModule=!0,n.default=i;var r=t("../../../const")},{"../../../const":45}],122:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("./utils/maxRecommendedTextures"),o=i(r),s=t("./utils/canUploadSameBuffer"),a=i(s);n.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,o.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,
WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)()}},{"./utils/canUploadSameBuffer":157,"./utils/maxRecommendedTextures":164}],123:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./extractUniformsFromSrc"),a=i(s),u=t("./generateUniformsSync"),l=(i(u),t("../renderers/webgl/systems/shader/shader")),h=i(l),c=t("../utils"),f=t("../utils/getTestContext"),d=i(f),p=0,m=function(){function t(e,n){r(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.extractData(this.vertexSrc,this.fragmentSrc),this.glShaders={},this.syncUniforms=null,this.id=p++}return t.prototype.extractData=function(t,e){var n=(0,d.default)();if(n){t=h.default.setPrecision(t,"mediump"),e=h.default.setPrecision(e,"mediump");var i=h.default.compileProgram(n,t,e);this.attributeData=this.getAttributeData(i,n),this.uniformData=this.getUniformData(i,n)}else this.attributeData={},this.uniformData=(0,a.default)(t,e)},t.prototype.getAttributeData=function(t,e){for(var n={},i=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var s=e.getActiveAttrib(t,o),a=h.default.mapType(e,s.type),u={type:a,name:s.name,size:h.default.mapSize(a),location:0};n[s.name]=u,i.push(u)}i.sort(function(t,e){return t.name>e.name?1:-1});for(var l=0;l<i.length;l++)i[l].location=l;return n},t.prototype.getUniformData=function(t,e){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;r++){var o=e.getActiveUniform(t,r),s=o.name.replace(/\[.*?\]/,""),a=h.default.mapType(e,o.type);n[s]={type:a,size:o.size,value:h.default.defaultValue(a,o.size)}}return n},t.from=function(e,n){var i=e+n,r=c.ProgramCache[i];return r||(c.ProgramCache[i]=r=new t(e,n)),r},o(t,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor *= texture2D(uSampler, vTextureCoord);","}"].join("\n")}}]),t}();n.default=m},{"../renderers/webgl/systems/shader/shader":110,"../utils":162,"../utils/getTestContext":161,"./extractUniformsFromSrc":126,"./generateUniformsSync":127}],124:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./Program"),a=i(s),u=t("./UniformGroup"),l=i(u),h=function(){function t(e,n){r(this,t),this.program=e,n?n instanceof l.default?this.uniformGroup=n:this.uniformGroup=new l.default(n):this.uniformGroup=new l.default({});for(var i in e.uniformData){var o=this.uniformGroup.uniforms[i];o&&o instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(o))}}return t.from=function(e,n,i){var r=a.default.from(e,n);return new t(r,i)},o(t,[{key:"uniforms",get:function(){return this.uniformGroup.uniforms}}]),t}();n.default=h},{"./Program":123,"./UniformGroup":125}],125:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("./Program"),s=(i(o),t("./generateUniformsSync")),a=(i(s),0),u=function(){function t(e,n){r(this,t),this.uniforms=e,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=a++,this.static=!!n}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,n,i){this.uniforms[e]=new t(n,i)},t.from=function(e,n){return new t(e,n)},t}();n.default=u},{"./Program":123,"./generateUniformsSync":127}],126:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i=o(t,n),r=o(e,n);return Object.assign(i,r)}function o(t){for(var e=new RegExp("^(projectionMatrix|uSampler|translationMatrix)$"),n={},i=void 0,r=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<r.length;o++){var s=r[o].trim();if(s.indexOf("uniform")>-1){var a=s.split(" "),l=a[1],h=a[2],c=1;h.indexOf("[")>-1&&(i=h.split(/\[|]/),h=i[0],c*=Number(i[1])),h.match(e)||(n[h]={value:u(l,c),dirtyId:0,name:h,type:l})}}return n}n.__esModule=!0,n.default=r;var s=t("pixi-gl-core"),a=i(s),u=a.default.shader.defaultValue},{"pixi-gl-core":16}],127:[function(t,e,n){"use strict";function i(t){var e=1,n="var value = null;\n    var cacheValue = null\n    var gl = renderer.gl";for(var i in t){var s=t[i];if("float"===s.type&&1===s.size)n+="\nif(uniformValues."+i+" !== uniformData."+i+".value)\n{\n    uniformData."+i+".value = uniformValues."+i+"\n    gl.uniform1f(uniformData."+i+".location, uniformValues."+i+")\n}\n";else if("sampler2D"===s.type&&1===s.size)n+="\nif (uniformValues."+i+".baseTexture)\n{\n    var location = renderer.bindTexture(uniformValues."+i+".baseTexture, "+e++ +", false);\n\n    if(uniformData."+i+".value !== location)\n    {\n        uniformData."+i+".value = location;\n        gl.uniform1i(uniformData."+i+".location, location);\n; // eslint-disable-line max-len\n    }\n}\nelse\n{\n    uniformData."+i+".value = "+e+";\n    renderer.boundTextures["+e+"] = renderer.emptyTextures["+e+"];\n    gl.activeTexture(gl.TEXTURE0 + "+e++ +");\n\n    uniformValues."+i+".bind();\n}";else if("mat3"===s.type&&1===s.size)n+="\nvalue = uniformValues."+i+";\ngl.uniformMatrix3fv(uniformData."+i+".location, false, (value.a === undefined) ? value : value.toArray(true));\n";else if("vec2"===s.type&&1===s.size)n+="\ncacheValue = uniformData."+i+".value;\nvalue = uniformValues."+i+";\n\nif(value.x !== undefined)\n{\n    if(cacheValue[0] !== value.x || cacheValue[1] !== value.y)\n    {\n        cacheValue[0] = value.x;\n        cacheValue[1] = value.y;\n        gl.uniform2f(uniformData."+i+".location, value.x, value.y);\n    }\n}\nelse\n{\n    if(cacheValue[0] !== value[0] || cacheValue[1] !== value[1])\n    {\n        cacheValue[0] = value[0];\n        cacheValue[1] = value[1];\n        gl.uniform2f(uniformData."+i+".location, value[0], value[1]);\n    }\n}\n";else{var a=1===s.size?r:o,u=a[s.type].replace("location","uniformData."+i+".location");n+="\ncacheValue = uniformData."+i+".value;\nvalue = uniformValues."+i+";\n"+u+";\n"}}return new Function("uniformData","uniformValues","renderer",n)}n.__esModule=!0,n.default=i;var r={float:"if(cacheValue !== value)\n{\n    cacheValue.value = value;\n    gl.uniform1f(location, value)\n}",vec2:"if(cacheValue[0] !== value[0] || cacheValue[1] !== value[1])\n{\n    cacheValue[0] = value[0];\n    cacheValue[1] = value[1];\n    gl.uniform2f(location, value[0], value[1])\n}",vec3:"if(cacheValue[0] !== value[0] || cacheValue[1] !== value[1] || cacheValue[2] !== value[2])\n{\n    cacheValue[0] = value[0];\n    cacheValue[1] = value[1];\n    cacheValue[2] = value[2];\n\n    gl.uniform3f(location, value[0], value[1], value[2])\n}",vec4:"gl.uniform4f(location, value[0], value[1], value[2], value[3])",int:"gl.uniform1i(location, value)",ivec2:"gl.uniform2i(location, value[0], value[1])",ivec3:"gl.uniform3i(location, value[0], value[1], value[2])",ivec4:"gl.uniform4i(location, value[0], value[1], value[2], value[3])",bool:"gl.uniform1i(location, value)",bvec2:"gl.uniform2i(location, value[0], value[1])",bvec3:"gl.uniform3i(location, value[0], value[1], value[2])",bvec4:"gl.uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"gl.uniformMatrix2fv(location, false, value)",mat3:"gl.uniformMatrix3fv(location, false, value)",mat4:"gl.uniformMatrix4fv(location, false, value)",sampler2D:"gl.uniform1i(location, value)",samplerCube:"gl.uniform1i(location, value)"},o={float:"gl.uniform1fv(location, value)",vec2:"gl.uniform2fv(location, value)",vec3:"gl.uniform3fv(location, value)",vec4:"gl.uniform4fv(location, value)",int:"gl.uniform1iv(location, value)",ivec2:"gl.uniform2iv(location, value)",ivec3:"gl.uniform3iv(location, value)",ivec4:"gl.uniform4iv(location, value)",bool:"gl.uniform1iv(location, value)",bvec2:"gl.uniform2iv(location, value)",bvec3:"gl.uniform3iv(location, value)",bvec4:"gl.uniform4iv(location, value)",sampler2D:"gl.uniform1iv(location, value)",samplerCube:"gl.uniform1iv(location, value)"}},{}],128:[function(t,e,n){"use strict";function i(t,e){var n=0,i="var value = null;\n    var cacheValue = null\n    var gl = renderer.gl";for(var s in t.uniforms){var a=e[s];if(a)if("float"===a.type&&1===a.size)i+="\nif(uniformValues."+s+" !== uniformData."+s+".value)\n{\n    uniformData."+s+".value = uniformValues."+s+"\n    gl.uniform1f(uniformData."+s+".location, uniformValues."+s+")\n}\n";else if("sampler2D"!==a.type&&"samplerCube"!==a.type||1!==a.size)if("mat3"===a.type&&1===a.size)i+="\nvalue = uniformValues."+s+";\ngl.uniformMatrix3fv(uniformData."+s+".location, false, (value.a === undefined) ? value : value.toArray(true));\n";else if("vec2"===a.type&&1===a.size)i+="\ncacheValue = uniformData."+s+".value;\nvalue = uniformValues."+s+";\n\nif(value.x !== undefined)\n{\n    if(cacheValue[0] !== value.x || cacheValue[1] !== value.y)\n    {\n        cacheValue[0] = value.x;\n        cacheValue[1] = value.y;\n        gl.uniform2f(uniformData."+s+".location, value.x, value.y);\n    }\n}\nelse\n{\n    if(cacheValue[0] !== value[0] || cacheValue[1] !== value[1])\n    {\n        cacheValue[0] = value[0];\n        cacheValue[1] = value[1];\n        gl.uniform2f(uniformData."+s+".location, value[0], value[1]);\n    }\n}\n";else{var u=1===a.size?r:o,l=u[a.type].replace("location","uniformData."+s+".location");i+="\ncacheValue = uniformData."+s+".value;\nvalue = uniformValues."+s+";\n"+l+";\n"}else i+="\nif (uniformValues."+s+".baseTexture)\n{\n\n    renderer.texture.bind(uniformValues."+s+", "+n+")\n    if(uniformData."+s+".value !== "+n+")\n    {\n        uniformData."+s+".value = "+n+";\n        gl.uniform1i(uniformData."+s+".location, "+n+");\n; // eslint-disable-line max-len\n    }\n\n    /*\n    var location = renderer.bindTexture(uniformValues."+s+".baseTexture, "+n+", false);\n\n    if(uniformData."+s+".value !== location)\n    {\n        uniformData."+s+".value = location;\n        gl.uniform1i(uniformData."+s+".location, location);\n; // eslint-disable-line max-len\n    }*/\n}\nelse if(uniformValues."+s+"._new)\n{\n\n    renderer.texture.bind(uniformValues."+s+", "+n+")\n    if(uniformData."+s+".value !== "+n+")\n    {\n        uniformData."+s+".value = "+n+";\n        gl.uniform1i(uniformData."+s+".location, "+n+');\n; // eslint-disable-line max-len\n    }\n}\nelse\n{\n //   console.log("binding..")\n    uniformData.'+s+".value = "+n+";\n    renderer.boundTextures["+n+"] = renderer.emptyTextures["+n+"];\n    gl.activeTexture(gl.TEXTURE0 + "+n+");\n\n    uniformValues."+s+".bind();\n}",n++;else t.uniforms[s].group&&(i+="\n                    renderer.shader.syncUniformGroup(uniformValues."+s+");\n                ")}return new Function("uniformData","uniformValues","renderer",i)}n.__esModule=!0,n.default=i;var r={float:"if(cacheValue !== value)\n{\n    cacheValue.value = value;\n    gl.uniform1f(location, value)\n}",vec2:"if(cacheValue[0] !== value[0] || cacheValue[1] !== value[1])\n{\n    cacheValue[0] = value[0];\n    cacheValue[1] = value[1];\n    gl.uniform2f(location, value[0], value[1])\n}",vec3:"if(cacheValue[0] !== value[0] || cacheValue[1] !== value[1] || cacheValue[2] !== value[2])\n{\n    cacheValue[0] = value[0];\n    cacheValue[1] = value[1];\n    cacheValue[2] = value[2];\n\n    gl.uniform3f(location, value[0], value[1], value[2])\n}",vec4:"gl.uniform4f(location, value[0], value[1], value[2], value[3])",int:"gl.uniform1i(location, value)",ivec2:"gl.uniform2i(location, value[0], value[1])",ivec3:"gl.uniform3i(location, value[0], value[1], value[2])",ivec4:"gl.uniform4i(location, value[0], value[1], value[2], value[3])",bool:"gl.uniform1i(location, value)",bvec2:"gl.uniform2i(location, value[0], value[1])",bvec3:"gl.uniform3i(location, value[0], value[1], value[2])",bvec4:"gl.uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"gl.uniformMatrix2fv(location, false, value)",mat3:"gl.uniformMatrix3fv(location, false, value)",mat4:"gl.uniformMatrix4fv(location, false, value)",sampler2D:"gl.uniform1i(location, value)",samplerCube:"gl.uniform1i(location, value)"},o={float:"gl.uniform1fv(location, value)",vec2:"gl.uniform2fv(location, value)",vec3:"gl.uniform3fv(location, value)",vec4:"gl.uniform4fv(location, value)",int:"gl.uniform1iv(location, value)",ivec2:"gl.uniform2iv(location, value)",ivec3:"gl.uniform3iv(location, value)",ivec4:"gl.uniform4iv(location, value)",bool:"gl.uniform1iv(location, value)",bvec2:"gl.uniform2iv(location, value)",bvec3:"gl.uniform3iv(location, value)",bvec4:"gl.uniform4iv(location, value)",sampler2D:"gl.uniform1iv(location, value)",samplerCube:"gl.uniform1iv(location, value)"}},{}],129:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../math"),l=t("../utils"),h=t("../const"),c=t("../textures/Texture"),f=i(c),d=t("../display/Container"),p=i(d),m=new u.Point,v=function(t){function e(n){r(this,e);var i=o(this,t.call(this));return i._anchor=new u.ObservablePoint(i._onAnchorUpdate,i),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=h.BLEND_MODES.NORMAL,i.shader=null,i.cachedTint=16777215,i.texture=n||f.default.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.pluginName="sprite",i}return s(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,l.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,l.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,n=e.a,i=e.b,r=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,l=t.trim,h=t.orig,c=this._anchor,f=0,d=0,p=0,m=0;l?(d=l.x-c._x*h.width,f=d+l.width,m=l.y-c._y*h.height,p=m+l.height):(d=-c._x*h.width,f=d+h.width,m=-c._y*h.height,p=m+h.height),u[0]=n*d+r*m+s,u[1]=o*m+i*d+a,u[2]=n*f+r*m+s,u[3]=o*m+i*f+a,u[4]=n*f+r*p+s,u[5]=o*p+i*f+a,u[6]=n*d+r*p+s,u[7]=o*p+i*d+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,i=this._anchor,r=this.transform.worldTransform,o=r.a,s=r.b,a=r.c,u=r.d,l=r.tx,h=r.ty,c=-i._x*n.width,f=c+n.width,d=-i._y*n.height,p=d+n.height;e[0]=o*c+a*d+l,e[1]=u*d+s*c+h,e[2]=o*f+a*d+l,e[3]=u*d+s*f+h,e[4]=o*f+a*p+l,e[5]=u*p+s*f+h,e[6]=o*c+a*p+l,e[7]=u*p+s*c+h},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);var e=this._texture.orig.width,n=this._texture.orig.height,i=-e*this.anchor.x,r=0;return m.x>i&&m.x<i+e&&(r=-n*this.anchor.y,m.y>r&&m.y<r+n)},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._anchor=null;var n="boolean"==typeof e?e:e&&e.texture;if(n){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(f.default.from(t))},e.fromFrame=function(t){var n=l.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(n)},e.fromImage=function(t,n,i){return new e(f.default.fromImage(t,n,i))},e.fromSVG=function(t,n,i){return new e(f.default.fromSVG(t,n,i))},a(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,l.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,l.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(p.default);n.default=v},{"../const":45,"../display/Container":47,"../math":72,"../textures/Texture":144,"../utils":162}],130:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../../renderers/canvas/CanvasRenderer"),s=i(o),a=t("../../const"),u=t("../../math"),l=t("./CanvasTinter"),h=i(l),c=new u.Matrix,f=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,n=this.renderer,i=e._frame.width,r=e._frame.height,o=t.transform.worldTransform,s=0,l=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(n.setBlendMode(t.blendMode),e.valid)){n.context.globalAlpha=t.worldAlpha;var f=e.baseTexture.scaleMode===a.SCALE_MODES.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==f&&(n.context[n.smoothProperty]=f),e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,l=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,l=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(c),o=c,u.GroupD8.matrixAppendRotationInv(o,e.rotate,s,l),s=0,l=0),s-=i/2,l-=r/2,n.roundPixels?(n.context.setTransform(o.a,o.b,o.c,o.d,o.tx*n.resolution|0,o.ty*n.resolution|0),s|=0,l|=0):n.context.setTransform(o.a,o.b,o.c,o.d,o.tx*n.resolution,o.ty*n.resolution);var d=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint!==t.tint&&(t.cachedTint=t.tint,t.tintedTexture=h.default.getTintedTexture(t,t.tint)),n.context.drawImage(t.tintedTexture,0,0,i*d,r*d,s*n.resolution,l*n.resolution,i*n.resolution,r*n.resolution)):n.context.drawImage(e.baseTexture.source,e._frame.x*d,e._frame.y*d,i*d,r*d,s*n.resolution,l*n.resolution,i*n.resolution,r*n.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();n.default=f,s.default.registerPlugin("sprite",f)},{"../../const":45,"../../math":72,"../../renderers/canvas/CanvasRenderer":79,"./CanvasTinter":131}],131:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("../../utils"),o=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),s=i(o),a={getTintedTexture:function(t,e){var n=t._texture;e=a.roundColor(e);var i="#"+("00000"+(0|e).toString(16)).substr(-6);if(n.tintCache=n.tintCache||{},n.tintCache[i])return n.tintCache[i];var r=a.canvas||document.createElement("canvas");if(a.tintMethod(n,e,r),a.convertTintToImage){var o=new Image;o.src=r.toDataURL(),n.tintCache[i]=o}else n.tintCache[i]=r,a.canvas=null;return r},tintWithMultiply:function(t,e,n){var i=n.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,n.width=Math.ceil(r.width),n.height=Math.ceil(r.height),i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,r.width,r.height),i.globalCompositeOperation="multiply",i.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithOverlay:function(t,e,n){var i=n.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,n.width=Math.ceil(r.width),n.height=Math.ceil(r.height),i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,r.width,r.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithPerPixel:function(t,e,n){var i=n.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=(0,r.hex2rgb)(e),u=a[0],l=a[1],h=a[2],c=i.getImageData(0,0,o.width,o.height),f=c.data,d=0;d<f.length;d+=4)f[d+0]*=u,f[d+1]*=l,f[d+2]*=h;i.putImageData(c,0,0)},roundColor:function(t){var e=a.cacheStepsPerColorChannel,n=(0,r.hex2rgb)(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),(0,r.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,s.default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,n.default=a},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":82,"../../utils":162}],132:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(e){i(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();n.default=r},{}],133:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../renderers/webgl/utils/ObjectRenderer"),u=i(a),l=t("../../renderers/webgl/WebGLRenderer"),h=i(l),c=t("../../renderers/webgl/systems/geometry/GLBuffer"),f=i(c),d=t("../../utils/createIndicesForQuads"),p=i(d),m=t("./generateMultiTextureShader"),v=i(m),y=t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),_=i(y),g=t("./BatchBuffer"),b=i(g),x=t("../../settings"),w=i(x),T=t("bit-twiddle"),S=i(T),M=0,E=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));i.vertSize=5,i.vertByteSize=4*i.vertSize,i.size=w.default.SPRITE_BATCH_SIZE,i.buffers=[];for(var s=1;s<=S.default.nextPow2(i.size);s*=2)i.buffers.push(new b.default(4*s*i.vertByteSize));i.indices=(0,p.default)(i.size),i.shader=null,i.currentIndex=0,i.groups=[];for(var a=0;a<i.size;a++)i.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return i.sprites=[],i.vertexBuffers=[],i.vaos=[],i.vaoMax=2,i.vertexCount=0,i.renderer.on("prerender",i.onPrerender,i),i}return s(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),w.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,_.default)(this.MAX_TEXTURES,t));for(var e=this.shader=(0,v.default)(t,this.MAX_TEXTURES),n=new Int32Array(this.MAX_TEXTURES),i=0;i<this.MAX_TEXTURES;i++)n[i]=i;e.uniformGroup.add("default",{uSamplers:n},!0),e.uniforms.globals=this.renderer.globalUniforms,this.indexBuffer=f.default.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.geometry.bindVao(null);for(var r=0;r<this.vaoMax;r++){this.vertexBuffers[r]=f.default.createVertexBuffer(t,null,t.DYNAMIC_DRAW);var o=e.program.attributeData;this.vaos[r]=this.renderer.geometry.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[r],o.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[r],o.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[r],o.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12),o.aTextureId&&this.vaos[r].addAttribute(this.vertexBuffers[r],o.aTextureId,t.FLOAT,!1,this.vertByteSize,16)}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,n=S.default.nextPow2(this.currentIndex),i=S.default.log2(n),r=this.buffers[i],o=this.sprites,s=this.groups,a=r.float32View,u=r.uint32View,l=this.boundTextures,h=this.renderer.boundTextures,c=0,d=void 0,p=void 0,m=1,v=0,y=0,_=s[0],g=void 0,b=void 0,x=o[0].blendMode;_.textureCount=0,_.start=0,_.blend=x,M++;var T=void 0;for(T=0;T<e;++T)l[T]=h[T],l[T]._virtalBoundId=T;for(T=0;T<this.currentIndex;++T){var E=o[T];if(d=E._texture.baseTexture,v=d._id,x!==E.blendMode&&(x=E.blendMode,p=null,y=this.MAX_TEXTURES,M++),p!==d&&(p=d,d._enabled!==M&&(y===this.MAX_TEXTURES&&(M++,y=0,_.size=T-_.start,_=s[m++],_.textureCount=0,_.blend=x,_.start=T),d._enabled=M,d._id=y,_.textures[_.textureCount++]=d,y++)),g=E.vertexData,b=E._texture._uvs.uvsUint32,v=d._id,this.renderer.roundPixels){var P=this.renderer.resolution;a[c]=(g[0]*P|0)/P,a[c+1]=(g[1]*P|0)/P,a[c+5]=(g[2]*P|0)/P,a[c+6]=(g[3]*P|0)/P,a[c+10]=(g[4]*P|0)/P,a[c+11]=(g[5]*P|0)/P,a[c+15]=(g[6]*P|0)/P,a[c+16]=(g[7]*P|0)/P}else a[c]=g[0],a[c+1]=g[1],a[c+5]=g[2],a[c+6]=g[3],a[c+10]=g[4],a[c+11]=g[5],a[c+15]=g[6],a[c+16]=g[7];u[c+2]=b[0],u[c+7]=b[1],u[c+12]=b[2],u[c+17]=b[3],u[c+3]=u[c+8]=u[c+13]=u[c+18]=E._tintRGB+(255*Math.min(E.worldAlpha,1)<<24),a[c+4]=a[c+9]=a[c+14]=a[c+19]=v,c+=20}if(_.size=T-_.start,w.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++,this.vertexBuffers[this.vertexCount]=f.default.createVertexBuffer(t,null,t.DYNAMIC_DRAW);var O=this.shader.program.attributeData;this.vaos[this.vertexCount]=this.renderer.geometry.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],O.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],O.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],O.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12),O.aTextureId&&this.vaos[this.vertexCount].addAttribute(this.vertexBuffers[this.vertexCount],O.aTextureId,t.FLOAT,!1,this.vertByteSize,16)}this.renderer.geometry.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++}for(T=0;T<m;T++){for(var A=s[T],C=A.textureCount,I=0;I<C;I++)this.renderer.texture.bind(A.textures[I],I);t.drawElements(t.TRIANGLES,6*A.size,t.UNSIGNED_SHORT,6*A.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.shader.bind(this.shader,!0),this.renderer.shader.syncUniformGroup(this.shader.uniformGroup),w.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.geometry.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var n=0;n<this.buffers.length;++n)this.buffers[n].destroy()},e}(u.default);n.default=E,h.default.registerPlugin("sprite",E)},{"../../renderers/webgl/WebGLRenderer":85,"../../renderers/webgl/systems/geometry/GLBuffer":99,"../../renderers/webgl/utils/ObjectRenderer":117,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":120,"../../settings":122,"../../utils/createIndicesForQuads":158,"./BatchBuffer":132,"./generateMultiTextureShader":134,"bit-twiddle":1}],134:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",i=h;i=i.replace(/%count%/gi,e),i=i.replace(/%forloop%/gi,o(e));for(var r=(new s.GLShader(t,n,i,l.PRECISION.DEFAULT),u.default.from(n,i)),a=[],c=0;c<e;c++)a[c]=c;return r}function o(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(textureId == "+n+".0)"),
e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}n.__esModule=!0,n.default=r;var s=t("pixi-gl-core"),a=t("../../shader/Shader"),u=i(a),l=t("../../const"),h=(t("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../const":45,"../../shader/Shader":124,path:9,"pixi-gl-core":16}],135:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../sprites/Sprite"),l=i(u),h=t("../textures/Texture"),c=i(h),f=t("../math"),d=t("../utils"),p=t("../const"),m=t("../settings"),v=i(m),y=t("./TextStyle"),_=i(y),g=t("./TextMetrics"),b=i(g),x=t("../utils/trimCanvas"),w=i(x),T={texture:!0,children:!1,baseTexture:!0},S=function(t){function e(n,i,s){r(this,e),s=s||document.createElement("canvas"),s.width=3,s.height=3;var a=c.default.fromCanvas(s,v.default.SCALE_MODE,"text");a.orig=new f.Rectangle,a.trim=new f.Rectangle;var u=o(this,t.call(this,a));return c.default.addToCache(u._texture,u._texture.baseTexture.textureCacheIds[0]),u.canvas=s,u.context=u.canvas.getContext("2d"),u.resolution=v.default.RESOLUTION,u._text=null,u._style=null,u._styleListener=null,u._font="",u.text=n,u.style=i,u.localStyleID=-1,u}return s(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n=b.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=n.width,r=n.height,o=n.lines,s=n.lineHeight,a=n.lineWidths,u=n.maxLineWidth,l=n.fontProperties;this.canvas.width=Math.ceil((i+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((r+2*e.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=e.stroke,this.context.lineWidth=e.strokeThickness,this.context.textBaseline=e.textBaseline,this.context.lineJoin=e.lineJoin,this.context.miterLimit=e.miterLimit;var h=void 0,c=void 0;if(e.dropShadow){this.context.shadowBlur=e.dropShadowBlur,this.context.globalAlpha=e.dropShadowAlpha,e.dropShadowBlur>0?this.context.shadowColor=e.dropShadowColor:this.context.fillStyle=e.dropShadowColor;for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,d=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,p=0;p<o.length;p++)h=e.strokeThickness/2,c=e.strokeThickness/2+p*s+l.ascent,"right"===e.align?h+=u-a[p]:"center"===e.align&&(h+=(u-a[p])/2),e.fill&&(this.drawLetterSpacing(o[p],h+f+e.padding,c+d+e.padding),e.stroke&&e.strokeThickness&&(this.context.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(o[p],h+f+e.padding,c+d+e.padding,!0),this.context.strokeStyle=e.stroke))}this.context.shadowBlur=0,this.context.globalAlpha=1,this.context.fillStyle=this._generateFillStyle(e,o);for(var m=0;m<o.length;m++)h=e.strokeThickness/2,c=e.strokeThickness/2+m*s+l.ascent,"right"===e.align?h+=u-a[m]:"center"===e.align&&(h+=(u-a[m])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[m],h+e.padding,c+e.padding,!0),e.fill&&this.drawLetterSpacing(o[m],h+e.padding,c+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this._style,o=r.letterSpacing;if(0===o)return void(i?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));for(var s=String.prototype.split.call(t,""),a=e,u=0,l="";u<t.length;)l=s[u++],i?this.context.strokeText(l,a,n):this.context.fillText(l,a,n),a+=this.context.measureText(l).width+o},e.prototype.updateTexture=function(){if(this._style.trim){var t=(0,w.default)(this.canvas);this.canvas.width=t.width,this.canvas.height=t.height,this.context.putImageData(t.data,0,0)}var e=this._texture,n=this._style,i=n.trim?0:n.padding;e.baseTexture.valid=!0,e.baseTexture.resolution=this.resolution,e.baseTexture.width=this.canvas.width/this.resolution,e.baseTexture.height=this.canvas.height/this.resolution,e.trim.width=e._frame.width=this.canvas.width/this.resolution,e.trim.height=e._frame.height=this.canvas.height/this.resolution,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-2*i,e.orig.height=e._frame.height-2*i,this._onTextureUpdate(),e.baseTexture.update(),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var n=void 0,i=void 0,r=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,u=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var h=u.length+1,c=1;c<h;++c)l.push(c/h);if(u.unshift(t.fill[0]),l.unshift(0),u.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===p.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(s/2,0,s/2,a),i=(u.length+1)*e.length,r=0;for(var f=0;f<e.length;f++){r+=1;for(var d=0;d<u.length;d++)o=l[d]?l[d]/e.length+f/e.length:r/i,n.addColorStop(o,u[d]),r++}}else{n=this.context.createLinearGradient(0,a/2,s,a/2),i=u.length+1,r=1;for(var m=0;m<u.length;m++)o=l[m]?l[m]:r/i,n.addColorStop(o,u[m]),r++}return n},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},T,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},a(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,d.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,d.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof _.default?this._style=t:this._style=new _.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(l.default);n.default=S},{"../const":45,"../math":72,"../settings":122,"../sprites/Sprite":129,"../textures/Texture":144,"../utils":162,"../utils/trimCanvas":167,"./TextMetrics":136,"./TextStyle":137}],136:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(e,n,r,o,s,a,u,l,h){i(this,t),this.text=e,this.style=n,this.width=r,this.height=o,this.lines=s,this.lineWidths=a,this.lineHeight=u,this.maxLineWidth=l,this.fontProperties=h}return t.measureText=function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;i=i||n.wordWrap;var o=n.toFontString(),s=t.measureFont(o),a=r.getContext("2d");a.font=o;for(var u=i?t.wordWrap(e,n,r):e,l=u.split(/(?:\r\n|\r|\n)/),h=new Array(l.length),c=0,f=0;f<l.length;f++){var d=a.measureText(l[f]).width+(l[f].length-1)*n.letterSpacing;h[f]=d,c=Math.max(c,d)}var p=c+n.strokeThickness;n.dropShadow&&(p+=n.dropShadowDistance);var m=n.lineHeight||s.fontSize+n.strokeThickness,v=Math.max(m,s.fontSize+n.strokeThickness)+(l.length-1)*m;return n.dropShadow&&(v+=n.dropShadowDistance),new t(e,n,p,v,l,h,m,c,s)},t.wordWrap=function(e,n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,r=i.getContext("2d"),o="",s=e.split("\n"),a=n.wordWrapWidth,u={},l=0;l<s.length;l++){for(var h=a,c=s[l].split(" "),f=0;f<c.length;f++){var d=r.measureText(c[f]).width;if(n.breakWords&&d>a)for(var p=c[f].split(""),m=0;m<p.length;m++){var v=p[m],y=u[v];void 0===y&&(y=r.measureText(v).width,u[v]=y),y>h?(o+="\n"+v,h=a-y):(0===m&&(o+=" "),o+=v,h-=y)}else{var _=d+r.measureText(" ").width;0===f||_>h?(f>0&&(o+="\n"),o+=c[f],h=a-d):(h-=_,o+=" "+c[f])}}l<s.length-1&&(o+="\n")}return o},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={},i=t._canvas,r=t._context;r.font=e;var o=Math.ceil(r.measureText("|Mq").width),s=Math.ceil(r.measureText("M").width),a=2*s;s=1.4*s|0,i.width=o,i.height=a,r.fillStyle="#f00",r.fillRect(0,0,o,a),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|Mq",0,s);var u=r.getImageData(0,0,o,a).data,l=u.length,h=4*o,c=0,f=0,d=!1;for(c=0;c<s;++c){for(var p=0;p<h;p+=4)if(255!==u[f+p]){d=!0;break}if(d)break;f+=h}for(n.ascent=s-c,f=l-h,d=!1,c=a;c>s;--c){for(var m=0;m<h;m+=4)if(255!==u[f+m]){d=!0;break}if(d)break;f-=h}return n.descent=c-s,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t}();n.default=r;var o=document.createElement("canvas");o.width=o.height=10,r._canvas=o,r._context=o.getContext("2d"),r._fonts={}},{}],137:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return"number"==typeof t?(0,l.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function o(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=r(t[e]);return t}return r(t)}function s(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../const"),l=t("../utils"),h={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:u.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100},c=function(){function t(e){i(this,t),this.styleID=0,Object.assign(this,h,e)}return t.prototype.clone=function(){var e={};for(var n in h)e[n]=this[n];return new t(e)},t.prototype.reset=function(){Object.assign(this,h)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var i=e[n].trim();/([\"\'])[^\'\"]+\1/.test(i)||(i='"'+i+'"'),e[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},a(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=o(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=o(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){s(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=o(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();n.default=c},{"../const":45,"../utils":162}],138:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./BaseTexture"),u=i(a),l=t("./FrameBuffer"),h=i(l),c=t("../settings"),f=(i(c),function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments[2],a=arguments[3];r(this,e);var u=o(this,t.call(this,null,s,a,n,i));return u.hasLoaded=!0,u._canvasRenderTarget=null,u.clearColor=[0,0,0,0],u.frameBuffer=new h.default(n,i).addColorTexture(0,u),u.stencilMaskStack=[],u}return s(e,t),e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.frameBuffer.resize(e,n)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(u.default));n.default=f},{"../settings":122,"./BaseTexture":139,"./FrameBuffer":141}],139:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../utils"),l=t("../const"),h=t("./resources/ImageResource"),c=(i(h),t("./resources/BufferResource")),f=i(c),d=t("./resources/CanvasResource"),p=(i(d),t("./resources/SVGResource")),m=(i(p),t("./resources/VideoResource")),v=(i(m),t("./resources/createResource")),y=i(v),_=t("../settings"),g=i(_),b=t("eventemitter3"),x=i(b),w=t("bit-twiddle"),T=i(w),S=function(t){function e(n,i,s,a,h,c,f,d){r(this,e);var p=o(this,t.call(this));return p.uid=(0,u.uid)(),p.touched=0,p.width=a||-1,p.height=h||-1,p.resolution=s||g.default.RESOLUTION,p.isPowerOfTwo=!1,p.mipmap=!1,p.premultiplyAlpha=!0,p.wrapMode=g.default.WRAP_MODE,p.scaleMode=i||g.default.SCALE_MODE,p.format=c||l.FORMATS.RGBA,p.type=f||l.TYPES.UNSIGNED_BYTE,p.target=l.TARGETS.TEXTURE_2D,p._glTextures={},p._new=!0,p.dirtyId=0,p.valid=!1,p.resource=null,n&&(n=(0,y.default)(n),p.setResource(n)),p.cacheId=null,p.validate(),p.textureCacheIds=[],p}return s(e,t),e.prototype.setResource=function(t){this.resource&&this.resource.resourceUpdated.remove(this),this.resource=t,t.resourceUpdated.add(this),t.loaded&&this.resourceLoaded(t),t.load.then(this.resourceLoaded.bind(this)).catch(function(t){})},e.prototype.resourceLoaded=function(t){t===t&&(t.width!==-1&&t.hight!==-1&&(this.width=t.width/this.resolution,this.height=t.height/this.resolution),this.validate(),this.valid&&(this.isPowerOfTwo=T.default.isPow2(this.realWidth)&&T.default.isPow2(this.realHeight),this.dirtyId++,this.emit("loaded",this)))},e.prototype.resourceUpdated=function(){this.dirtyId++},e.prototype.update=function(){this.dirtyId++},e.prototype.resize=function(t,e){this.width=t,this.height=e,this.dirtyId++},e.prototype.validate=function(){var t=!0;this.width!==-1&&this.height!==-1||(t=!1),this.valid=t},e.prototype.destroy=function(){this.cacheId&&(delete u.BaseTextureCache[this.cacheId],delete u.TextureCache[this.cacheId],this.cacheId=null),this.resource&&(this.resource.destroy(),this.resource=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null},e.prototype.dispose=function(){this.emit("dispose",this)},e.from=function(t,n,i){var r=null;"string"==typeof t?r=t:(t._pixiId||(t._pixiId="pixiid_"+(0,u.uid)()),r=t._pixiId);var o=u.BaseTextureCache[r];return o||(o=new e(t),o.cacheId=r,e.addToCache(o,r)),o},e.fromFloat32Array=function(t,n,i){i=i||new Float32Array(t*n*4);var r=new e(new f.default(i),l.SCALE_MODES.NEAREST,1,t,n,l.FORMATS.RGBA,l.TYPES.FLOAT);return r},e.fromUint8Array=function(t,n,i){i=i||new Uint8Array(t*n*4);var r=new e(new f.default(i),l.SCALE_MODES.NEAREST,1,t,n,l.FORMATS.RGBA,l.TYPES.UNSIGNED_BYTE);return r},e.addToCache=function(t,e){e&&(t.textureCacheIds.indexOf(e)===-1&&t.textureCacheIds.push(e),u.BaseTextureCache[e],u.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"!=typeof t){for(var e=0;e<t.textureCacheIds.length;++e)delete u.BaseTextureCache[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}var n=u.BaseTextureCache[t];if(n){var i=n.textureCacheIds.indexOf(t);return i>-1&&n.textureCacheIds.splice(i,1),delete u.BaseTextureCache[t],n}return null},a(e,[{key:"realWidth",get:function(){return this.width*this.resolution}},{key:"realHeight",get:function(){return this.height*this.resolution}}]),e}(x.default);n.default=S,S.fromImage=S.from,S.fromSVG=S.from,S.fromCanvas=S.from},{"../const":45,"../settings":122,"../utils":162,"./resources/BufferResource":147,"./resources/CanvasResource":148,"./resources/ImageResource":149,"./resources/SVGResource":150,"./resources/VideoResource":152,"./resources/createResource":153,"bit-twiddle":1,eventemitter3:3}],140:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./BaseTexture"),u=i(a),l=t("./resources/ImageResource"),h=i(l),c=t("./../const"),f=function(t){function e(n,i,s){r(this,e);var a=o(this,t.call(this,null,0,1,n,i,s));return a.target=c.TARGETS.TEXTURE_CUBE_MAP,a.resources=[],a.positiveX={side:0,texture:a,resource:null,texturePart:!0,dirtyId:0},a.negativeX={side:1,texture:a,resource:null,texturePart:!0,dirtyId:0},a.positiveY={side:2,texture:a,resource:null,texturePart:!0,dirtyId:0},a.negativeY={side:3,texture:a,resource:null,texturePart:!0,dirtyId:0},a.positiveZ={side:4,texture:a,resource:null,texturePart:!0,dirtyId:0},a.negativeZ={side:5,texture:a,resource:null,texturePart:!0,dirtyId:0},a.sides=[a.positiveX,a.negativeX,a.positiveY,a.negativeY,a.positiveZ,a.negativeZ],a}return s(e,t),e.prototype.setResource=function(t,e){var n=this,i=this.sides[e];i.resource=t,t.load.then(function(t){i.resource===t&&(n.width=t.width,n.height=t.height,n.validate(),n.dirtyId++)})},e.prototype.validate=function(){var t=!0;if(this.width!==-1&&this.height!==-1||(t=!1),this.sides)for(var e=0;e<this.sides.length;e++){var n=this.sides[e];if(n.resource&&!n.resource.loaded){t=!1;break}}this.valid=t},e.from=function(){for(var t=new e,n=0;n<6;n++){var i;t.setResource(h.default.from((i=n%arguments.length,arguments.length<=i?void 0:arguments[i])),n)}return t},e}(u.default);n.default=f},{"./../const":45,"./BaseTexture":139,"./resources/ImageResource":149}],141:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./BaseTexture"),a=i(s),u=t("./../const"),l=function(){function t(e,n){r(this,t),this.width=e||100,this.height=n||100,this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFrameBuffers={}}return t.prototype.addColorTexture=function(t,e){return this.colorTextures[t||0]=e||new a.default(null,0,1,this.width,this.height),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new a.default(null,0,1,this.width,this.height,u.FORMATS.DEPTH_COMPONENT,u.TYPES.UNSIGNED_SHORT),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++)this.colorTextures[n].resize(t,e);this.depthTexture&&this.depthTexture.resize(t,e)}},o(t,[{key:"colorTexture",get:function(){return this.colorTextures[0]}}]),t}();n.default=l},{"./../const":45,"./BaseTexture":139}],142:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./BaseRenderTexture"),u=i(a),l=t("./Texture"),h=i(l),c=function(t){function e(n,i){r(this,e);var s=null;if(!(n instanceof u.default)){var a=arguments[1],l=arguments[2],h=arguments[3],c=arguments[4];s=arguments[0],i=null,n=new u.default(a,l,h,c)}var f=o(this,t.call(this,n,i));return f.legacyRenderer=s,f.valid=!0,f._updateUvs(),f}return s(e,t),e.prototype.resize=function(t,e,n){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,n,i,r){return new e(new u.default(t,n,i,r))},e}(h.default);n.default=c},{"./BaseRenderTexture":138,"./Texture":144}],143:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../"),s=t("../utils"),a=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,t),this.baseTexture=e,this.textures={},this.data=n,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,n=(0,s.getResolutionOfUrl)(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&(this.baseTexture.resolution=n,this.baseTexture.update()),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,i=t.BATCH_SIZE;n-e<i&&n<this._frameKeys.length;){var r=this._frameKeys[n],s=this._frames[r].frame;if(s){var a=null,u=null,l=new o.Rectangle(0,0,this._frames[r].sourceSize.w/this.resolution,this._frames[r].sourceSize.h/this.resolution);a=this._frames[r].rotated?new o.Rectangle(s.x/this.resolution,s.y/this.resolution,s.h/this.resolution,s.w/this.resolution):new o.Rectangle(s.x/this.resolution,s.y/this.resolution,s.w/this.resolution,s.h/this.resolution),this._frames[r].trimmed&&(u=new o.Rectangle(this._frames[r].spriteSourceSize.x/this.resolution,this._frames[r].spriteSourceSize.y/this.resolution,s.w/this.resolution,s.h/this.resolution)),this.textures[r]=new o.Texture(this.baseTexture,a,l,u,this._frames[r].rotated?2:0),o.Texture.addToCache(this.textures[r],r)}n++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();n.default=a},{"../":67,"../utils":162}],144:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new E(new c.default(new y.default(t)))}function u(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}n.__esModule=!0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=t("./BaseTexture"),c=i(h),f=t("./VideoBaseTexture"),d=i(f),p=t("./resources/ImageResource"),m=i(p),v=t("./resources/CanvasResource"),y=i(v),_=t("./TextureUvs"),g=i(_),b=t("eventemitter3"),x=i(b),w=t("../settings"),T=i(w),S=t("../math"),M=t("../utils"),E=function(t){function e(n,i,s,a,u){r(this,e);var l=o(this,t.call(this));if(l.noFrame=!1,i||(l.noFrame=!0,i=new S.Rectangle(0,0,1,1)),n instanceof e&&(n=n.baseTexture),l.baseTexture=n,l._frame=i,l.trim=a,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=s||i,l._rotate=Number(u||0),u===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return n.valid?(l.noFrame&&(i=new S.Rectangle(0,0,n.width,n.height),n.on("update",l.onBaseTextureUpdated,l)),l.frame=i):n.once("loaded",l.onBaseTextureUpdated,l),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return s(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this.noFrame?this.frame=new S.Rectangle(0,0,t.width,t.height):this.frame=this._frame,
this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(M.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new g.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,n,i,r){var o=M.TextureCache[t];return o||(o=new e(c.default.fromImage(t,n,i,r)),e.addToCache(o,t)),o},e.fromFrame=function(t){var e=M.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(c.default.fromCanvas(t,n,i))},e.fromVideo=function(t,n){return"string"==typeof t?e.fromVideoUrl(t,n):new e(d.default.fromVideo(t,n))},e.fromVideoUrl=function(t,n){return new e(d.default.fromUrl(t,n))},e.from=function(t,n,i){var r=null;"string"==typeof t?r=t:(t._pixiId||(t._pixiId="pixiid_"+uid()),r=t._pixiId);var o=M.TextureCache[r];return o||(o=new e(new c.default(t)),o.baseTexture.cacheId=r,M.TextureCache[r]=o,M.BaseTextureCache[r]=o.baseTexture),o},e.fromLoader=function(t,n,i){var r=new m.default(t),o=new c.default(r,T.default.SCALE_MODE,(0,M.getResolutionOfUrl)(n)),s=new e(o);return i||(i=n),c.default.addToCache(s.baseTexture,i),e.addToCache(s,i),i!==n&&(c.default.addToCache(s.baseTexture,n),e.addToCache(s,n)),s},e.addToCache=function(t,e){e&&(t.textureCacheIds.indexOf(e)===-1&&t.textureCacheIds.push(e),M.TextureCache[e],M.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"!=typeof t){for(var e=0;e<t.textureCacheIds.length;++e)delete M.TextureCache[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}var n=M.TextureCache[t];if(n){var i=n.textureCacheIds.indexOf(t);return i>-1&&n.textureCacheIds.splice(i,1),delete M.TextureCache[t],n}return null},l(e,[{key:"frame",get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+t.x+" + "+t.width+" > "+this.baseTexture.width+" ")+("Y: "+t.y+" + "+t.height+" > "+this.baseTexture.height));this.valid=t&&t.width&&t.height&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(x.default);n.default=E,E.fromImage=E.from,E.fromSVG=E.from,E.fromCanvas=E.from,E.fromVideo=E.from,E.fromFrame=E.from,E.EMPTY=new E(new c.default),u(E.EMPTY),u(E.EMPTY.baseTexture),E.WHITE=a(),u(E.WHITE),u(E.WHITE.baseTexture)},{"../math":72,"../settings":122,"../utils":162,"./BaseTexture":139,"./TextureUvs":145,"./VideoBaseTexture":146,"./resources/CanvasResource":148,"./resources/ImageResource":149,eventemitter3:3}],145:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../math/GroupD8"),s=i(o),a=function(){function t(){r(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,n){var i=e.width,r=e.height;if(n){var o=t.width/2/i,a=t.height/2/r,u=t.x/i+o,l=t.y/r+a;n=s.default.add(n,s.default.NW),this.x0=u+o*s.default.uX(n),this.y0=l+a*s.default.uY(n),n=s.default.add(n,2),this.x1=u+o*s.default.uX(n),this.y1=l+a*s.default.uY(n),n=s.default.add(n,2),this.x2=u+o*s.default.uX(n),this.y2=l+a*s.default.uY(n),n=s.default.add(n,2),this.x3=u+o*s.default.uX(n),this.y3=l+a*s.default.uY(n)}else this.x0=t.x/i,this.y0=t.y/r,this.x1=(t.x+t.width)/i,this.y1=t.y/r,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/r,this.x3=t.x/i,this.y3=(t.y+t.height)/r;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();n.default=a},{"../math/GroupD8":68}],146:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=e,n}n.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("./BaseTexture"),h=i(l),c=t("../utils"),f=t("../ticker"),d=t("../const"),p=function(t){function e(n,i){if(r(this,e),!n)throw new Error("No video source element specified.");(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0);var s=o(this,t.call(this,n,i));return s.width=n.videoWidth,s.height=n.videoHeight,s._autoUpdate=!0,s._isAutoUpdating=!1,s.autoPlay=!0,s.update=s.update.bind(s),s._onCanPlay=s._onCanPlay.bind(s),n.addEventListener("play",s._onPlayStart.bind(s)),n.addEventListener("pause",s._onPlayStop.bind(s)),s.hasLoaded=!1,s.__loaded=!1,s._isSourceReady()?s._onCanPlay():(n.addEventListener("canplay",s._onCanPlay),n.addEventListener("canplaythrough",s._onCanPlay)),s}return s(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(f.shared.add(this.update,this,d.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(f.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&f.shared.remove(this.update,this),this.source&&this.source._pixiId&&(h.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),t.prototype.destroy.call(this)},e.fromVideo=function(t,n){t._pixiId||(t._pixiId="video_"+(0,c.uid)());var i=c.BaseTextureCache[t._pixiId];return i||(i=new e(t,n),h.default.addToCache(i,t._pixiId)),i},e.fromUrl=function(t,n){var i=document.createElement("video");if(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),Array.isArray(t))for(var r=0;r<t.length;++r)i.appendChild(a(t[r].src||t[r],t[r].mime));else i.appendChild(a(t.src||t,t.mime));return i.load(),e.fromVideo(i,n)},u(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(f.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(f.shared.add(this.update,this,d.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(h.default);n.default=p,p.fromUrls=p.fromUrl},{"../const":45,"../ticker":156,"../utils":162,"./BaseTexture":139}],147:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./TextureResource"),u=i(a),l=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.uploadable=!1,i.load=new Promise(function(t,e){t(i)}),i}return s(e,t),e.from=function(t){return new e(t)},e}(u.default);n.default=l},{"./TextureResource":151}],148:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./TextureResource"),u=i(a),l=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.loaded=!0,i.width=n.width,i.height=n.height,i.uploadable=!0,i.load=new Promise(function(t,e){t(i)}),i}return s(e,t),e.from=function(t){return new e(t)},e}(u.default);n.default=l},{"./TextureResource":151}],149:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../utils/determineCrossOrigin"),u=i(a),l=t("./TextureResource"),h=i(l),c=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.load=new Promise(function(t,e){var n=i.source;n.onload=function(){i.loaded=!0,n.onload=null,n.onerror=null,i.width=n.width,i.height=n.height,t(i)},n.complete&&n.src&&(i.loaded=!0,n.onload=null,n.onerror=null,i.width=n.width,i.height=n.height,t(i))}),i}return s(e,t),e.prototype.destroy=function(){this.source.src=""},e.from=function(t,n){var i=new Image;return void 0===n&&0!==t.indexOf("data:")&&(i.crossOrigin=(0,u.default)(t)),i.src=t,new e(i)},e}(h.default);n.default=c},{"../../utils/determineCrossOrigin":159,"./TextureResource":151}],150:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../utils"),u=t("./TextureResource"),l=i(u),h=function(t){function e(n,i){r(this,e);var s=o(this,t.call(this));return s.svgSource=n,s.scale=1,s.uploadable=!0,s.resolve=null,s.load=new Promise(function(t,e){s.resolve=t,s._loadSvgSourceUsingXhr()}),s}return s(e,t),e.prototype._loadSvgSource=function(){var t=(0,a.decomposeDataUri)(this.svgSource);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.svgSource,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var e=(0,a.getSvgSize)(t),n=new Image;n.src="data:image/svg+xml,"+t;var i=e.width,r=e.height;if(!i||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.width=Math.round(i*this.scale),this.height=Math.round(r*this.scale);var o=document.createElement("canvas");o.width=this.width,o.height=this.height,o._pixiId="canvas_"+(0,a.uid)(),o.getContext("2d").drawImage(n,0,0,i,r,0,0,this.width,this.height),this.source=o,this.resolve(this)},e.from=function(t,n){return new e(t)},e}(l.default);n.default=h},{"../../utils":162,"./TextureResource":151}],151:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("mini-runner"),s=i(o),a=function(){function t(e){r(this,t),this.source=e,this.loaded=!1,this.width=-1,this.height=-1,this.uploadable=!0,this.resourceUpdated=new s.default("resourceUpdated"),this.load=null}return t.prototype.destroy=function(){},t}();n.default=a},{"mini-runner":5}],152:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=e,n}n.__esModule=!0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=t("./TextureResource"),c=r(h),f=t("../../ticker"),d=i(f),p=t("../../utils"),m=function(t){function e(n){o(this,e);var i=s(this,t.call(this,n));return i._autoUpdate=!0,i._isAutoUpdating=!1,i.autoPlay=!0,i.update=i.update.bind(i),i._onCanPlay=i._onCanPlay.bind(i),(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",i._onPlayStart.bind(i)),n.addEventListener("pause",i._onPlayStop.bind(i)),i._isSourceReady()?i._onCanPlay():(n.addEventListener("canplay",i._onCanPlay),n.addEventListener("canplaythrough",i._onCanPlay)),i.load=new Promise(function(t,e){i.resolve=t,i.loaded&&i.resolve(i)}),i}return a(e,t),e.prototype.update=function(){this.resourceUpdated.emit()},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.loaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(d.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(d.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.loaded||(this.loaded=!0,this.resolve&&this.resolve(this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&d.shared.remove(this.update,this)},e.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+(0,p.uid)());var n=BaseTextureCache[t._pixiId];return n||(n=new VideoBaseTexture(t,e),BaseTextureCache[t._pixiId]=n),n},e.fromUrl=function(t,n){var i=document.createElement("video");if(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),Array.isArray(t))for(var r=0;r<t.length;++r)i.appendChild(u(t[r].src||t[r],t[r].mime));else i.appendChild(u(t.src||t,t.mime));return i.load(),new e(i,n)},l(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(d.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(d.shared.add(this.update,this),this._isAutoUpdating=!0))}}]),e}(c.default);n.default=m},{"../../ticker":156,"../../utils":162,"./TextureResource":151}],153:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return"string"==typeof t?t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?new f.default.fromUrl(t):t.match(/\.(svg)$/)?u.default.from(t):s.default.from(t):t instanceof HTMLImageElement?new s.default(t):t instanceof HTMLCanvasElement?new h.default(t):t instanceof HTMLVideoElement?new f.default(t):t}n.__esModule=!0,n.default=r;var o=t("./ImageResource"),s=i(o),a=t("./SVGResource"),u=i(a),l=t("./CanvasResource"),h=i(l),c=t("./VideoResource"),f=i(c)},{"./CanvasResource":148,"./ImageResource":149,"./SVGResource":150,"./VideoResource":152}],154:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("../settings"),a=i(s),u=t("../const"),l=t("./TickerListener"),h=i(l),c=function(){function t(){var e=this;r(this,t),this._head=new h.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/a.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new h.default(t,e,n))},t.prototype.addOnce=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new h.default(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>=e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*a.default.TARGET_FPMS*this.speed;for(var n=this._head,i=n.next;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},o(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,a.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();n.default=c},{"../const":45,"../settings":122,"./TickerListener":155}],155:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i(this,t),this.fn=e,this.context=n,this.priority=r,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.context?this.fn.call(this.context,t):this.fn(t),this.once&&this.destroy();var e=this.next;return this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},t}();n.default=r},{}],156:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.Ticker=n.shared=void 0;var r=t("./Ticker"),o=i(r),s=new o.default;s.autoStart=!0,s.destroy=function(){},n.shared=s,n.Ticker=o.default},{"./Ticker":154}],157:[function(t,e,n){"use strict";function i(){var t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!t}n.__esModule=!0,n.default=i},{}],158:[function(t,e,n){"use strict";function i(t){for(var e=6*t,n=new Uint16Array(e),i=0,r=0;i<e;i+=6,r+=4)n[i+0]=r+0,n[i+1]=r+1,n[i+2]=r+2,n[i+3]=r+0,n[i+4]=r+2,n[i+5]=r+3;return n}n.__esModule=!0,n.default=i},{}],159:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,a||(a=document.createElement("a")),a.href=t,t=s.default.parse(a.href);var n=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&n&&t.protocol===e.protocol?"":"anonymous"}n.__esModule=!0,n.default=r;var o=t("url"),s=i(o),a=void 0},{url:38}],160:[function(t,e,n){"use strict";function i(t){return 4===t.BYTES_PER_ELEMENT?t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array":2===t.BYTES_PER_ELEMENT&&t instanceof Uint16Array?"Uint16Array":null}n.__esModule=!0,n.default=i},{}],161:[function(t,e,n){"use strict";function i(){if(!r){var t=document.createElement("canvas"),e={};if(t.width=1,t.height=1,r=t.getContext("webgl2",e)||t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support webGL. Try using the canvas renderer")}return r}n.__esModule=!0,n.default=i;var r=null},{}],162:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(){return++I}function s(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function a(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t}function u(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function l(t,e){var n=w.default.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}function h(t){var e=b.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}}function c(t){var e=b.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function f(t){var e=b.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}function d(){R=!0}function p(t){if(!R){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+b.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+b.VERSION+" - "+t+" - http://www.pixijs.com/");R=!0}}function m(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!n||!n.getContextAttributes().stencil);if(n){var r=n.getExtension("WEBGL_lose_context");r&&r.loseContext()}return n=null,i}catch(t){return!1}}function v(t){return 0===t?0:t<0?-1:1}function y(t,e,n){var i=t.length;if(!(e>=i||0===n)){n=e+n>i?i-e:n;for(var r=i-n,o=e;o<r;++o)t[o]=t[o+n];t.length=r}}function _(){var t=void 0;for(t in D)D[t].destroy();for(t in k)k[t].destroy()}function g(){var t=void 0;for(t in D)delete D[t];for(t in k)delete k[t]}n.__esModule=!0,n.ProgramCache=n.BaseTextureCache=n.TextureCache=n.mixins=n.pluginTarget=n.EventEmitter=n.isMobile=void 0,n.uid=o,n.hex2rgb=s,n.hex2string=a,n.rgb2hex=u,n.getResolutionOfUrl=l,n.decomposeDataUri=h,n.getUrlFileExtension=c,n.getSvgSize=f,n.skipHello=d,n.sayHello=p,n.isWebGLSupported=m,n.sign=v,n.removeItems=y,n.destroyTextureCache=_,n.clearTextureCache=g;var b=t("../const"),x=t("../settings"),w=r(x),T=t("eventemitter3"),S=r(T),M=t("./pluginTarget"),E=r(M),P=t("./mixin"),O=i(P),A=t("ismobilejs"),C=i(A),I=0,R=!1;n.isMobile=C,n.EventEmitter=S.default,n.pluginTarget=E.default,n.mixins=O;var D=n.TextureCache=Object.create(null),k=n.BaseTextureCache=Object.create(null);n.ProgramCache={}},{"../const":45,"../settings":122,"./mixin":165,"./pluginTarget":166,eventemitter3:3,ismobilejs:4}],163:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0,i=0,r={},o=0;o<t.length;o++)i+=e[o],n+=t[o].length;for(var u=new ArrayBuffer(4*n),l=null,h=0,c=0;c<t.length;c++){var f=e[c],d=t[c],p=(0,s.default)(d);r[p]||(r[p]=new a[p](u)),l=r[p];for(var m=0;m<d.length;m++){var v=(m/f|0)*i+h,y=m%f;l[v+y]=d[m]}h+=f}return new Float32Array(u)}n.__esModule=!0,n.default=r;var o=t("./getBufferType"),s=i(o),a={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array}},{"./getBufferType":160}],164:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return s.default.tablet||s.default.phone?4:t}n.__esModule=!0,n.default=r;var o=t("ismobilejs"),s=i(o)},{ismobilejs:4}],165:[function(t,e,n){"use strict";function i(t,e){if(t&&e)for(var n=Object.keys(e),i=0;i<n.length;++i){var r=n[i];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}}function r(t,e){s.push(t,e)}function o(){for(var t=0;t<s.length;t+=2)i(s[t],s[t+1]);s.length=0}n.__esModule=!0,n.mixin=i,n.delayMixin=r,n.performMixins=o;var s=[]},{}],166:[function(t,e,n){"use strict";function i(t){t.__plugins={},t.registerPlugin=function(e,n){t.__plugins[e]=n},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}n.__esModule=!0,n.default={mixin:function(t){i(t)}}},{}],167:[function(t,e,n){"use strict";function i(t){var e=t.width,n=t.height,i=t.getContext("2d"),r=i.getImageData(0,0,e,n),o=r.data,s=o.length,a={top:null,left:null,right:null,bottom:null},u=void 0,l=void 0,h=void 0;for(u=0;u<s;u+=4)0!==o[u+3]&&(l=u/4%e,h=~~(u/4/e),null===a.top&&(a.top=h),null===a.left?a.left=l:l<a.left&&(a.left=l),null===a.right?a.right=l+1:a.right<l&&(a.right=l+1),null===a.bottom?a.bottom=h:a.bottom<h&&(a.bottom=h));e=a.right-a.left,n=a.bottom-a.top+1;var c=i.getImageData(a.left,a.top,e,n);return{height:n,width:e,data:c}}n.__esModule=!0,n.default=i},{}],168:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){var e=(new Error).stack;"undefined"==typeof e||(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed)}var o=t("./core"),s=i(o),a=t("./mesh"),u=i(a),l=t("./particles"),h=i(l),c=t("./extras"),f=i(c),d=t("./filters"),p=i(d),m=t("./prepare"),v=i(m),y=t("./loaders"),_=i(y),g=t("./interaction"),b=i(g);s.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},s.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(s,{Stage:{enumerable:!0,get:function(){return r("You do not need to use a PIXI Stage any more, you can simply render any container."),s.Container}},DisplayObjectContainer:{enumerable:!0,get:function(){return r("DisplayObjectContainer has been shortened to Container, please use Container from now on."),s.Container}},Strip:{enumerable:!0,get:function(){return r("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),u.Mesh}},Rope:{enumerable:!0,get:function(){return r("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),u.Rope}},ParticleContainer:{enumerable:!0,get:function(){return r("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),h.ParticleContainer}},MovieClip:{enumerable:!0,get:function(){return r("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),f.AnimatedSprite}},TilingSprite:{enumerable:!0,get:function(){return r("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),
f.TilingSprite}},BitmapText:{enumerable:!0,get:function(){return r("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),f.BitmapText}},blendModes:{enumerable:!0,get:function(){return r("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),s.BLEND_MODES}},scaleModes:{enumerable:!0,get:function(){return r("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),s.SCALE_MODES}},BaseTextureCache:{enumerable:!0,get:function(){return r("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),s.utils.BaseTextureCache}},TextureCache:{enumerable:!0,get:function(){return r("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),s.utils.TextureCache}},math:{enumerable:!0,get:function(){return r("The math namespace is deprecated, please access members already accessible on PIXI."),s}},AbstractFilter:{enumerable:!0,get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),s.Filter}},TransformManual:{enumerable:!0,get:function(){return r("TransformManual has been renamed to TransformBase, please update your pixi-spine"),s.TransformBase}},TARGET_FPMS:{enumerable:!0,get:function(){return r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),s.settings.TARGET_FPMS},set:function(t){r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),s.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{enumerable:!0,get:function(){return r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),s.settings.FILTER_RESOLUTION},set:function(t){r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),s.settings.FILTER_RESOLUTION=t}},RESOLUTION:{enumerable:!0,get:function(){return r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),s.settings.RESOLUTION},set:function(t){r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),s.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{enumerable:!0,get:function(){return r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),s.settings.MIPMAP_TEXTURES},set:function(t){r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),s.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{enumerable:!0,get:function(){return r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),s.settings.SPRITE_BATCH_SIZE},set:function(t){r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),s.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{enumerable:!0,get:function(){return r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),s.settings.SPRITE_MAX_TEXTURES},set:function(t){r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),s.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{enumerable:!0,get:function(){return r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),s.settings.RETINA_PREFIX},set:function(t){r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),s.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{enumerable:!0,get:function(){return r("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),s.settings.RENDER_OPTIONS}}});for(var x=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],w=function(t){var e=x[t];Object.defineProperty(s[e.parent],"DEFAULT",{enumerable:!0,get:function(){return r("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),s.settings[e.target]},set:function(t){r("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),s.settings[e.target]=t}})},T=0;T<x.length;T++)w(T);Object.defineProperties(s.settings,{PRECISION:{enumerable:!0,get:function(){return r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),s.settings.PRECISION_FRAGMENT},set:function(t){r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),s.settings.PRECISION_FRAGMENT=t}}}),Object.defineProperties(f,{MovieClip:{enumerable:!0,get:function(){return r("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),f.AnimatedSprite}}}),s.DisplayObject.prototype.generateTexture=function(t,e,n){return r("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,n)},s.Graphics.prototype.generateTexture=function(t,e){return r("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},s.RenderTexture.prototype.render=function(t,e,n,i){this.legacyRenderer.render(t,this,n,e,!i),r("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},s.RenderTexture.prototype.getImage=function(t){return r("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},s.RenderTexture.prototype.getBase64=function(t){return r("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},s.RenderTexture.prototype.getCanvas=function(t){return r("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},s.RenderTexture.prototype.getPixels=function(t){return r("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},s.Sprite.prototype.setTexture=function(t){this.texture=t,r("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},f.BitmapText.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},s.Text.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},s.Text.calculateFontProperties=function(t){return r("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),s.TextMetrics.measureFont(t)},Object.defineProperties(s.Text,{fontPropertiesCache:{get:function(){return r("Text.fontPropertiesCache is deprecated"),s.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return r("Text.fontPropertiesCanvas is deprecated"),s.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return r("Text.fontPropertiesContext is deprecated"),s.TextMetrics._context}}}),s.Text.prototype.setStyle=function(t){this.style=t,r("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},s.Text.prototype.determineFontProperties=function(t){return r("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),s.TextMetrics.measureFont(t)},s.Text.getFontStyle=function(t){return r("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),t=t||{},t instanceof s.TextStyle||(t=new s.TextStyle(t)),t.toFontString()},Object.defineProperties(s.TextStyle.prototype,{font:{get:function(){r("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){r("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),n=-1;this._fontSize=26;for(var i=0;i<e.length;++i)if(e[i].match(/(px|pt|em|%)/)){n=i,this._fontSize=e[i];break}this._fontWeight="normal";for(var o=0;o<n;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(n>-1&&n<e.length-1){this._fontFamily="";for(var s=n+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),s.Texture.prototype.setFrame=function(t){this.frame=t,r("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},s.Texture.addTextureToCache=function(t,e){s.Texture.addToCache(t,e),r("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},s.Texture.removeTextureFromCache=function(t){return r("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),s.BaseTexture.removeFromCache(t),s.Texture.removeFromCache(t)},Object.defineProperties(p,{AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),s.AbstractFilter}},SpriteMaskFilter:{get:function(){return r("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),s.SpriteMaskFilter}}}),s.utils.uuid=function(){return r("utils.uuid() is deprecated, please use utils.uid() from now on."),s.utils.uid()},s.utils.canUseNewCanvasBlendModes=function(){return r("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),s.CanvasTinter.canUseMultiply};var S=!0;Object.defineProperty(s.utils,"_saidHello",{set:function(t){t&&(r("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),S=t},get:function(){return S}}),v.BasePrepare.prototype.register=function(t,e){return r("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this},Object.defineProperty(v.canvas,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Object.defineProperty(v.webgl,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),_.Loader&&!function(){var t=_.Resource,e=_.Loader;Object.defineProperties(t.prototype,{isJson:{get:function(){return r("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===t.TYPE.JSON}},isXml:{get:function(){return r("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===t.TYPE.XML}},isImage:{get:function(){return r("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===t.TYPE.IMAGE}},isAudio:{get:function(){return r("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===t.TYPE.AUDIO}},isVideo:{get:function(){return r("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===t.TYPE.VIDEO}}}),Object.defineProperties(e.prototype,{before:{get:function(){return r("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return r("The after() method is deprecated, please use use()."),this.use}}})}(),Object.defineProperty(b.interactiveTarget,"defaultCursor",{set:function(t){r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor},enumerable:!0}),Object.defineProperty(b.InteractionManager,"defaultCursorStyle",{set:function(t){r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(b.InteractionManager,"currentCursorStyle",{set:function(t){r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}})},{"./core":67,"./extras":179,"./filters":190,"./interaction":197,"./loaders":200,"./mesh":213,"./particles":216,"./prepare":226}],169:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../../core"),s=i(o),a=new s.Rectangle,u=function(){function t(e){r(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,n=void 0,i=void 0,r=void 0,o=void 0;t&&(o=t instanceof s.RenderTexture?t:e.generateTexture(t)),o?(n=o.baseTexture._canvasRenderTarget.context,i=o.baseTexture._canvasRenderTarget.resolution,r=o.frame):(n=e.rootContext,r=a,r.width=this.renderer.width,r.height=this.renderer.height);var u=r.width*i,l=r.height*i,h=new s.CanvasRenderTarget(u,l),c=n.getImageData(r.x*i,r.y*i,u,l);return h.context.putImageData(c,0,0),h.canvas},t.prototype.pixels=function(t){var e=this.renderer,n=void 0,i=void 0,r=void 0,o=void 0;return t&&(o=t instanceof s.RenderTexture?t:e.generateTexture(t)),o?(n=o.baseTexture._canvasRenderTarget.context,i=o.baseTexture._canvasRenderTarget.resolution,r=o.frame):(n=e.rootContext,r=a,r.width=e.width,r.height=e.height),n.getImageData(0,0,r.width*i,r.height*i).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();n.default=u,s.CanvasRenderer.registerPlugin("extract",u)},{"../../core":67}],170:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("./webgl/WebGLExtract");Object.defineProperty(n,"webgl",{enumerable:!0,get:function(){return i(r).default}});var o=t("./canvas/CanvasExtract");Object.defineProperty(n,"canvas",{enumerable:!0,get:function(){return i(o).default}})},{"./canvas/CanvasExtract":169,"./webgl/WebGLExtract":171}],171:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../../core"),s=i(o),a=new s.Rectangle,u=4,l=function(){function t(e){r(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,n=void 0,i=void 0,r=void 0,o=!1,l=void 0;t&&(l=t instanceof s.RenderTexture?t:this.renderer.generateTexture(t)),l?(n=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],i=n.resolution,r=l.frame,o=!1):(n=this.renderer.rootRenderTarget,i=n.resolution,o=!0,r=a,r.width=n.size.width,r.height=n.size.height);var h=r.width*i,c=r.height*i,f=new s.CanvasRenderTarget(h,c);if(n){e.bindRenderTarget(n);var d=new Uint8Array(u*h*c),p=e.gl;p.readPixels(r.x*i,r.y*i,h,c,p.RGBA,p.UNSIGNED_BYTE,d);var m=f.context.getImageData(0,0,h,c);m.data.set(d),f.context.putImageData(m,0,0),o&&(f.context.scale(1,-1),f.context.drawImage(f.canvas,0,-c))}return f.canvas},t.prototype.pixels=function(t){var e=this.renderer,n=void 0,i=void 0,r=void 0,o=void 0;t&&(o=t instanceof s.RenderTexture?t:this.renderer.generateTexture(t)),o?(n=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],i=n.resolution,r=o.frame):(n=this.renderer.rootRenderTarget,i=n.resolution,r=a,r.width=n.size.width,r.height=n.size.height);var l=r.width*i,h=r.height*i,c=new Uint8Array(u*l*h);if(n){e.bindRenderTarget(n);var f=e.gl;f.readPixels(r.x*i,r.y*i,l,h,f.RGBA,f.UNSIGNED_BYTE,c)}return c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();n.default=l,s.WebGLRenderer.registerPlugin("extract",l)},{"../../core":67}],172:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../core"),l=i(u),h=function(t){function e(n,i){r(this,e);var s=o(this,t.call(this,n[0]instanceof l.Texture?n[0]:n[0].texture));return s._textures=null,s._durations=null,s.textures=n,s._autoUpdate=i!==!1,s.animationSpeed=1,s.loop=!0,s.onComplete=null,s.onFrameChange=null,s._currentTime=0,s.playing=!1,s}return s(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&l.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&l.ticker.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&this.updateTexture()},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(){this.stop(),t.prototype.destroy.call(this)},e.fromFrames=function(t){for(var n=[],i=0;i<t.length;++i)n.push(l.Texture.fromFrame(t[i]));return new e(n)},e.fromImages=function(t){for(var n=[],i=0;i<t.length;++i)n.push(l.Texture.fromImage(t[i]));return new e(n)},a(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof l.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(l.Sprite);n.default=h},{"../core":67}],173:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("../core"),h=r(l),c=t("../core/math/ObservablePoint"),f=i(c),d=function(t){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var r=s(this,t.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==i.tint?i.tint:16777215,align:i.align||"left",name:null,size:0},r.font=i.font,r._text=n,r.maxWidth=0,r.maxLineHeight=0,r._anchor=new f.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return a(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],n=this._font.size/t.size,i=new h.Point,r=[],o=[],s=null,a=0,u=0,l=0,c=-1,f=0,d=0,p=0;p<this.text.length;p++){var m=this.text.charCodeAt(p);if(/(\s)/.test(this.text.charAt(p))&&(c=p,f=a),/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))o.push(a),u=Math.max(u,a),l++,i.x=0,i.y+=t.lineHeight,s=null;else if(c!==-1&&this.maxWidth>0&&i.x*n>this.maxWidth)h.utils.removeItems(r,c,p-c),p=c,c=-1,o.push(f),u=Math.max(u,f),l++,i.x=0,i.y+=t.lineHeight,s=null;else{var v=t.chars[m];v&&(s&&v.kerning[s]&&(i.x+=v.kerning[s]),r.push({texture:v.texture,line:l,charCode:m,position:new h.Point(i.x+v.xOffset,i.y+v.yOffset)}),a=i.x+(v.texture.width+v.xOffset),i.x+=v.xAdvance,d=Math.max(d,v.yOffset+v.texture.height),s=m)}}o.push(a),u=Math.max(u,a);for(var y=[],_=0;_<=l;_++){var g=0;"right"===this._font.align?g=u-o[_]:"center"===this._font.align&&(g=(u-o[_])/2),y.push(g)}for(var b=r.length,x=this.tint,w=0;w<b;w++){var T=this._glyphs[w];T?T.texture=r[w].texture:(T=new h.Sprite(r[w].texture),this._glyphs.push(T)),T.position.x=(r[w].position.x+y[r[w].line])*n,T.position.y=r[w].position.y*n,T.scale.x=T.scale.y=n,T.tint=x,T.parent||this.addChild(T)}for(var S=b;S<this._glyphs.length;++S)this.removeChild(this._glyphs[S]);if(this._textWidth=u*n,this._textHeight=(i.y+t.lineHeight)*n,0!==this.anchor.x||0!==this.anchor.y)for(var M=0;M<b;M++)this._glyphs[M].x-=this._textWidth*this.anchor.x,this._glyphs[M].y-=this._textHeight*this.anchor.y;this.maxLineHeight=d*n},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,n){var i={},r=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0];i.font=r.getAttribute("face"),i.size=parseInt(r.getAttribute("size"),10),i.lineHeight=parseInt(o.getAttribute("lineHeight"),10),i.chars={};for(var s=t.getElementsByTagName("char"),a=0;a<s.length;a++){var u=s[a],l=parseInt(u.getAttribute("id"),10),c=new h.Rectangle(parseInt(u.getAttribute("x"),10)+n.frame.x,parseInt(u.getAttribute("y"),10)+n.frame.y,parseInt(u.getAttribute("width"),10),parseInt(u.getAttribute("height"),10));i.chars[l]={xOffset:parseInt(u.getAttribute("xoffset"),10),yOffset:parseInt(u.getAttribute("yoffset"),10),xAdvance:parseInt(u.getAttribute("xadvance"),10),kerning:{},texture:new h.Texture(n.baseTexture,c)}}for(var f=t.getElementsByTagName("kerning"),d=0;d<f.length;d++){var p=f[d],m=parseInt(p.getAttribute("first"),10),v=parseInt(p.getAttribute("second"),10),y=parseInt(p.getAttribute("amount"),10);i.chars[v]&&(i.chars[v].kerning[m]=y)}return e.fonts[i.font]=i,i},u(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(h.Container);n.default=d,d.fonts={}},{"../core":67,"../core/math/ObservablePoint":70}],174:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("../core/math/Matrix"),a=i(s),u=new a.default,l=function(){function t(e,n){r(this,t),this._texture=e,this.mapCoord=new a.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin="undefined"==typeof n?.5:n}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,i=0;i<t.length;i+=2){var r=t[i],o=t[i+1];e[i]=r*n.a+o*n.c+n.tx,e[i+1]=r*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=e.orig,r=e.trim;r&&(u.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(u));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(e._frame.x+a+l)/o.width,s[1]=(e._frame.y+a+l)/o.height,s[2]=(e._frame.x+e._frame.width-a+l)/o.width,s[3]=(e._frame.y+e._frame.height-a+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,!0},o(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();n.default=l},{"../core/math/Matrix":69}],175:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("../core"),h=r(l),c=t("../core/sprites/canvas/CanvasTinter"),f=i(c),d=t("./TextureTransform"),p=i(d),m=new h.Point,v=function(t){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;o(this,e);var a=s(this,t.call(this,n));return a.tileTransform=new h.TransformStatic,a._width=i,a._height=r,a._canvasPattern=null,a.uvTransform=n.transform||new p.default(n),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return a(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var n=t.context,i=this.worldTransform,r=t.resolution,o=e.baseTexture,s=o.resolution,a=this.tilePosition.x/this.tileScale.x%e._frame.width*s,u=this.tilePosition.y/this.tileScale.y%e._frame.height*s;if(!this._canvasPattern){var l=new h.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=f.default.getTintedTexture(this,this.tint)),l.context.drawImage(this.tintedTexture,0,0)):l.context.drawImage(o.source,-e._frame.x,-e._frame.y),this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}n.globalAlpha=this.worldAlpha,n.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r),t.setBlendMode(this.blendMode),n.fillStyle=this._canvasPattern,n.scale(this.tileScale.x/s,this.tileScale.y/s);var c=this.anchor.x*-this._width,d=this.anchor.y*-this._height;this.uvRespectAnchor?(n.translate(a,u),n.fillRect(-a+c,-u+d,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(n.translate(a+c,u+d),n.fillRect(-a,-u,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,i)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);var e=this._width,n=this._height,i=-e*this.anchor._x;
if(m.x>i&&m.x<i+e){var r=-n*this.anchor._y;if(m.y>r&&m.y<r+n)return!0}return!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tileTransform=null,this.uvTransform=null},e.from=function(t,n,i){return new e(h.Texture.from(t),n,i)},e.fromFrame=function(t,n,i){var r=h.utils.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(r,n,i)},e.fromImage=function(t,n,i,r,o){return new e(h.Texture.fromImage(t,r,o),n,i)},u(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(h.Sprite);n.default=v},{"../core":67,"../core/sprites/canvas/CanvasTinter":131,"./TextureTransform":174}],176:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=t("../core"),a=r(s),u=t("../core/textures/Texture"),l=i(u),h=t("../core/textures/BaseTexture"),c=i(h),f=t("../core/utils"),d=a.DisplayObject,p=new a.Matrix;d.prototype._cacheAsBitmap=!1,d.prototype._cacheData=!1;var m=function t(){o(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(d.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new m),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),d.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},d.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var n=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;n.pad(i)}var r=t._activeRenderTarget,o=t.filterManager.filterStack,s=a.RenderTexture.create(0|n.width,0|n.height),u="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=u,c.default.addToCache(s.baseTexture,u),l.default.addToCache(s,u);var h=p;h.tx=-n.x,h.ty=-n.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,s,!0,h,!0),t.bindRenderTarget(r),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var d=new a.Sprite(s);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(n.x/n.width),d.anchor.y=-(n.y/n.height),d.alpha=e,d._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},d.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},d.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),n=this.alpha;this.alpha=1;var i=t.context,r=a.RenderTexture.create(0|e.width,0|e.height),o="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=o,c.default.addToCache(r.baseTexture,o),l.default.addToCache(r,o);var s=p;this.transform.localTransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,r,!0,s,!1),t.context=i,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var u=new a.Sprite(r);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u._bounds=this._bounds,u.alpha=n,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=u,this.containsPoint=u.containsPoint.bind(u)}},d.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},d.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},d.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,c.default.removeFromCache(this._cacheData.textureCacheId),l.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},d.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":67,"../core/textures/BaseTexture":139,"../core/textures/Texture":144,"../core/utils":162}],177:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var r=t("../core"),o=i(r);o.DisplayObject.prototype.name=null,o.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":67}],178:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var r=t("../core"),o=i(r);o.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":67}],179:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.BitmapText=n.TilingSpriteRenderer=n.TilingSprite=n.AnimatedSprite=void 0;var r=t("./AnimatedSprite");Object.defineProperty(n,"AnimatedSprite",{enumerable:!0,get:function(){return i(r).default}});var o=t("./TilingSprite");Object.defineProperty(n,"TilingSprite",{enumerable:!0,get:function(){return i(o).default}});var s=t("./webgl/TilingSpriteRenderer");Object.defineProperty(n,"TilingSpriteRenderer",{enumerable:!0,get:function(){return i(s).default}});var a=t("./BitmapText");Object.defineProperty(n,"BitmapText",{enumerable:!0,get:function(){return i(a).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":172,"./BitmapText":173,"./TilingSprite":175,"./cacheAsBitmap":176,"./getChildByName":177,"./getGlobalPosition":178,"./webgl/TilingSpriteRenderer":180}],180:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../core"),u=i(a),l=t("../../core/const"),h=(t("pixi-gl-core"),t("path"),new u.Matrix),c=new Float32Array(4),f=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n)),s={globals:i.renderer.globalUniforms};return i.shader=new u.Shader.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n",s),i.simpleShader=new u.Shader.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n",s),i.quad=new u.Quad,i}return s(e,t),e.prototype.render=function(t){var e=this.renderer,n=this.quad,i=n.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(i=n.uvs,i[0]=i[6]=-t.anchor.x,i[1]=i[3]=-t.anchor.y,i[2]=i[4]=1-t.anchor.x,i[5]=i[7]=1-t.anchor.y);var r=t._texture,o=r.baseTexture,s=t.tileTransform.localTransform,a=t.uvTransform,f=o.isPowerOfTwo&&r.frame.width===o.width&&r.frame.height===o.height;f&&(o._glTextures[e.CONTEXT_UID]?f=o.wrapMode!==l.WRAP_MODES.CLAMP:o.wrapMode===l.WRAP_MODES.CLAMP&&(o.wrapMode=l.WRAP_MODES.REPEAT));var d=f?this.simpleShader:this.shader,p=r.width,m=r.height,v=t._width,y=t._height;h.set(s.a*p/v,s.b*p/y,s.c*m/v,s.d*m/y,s.tx/v,s.ty/y),h.invert(),f?h.prepend(a.mapCoord):(d.uniforms.uMapCoord=a.mapCoord.toArray(!0),d.uniforms.uClampFrame=a.uClampFrame,d.uniforms.uClampOffset=a.uClampOffset),d.uniforms.uTransform=h.toArray(!0);var _=c;u.utils.hex2rgb(t.tint,_),_[3]=t.worldAlpha,d.uniforms.uColor=_,d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=r,e.shader.bind(d),e.geometry.bind(n,e.shader.getGLShader()),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(u.ObjectRenderer);n.default=f,u.WebGLRenderer.registerPlugin("tilingSprite",f)},{"../../core":67,"../../core/const":45,path:9,"pixi-gl-core":16}],181:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("../../core"),h=r(l),c=t("./BlurXFilter"),f=i(c),d=t("./BlurYFilter"),p=i(d),m=function(t){function e(n,i,r,a){o(this,e);var u=s(this,t.call(this));return u.blurXFilter=new f.default(n,i,r,a),u.blurYFilter=new p.default(n,i,r,a),u.padding=0,u.resolution=r||h.settings.RESOLUTION,u.quality=i||4,u.blur=n||8,u}return a(e,t),e.prototype.apply=function(t,e,n){var i=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,i,!0),this.blurYFilter.apply(t,i,n,!1),t.returnRenderTarget(i)},u(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),e}(h.Filter);n.default=m},{"../../core":67,"./BlurXFilter":182,"./BlurYFilter":183}],182:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("../../core"),h=r(l),c=t("./generateBlurVertSource"),f=i(c),d=t("./generateBlurFragSource"),p=i(d),m=t("./getMaxBlurKernelSize"),v=i(m),y=function(t){function e(n,i,r,a){o(this,e),a=a||5;var u=(0,f.default)(a,!0),l=(0,p.default)(a),c=s(this,t.call(this,u,l));return c.resolution=r||h.settings.RESOLUTION,c._quality=0,c.quality=i||4,c.strength=n||8,c.firstRun=!0,c}return a(e,t),e.prototype.apply=function(t,e,n,i){if(this.firstRun){var r=t.renderer.gl,o=(0,v.default)(r);this.vertexSrc=(0,f.default)(o,!0),this.fragmentSrc=(0,p.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/n.size.width*(n.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,i);else{for(var s=t.getRenderTarget(!0),a=e,u=s,l=0;l<this.passes-1;l++){t.applyFilter(this,a,u,!0);var h=u;u=a,a=h}t.applyFilter(this,a,n,i),t.returnRenderTarget(s)}},u(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(h.Filter);n.default=y},{"../../core":67,"./generateBlurFragSource":184,"./generateBlurVertSource":185,"./getMaxBlurKernelSize":186}],183:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("../../core"),h=r(l),c=t("./generateBlurVertSource"),f=i(c),d=t("./generateBlurFragSource"),p=i(d),m=t("./getMaxBlurKernelSize"),v=i(m),y=function(t){function e(n,i,r,a){o(this,e),a=a||5;var u=(0,f.default)(a,!1),l=(0,p.default)(a),c=s(this,t.call(this,u,l));return c.resolution=r||h.settings.RESOLUTION,c._quality=0,c.quality=i||4,c.strength=n||8,c.firstRun=!0,c}return a(e,t),e.prototype.apply=function(t,e,n,i){if(this.firstRun){var r=t.renderer.gl,o=(0,v.default)(r);this.vertexSrc=(0,f.default)(o,!1),this.fragmentSrc=(0,p.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/n.size.height*(n.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,i);else{for(var s=t.getRenderTarget(!0),a=e,u=s,l=0;l<this.passes-1;l++){t.applyFilter(this,a,u,!0);var h=u;u=a,a=h}t.applyFilter(this,a,n,i),t.returnRenderTarget(s)}},u(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(h.Filter);n.default=y},{"../../core":67,"./generateBlurFragSource":184,"./generateBlurVertSource":185,"./getMaxBlurKernelSize":186}],184:[function(t,e,n){"use strict";function i(t){for(var e=r[t],n=e.length,i=o,s="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",u=void 0,l=0;l<t;l++){var h=a.replace("%index%",l);u=l,l>=n&&(u=t-l-1),h=h.replace("%value%",e[u]),s+=h,s+="\n"}return i=i.replace("%blur%",s),i=i.replace("%size%",t)}n.__esModule=!0,n.default=i;var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],185:[function(t,e,n){"use strict";function i(t,e){var n=Math.ceil(t/2),i=r,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var u=s.replace("%index%",a);u=u.replace("%sampleIndex%",a-(n-1)+".0"),o+=u,o+="\n"}return i=i.replace("%blur%",o),i=i.replace("%size%",t)}n.__esModule=!0,n.default=i;var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],186:[function(t,e,n){"use strict";function i(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),n=15;n>e;)n-=2;return n}n.__esModule=!0,n.default=i},{}],187:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../../core"),l=i(u),h=(t("path"),function(t){function e(){r(this,e);var n=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n    vec4 result;\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    // Premultiply alpha again.\n    result.rgb *= result.a;\n\n    gl_FragColor = result;\n}\n"));return n.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],n}return s(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),i=Math.sin(t),r=Math.sqrt,o=1/3,s=r(o),a=n+(1-n)*o,u=o*(1-n)-s*i,l=o*(1-n)+s*i,h=o*(1-n)+s*i,c=n+o*(1-n),f=o*(1-n)-s*i,d=o*(1-n)-s*i,p=o*(1-n)+s*i,m=n+o*(1-n),v=[a,u,l,0,0,h,c,f,0,0,d,p,m,0,0,0,0,0,1,0];this._loadMatrix(v,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,i=-128*(n-1),r=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=2*t/3+1,i=(n-1)*-.5,r=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,n,i,r){t=t||.2,e=e||.15,n=n||16770432,i=i||3375104;var o=(n>>16&255)/255,s=(n>>8&255)/255,a=(255&n)/255,u=(i>>16&255)/255,l=(i>>8&255)/255,h=(255&i)/255,c=[.3,.59,.11,0,0,o,s,a,t,0,u,l,h,e,0,o-u,s-l,a-h,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){t=t||.1;var n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},a(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}}]),e}(l.Filter));n.default=h,h.prototype.grayscale=h.prototype.greyscale},{"../../core":67,path:9}],188:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../../core"),l=i(u),h=(t("path"),function(t){function e(n,i){r(this,e);var s=new l.Matrix;n.renderable=!1;var a=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return a.maskSprite=n,a.maskMatrix=s,a.uniforms.mapSampler=n._texture,a.uniforms.filterMatrix=s,a.uniforms.scale={x:1,y:1},null!==i&&void 0!==i||(i=20),a.scale=new l.Point(i,i),a}return s(e,t),e.prototype.apply=function(t,e,n){var i=1/n.destinationFrame.width*(n.size.width/e.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*i,this.uniforms.scale.y=this.scale.y*i,t.applyFilter(this,e,n)},a(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(l.Filter));n.default=h},{"../../core":67,path:9}],189:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");
}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../core"),u=i(a),l=(t("path"),function(t){function e(){return r(this,e),o(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return s(e,t),e}(u.Filter));n.default=l},{"../../core":67,path:9}],190:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("./fxaa/FXAAFilter");Object.defineProperty(n,"FXAAFilter",{enumerable:!0,get:function(){return i(r).default}});var o=t("./noise/NoiseFilter");Object.defineProperty(n,"NoiseFilter",{enumerable:!0,get:function(){return i(o).default}});var s=t("./displacement/DisplacementFilter");Object.defineProperty(n,"DisplacementFilter",{enumerable:!0,get:function(){return i(s).default}});var a=t("./blur/BlurFilter");Object.defineProperty(n,"BlurFilter",{enumerable:!0,get:function(){return i(a).default}});var u=t("./blur/BlurXFilter");Object.defineProperty(n,"BlurXFilter",{enumerable:!0,get:function(){return i(u).default}});var l=t("./blur/BlurYFilter");Object.defineProperty(n,"BlurYFilter",{enumerable:!0,get:function(){return i(l).default}});var h=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(n,"ColorMatrixFilter",{enumerable:!0,get:function(){return i(h).default}});var c=t("./void/VoidFilter");Object.defineProperty(n,"VoidFilter",{enumerable:!0,get:function(){return i(c).default}})},{"./blur/BlurFilter":181,"./blur/BlurXFilter":182,"./blur/BlurYFilter":183,"./colormatrix/ColorMatrixFilter":187,"./displacement/DisplacementFilter":188,"./fxaa/FXAAFilter":189,"./noise/NoiseFilter":191,"./void/VoidFilter":192}],191:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../../core"),l=i(u),h=(t("path"),function(t){function e(){r(this,e);var n=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n"));return n.noise=.5,n}return s(e,t),a(e,[{key:"noise",get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t}}]),e}(l.Filter));n.default=h},{"../../core":67,path:9}],192:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../core"),u=i(a),l=(t("path"),function(t){function e(){r(this,e);var n=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return n.glShaderKey="void",n}return s(e,t),e}(u.Filter));n.default=l},{"../../core":67,path:9}],193:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../core"),s=i(o),a=function(){function t(){r(this,t),this.global=new s.Point,this.target=null,this.originalEvent=null}return t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t}();n.default=a},{"../core":67}],194:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(){i(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();n.default=r},{}],195:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=t("../core"),h=r(l),c=t("./InteractionData"),f=i(c),d=t("./InteractionEvent"),p=i(d),m=t("./InteractionTrackingData"),v=i(m),y=t("eventemitter3"),_=i(y),g=t("./interactiveTarget"),b=i(g);h.utils.mixins.delayMixin(h.DisplayObject.prototype,b.default);var x="MOUSE",w={target:null,data:{global:null}},T=function(t){function e(n,i){o(this,e);var r=s(this,t.call(this));return i=i||{},r.renderer=n,r.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,r.interactionFrequency=i.interactionFrequency||10,r.mouse=new f.default,r.mouse.identifier=x,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[x]=r.mouse,r.interactionDataPool=[],r.eventData=new p.default,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r._tempPoint=new h.Point,r.resolution=1,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return a(e,t),e.prototype.hitTest=function(t,e){return w.target=null,w.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(w,e,null,!0),w.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(h.ticker.shared.add(this.update,this,h.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0))),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(h.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var n=this.activeInteractionData[e];if(n.originalEvent&&"touch"!==n.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch("undefined"==typeof e?"undefined":u(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}}},e.prototype.dispatchEvent=function(t,e,n){n.stopped||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.mapPositionToPoint=function(t,e,n){var i=void 0;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*r,t.y=(n-i.top)*(this.interactionDOMElement.height/i.height)*r},e.prototype.processInteractive=function(t,e,n,i,r){if(!e||!e.visible)return!1;var o=t.data.global;r=e.interactive||r;var s=!1,a=r;if(e.hitArea?a=!1:i&&e._mask&&(e._mask.containsPoint(o)||(i=!1)),e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;l>=0;l--){var h=u[l],c=this.processInteractive(t,h,n,i,a);if(c){if(!h.parent)continue;a=!1,c&&(t.target&&(i=!1),s=!0)}}return r&&(i&&!t.target&&(e.hitArea?(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(s=!0)):e.containsPoint&&e.containsPoint(o)&&(s=!0)),e.interactive&&(s&&!t.target&&(t.target=e),n&&n(t,e,!!s))),s},e.prototype.onPointerDown=function(t){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var n=e.length,i=0;i<n;i++){var r=e[i],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===r.pointerType)this.emit("touchstart",s);else if("mouse"===r.pointerType){var a=2===r.button||3===r.which;this.emit(a?"rightdown":"mousedown",this.eventData)}}},e.prototype.processPointerDown=function(t,e,n){var i=t.data.originalEvent,r=t.data.identifier;if(n)if(e.trackedPointers[r]||(e.trackedPointers[r]=new v.default(r)),this.dispatchEvent(e,"pointerdown",t),"touchstart"===i.type||"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mousedown"===i.type||"mouse"===i.pointerType){var o=2===i.button||3===i.which;o?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var i=this.normalizeToPointerData(t),r=i.length,o=0;o<r;o++){var s=i[o],a=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,a);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,n,!0),this.emit(e?"pointercancel":"pointerup",u),"mouse"===s.pointerType){var l=2===s.button||3===s.which;this.emit(l?"rightup":"mouseup",u)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend",u),this.releaseInteractionDataForPointerId(s.pointerId,a))}},e.prototype.onPointerCancel=function(t){this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data.originalEvent,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touchcancel"!==n.type&&"touch"!==n.pointerType||this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var i=t.data.originalEvent,r=t.data.identifier,o=e.trackedPointers[r],s="touchend"===i.type||"touch"===i.pointerType,a=0===i.type.indexOf("mouse")||"mouse"===i.pointerType;if(a){var u=2===i.button||3===i.which,l=v.default.FLAGS,h=u?l.RIGHT_DOWN:l.LEFT_DOWN,c=void 0!==o&&o.flags&h;n?(this.dispatchEvent(e,u?"rightup":"mouseup",t),c&&this.dispatchEvent(e,u?"rightclick":"click",t)):c&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){var e=this.normalizeToPointerData(t);"mouse"===e[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var n=e.length,i=0;i<n;i++){var r=e[i],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);s.data.originalEvent=t;var a="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===r.pointerType&&this.emit("touchmove",s),"mouse"===r.pointerType&&this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)},e.prototype.processPointerMove=function(t,e,n){var i=t.data.originalEvent,r="touchmove"===i.type||"touch"===i.pointerType,o="mousemove"===i.type||"mouse"===i.pointerType;o&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){var e=this.normalizeToPointerData(t),n=e[0];"mouse"===n.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(n),r=this.configureInteractionEventForDOMEvent(this.eventData,n,i);r.data.originalEvent=n,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===n.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)},e.prototype.processPointerOverOut=function(t,e,n){var i=t.data.originalEvent,r=t.data.identifier,o="mouseover"===i.type||"mouseout"===i.type||"mouse"===i.pointerType,s=e.trackedPointers[r];n&&!s&&(s=e.trackedPointers[r]=new v.default(r)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),n=e[0],i=this.getInteractionDataForPointerId(n),r=this.configureInteractionEventForDOMEvent(this.eventData,n,i);r.data.originalEvent=n,"mouse"===n.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"===n.pointerType&&this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId;if(e===x||"mouse"===t.pointerType)return this.mouse;if(this.activeInteractionData[e])return this.activeInteractionData[e];var n=this.interactionDataPool.pop()||new f.default;return n.identifier=e,this.activeInteractionData[e]=n,n},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(n.global.x=n.global.x/this.resolution,n.global.y=n.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t._reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,i=t.changedTouches.length;n<i;n++){var r=t.changedTouches[n];"undefined"==typeof r.button&&(r.button=t.touches.length?1:0),"undefined"==typeof r.buttons&&(r.buttons=t.touches.length?1:0),"undefined"==typeof r.isPrimary&&(r.isPrimary=1===t.touches.length),"undefined"==typeof r.width&&(r.width=r.radiusX||1),"undefined"==typeof r.height&&(r.height=r.radiusY||1),"undefined"==typeof r.tiltX&&(r.tiltX=0),"undefined"==typeof r.tiltY&&(r.tiltY=0),"undefined"==typeof r.pointerType&&(r.pointerType="touch"),"undefined"==typeof r.pointerId&&(r.pointerId=r.identifier||0),"undefined"==typeof r.pressure&&(r.pressure=r.force||.5),"undefined"==typeof r.rotation&&(r.rotation=r.rotationAngle||0),"undefined"==typeof r.layerX&&(r.layerX=r.offsetX=r.clientX),"undefined"==typeof r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):("undefined"==typeof t.isPrimary&&(t.isPrimary=!0),"undefined"==typeof t.width&&(t.width=1),"undefined"==typeof t.height&&(t.height=1),"undefined"==typeof t.tiltX&&(t.tiltX=0),"undefined"==typeof t.tiltY&&(t.tiltY=0),"undefined"==typeof t.pointerType&&(t.pointerType="mouse"),"undefined"==typeof t.pointerId&&(t.pointerId=x),"undefined"==typeof t.pressure&&(t.pressure=.5),"undefined"==typeof t.rotation&&(t.rotation=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(_.default);n.default=T,h.WebGLRenderer.registerPlugin("interaction",T),h.CanvasRenderer.registerPlugin("interaction",T)},{"../core":67,"./InteractionData":193,"./InteractionEvent":194,"./InteractionTrackingData":196,"./interactiveTarget":198,eventemitter3:3}],196:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){i(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){e?this._flags=this._flags|t:this._flags=this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!==(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();n.default=o,o.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],197:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("./InteractionData");Object.defineProperty(n,"InteractionData",{enumerable:!0,get:function(){return i(r).default}});var o=t("./InteractionManager");Object.defineProperty(n,"InteractionManager",{enumerable:!0,get:function(){return i(o).default}});var s=t("./interactiveTarget");Object.defineProperty(n,"interactiveTarget",{enumerable:!0,get:function(){return i(s).default}})},{"./InteractionData":193,"./InteractionManager":195,"./interactiveTarget":198}],198:[function(t,e,n){"use strict";n.__esModule=!0,n.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],199:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){t.bitmapFont=l.BitmapText.registerFont(t.data,e)}n.__esModule=!0,n.parse=r,n.default=function(){return function(t,e){if(!t.data||t.type!==u.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();var n=t.isDataUrl?"":s.dirname(t.url);t.isDataUrl&&("."===n&&(n=""),this.baseUrl&&n&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(n+="/"),n=n.replace(this.baseUrl,""))),
n&&"/"!==n.charAt(n.length-1)&&(n+="/");var i=n+t.data.getElementsByTagName("page")[0].getAttribute("file");if(a.utils.TextureCache[i])r(t,a.utils.TextureCache[i]),e();else{var o={crossOrigin:t.crossOrigin,loadType:u.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};this.add(t.name+"_image",i,o,function(n){r(t,n.texture),e()})}}};var o=t("path"),s=i(o),a=t("../core"),u=t("resource-loader"),l=t("../extras")},{"../core":67,"../extras":179,path:9,"resource-loader":36}],200:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.shared=n.Resource=n.textureParser=n.getResourcePath=n.spritesheetParser=n.parseBitmapFontData=n.bitmapFontParser=n.Loader=void 0;var r=t("./bitmapFontParser");Object.defineProperty(n,"bitmapFontParser",{enumerable:!0,get:function(){return i(r).default}}),Object.defineProperty(n,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var o=t("./spritesheetParser");Object.defineProperty(n,"spritesheetParser",{enumerable:!0,get:function(){return i(o).default}}),Object.defineProperty(n,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var s=t("./textureParser");Object.defineProperty(n,"textureParser",{enumerable:!0,get:function(){return i(s).default}});var a=t("resource-loader");Object.defineProperty(n,"Resource",{enumerable:!0,get:function(){return a.Resource}});var u=t("../core/Application"),l=i(u),h=t("./loader"),c=i(h);n.Loader=c.default;var f=new c.default;f.destroy=function(){},n.shared=f;var d=l.default.prototype;d._loader=null,Object.defineProperty(d,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?f:new c.default}return this._loader}}),d._parentDestroy=d.destroy,d.destroy=function(){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy()}},{"../core/Application":43,"./bitmapFontParser":199,"./loader":201,"./spritesheetParser":202,"./textureParser":203,"resource-loader":36}],201:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("resource-loader"),u=i(a),l=t("resource-loader/lib/middlewares/parsing/blob"),h=t("eventemitter3"),c=i(h),f=t("./textureParser"),d=i(f),p=t("./spritesheetParser"),m=i(p),v=t("./bitmapFontParser"),y=i(v),_=function(t){function e(n,i){r(this,e);var s=o(this,t.call(this,n,i));c.default.call(s);for(var a=0;a<e._pixiMiddleware.length;++a)s.use(e._pixiMiddleware[a]());return s.onStart.add(function(t){return s.emit("start",t)}),s.onProgress.add(function(t,e){return s.emit("progress",t,e)}),s.onError.add(function(t,e,n){return s.emit("error",t,e,n)}),s.onLoad.add(function(t,e){return s.emit("load",t,e)}),s.onComplete.add(function(t,e){return s.emit("complete",t,e)}),s}return s(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(u.default);n.default=_;for(var g in c.default.prototype)_.prototype[g]=c.default.prototype[g];_._pixiMiddleware=[l.blobMiddlewareFactory,d.default,m.default,y.default];var b=u.default.Resource;b.setExtensionXhrType("fnt",b.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":199,"./spritesheetParser":202,"./textureParser":203,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],202:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return t.isDataUrl?t.data.meta.image:a.default.resolve(t.url.replace(e,""),t.data.meta.image)}n.__esModule=!0,n.default=function(){return function(t,e){var n=t.name+"_image";if(!t.data||t.type!==o.Resource.TYPE.JSON||!t.data.frames||this.resources[n])return void e();var i={crossOrigin:t.crossOrigin,loadType:o.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t},s=r(t,this.baseUrl);this.add(n,s,i,function(n){var i=new u.Spritesheet(n.texture.baseTexture,t.data,t.url);i.parse(function(){t.spritesheet=i,t.textures=i.textures,e()})})}},n.getResourcePath=r;var o=t("resource-loader"),s=t("url"),a=i(s),u=t("../core")},{"../core":67,"resource-loader":36,url:38}],203:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.default=function(){return function(t,e){t.data&&t.type===r.Resource.TYPE.IMAGE&&(t.texture=s.default.fromLoader(t.data,t.url,t.name)),e()}};var r=t("resource-loader"),o=t("../core/textures/Texture"),s=i(o)},{"../core/textures/Texture":144,"resource-loader":36}],204:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("./RawMesh"),h=r(l),c=t("./geometry/Geometry"),f=r(c),d=t("../core"),p=i(d),m=(t("path"),void 0),v=function(t){function e(n,i,r,a,u){o(this,e);var l=new f.default;m||(m=new p.Program("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler2;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler2, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n")),l.addAttribute("aVertexPosition",i).addAttribute("aTextureCoord",r).addIndex(a),l.getAttribute("aVertexPosition").static=!1;var h={uSampler2:n,alpha:1,tint:new Float32Array([1,1,1])},c=s(this,t.call(this,l,new p.Shader(m,h),null,u));return c.uvs=l.getAttribute("aTextureCoord").data,c.vertices=l.getAttribute("aVertexPosition").data,c.uniforms=h,c.texture=n,c._tint=16777215,c.tint=16777215,c.blendMode=p.BLEND_MODES.NORMAL,c}return a(e,t),e.prototype._onTextureUpdate=function(){},u(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,p.utils.hex2rgb(this._tint,this.uniforms.tint)}},{key:"blendMode",get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.uniforms.uSampler2=this.texture,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(h.default);n.default=v},{"../core":67,"./RawMesh":207,"./geometry/Geometry":212,path:9}],205:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("./Plane"),l=i(u),h=10,c=function(t){function e(n,i,s,a,u){r(this,e);var l=o(this,t.call(this,n,4,4)),c=l.uvs;return c[6]=c[14]=c[22]=c[30]=1,c[25]=c[27]=c[29]=c[31]=1,l._origWidth=n.orig.width,l._origHeight=n.orig.height,l._uvw=1/l._origWidth,l._uvh=1/l._origHeight,l.width=l._origWidth,l.height=l._origHeight,c[2]=c[10]=c[18]=c[26]=l._uvw*i,c[4]=c[12]=c[20]=c[28]=1-l._uvw*a,c[9]=c[11]=c[13]=c[15]=l._uvh*s,c[17]=c[19]=c[21]=c[23]=1-l._uvh*u,l.leftWidth="undefined"!=typeof i?i:h,l.rightWidth="undefined"!=typeof a?a:h,l.topHeight="undefined"!=typeof s?s:h,l.bottomHeight="undefined"!=typeof u?u:h,l.refresh(!0),l}return s(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha;var n=this.worldTransform,i=t.resolution;t.roundPixels?e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i);var r=this._texture.baseTexture,o=r.source,s=r.width,a=r.height;this.drawSegment(e,o,s,a,0,1,10,11),this.drawSegment(e,o,s,a,2,3,12,13),this.drawSegment(e,o,s,a,4,5,14,15),this.drawSegment(e,o,s,a,8,9,18,19),this.drawSegment(e,o,s,a,10,11,20,21),this.drawSegment(e,o,s,a,12,13,22,23),this.drawSegment(e,o,s,a,16,17,26,27),this.drawSegment(e,o,s,a,18,19,28,29),this.drawSegment(e,o,s,a,20,21,30,31)},e.prototype.drawSegment=function(t,e,n,i,r,o,s,a){var u=this.uvs,l=this.vertices,h=(u[s]-u[r])*n,c=(u[a]-u[o])*i,f=l[s]-l[r],d=l[a]-l[o];h<1&&(h=1),c<1&&(c=1),f<1&&(f=1),d<1&&(d=1),t.drawImage(e,u[r]*n,u[o]*i,h,c,l[r],l[o],f,d)},a(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this.updateVerticalVertices()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this.updateHorizontalVertices()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t;var e=this.uvs,n=this.vertices;e[2]=e[10]=e[18]=e[26]=this._uvw*t,n[2]=n[10]=n[18]=n[26]=t,this.dirty=!0}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t;var e=this.uvs,n=this.vertices;e[4]=e[12]=e[20]=e[28]=1-this._uvw*t,n[4]=n[12]=n[20]=n[28]=this._width-t,this.dirty=!0}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t;var e=this.uvs,n=this.vertices;e[9]=e[11]=e[13]=e[15]=this._uvh*t,n[9]=n[11]=n[13]=n[15]=t,this.dirty=!0}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t;var e=this.uvs,n=this.vertices;e[17]=e[19]=e[21]=e[23]=1-this._uvh*t,n[17]=n[19]=n[21]=n[23]=this._height-t,this.dirty=!0}}]),e}(l.default);n.default=c},{"./Plane":206}],206:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("./Mesh"),u=i(a),l=function(t){function e(n,i,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r(this,e);var u=o(this,t.call(this,n,new Float32Array(1),new Float32Array(1),new Uint16Array(1),4));return u.segmentsX=u.verticesX=i||10,u.segmentsY=u.verticesY=s||10,u.meshWidth=a.meshWidth||n.width,u.meshHeight=a.meshHeight||n.height,u.refresh(),u}return s(e,t),e.prototype.refresh=function(){for(var t=this.verticesX*this.verticesY,e=[],n=[],i=[],r=this.texture,o=this.verticesX-1,s=this.verticesY-1,a=this.meshWidth/o,u=this.meshHeight/s,l=0;l<t;l++)if(r._uvs){var h=l%this.verticesX,c=l/this.verticesX|0;e.push(h*a,c*u),n.push(r._uvs.x0+(r._uvs.x1-r._uvs.x0)*(h/(this.verticesX-1)),r._uvs.y0+(r._uvs.y3-r._uvs.y0)*(c/(this.verticesY-1)))}else n.push(0);for(var f=o*s,d=0;d<f;d++){var p=d%o,m=d/o|0,v=m*this.verticesX+p,y=m*this.verticesX+p+1,_=(m+1)*this.verticesX+p,g=(m+1)*this.verticesX+p+1;i.push(v,y,_),i.push(y,g,_)}this.shader.uniforms.alpha=1,this.shader.uniforms.uSampler2=this.texture,this.vertices=new Float32Array(e),this.uvs=new Float32Array(n),this.indices=new Uint16Array(i),this.geometry.buffers[0].data=this.vertices,this.geometry.buffers[1].data=this.uvs,this.geometry.indexBuffer.data=this.indices,this.geometry.buffers[0].update(),this.geometry.buffers[1].update(),this.geometry.indexBuffer.update()},e.prototype.updateTransform=function(){this.geometry.buffers[0].update(),this.containerUpdateTransform()},e}(u.default);n.default=l},{"./Mesh":204}],207:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../core"),u=i(a),l=new u.Point,h=new u.Polygon,c=function(t){function e(n,i,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.DRAW_MODES.TRIANGLES;r(this,e);var l=o(this,t.call(this));return l.geometry=n,l.shader=i,l.state=s||new u.State,l.drawMode=a,l._glDatas={},l.pluginName="mesh",l.start=0,l.size=0,l}return s(e,t),e.prototype._renderWebGL=function(t){t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){if(this.geometry.attributes.aVertexPosition){var t=this.geometry.getAttribute("aVertexPosition").data;this._bounds.addVertices(this.transform,t,0,t.length)}},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,l);for(var e=this.geometry.getAttribute("aVertexPosition").data,n=h.points,i=this.geometry.getIndex().data,r=i.length,o=4===this.drawMode?3:1,s=0;s+2<r;s+=o){var a=2*i[s],u=2*i[s+1],c=2*i[s+2];if(n[0]=e[a],n[1]=e[a+1],n[2]=e[u],n[3]=e[u+1],n[4]=e[c],n[5]=e[c+1],h.contains(l.x,l.y))return!0}return!1},e}(u.Container);n.default=c},{"../core":67}],208:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var u=t("./Mesh"),l=r(u),h=t("../core"),c=i(h),f=function(t){function e(n,i){o(this,e);var r=s(this,t.call(this,n,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(2*i.length),5));return r.points=i,r.refresh(),r}return a(e,t),e.prototype.refresh=function(){var t=this.points;if(t){var e=this.geometry.getAttribute("aVertexPosition"),n=this.geometry.getAttribute("aTextureCoord"),i=this.geometry.getIndex();if(!(t.length<1)&&this.texture._uvs){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),i.data=new Uint16Array(2*t.length));var r=n.data,o=i.data,s=this.texture._uvs,a=new c.Point(s.x0,s.y0),u=new c.Point(s.x2-s.x0,Number(s.y2-s.y0));r[0]=0+a.x,r[1]=0+a.y,r[2]=0+a.x,r[3]=u.y+a.y,o[0]=0,o[1]=1;for(var l=t.length,h=1;h<l;h++){var f=4*h,d=h/(l-1);r[f]=d*u.x+a.x,r[f+1]=0+a.y,r[f+2]=d*u.x+a.x,r[f+3]=u.y+a.y,f=2*h,o[f]=f,o[f+1]=f+1}e.update(),n.update(),i.update()}}},e.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e=t[0],n=void 0,i=0,r=0,o=this.geometry.getAttribute("aVertexPosition"),s=o.data,a=t.length,u=0;u<a;u++){var l=t[u],h=4*u;n=u<t.length-1?t[u+1]:l,r=-(n.x-e.x),i=n.y-e.y;var c=10*(1-u/(a-1));c>1&&(c=1);var f=Math.sqrt(i*i+r*r),d=this.texture.height/2;i/=f,r/=f,i*=d,r*=d,s[h]=l.x+i,s[h+1]=l.y+r,s[h+2]=l.x-i,s[h+3]=l.y-r,e=l}o.update(),this.uniforms.alpha=this.worldAlpha,this.containerUpdateTransform()}},e.prototype._onTextureUpdate=function(){this.refresh()},e}(l.default);n.default=f},{"../core":67,"./Mesh":204}],209:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../../core"),s=i(o),a=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,n=e.context,i=t.worldTransform,r=e.resolution;e.roundPixels?n.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):n.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r),e.setBlendMode(t.blendMode),t.drawMode!==s.DRAW_MODES.TRIANGLES?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.geometry.buffers[0].data.length,n=0;n<e-2;n++){var i=2*n;this._renderDrawTriangle(t,i,i+2,i+4)}},t.prototype._renderTriangles=function(t){for(var e=t.geometry.getIndex().data,n=e.length,i=0;i<n;i+=3){var r=2*e[i],o=2*e[i+1],s=2*e[i+2];this._renderDrawTriangle(t,r,o,s)}},t.prototype._renderDrawTriangle=function(t,e,n,i){var r=this.renderer.context,o=t.geometry.buffers[0].data,s=t.geometry.buffers[1].data,a=t._texture;if(a.valid){var u=a.baseTexture,l=u.source,h=u.width,c=u.height,f=void 0,d=void 0,p=void 0,m=void 0,v=void 0,y=void 0;if(t.uploadUvTransform){var _=t._uvTransform.mapCoord;f=(s[e]*_.a+s[e+1]*_.c+_.tx)*u.width,d=(s[n]*_.a+s[n+1]*_.c+_.tx)*u.width,p=(s[i]*_.a+s[i+1]*_.c+_.tx)*u.width,m=(s[e]*_.b+s[e+1]*_.d+_.ty)*u.height,v=(s[n]*_.b+s[n+1]*_.d+_.ty)*u.height,y=(s[i]*_.b+s[i+1]*_.d+_.ty)*u.height}else f=s[e]*u.width,d=s[n]*u.width,p=s[i]*u.width,m=s[e+1]*u.height,v=s[n+1]*u.height,y=s[i+1]*u.height;var g=o[e],b=o[n],x=o[i],w=o[e+1],T=o[n+1],S=o[i+1];if(t.canvasPadding>0){var M=t.canvasPadding/t.worldTransform.a,E=t.canvasPadding/t.worldTransform.d,P=(g+b+x)/3,O=(w+T+S)/3,A=g-P,C=w-O,I=Math.sqrt(A*A+C*C);g=P+A/I*(I+M),w=O+C/I*(I+E),A=b-P,C=T-O,I=Math.sqrt(A*A+C*C),b=P+A/I*(I+M),T=O+C/I*(I+E),A=x-P,C=S-O,I=Math.sqrt(A*A+C*C),x=P+A/I*(I+M),S=O+C/I*(I+E)}r.save(),r.beginPath(),r.moveTo(g,w),r.lineTo(b,T),r.lineTo(x,S),r.closePath(),r.clip();var R=f*v+m*p+d*y-v*p-m*d-f*y,D=g*v+m*x+b*y-v*x-m*b-g*y,k=f*b+g*p+d*x-b*p-g*d-f*x,L=f*v*x+m*b*p+g*d*y-g*v*p-m*d*x-f*b*y,F=w*v+m*S+T*y-v*S-m*T-w*y,j=f*T+w*p+d*S-T*p-w*d-f*S,B=f*v*S+m*T*p+w*d*y-w*v*p-m*d*S-f*T*y;r.transform(D/R,F/R,k/R,j/R,L/R,B/R),r.drawImage(l,0,0,h*u.resolution,c*u.resolution,0,0,h,c),r.restore()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,n=t.geometry.getAttribute("aVertexPosition").data,i=n.length/2;e.beginPath();for(var r=1;r<i-2;++r){var o=2*r,s=n[o],a=n[o+1],u=n[o+2],l=n[o+3],h=n[o+4],c=n[o+5];e.moveTo(s,a),e.lineTo(u,l),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();n.default=a,s.CanvasRenderer.registerPlugin("mesh",a)},{"../../core":67}],210:[function(t,e,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],211:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=0,o=function(){function t(e){i(this,t),this.data=e,this._glBuffers=[],this._updateID=0,this.index=!1,this.static=!0,this.id=r++}return t.prototype.update=function(){this._updateID++},t.prototype.destroy=function(){for(var t=0;t<this._glBuffers.length;t++)this._glBuffers[t].destroy();this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();n.default=o},{}],212:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("./Attribute"),s=i(o),a=t("./Buffer"),u=i(a),l=t("../../core/utils/interleaveTypedArrays"),h=i(l),c=t("../../core/utils/getBufferType"),f=i(c),d={5126:4,5123:2,5121:1},p=0,m={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint16Array:Uint16Array},v=function(){function t(e,n){r(this,t),this.buffers=e||[],this.indexBuffer=null,this.attributes=n||{},this.glVertexArrayObjects=[],this.id=p++}return t.prototype.addAttribute=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4],o=arguments[5],a=arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new u.default(e));var h=t.split("|");if(h.length>1){for(var c=0;c<h.length;c++)this.addAttribute(h[c],e,n,i,r);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new s.default(f,n,i,r,o,a,l),this},t.prototype.getAttribute=function(t){return this.buffers[this.attributes[t].buffer]},t.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new u.default(t)),t.index=!0,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t=[],e=[],n=new u.default,i=void 0;for(i in this.attributes){var r=this.attributes[i],o=this.buffers[r.buffer];t.push(o.data),e.push(r.size*d[r.type]/4),r.buffer=0}for(n.data=(0,h.default)(t,e),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.destroy=function(){for(var t=0;t<this.glVertexArrayObjects.length;t++)this.glVertexArrayObjects[t].destroy();this.glVertexArrayObjects=null;for(var e=0;e<this.buffers.length;e++)this.buffers[e].destroy();this.buffers=null,this.indexBuffer.destroy(),this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new u.default(this.buffers[n].data.slice());for(var i in this.attributes){var r=this.attributes[i];e.attributes[i]=new s.default(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var n=new t,i=[],r=[],o=[],s=void 0,a=0;a<e.length;a++){s=e[a];for(var l=0;l<s.buffers.length;l++)r[l]=r[l]||0,r[l]+=s.buffers[l].data.length,o[l]=0}for(var h=0;h<s.buffers.length;h++)i[h]=new(m[(0,f.default)(s.buffers[h].data)])(r[h]),n.buffers[h]=new u.default(i[h]);for(var c=0;c<e.length;c++){s=e[c];for(var p=0;p<s.buffers.length;p++)i[p].set(s.buffers[p].data,o[p]),o[p]+=s.buffers[p].data.length}if(n.attributes=s.attributes,s.indexBuffer){n.indexBuffer=n.buffers[s.buffers.indexOf(s.indexBuffer)],n.indexBuffer.index=!0;for(var v=0,y=0,_=0,g=0,b=0;b<s.buffers.length;b++)if(s.buffers[b]!==s.indexBuffer){g=b;break}for(var x in s.attributes){var w=s.attributes[x];(0|w.buffer)===g&&(y+=w.size*d[w.type]/4)}for(var T=0;T<e.length;T++){for(var S=e[T].indexBuffer.data,M=0;M<S.length;M++)n.indexBuffer.data[M+_]+=v;v+=s.buffers[g].data.length/y,_+=S.length}}return n},t}();n.default=v},{"../../core/utils/getBufferType":160,"../../core/utils/interleaveTypedArrays":163,"./Attribute":210,"./Buffer":211}],213:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("./Mesh");Object.defineProperty(n,"Mesh",{enumerable:!0,get:function(){return i(r).default}});var o=t("./RawMesh");Object.defineProperty(n,"RawMesh",{enumerable:!0,get:function(){return i(o).default}});var s=t("./webgl/MeshRenderer");Object.defineProperty(n,"MeshRenderer",{enumerable:!0,get:function(){return i(s).default}});var a=t("./canvas/CanvasMeshRenderer");Object.defineProperty(n,"CanvasMeshRenderer",{enumerable:!0,get:function(){return i(a).default}});var u=t("./geometry/Attribute");Object.defineProperty(n,"Attribute",{enumerable:!0,get:function(){return i(u).default}});var l=t("./geometry/Buffer");Object.defineProperty(n,"Buffer",{enumerable:!0,get:function(){return i(l).default}});var h=t("./geometry/Geometry");Object.defineProperty(n,"Geometry",{enumerable:!0,get:function(){return i(h).default}});var c=t("./Plane");Object.defineProperty(n,"Plane",{enumerable:!0,get:function(){return i(c).default}});var f=t("./NineSlicePlane");Object.defineProperty(n,"NineSlicePlane",{enumerable:!0,get:function(){return i(f).default}});var d=t("./Rope");Object.defineProperty(n,"Rope",{enumerable:!0,get:function(){return i(d).default}})},{"./Mesh":204,"./NineSlicePlane":205,"./Plane":206,"./RawMesh":207,"./Rope":208,"./canvas/CanvasMeshRenderer":209,"./geometry/Attribute":210,"./geometry/Buffer":211,"./geometry/Geometry":212,"./webgl/MeshRenderer":214}],214:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../../core"),u=i(a),l=(u.Matrix.IDENTITY,function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.shader=null,i}return s(e,t),e.prototype.contextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.render=function(t){var e=this.renderer.shader.bind(t.shader,!0);this.renderer.shader.syncUniformGroup(t.shader.uniformGroup),this.renderer.state.setState(t.state),this.renderer.geometry.bind(t.geometry,e),t.geometry.glVertexArrayObjects[this.CONTEXT_UID].draw(t.drawMode,t.size,t.start,t.geometry.instanceCount)},e.prototype.draw=function(t){t.geometry.glVertexArrayObjects[this.CONTEXT_UID].draw(t.drawMode,t.size,t.start,t.geometry.instanceCount)},e}(u.ObjectRenderer));n.default=l,u.WebGLRenderer.registerPlugin("mesh",l)},{"../../core":67}],215:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=t("../core"),u=i(a),l=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,i=arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;r(this,e);var a=o(this,t.call(this)),l=16384;return s>l&&(s=l),s>n&&(s=n),a._properties=[!1,!0,!1,!1,!1],a._maxSize=n,a._batchSize=s,a._glBuffers={},a._bufferToUpdate=0,a.interactiveChildren=!1,a.blendMode=u.BLEND_MODES.NORMAL,a.roundPixels=!0,a.baseTexture=null,a.setProperties(i),a}return s(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,i=!0,r=0,o=0,s=0,a=0,u=t.blendModes[this.blendMode];u!==e.globalCompositeOperation&&(e.globalCompositeOperation=u),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var c=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)===0)i&&(e.setTransform(n.a,n.b,n.c,n.d,n.tx*t.resolution,n.ty*t.resolution),i=!1),r=h.anchor.x*(-c.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-c.height*h.scale.y)+h.position.y+.5,s=c.width*h.scale.x,a=c.height*h.scale.y;else{i||(i=!0),h.displayObjectUpdateTransform();var f=h.worldTransform;t.roundPixels?e.setTransform(f.a,f.b,f.c,f.d,f.tx*t.resolution|0,f.ty*t.resolution|0):e.setTransform(f.a,f.b,f.c,f.d,f.tx*t.resolution,f.ty*t.resolution),r=h.anchor.x*-c.width+.5,
o=h.anchor.y*-c.height+.5,s=c.width,a=c.height}var d=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.source,c.x*d,c.y*d,c.width*d,c.height*d,r*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var n=0;n<this._buffers.length;++n)this._buffers[n].destroy();this._properties=null,this._buffers=null},e}(u.Container);n.default=l},{"../core":67}],216:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("./ParticleContainer");Object.defineProperty(n,"ParticleContainer",{enumerable:!0,get:function(){return i(r).default}});var o=t("./webgl/ParticleRenderer");Object.defineProperty(n,"ParticleRenderer",{enumerable:!0,get:function(){return i(o).default}})},{"./ParticleContainer":215,"./webgl/ParticleRenderer":218}],217:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=t("../../core/renderers/webgl/systems/geometry/GLBuffer"),s=i(o),a=t("../../core/renderers/webgl/systems/geometry/VertexArrayObject"),u=i(a),l=t("../../core/utils/createIndicesForQuads"),h=i(l),c=function(){function t(e,n,i,o){r(this,t),this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<n.length;++s){var a=n[s];a={attribute:a.attribute,size:a.size,uploadFunction:a.uploadFunction,offset:a.offset},i[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,h.default)(this.size),this.indexBuffer=s.default.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=e,e+=i.size,this.dynamicStride+=i.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=s.default.createVertexBuffer(t,this.dynamicData,t.STREAM_DRAW);var r=0;this.staticStride=0;for(var o=0;o<this.staticProperties.length;++o){var a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=s.default.createVertexBuffer(t,this.staticData,t.STATIC_DRAW),this.vao=new u.default(t).addIndex(this.indexBuffer);for(var l=0;l<this.dynamicProperties.length;++l){var c=this.dynamicProperties[l];this.vao.addAttribute(this.dynamicBuffer,c.attribute,t.FLOAT,!1,4*this.dynamicStride,4*c.offset)}for(var f=0;f<this.staticProperties.length;++f){var d=this.staticProperties[f];this.vao.addAttribute(this.staticBuffer,d.attribute,t.FLOAT,!1,4*this.staticStride,4*d.offset)}},t.prototype.uploadDynamic=function(t,e,n){for(var i=0;i<this.dynamicProperties.length;i++){var r=this.dynamicProperties[i];r.uploadFunction(t,e,n,this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,n){for(var i=0;i<this.staticProperties.length;i++){var r=this.staticProperties[i];r.uploadFunction(t,e,n,this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},t}();n.default=c},{"../../core/renderers/webgl/systems/geometry/GLBuffer":99,"../../core/renderers/webgl/systems/geometry/VertexArrayObject":101,"../../core/utils/createIndicesForQuads":158}],218:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var u=t("../../core"),l=r(u),h=t("./ParticleShader"),c=i(h),f=t("./ParticleBuffer"),d=i(f),p=function(t){function e(n){o(this,e);var i=s(this,t.call(this,n));return i.shader=null,i.indexBuffer=null,i.properties=null,i.tempMatrix=new l.Matrix,i.CONTEXT_UID=0,i}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new c.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},e.prototype.start=function(){this.renderer._bindGLShader(this.shader)},e.prototype.render=function(t){var e=t.children,n=t._maxSize,i=t._batchSize,r=this.renderer,o=e.length;if(0!==o){o>n&&(o=n);var s=t._glBuffers[r.CONTEXT_UID];s||(s=t._glBuffers[r.CONTEXT_UID]=this.generateBuffers(t)),this.renderer.setBlendMode(t.blendMode);var a=r.gl,u=t.worldTransform.copy(this.tempMatrix);u.prepend(r._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uAlpha=t.worldAlpha;var l=e[0]._texture.baseTexture;this.shader.uniforms.uSampler=r.bindTexture(l);for(var h=0,c=0;h<o;h+=i,c+=1){var f=o-h;f>i&&(f=i);var d=s[c];d.uploadDynamic(e,h,f),t._bufferToUpdate===c&&(d.uploadStatic(e,h,f),t._bufferToUpdate=c+1),r.bindVao(d.vao),d.vao.draw(a.TRIANGLES,6*f)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,n=[],i=t._maxSize,r=t._batchSize,o=t._properties,s=0;s<i;s+=r)n.push(new d.default(e,this.properties,o,r));return n},e.prototype.uploadVertices=function(t,e,n,i,r,o){for(var s=0,a=0,u=0,l=0,h=0;h<n;++h){var c=t[e+h],f=c._texture,d=c.scale.x,p=c.scale.y,m=f.trim,v=f.orig;m?(a=m.x-c.anchor.x*v.width,s=a+m.width,l=m.y-c.anchor.y*v.height,u=l+m.height):(s=v.width*(1-c.anchor.x),a=v.width*-c.anchor.x,u=v.height*(1-c.anchor.y),l=v.height*-c.anchor.y),i[o]=a*d,i[o+1]=l*p,i[o+r]=s*d,i[o+r+1]=l*p,i[o+2*r]=s*d,i[o+2*r+1]=u*p,i[o+3*r]=a*d,i[o+3*r+1]=u*p,o+=4*r}},e.prototype.uploadPosition=function(t,e,n,i,r,o){for(var s=0;s<n;s++){var a=t[e+s].position;i[o]=a.x,i[o+1]=a.y,i[o+r]=a.x,i[o+r+1]=a.y,i[o+2*r]=a.x,i[o+2*r+1]=a.y,i[o+3*r]=a.x,i[o+3*r+1]=a.y,o+=4*r}},e.prototype.uploadRotation=function(t,e,n,i,r,o){for(var s=0;s<n;s++){var a=t[e+s].rotation;i[o]=a,i[o+r]=a,i[o+2*r]=a,i[o+3*r]=a,o+=4*r}},e.prototype.uploadUvs=function(t,e,n,i,r,o){for(var s=0;s<n;++s){var a=t[e+s]._texture._uvs;a?(i[o]=a.x0,i[o+1]=a.y0,i[o+r]=a.x1,i[o+r+1]=a.y1,i[o+2*r]=a.x2,i[o+2*r+1]=a.y2,i[o+3*r]=a.x3,i[o+3*r+1]=a.y3,o+=4*r):(i[o]=0,i[o+1]=0,i[o+r]=0,i[o+r+1]=0,i[o+2*r]=0,i[o+2*r+1]=0,i[o+3*r]=0,i[o+3*r+1]=0,o+=4*r)}},e.prototype.uploadAlpha=function(t,e,n,i,r,o){for(var s=0;s<n;s++){var a=t[e+s].alpha;i[o]=a,i[o+r]=a,i[o+2*r]=a,i[o+3*r]=a,o+=4*r}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(l.ObjectRenderer);n.default=p,l.WebGLRenderer.registerPlugin("particle",p)},{"../../core":67,"./ParticleBuffer":217,"./ParticleShader":219}],219:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var s=t("pixi-gl-core"),a=t("../../core/const"),u=function(t){function e(n){return i(this,e),r(this,t.call(this,n,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),a.PRECISION.DEFAULT))}return o(e,t),e}(s.GLShader);n.default=u},{"../../core/const":45,"pixi-gl-core":16}],220:[function(t,e,n){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},{}],221:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=t("object-assign"),o=i(r);Object.assign||(Object.assign=o.default)},{"object-assign":7}],222:[function(t,e,n){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":220,"./Object.assign":221,"./requestAnimationFrame":223}],223:[function(t,n,i){(function(t){"use strict";var e=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),t.performance&&t.performance.now||!function(){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}();for(var n=Date.now(),i=["ms","moz","webkit","o"],r=0;r<i.length&&!t.requestAnimationFrame;++r){var o=i[r];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var i=Date.now(),r=e+n-i;return r<0&&(r=0),n=i,setTimeout(function(){n=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],224:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof p.Texture){var r=t._textures[i].baseTexture;e.indexOf(r)===-1&&(e.push(r),n=!0)}return n}function a(t,e){return t instanceof p.BaseTexture&&(e.indexOf(t)===-1&&e.push(t),!0)}function u(t,e){if(t._texture&&t._texture instanceof p.Texture){var n=t._texture.baseTexture;return e.indexOf(n)===-1&&e.push(n),!0}return!1}function l(t,e){return e instanceof p.Text&&(e.updateText(!0),!0)}function h(t,e){if(e instanceof p.TextStyle){var n=p.Text.getFontStyle(e);return p.Text.fontPropertiesCache[n]||p.Text.calculateFontProperties(n),!0}return!1}function c(t,e){if(t instanceof p.Text){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var n=t._texture.baseTexture;return e.indexOf(n)===-1&&e.push(n),!0}return!1}function f(t,e){return t instanceof p.TextStyle&&(e.indexOf(t)===-1&&e.push(t),!0)}n.__esModule=!0;var d=t("../core"),p=r(d),m=t("./limiters/CountLimiter"),v=i(m),y=p.ticker.shared;p.settings.UPLOADS_PER_FRAME=4;var _=function(){function t(e){var n=this;o(this,t),this.limiter=new v.default(p.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(c),this.registerFindHook(f),this.registerFindHook(s),this.registerFindHook(a),this.registerFindHook(u),this.registerUploadHook(l),this.registerUploadHook(h)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,y.addOnce(this.tick,this,p.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)y.addOnce(this.tick,this,p.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var o=0,s=r.length;o<s;o++)r[o]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof p.Container)for(var i=t.children.length-1;i>=0;i--)this.add(t.children[i]);return this},t.prototype.destroy=function(){this.ticking&&y.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();n.default=_},{"../core":67,"./limiters/CountLimiter":227}],225:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(e instanceof h.BaseTexture){var n=e.source,i=0===n.width?t.canvas.width:Math.min(t.canvas.width,n.width),r=0===n.height?t.canvas.height:Math.min(t.canvas.height,n.height);return t.ctx.drawImage(n,0,0,i,r,0,0,t.canvas.width,t.canvas.height),!0}return!1}n.__esModule=!0;var l=t("../../core"),h=r(l),c=t("../BasePrepare"),f=i(c),d=16,p=function(t){function e(n){o(this,e);var i=s(this,t.call(this,n));return i.uploadHookHelper=i,i.canvas=document.createElement("canvas"),i.canvas.width=d,i.canvas.height=d,i.ctx=i.canvas.getContext("2d"),i.registerUploadHook(u),i}return a(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(f.default);n.default=p,h.CanvasRenderer.registerPlugin("prepare",p)},{"../../core":67,"../BasePrepare":224}],226:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var r=t("./webgl/WebGLPrepare");Object.defineProperty(n,"webgl",{enumerable:!0,get:function(){return i(r).default}});var o=t("./canvas/CanvasPrepare");Object.defineProperty(n,"canvas",{enumerable:!0,get:function(){return i(o).default}});var s=t("./BasePrepare");Object.defineProperty(n,"BasePrepare",{enumerable:!0,get:function(){return i(s).default}});var a=t("./limiters/CountLimiter");Object.defineProperty(n,"CountLimiter",{enumerable:!0,get:function(){return i(a).default}});var u=t("./limiters/TimeLimiter");Object.defineProperty(n,"TimeLimiter",{enumerable:!0,get:function(){return i(u).default}})},{"./BasePrepare":224,"./canvas/CanvasPrepare":225,"./limiters/CountLimiter":227,"./limiters/TimeLimiter":228,"./webgl/WebGLPrepare":229}],227:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(e){i(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();n.default=r},{}],228:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function t(e){i(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();n.default=r},{}],229:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){return e instanceof f.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function l(t,e){return e instanceof f.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function h(t,e){return t instanceof f.Graphics&&(e.push(t),!0)}n.__esModule=!0;var c=t("../../core"),f=r(c),d=t("../BasePrepare"),p=i(d),m=function(t){function e(n){o(this,e);var i=s(this,t.call(this,n));return i.uploadHookHelper=i.renderer,i.registerFindHook(h),i.registerUploadHook(u),i.registerUploadHook(l),i}return a(e,t),e}(p.default);n.default=m,f.WebGLRenderer.registerPlugin("prepare",m)},{"../../core":67,"../BasePrepare":224}],230:[function(t,n,i){(function(e){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}i.__esModule=!0,i.loader=i.prepare=i.particles=i.mesh=i.loaders=i.interaction=i.filters=i.extras=i.extract=i.accessibility=void 0;var r=t("./polyfill");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return r[t]}})});var o=t("./deprecation");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./core");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return s[t]}})});var a=t("./accessibility"),u=n(a),l=t("./extract"),h=n(l),c=t("./extras"),f=n(c),d=t("./filters"),p=n(d),m=t("./interaction"),v=n(m),y=t("./loaders"),_=n(y),g=t("./mesh"),b=n(g),x=t("./particles"),w=n(x),T=t("./prepare"),S=n(T);s.utils.mixins.performMixins();var M=_.shared||null;i.accessibility=u,i.extract=h,i.extras=f,i.filters=p,i.interaction=v,i.loaders=_,i.mesh=b,i.particles=w,i.prepare=S,i.loader=M,e.PIXI=i}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":42,"./core":67,"./deprecation":168,"./extract":170,"./extras":179,"./filters":190,"./interaction":197,"./loaders":200,"./mesh":213,"./particles":216,"./polyfill":222,"./prepare":226}]},{},[230])(230)})}).call(e,function(){return this}())},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.arora=!1,this.chrome=!1,this.epiphany=!1,this.firefox=!1,this.mobileSafari=!1,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.midori=!1,this.opera=!1,this.safari=!1,this.silk=!1,this.webApp=!1,this.cocoonJS=!1,this.android=!1,this.chromeOS=!1,this.iOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.desktop=!1,this.pixelRatio=0,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.blob=!1,this.canvas=!1,this.localStorage=!1,this.file=!1,this.fileSystem=!1,this.webGL=!1,this.worker=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1;var e=navigator.userAgent;this._checkBrowser(e),this._checkOS(e),this._checkDevice(e),this._checkAudio(),this._checkFeatures(),this._checkIsMobile(),this._checkIsTouch()}return i(t,[{key:"_checkBrowser",value:function(t){/Arora/.test(t)?this.arora=!0:/Opera|OPR|op/.test(t)?(this.opera=!0,this.chrome=!1):/Chrome/.test(t)?this.chrome=!0:/Epiphany/.test(t)?this.epiphany=!0:/Firefox/.test(t)?this.firefox=!0:/Mobile Safari/.test(t)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)||navigator.userAgent.match(/Trident.*rv[ :]*11\./)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(t)?this.midori=!0:/Safari/.test(t)?this.safari=!0:/\bSilk\b/.test(t)?this.silk=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(this.ie=!0,this.trident=!0,this.tridentVersion=parseInt(RegExp.$1,10),this.ieVersion=parseInt(RegExp.$3,10)),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0)}},{key:"_checkOS",value:function(t){if(/Android/.test(t))this.android=!0;else if(/CrOS/.test(t))this.chromeOS=!0;else if(/iP[ao]d|iPhone/i.test(t)){this.iOS=!0;var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);this.iOS_version=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}else/Linux/.test(t)?this.linux=!0:/Mac OS/.test(t)?this.macOS=!0:/Windows/.test(t)&&(this.windows=!0);(this.windows||this.macOS||this.linux||this.chromeOS)&&(this.desktop=!0)}},{key:"_checkDevice",value:function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1,this.iPhone4=2===this.pixelRatio&&this.iPhone,this.iPhone4&&(this.iPhone4=480==window.screen.height&&320==window.screen.width||480==window.screen.width&&320==window.screen.height),this.iPad=navigator.userAgent.toLowerCase().indexOf("ipad")!==-1}},{key:"_checkFeatures",value:function(){"undefined"!=typeof window.Blob&&(this.blob=!0),this.canvas=!!window.CanvasRenderingContext2D;try{this.localStorage=!!localStorage.getItem}catch(t){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return!1}}(),(this.android||this.ie)&&(this.webGL=!1),this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.msPointerEnabled)&&(this.touch=!0)}},{key:"_checkAudio",value:function(){this.audioData=!!window.Audio,this.webaudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!1;try{e==!!t.canPlayType&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0))}catch(t){}}},{key:"_checkIsMobile",value:function(){var t=!1;!function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),this.isMobile=t,this.mobile=t}},{key:"_checkIsTouch",value:function(){this.isTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}},{key:"is_touch_device",value:function(){}},{key:"getInfo",value:function(){var t="DEVICE OUTPUT\n\n";return t+="---\n",t+="Browser Info :: \n",t+="Arora : "+this.arora+"\n",t+="Chrome : "+this.chrome+"\n",t+="Epiphany : "+this.epiphany+"\n",t+="Firefox : "+this.firefox+"\n",t+="Mobile Safari : "+this.mobileSafari+"\n",t+="IE : "+this.ie,t+=this.ie?" (Version "+this.ieVersion+")\n":"\n",t+="Midori : "+this.midori+"\n",t+="Opera : "+this.opera+"\n",t+="Safari : "+this.safari+"\n",t+="Web App : "+this.webApp+"\n",t+="CocoonJS : "+this.cocoonJS+"\n",t+="Android : "+this.android+"\n",t+="---\n",t+="Operating System :: \n",t+="Chrome OS : "+this.chromeOS+"\n",t+="iOS : "+this.iOS+"\n",t+="Linux : "+this.linux+"\n",t+="Mac OS : "+this.macOS+"\n",t+="Windows : "+this.windows+"\n",t+="Desktop : "+this.desktop+"\n",t+="---\n",t+="Device Type : \n",t+="Pixel Ratio : "+this.pixelRatio+"\n",t+="iPhone : "+this.iPhone+"\n",t+="iPhone 4 : "+this.iPhone4+"\n",t+="iPad : "+this.iPad+"\n",t+="---\n",t+="Features :: \n",t+="Blob : "+this.blob+"\n",t+="Canvas : "+this.canvas+"\n",t+="LocalStorage : "+this.localStorage+"\n",t+="File : "+this.file+"\n",t+="File System : "+this.fileSystem+"\n",t+="WebGL : "+this.webGL+"\n",t+="Workers : "+this.worker+"\n",t+="---\n",t+="Audio :: \n",t+="AudioData : "+this.audioData+"\n",t+="WebAudio : "+this.webAudio+"\n",t+="Supports .ogg : "+this.ogg+"\n",t+="Supports Opus : "+this.opus+"\n",t+="Supports .mp3 : "+this.mp3+"\n",t+="Supports .wav : "+this.wav+"\n",t+="Supports .m4a : "+this.m4a+"\n",t+="Supports .webm : "+this.webm}},{key:"ie9",get:function(){return this.ie&&9===this.ieVersion}},{key:"useSM2",get:function(){return this.ie||this.opera}}]),t}();r.instance=new r,e.default=r,t.exports=e.default},function(t,e,n){var i;/** @license
	 * JS Signals <http://millermedeiros.github.com/js-signals/>
	 * Released under the MIT license
	 * Author: Miller Medeiros
	 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
	 */
!function(r){function o(t,e,n,i,r){this._listener=e,this._isOnce=n,this.context=i,this._signal=t,this._priority=r||0}function s(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function a(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){a.prototype.dispatch.apply(t,arguments)}}o.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},a.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,n,i){var r,s=this._indexOfListener(t,n);if(s!==-1){if(r=this._bindings[s],r.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else r=new o(this,t,e,n,i),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===t&&n.context===e)return i;return-1},has:function(t,e){return this._indexOfListener(t,e)!==-1},add:function(t,e,n){return s(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return s(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){s(t,"remove");var n=this._indexOfListener(t,e);return n!==-1&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){e=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(e[i]&&this._shouldPropagate&&e[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var u=a;u.Signal=a,i=function(){return u}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(this)},function(t,e,n){var i;i=function(t,e,i){var r=(n(2),n(54)),o=n(35),s=n(4),a=function t(e,n,i,r){this.UID=t._UID++,this.data=null,this.view=i||null,this.body=r||null,this.signals={},this.name="item"+this.UID,this.world=null,this.canCollide=!0,this.collideWithSelf=!0,this.type=0,this.groups=[],this._TICK=-1,this._gc=!1,this._updatableComponents=[],this._resetableComponents=[],this.registerSignal("onAddedToWorld","onRemovedFromWorld")};a.prototype.registerSignal=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.registerSignal(arguments[n]);else this.signals[t]||(this.signals[t]=new s)},a.prototype.resetSignals=function(){for(var t in this.signals)this.signals[t].removeAll()},a.prototype.updateView=function(t){this.view=t},a.prototype.reset=function(t){this.data=t},a.prototype._reset=function(){for(var t=0;t<this._resetableComponents.length;t++)this._resetableComponents[t].reset()},a.prototype._clean=function(){this.resetSignals()},a.prototype.destroy=function(){this.world&&this.world.remove(this),o.waitNew(this.returnToPool,this)},a.prototype.add=a.prototype.addComponent=function(t,e){e=e||t.id||t.name.toLowerCase();var n=new t(this);return this[e]=n,n.update&&this._updatableComponents.push(n),n.reset&&this._resetableComponents.push(n),this},a.prototype.updateComponents=function(){for(var t=0;t<this._updatableComponents.length;t++)this._updatableComponents[t].update()},a.prototype.returnToPool=function(){this.resetSignals(),r.returnObject(this)},a.prototype.belongsToGroup=function(t){return this.groups.indexOf(t)!==-1},a._UID=0,a.mixin=function(t,e){e.call(t),Object.assign(t,e)},i.exports=a}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="http://localhost:8080/",e(0)}([function(t,e,n){t.exports=n(7)},function(t,e,n){t.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(13),r=n(18),o=n(20),s=Object.defineProperty;e.f=n(1)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),o=i(r),s=n(10),a=i(s),u=function(){function t(){(0,o.default)(this,t),this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,this._idDelayTable=0,this.framerate=60,navigator.userAgent.indexOf("Chrome")>-1,void 0,this._loop()}return(0,a.default)(t,[{key:"addEF",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(new Date).getTime();e=e||[];var r=this._idTable++;return this._enterframeTasks.push({func:t,params:e,time:i,interval:n,id:r}),r}},{key:"removeEF",value:function(t){return this._enterframeTasks=this._enterframeTasks.filter(function(e){return e.id!==t}),-1}},{key:"remove",value:function(t){return this._enterframeTasks=this._enterframeTasks.filter(function(e){return e.id!==t}),this._delayTasks=this._delayTasks.filter(function(e){return e.id!==t}),this._deferTasks=this._deferTasks.filter(function(e){return e.id!==t}),this._nextTasks=this._nextTasks.filter(function(e){return e.id!==t}),this._usurpTask=this._usurpTask.filter(function(e){return e.id!==t}),-1}},{key:"delay",value:function(t,e,n){var i=this._idTable++,r=(new Date).getTime(),o={func:t,params:e,delay:n,time:r,id:i};return this._delayTasks.push(o),i}},{key:"defer",value:function(t,e){var n=this._idTable++,i={func:t,params:e,id:n};this._deferTasks.push(i)}},{key:"next",value:function(t,e){var n=this._idTable++,i={func:t,params:e,id:n};this._nextTasks.push(i)}},{key:"usurp",value:function(t,e){var n=this._idTable++,i={func:t,params:e,id:n};this._usurpTask.push(i)}},{key:"_process",value:function(){var t=0,e=void 0,n=void 0,i=void 0,r=(new Date).getTime();for(t=0;t<this._enterframeTasks.length;t++)e=this._enterframeTasks[t],null!==e&&void 0!==e&&r-e.time>e.interval&&(e.func(e.params),e.time=r);for(;this._highTasks.length>0;)e=this._highTasks.pop(),e.func(e.params);for(t=0;t<this._delayTasks.length;t++)e=this._delayTasks[t],r-e.time>e.delay&&(e.func(e.params),this._delayTasks.splice(t,1));for(r=(new Date).getTime(),n=1e3/this.framerate;this._deferTasks.length>0;){if(e=this._deferTasks.shift(),i=(new Date).getTime(),!(i-r<n)){this._deferTasks.unshift(e);break}e.func(e.params)}for(r=(new Date).getTime(),n=1e3/this.framerate;this._usurpTask.length>0;)e=this._usurpTask.shift(),i=(new Date).getTime(),i-r<n&&e.func(e.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[]}},{key:"_loop",value:function(){var t=this;this._process(),window.requestAnimationFrame(function(){return t._loop()})}}]),t}(),l=new u;e.default=l,t.exports=e.default},function(t,e,n){t.exports={default:n(11),__esModule:!0}},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(8),o=i(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){n(21);var i=n(3).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(2);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(12);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(2),r=n(5).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(5),r=n(3),o=n(14),s=n(17),a="prototype",u=function(t,e,n){var l,h,c,f=t&u.F,d=t&u.G,p=t&u.S,m=t&u.P,v=t&u.B,y=t&u.W,_=d?r:r[e]||(r[e]={}),g=_[a],b=d?i:p?i[e]:(i[e]||{})[a];d&&(n=e);for(l in n)h=!f&&b&&void 0!==b[l],h&&l in _||(c=h?b[l]:n[l],_[l]=d&&"function"!=typeof b[l]?n[l]:v&&h?o(c,i):y&&b[l]==c?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[a]=t[a],e}(c):m&&"function"==typeof c?o(Function.call,c):c,m&&((_.virtual||(_.virtual={}))[l]=c,t&u.R&&g&&!g[l]&&s(g,l,c)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var i=n(6),r=n(19);t.exports=n(1)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(1)&&!n(4)(function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(2);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(16);i(i.S+i.F*!n(1),"Object",{defineProperty:n(6).f})}])})},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function t(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this._item=e,this.x=0,this.y=0,this.z=0};i.id="position",e.default=i,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var n=function(t){return t.world.groups.camera.children[0].camera};e.default=n,t.exports=e.default},function(t,e,n){e.glMatrix=n(15),e.mat2=n(173),e.mat2d=n(174),e.mat3=n(62),e.mat4=n(175),e.quat=n(176),e.vec2=n(177),e.vec3=n(63),e.vec4=n(64)},function(t,e){"use strict";e.__esModule=!0;var n=function(t,e){e[0]=t.x,e[1]=t.y,e[2]=t.z};e.default=n,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(4),a=i(s),u=n(59),l=i(u),h=n(147),c=i(h),f=function(){function t(){r(this,t),this.disabled=!1,this.preload=!0,this.currentSound=null,this.sounds={},this.groups={},this.globalVolume=1,this.isMuted=!1,window.onfocus=this._onFocus.bind(this),this.onMuteToggle=new a.default}return o(t,[{key:"_onFocus",value:function(){this.isMuted?this.mute():this.unmute()}},{key:"addSound",value:function(t,e,n){if(!this.disabled&&!this.sounds[e]){n=n||{};var i=c.default.createSound({src:[t+".mp3",t+".ogg"],loop:n.loop||!1,volume:n.volume||1});n.autoplay&&i.play(),i.realVolume=n.volume||1,this.sounds[e]=i}}},{key:"addSounds",value:function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this.addSound(e+i,i)}}},{key:"addGroup",value:function(t,e){if(!this.disabled&&!this.groups[e]){var n={index:0,type:0,sounds:t};this.groups[e]=n}}},{key:"getSoundAtId",value:function(t){return this.sounds[t]}},{key:"getSound",value:function(){return this.currentSound}},{key:"play",value:function(t,e){return this.disabled||!this.sounds[t]?void!this.sounds[t]:(void 0!==e&&(this.sounds[t].volume=e),this.sounds[t].play(),this.currentSound=this.sounds[t],this.currentSound)}},{key:"fadeTo",value:function(t,e,n){if("undefined"==typeof n&&(n=2.5),"undefined"!=typeof e){var i=this.sounds[t];i.fade(e,n)}}},{key:"actuallyChangeVolume",value:function(t,e){this.setVolume(e,t.target._volume)}},{key:"stopAndReset",value:function(t){this.stop(t),this.setVolume(t,1),this.stop(t)}},{key:"isPlaying",value:function(t){if(!this.disabled)return!this.sounds[t]._audioNode[0].paused}},{key:"playGroup",value:function(t){if(!this.disabled&&this.groups[t]){var e=this.groups[t],n=Math.random()*e.sounds.length|0;this.sounds[e.sounds[n]].play(),this.currentSound=this.sounds[e.sounds[n]]}}},{key:"setVolume",value:function(t,e){if(!this.disabled){var n=this.sounds[t];n.realVolume=e,n.volume=e*this.globalVolume}}},{key:"stop",value:function(t){!this.disabled&&this.sounds[t]&&this.sounds[t].stop()}},{key:"stopAll",value:function(){if(!this.disabled)for(var t in this.sounds)this.sounds[t].stop()}},{key:"setPlaybackSpeed",value:function(t,e){if(!this.disabled){var n=this.sounds[t];n._playbackSpeed=e}}},{key:"getPlaybackSpeed",value:function(t){if(!this.disabled){var e=this.sounds[t];return e._playbackSpeed||1}}},{key:"setGlobalVolume",value:function(t){this.globalVolume=t;for(var e in this.sounds){var n=this.sounds[e];n.volume(n.realVolume*t)}}},{key:"mute",value:function(){this.isMuted=!0,c.default.mute(),this.onMuteToggle.dispatch(!0)}},{key:"unmute",value:function(){this.isMuted=!1,c.default.unMute(),this.onMuteToggle.dispatch(!1)}},{key:"check",value:function(){this.lastSeen=Date.now();var t=function t(){setTimeout(t,50)};t();var e=document.getElementById("music");e.addEventListener("timeupdate",function(){Date.now()-this.lastSeen>100&&this.pause()},!1)}}]),t}();f.sfx=new f,f.music=new f,l.default.onHide.add(function(){c.default.mute(!0)},c.default),l.default.onShow.add(function(){f.sfx.isMuted||c.default.unMute(!1)}),e.default=f,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(1),s=i(o),a=function(){function t(e){r(this,t),this._item=e,this._hasRemoved=!1}return t.prototype.update=function(){this._item.position&&(s.default.direction>0?this._item.position.z>s.default.tunnelDepth&&!this._hasRemoved&&(this._item.world&&(this._item.preRemove&&this._item.preRemove(),this._item.world.remove(this._item)),this._hasRemoved=!0):this._item.position.z<-s.default.tunnelDepth&&!this._hasRemoved&&(this._item.world&&(this._item.preRemove&&this._item.preRemove(),this._item.world.remove(this._item)),this._hasRemoved=!0))},t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(4),a=i(s),u=function(){function t(){r(this,t),this.onUpdate=new a.default,this.updateBind=this.update.bind(this),this.active=!1,this.deltaTime=1,this.timeElapsed=0,this.lastTime=0,this.speed=1}return o(t,[{key:"start",value:function(){this.active||(this.active=!0,requestAnimationFrame(this.updateBind))}},{key:"stop",value:function(){this.active&&(this.active=!1)}},{key:"update",value:function(){if(this.active){requestAnimationFrame(this.updateBind);var t=(new Date).getTime(),e=t-this.lastTime;e>100&&(e=100),this.deltaTime=.06*e,this.deltaTime*=this.speed,this.onUpdate.dispatch(this.deltaTime),this.lastTime=t}}},{key:"add",value:function(t,e){this.onUpdate.add(t,e)}},{key:"remove",value:function(t,e){this.onUpdate.remove(t,e)}}]),t}();u.instance=new u,u.game=new u,e.default=u,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var n={};n.sphere=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=(arguments[2],[]),i=[],r=[],o=0,s=function(n,i){var r=-n/e*Math.PI*2,o=Math.PI/2-i/e*Math.PI,s=Math.sin(o)*t,a=Math.cos(o)*t,u=Math.cos(r)*a,l=Math.sin(r)*a;return[u,s,l]},a=0;a<e;a++)for(var u=0;u<e;u++)n=n.concat(s(a,u)),n=n.concat(s(a+1,u)),n=n.concat(s(a+1,u+1)),n=n.concat(s(a,u+1)),i=i.concat([a/e,u/e]),i=i.concat([(a+1)/e,u/e]),i=i.concat([(a+1)/e,(u+1)/e]),i=i.concat([a/e,(u+1)/e]),r.push(4*o+0),r.push(4*o+1),r.push(4*o+2),r.push(4*o+0),r.push(4*o+2),r.push(4*o+3),o++;var l=(new PIXI.mesh.Geometry).addAttribute("aVertexPosition",n,3).addAttribute("aTextureCoord",i,2).addIndex(r);return l},n.plane=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xy",[]),r=[],o=[],s=0,a=-t/2,u=e/2,l=function(i,r){var o=i/n*t+a,s=-r/n*e+u;return[o,s,0]},h=0;h<n;h++)for(var c=0;c<n;c++)i=i.concat(l(h,c)),i=i.concat(l(h+1,c)),i=i.concat(l(h+1,c+1)),i=i.concat(l(h,c+1)),r=r.concat([h/n,c/n]),r=r.concat([(h+1)/n,c/n]),r=r.concat([(h+1)/n,(c+1)/n]),r=r.concat([h/n,(c+1)/n]),o.push(4*s+0),o.push(4*s+1),o.push(4*s+2),o.push(4*s+0),o.push(4*s+2),o.push(4*s+3),s++;var f=(new PIXI.mesh.Geometry).addAttribute("aVertexPosition",i,3).addAttribute("aTextureCoord",r,2).addIndex(o);return f},e.default=n,t.exports=e.default},function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var i=Math.PI/180;n.toRadian=function(t){return t*i},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(1),s=i(o),a=n(66),u=i(a),l=function(){function t(e){r(this,t),this._item=e,this.x=0,this.y=0,s.default.simplex||(s.default.simplex=new u.default)}return t.prototype.update=function(){var t=s.default.simplex,e=s.default.noiseScale,n=s.default.noiseRange,i=this._item.position,r=(i.x,i.y,i.z);this.x=t.noise2D(r*e,s.default.time)*n,this.y=t.noise2D(s.default.time,r*e)*n},t}();l.id="perlinpositionoffset",e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(1),s=i(o),a=function(){function t(e){r(this,t),this._item=e,this.value=0,this.invertible=!0}return t.prototype.update=function(){this._item.position&&(this.invertible?this._item.position.z+=this.value*s.default.objectSpeed*s.default.direction:this._item.position.z+=this.value*s.default.objectSpeed)},t}();a.id="velocity",e.default=a,t.exports=e.default},function(t,e,n){var i;i=function(t,e,n){var i=function t(e,n){this.x=e||0,this.y=n||0,this.id=t._UID++};i._UID=0,i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.plus=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.invert=function(t){return this.x*=-1,this.y*=-1,this},i.prototype.multiply=i.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},i.prototype.divideScalar=function(t){if(0===t)this.x=0,this.y=0;else{var e=1/t;this.x*=e,this.y*=e}return this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.length=function(t){return Math.sqrt(this.x*this.x+this.y*this.y)},i.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},i.prototype.normalize=function(){return this.divideScalar(this.length())},i.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSq(t))},i.prototype.distanceToSq=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},i.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},i.prototype.setX=function(t){return this.x=t,this},i.prototype.setY=function(t){return this.y=t,this},i.prototype.setLength=function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},i.prototype.invert=function(t){return this.x*=-1,this.y*=-1,this},i.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},i.prototype.rad=function(){return Math.atan2(this.x,this.y)},i.prototype.deg=function(){return 180*this.rad()/Math.PI},i.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},i.prototype.rotate=function(t){var e=this.x;return this.x=this.x*Math.cos(t)-this.y*Math.sin(t),this.y=e*Math.sin(t)+this.y*Math.cos(t),this},i.projectPoint=function(t,e){var n=new i(0,0),r=i.project(t.clone().minus(n),e);return r.clone().plus(n)},i.project=function(t,e){var n=new i(0,0),r=t.dot(e);return n.x=r/(e.x*e.x+e.y*e.y)*e.x,n.y=r/(e.x*e.x+e.y*e.y)*e.y,n},i.prototype.constructor=i,n.exports=i}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this._json={},this._text={}}return i(t,[{key:"addJson",value:function(t,e){this._json[e]=t}},{key:"addText",value:function(t,e){this._text[e]=t}},{key:"get",value:function(t){return this.getJson(t)||this.getText(t)}},{key:"getJson",value:function(t){return this._json[t]?this._json[t]:null}},{key:"getText",value:function(t){if(this._text[t])return this._text[t]}}]),t}();e.default=new r,t.exports=e.default},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(4),u=r(a),l=n(3),h=r(l),c=n(2),f=i(c),d=function(){function t(e){o(this,t),this.view=e,this.onPress=new u.default,this.onDown=new u.default,this.onUp=new u.default,this.onHover=new u.default,this.onOut=new u.default,e.mousedown=e.touchstart=this.onDown.dispatch.bind(this,this),e.mouseup=e.mouseupoutside=e.touchend=e.touchendoutside=this.onUp.dispatch.bind(this,this),e.click=e.tap=this.onPress.dispatch.bind(this,this),e.mouseover=this.onHover.dispatch.bind(this,this),e.mouseout=this.onOut.dispatch.bind(this,this),this.onDown.add(this.down,this),this.onUp.add(this.up,this),h.default.instance.desktop&&this.onHover.add(this.hover,this),h.default.instance.desktop&&this.onOut.add(this.out,this),this._scale=new f.Point,this.enable()}return s(t,[{key:"setSize",value:function(t){switch(t){case"small":this.view.scale.set(.5);break;case"big":this.view.scale.set(2);break;default:this.view.scale.set(1)}}},{key:"enable",value:function(){this.view.interactive=!0,this.view.buttonMode=!0}},{key:"disable",value:function(){this.view.interactive=!1,this.view.buttonMode=!1}},{key:"down",value:function(){}},{key:"up",value:function(){}},{key:"hover",value:function(){}},{key:"out",value:function(){}},{key:"show",value:function(){this.view.visible=!0,this.enable()}},{key:"hide",value:function(){this.disable(),this.view.visible=!1}}]),t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var o=n(2),s=(r(o),n(60)),a=i(s),u=n(76),l=i(u),h={primary:function(t,e){var n=new a.default({textures:{normal:"bg_primary_up.png",down:"bg_primary_over.png",hover:"bg_primary_over.png",icon:t?t:null},sounds:{down:"yolo"}});return n.setSize(.7),n.view.accessibleTitle=e,n},primaryMedium:function(t,e){var n=new a.default({textures:{normal:"bg_primary_up.png",down:"bg_primary_over.png",hover:"bg_primary_over.png",icon:t?t:null},sounds:{down:"yolo"}});return n.setSize(1.2),n.view.accessibleTitle=e,n},big:function(t,e){var n=new a.default({textures:{normal:"bg_large_up.png",down:"bg_large_over.png",hover:"bg_large_over.png",icon:t?t:null},sounds:{down:"yolo"}});return n.setSize(1.5),n.view.accessibleTitle=e,n},primaryBig:function(t,e){var n=new a.default({textures:{normal:"bg_primary_up.png",down:"bg_primary_over.png",hover:"bg_primary_over.png",icon:t?t:null},sounds:{down:"yolo"}});return n.setSize(1.5),n.view.accessibleTitle=e,n},secondary:function(t,e){var n=new a.default({textures:{normal:"bg_primary_up.png",down:"bg_primary_over.png",hover:"bg_primary_over.png",icon:t?t:null},sounds:{down:"yolo"}});return n.setSize(.7),n.view.accessibleTitle=e,n},tertiary:function(t,e){var n=new a.default({textures:{normal:"bg_secondary_up.png",down:"bg_secondary_over.png",hover:"bg_secondary_over.png",icon:t?t:null},sounds:{down:"yolo"}});return n.setSize(.7),n.view.accessibleTitle=e,n.offsetDown=0,n},primaryRect:function(t,e,n){var i=new l.default({textures:{normal:"bg_rect_primary_up.png",down:"bg_rect_primary_over.png",hover:"bg_rect_primary_over.png",icon:e?e:null},sounds:{down:"yolo"}},t);return i.setSize(.7),i.view.accessibleTitle=n,i},primaryRectInversed:function(t,e,n){var i=new l.default({textures:{normal:"bg_rect_primary_up.png",down:"bg_rect_primary_over.png",hover:"bg_rect_primary_over.png",icon:e?e:null},sounds:{down:"yolo"}},t,!0);return i.setSize(.7),i.view.accessibleTitle=n,i},secondaryRect:function(t,e,n){var i=new l.default({textures:{normal:"bg_rect_secondary_up.png",down:"bg_rect_secondary_over.png",hover:"bg_rect_secondary_over.png",icon:e?e:null},sounds:{down:"yolo"}},t);return i.setSize(.7),i.view.accessibleTitle=n,i},secondaryRectInversed:function(t,e,n){var i=new l.default({textures:{normal:"bg_rect_secondary_up.png",down:"bg_rect_secondary_over.png",hover:"bg_rect_secondary_over.png",icon:e?e:null},sounds:{down:"yolo"}},t,!0);return i.setSize(.7),i.view.accessibleTitle=n,i},close:function(t){var e=new a.default({textures:{normal:"bg_secondary_up.png",down:"bg_secondary_over.png",hover:"bg_secondary_over.png",icon:t?t:null},sounds:{down:"yolo"}});return e.setSize(1),e}};t.exports=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.GEL_TITLE_PADDING_TOP=e.GEL_PADDING_BETWEEN_BUTTON=e.GEL_PADDING_BOTTOM=e.GEL_PADDING_RIGHT=e.GEL_PADDING_LEFT=e.GEL_PADDING_TOP=void 0;var r=n(3),o=i(r);e.GEL_PADDING_TOP=o.default.instance.isMobile?25:30,e.GEL_PADDING_LEFT=o.default.instance.isMobile?25:30,e.GEL_PADDING_RIGHT=o.default.instance.isMobile?25:30,e.GEL_PADDING_BOTTOM=o.default.instance.isMobile?25:40,e.GEL_PADDING_BETWEEN_BUTTON=o.default.instance.isMobile?20:0,e.GEL_TITLE_PADDING_TOP=o.default.instance.isMobile?25:30},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(6),a=i(s),u=n(38),l=void 0,h=function(){function t(){r(this,t),this._textures={},this._assets=u.filter(function(t){return t.indexOf("common")>-1})}return t.prototype.pregenerate=function(){var t=this;this._completeCount=this._assets.length,this._assets.forEach(function(e){a.default.defer(function(){t._generateTexture(e)})})},t.prototype._generateTexture=function(t){if(!this._textures[t]){var e=PIXI.Texture.from(""+ASSET_URL+t);this._textures[t]=e}this._completeCount--},t.prototype.getTexture=function(t){return this._textures[t]},t.prototype.get=function(t){return this._textures[t]},o(t,[{key:"hasComplete",get:function(){return 0===this._completeCount}}]),t}();l||(l=new h),e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=[],i=0;i<t.length;i++)for(var r=0;r<e;r++)n[i*e+r]=t[i][r];return new Float32Array(n)}function o(t){var e=(new PIXI.mesh.Geometry).addAttribute("aTextureCoord",r(t.coords,2),2).addAttribute("aVertexPosition",r(t.positions),3).addAttribute("aNormal",r(t.normals),3).addIndex(new Uint16Array(t.indices));return e}function s(t){function e(t){var e=parseInt(t);return 3*(e>=0?e-1:e+d.length/3)}function n(t){var e=parseInt(t);return 3*(e>=0?e-1:e+p.length/3)}function i(t){var e=parseInt(t);return 2*(e>=0?e-1:e+m.length/2)}function r(t,e,n){h.push([d[t],d[t+1],d[t+2]]),h.push([d[e],d[e+1],d[e+2]]),h.push([d[n],d[n+1],d[n+2]]),v.push(3*y+0),v.push(3*y+1),v.push(3*y+2),y++}function s(t,e,n){c.push([m[t],m[t+1]]),c.push([m[e],m[e+1]]),c.push([m[n],m[n+1]])}function a(t,e,n){f.push([p[t],p[t+1],p[t+2]]),f.push([p[e],p[e+1],p[e+2]]),f.push([p[n],p[n+1],p[n+2]])}function u(t,o,u,l,h,c,f,d,p,m,v,y){var _=e(t),g=e(o),b=e(u),x=void 0;void 0===l?r(_,g,b):(x=e(l),r(_,g,x),r(g,b,x)),void 0!==h&&(_=i(h),g=i(c),b=i(f),void 0===l?s(_,g,b):(x=i(d),s(_,g,x),s(g,b,x))),void 0!==p&&(_=n(p),g=n(m),b=n(v),void 0===l?a(_,g,b):(x=n(y),a(_,g,x),a(g,b,x)))}for(var l=t.split("\n"),h=[],c=[],f=[],d=[],p=[],m=[],v=[],y=0,_=void 0,g=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,b=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,x=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,w=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,T=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,S=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,M=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,E=0;E<l.length;E++){
var P=l[E];P=P.trim(),0!==P.length&&"#"!==P.charAt(0)&&(null!==(_=g.exec(P))?d.push(parseFloat(_[1]),parseFloat(_[2]),parseFloat(_[3])):null!==(_=b.exec(P))?p.push(parseFloat(_[1]),parseFloat(_[2]),parseFloat(_[3])):null!==(_=x.exec(P))?m.push(parseFloat(_[1]),1-parseFloat(_[2])):null!==(_=w.exec(P))?u(_[1],_[2],_[3],_[4]):null!==(_=T.exec(P))?u(_[2],_[5],_[8],_[11],_[3],_[6],_[9],_[12]):null!==(_=S.exec(P))?u(_[2],_[6],_[10],_[14],_[3],_[7],_[11],_[15],_[4],_[8],_[12],_[16]):null!==(_=M.exec(P))&&u(_[2],_[5],_[8],_[11],void 0,void 0,void 0,void 0,_[3],_[6],_[9],_[12]))}return o({positions:h,coords:c,normals:f,indices:v})}e.__esModule=!0;var a=n(2);i(a);e.default=s,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var n=function(t){return t.world.groups.player.children[0]};e.default=n,t.exports=e.default},function(t,e,n){var i;i=function(t,e,i){i.exports={Vector:n(18),CrashData:n(56),CrashBody:n(30),CrashWorld:n(57),CrashTests:n(160),circle_aabb:n(58)}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=i(r),s={};s.trimTexture=function(t,e,n,i,r){e=e||0,n=n||0,i=i||0,r=r||0;var o=t._frame;o.x+=e,o.y+=i,o.width-=e+n,o.height-=i+r,t.frame=o,t._updateUvs()},s.getTexturesFromFrames=function(t){for(var e=[],n=0;n<t.length;n++)e.push(new o.Texture.fromFrame(t[n]));return e},s.getTexturesFromImages=function(t){for(var e=[],n=0;n<t.length;n++)e.push(new o.Texture.fromImage(t[n]));return e},s.getTexturesFromFramesWithPrefix=function(t,e,n,i){var r=[];void 0==n&&(n=0);for(var s=0;s<e;s++){var a=s+n,u=t.replace("%%",a<10?"0"+a:a);i&&(u=t.replace("%%",a)),r.push(new o.Texture.fromFrame(u))}return r},s.formatTime=function(t){if(999999===t)return"00:00:00";t/=.06;var e=t/60/1e3|0;t-=60*e*1e3;var n=t/1e3|0;t-=1e3*n;var i=t/10|0;return t-=10*i,(e<10?"0":"")+e+":"+(n<10?"0":"")+n+":"+(i<10?"0":"")+i},s.formatTimeSeconds=function(t){if(999999===t)return"00:00";t/=.06;var e=t/60/1e3|0;t-=60*e*1e3;var n=t/1e3|0;return t-=1e3*n,(e<10?"0":"")+e+":"+(n<10?"0":"")+n},s.pad=function(t,e){var n="0000"+t;return n.substr(n.length-e)},s.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}return t},s.formatScore=function(t){for(var e=t.toString().split(""),n="",i=e.length,r=i%3-1,o=0;o<i;o++)n+=e[o],(o-r)%3==0&&o!=i-1&&(n+=",");return n},s.formatNumber=function(t){var e=t%10,n=Math.floor(t/10)%10;if(1==n)return t+"th";switch(e){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd";default:return t+"th"}},s.formatName=function(t){for(var e=t.split(" "),n=e.length-1;n>=0;n--)if(0!==e[n].length){var i=e[n].split("");i[0]=i[0].toUpperCase(),e[n]=i.join("")}var r=e.join(" ");return r},window.console||(window.console={log:function(){}}),s.get_query=function(t){for(var e=location.href,n=e.substring(e.indexOf("?")+1).split("&"),i=0,r={};i<n.length;i++)n[i]=n[i].split("="),r[n[i][0]]=decodeURIComponent(n[i][1]);return!!r.hasOwnProperty(t)&&r[t]},s.toCamelCase=function(t){var e=/\s([a-z]|[A-Z])/,n=t.trim();return n=n.toLowerCase(),n=n.replace(e,function(t,e){return e.toUpperCase()})},s.defaults=function(t,e){t=t||{};for(var n in e)n in t||(t[n]=e[n]);return t},s.fitText=s.resizeText=function(t,e,n,i){i=i||"w",t.scale.set(1),n&&(t.text=n);var r=0;r="w"===i?e/t.width:e/t.height,r>1&&(r=1),t.scale.set(r)},s.resizeMultipleTexts=function(t,e,n){for(var i=void 0,r=0;r<t.length;r++)i=t[r],i.scale.set(1);var o=0;if(n)for(r=0;r<t.length;r++)i=t[r],i.text=n[r];for(r=0;r<t.length;r++)i=t[r],i.width>o&&(o=i.width);var s=e/o;for(s>1&&(s=1),r=0;r<t.length;r++)t[r].scale.set(s)},e.default=s,t.exports=e.default},function(t,e){t.exports="// basic.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec3 uPosition;\nuniform vec3 uScale;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n\tvec3 position = aVertexPosition * uScale + uPosition;\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n    vTextureCoord = aTextureCoord;\n}"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(34),s=i(o),a=n(31),u=i(a),l=void 0,h=function(){function t(e){r(this,t),this.debug=!1,this.waiting=!1,l||(l=(0,u.default)()),this.lc=new s.default(e||"com.goodboydigitalrc6")}return t.prototype.load=function(t,e){e=e||"game-save-cleany-rc6",this.original=JSON.stringify(t);var n=void 0;l.getAllSettings().gameData&&(n=l.getAllSettings().gameData[e]),n||(l.getAllSettings().gameData?(l.setGameData(e,t),n=l.getAllSettings().gameData[e]):n=t),this.key=e,this.object=t,this.map(t,n);var i=this.collectDynamicProperties(t,[]);this.createGetterSetters(i),this.debug},t.prototype.reset=function(){var t=JSON.parse(this.original);this.map(this.object,t)},t.prototype.map=function(t,e){for(var n in t){var i=t[n];void 0==e[n]?e[n]=i:(i instanceof Array||i instanceof Object)&&this.map(i,e[n]),"__"===n.substr(0,2)&&(t[n]=e[n])}},t.prototype.collectDynamicProperties=function(t,e){for(var n in t){var i=t[n];(i instanceof Array||i instanceof Object)&&this.collectDynamicProperties(i,e),"__"===n.substr(0,2)&&e.push({object:t,id:n})}return e},t.prototype.createGetterSetters=function(t){var e=this.waitAndSave.bind(this);t.forEach(function(t){Object.defineProperty(t.object,t.id.substr(2),{get:function(){return this[t.id]},set:function(n){this[t.id]!==n&&(this[t.id]=n,e())}})})},t.prototype.waitAndSave=function(){this.waiting||(this.waiting=!0,this.waiting=!1,this.save())},t.prototype.save=function(){l.getAllSettings().gameData&&l.setGameData(this.key,this.object)},t}();e.default=h,t.exports=e.default},function(t,e,n){var i;i=function(t,e,i){var r=n(2),o=(n(171),n(18)),s=function t(e){this.type=t.DYNAMIC,this.shape=e,e.type===r.SHAPES.RECT?this.boundingBox=e:this.boundingBox=new r.Rectangle(e.x-e.radius,e.y-e.radius,2*e.radius,2*e.radius),this.passthrough=!1,this.currentSurface=null,this.position=new r.Point,this.timeScale=1,this.velocity=new o,this.acceleration=new o,this.bounce=0,this.maxSpeed=3,this.maxSpeedY=3,this.gravity=0,this.friction=.9,this.sleeping=!1,this.solid=!1,this.active=!0,this.remainder=0,this.flip=1};s.prototype.setMaxSpeed=function(t){this.maxSpeed=this.maxSpeedY=t},s.prototype.update=function(t){if(this.active){var e=this.velocity;e.x+=this.acceleration.x*t,e.y+=this.acceleration.y*t,e.y*=this.friction,e.x*=this.friction,e.y+=this.gravity*this.timeScale;var n=e.length();n>0&&(e.x/=n,e.y/=n,n=Math.min(n,this.maxSpeed),e.x*=n,e.y*=n),this.position.x+=e.x*this.timeScale*t,this.position.y+=e.y*this.timeScale*t}},s.prototype.reset=function(){this.velocity.x=0,this.velocity.y=0,this.acceleration.x=0,this.acceleration.y=0,this.remainder=0,this.active=!0},s.prototype.getDebugView=function(t){var e=this.shape,t=t||colors[this.type];return(new r.Graphics).beginFill(t).drawRect(e.x,e.y,e.width,e.height)},s.fromRect=function(t,e,n,i){return new s(new r.Rectangle(t,e,n,i))},s.fromCircle=function(t,e,n){return new s(new r.Circle(t,e,n))},s.STATIC=0,s.KINIMATIC=1,s.DYNAMIC=2,s.NONE=3,colors=[4602488,16776960,16711680,255],i.exports=s}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){if(!a)try{a=s.default.getGMI()}catch(t){return null}return a}e.__esModule=!0;var o=n(40),s=i(o),a=void 0;e.default=r,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=i(s),u=n(24),l=(i(u),n(14)),h=i(l),c=n(70),f=i(c),d=n(69),p=i(d),m=function(t,e){return t+Math.random()*(e-t)},v=void 0,y=80,_=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t);var i=void 0;if(0===e){var o=n>1?"gate_02.png":"gate.png";i=PIXI.Texture.from(ASSET_URL+"image/high/common/"+o),this.rotationSpeed=0,this.zOffset=0}else i=PIXI.Texture.from(ASSET_URL+"image/high/common/gate_deco"+e+".png"),this.rotationSpeed=.01*m(-1,1),this.zOffset=m(-a.default.ringLayerRange,a.default.ringLayerRange);this.zOffset=e*a.default.ringLayerRange*a.default.direction;var s=1;this.uniforms={uPosition:[0,0,0],uScale:[s,s,s],uRotation:0,opacity:0,hole0:[0,0,0],hole1:[0,0,0],texture:i},v||(v=h.default.plane(y,y,1));var u=new PIXI.Shader.from(f.default,p.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(v,u),this._mesh.state.culling=!1,this._mesh.state.depthTest=!0,TweenLite.to(this.uniforms,1,{opacity:.8,ease:Cubic.easeOut})}return t.prototype.update=function(){this.uniforms.uRotation+=this.rotationSpeed},t.prototype.updateHoles=function(t){var e=this;t.forEach(function(t,n){e.uniforms["hole"+n][0]=t.theta-e.uniforms.uRotation,e.uniforms["hole"+n][1]=t.offset/y,e.uniforms["hole"+n][2]=t.radius/y})},t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=_,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(26),c=n(8),f=i(c),d=n(10),p=i(d),m=n(42),v=i(m),y=n(7),_=i(y),g=n(17),b=i(g),x=n(16),w=(i(x),n(12)),T=i(w),S=n(1),M=i(S),E=0,P=function(t){function e(n,i){r(this,e);var s=o(this,t.call(this));s._wall=n,s._hole=i,s.add(_.default),s._wall||s.add(b.default),s.add(T.default),s.groups=["collisionDetect","transparent","invertible","clearable"],s.id=E++;var a=ASSET_URL+"image/high/common/magnet.png",u=24;s._mesh=new v.default(a,u);var l=2;return s.body=new h.CrashBody.fromRect(-l/2,-l/2,l,l),s.body.type=h.CrashBody.DYNAMIC,s.data={pickType:"Magnet"},s.signals.onAddedToWorld.addOnce(function(){return s._onAdded()}),s}return s(e,t),e.prototype.reset=function(t){t.w,t.h;this._data=t;var e=this._data.y;this.position.x=e,this.position.y=-1,this.position.z=(-this._data.x-M.default.tunnelDepth)*M.default.direction,this._originalPos={x:this.position.x,y:this.position.y,z:this.position.z}},e.prototype._onAdded=function(){var t=(0,f.default)(this);this._mesh.setCamera(t)},e.prototype.update=function(){if(this._mesh.update(),this._hole){var t=this._hole,e=t.theta,n=t.offset;this.position.x=this._wall.position.x+Math.cos(-e)*n,this.position.y=this._wall.position.y+Math.sin(-e)*n,this.position.z=this._wall.position.z-.004}else this.velocity.value=M.default.speed,this.position.x=this._originalPos.x,this.position.y=this._originalPos.y;(0,p.default)(this.position,this._mesh.uniforms.uPosition)},e.prototype.updatePosition=function(t){this._hole.theta=t},e.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);e.data&&"tardis"===e.data.name&&this.world.signals.onHitPickup.dispatch({type:"magnet"}),TweenLite.to(this._mesh,.35,{scale:0,ease:Expo.easeOut})},e.prototype.preCollideBegin=function(){},e.prototype.preCollideEnd=function(){},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default);e.default=P,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.id=e||"com.goodboydigital",this.canSave=!1;try{localStorage.setItem(this.id+".access",!0),localStorage.removeItem(this.id+".access",!0),this.canSave=!0}catch(t){}}return i(t,[{key:"store",value:function(t,e){this.canSave&&localStorage.setItem(this.id+"."+t,e)}},{key:"get",value:function(t){if(this.canSave)return localStorage.getItem(this.id+"."+t)}},{key:"storeObject",value:function(t,e){this.canSave&&localStorage.setItem(this.id+"."+t,JSON.stringify(e))}},{key:"getObject",value:function(t){if(this.canSave)return JSON.parse(localStorage.getItem(this.id+"."+t))}},{key:"remove",value:function(t){this.canSave&&localStorage.removeItem(this.id+"."+t)}},{key:"reset",value:function(){if(this.canSave)for(var t in localStorage)t.indexOf(this.id+".")!==-1&&localStorage.removeItem(t)}}]),t}();e.default=r,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=[],o=function(){function t(){n(this,t),this.updateBind=this.update.bind(this),this.waits=[]}return i(t,[{key:"waitNew",value:function(t,e,n){var i=r.pop()||{callback:null,scope:null,count:null};i.callback=t,i.scope=e||this,i.count=n||2,this.waits.push(i),requestAnimationFrame(this.updateBind)}},{key:"wait",value:function t(e,n){var t={callback:e,scope:this,count:n||2};this.waits.push(t),requestAnimationFrame(this.updateBind)}},{key:"update",value:function(){for(var t=this.waits.length-1;t>=0;t--){var e=this.waits[t];e.count--,e.count<=0&&(e.callback.call(e.scope),this.waits.splice(t,1),r.push(e))}this.waits.length>0&&requestAnimationFrame(this.updateBind)}}]),t}();e.default=new o,t.exports=e.default},function(t,e){t.exports="// color.frag\n\nprecision highp float;\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(color*opacity, opacity);\n}"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(20),c=i(h),f=n(4),d=i(f),p=function(t){function e(n,i){o(this,e);var r=new l.Sprite.from("ui_switch_touch.png"),a=s(this,t.call(this,r));return n=!!n,a.on=!1,r.accessible=!0,r.accessibleTitle=i,a.onToggle=new d.default,a.toggle(n),a}return a(e,t),e.prototype.toggle=function(t){this.on!==t&&(this.on=t,t?(this.view.texture=l.Texture.from("ui_switch_tilt.png"),this.onToggle.dispatch(!0)):(this.view.texture=l.Texture.from("ui_switch_touch.png"),this.onToggle.dispatch(!1)))},e}(c.default);e.default=p,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var n=["image/high/buttons/buttons.json","image/high/ui/ui.json","image/high/common/badie_01.jpg","image/high/common/badie_01_hit.jpg","image/high/common/badie_02.jpg","image/high/common/badie_02_hit.jpg","image/high/common/badie_03.jpg","image/high/common/badie_03_hit.jpg","image/high/common/fx-badies.png","image/high/common/gate.png","image/high/common/gate_02.png","image/high/common/gate_deco1.png","image/high/common/gate_deco2.png","image/high/common/gate_deco3.png","image/high/common/gate_deco4.png","image/high/common/hud.png","image/high/common/layer1_gate.png","image/high/common/layer2_gate.png","image/high/common/lens_flare.jpg","image/high/common/lens_flare_abrams.png","image/high/common/magnet.png","image/high/common/magnetParticle.png","image/high/common/shield.png","image/high/common/shieldParticle.png","image/high/common/social_post_image.jpg","image/high/common/starsmap.jpg","image/high/common/starsmapBlur.jpg","image/high/common/tardis-exterior.jpg","image/high/common/title_screen copy.png","image/high/common/title_screen.png","image/high/common/tunnel_colour_hue.png","image/high/common/tunnel_end_light.png","image/high/common/video0.jpg","image/high/common/video1.jpg","image/high/common/video2.jpg","image/high/common/videoReflection.jpg","image/high/common/vignet_multiply.png","image/high/common/vortex.png","image/high/common/vr-logo.png","image/high/device/brim.jpg","image/high/device/rotate.jpg"];e.default=n,t.exports=e.default},function(t,e,n){var i;i=function(t,e,i){var r=n(34),o=n(90),s=function(){this.localStorage=new r("com.bbc.doctorwho.game"),this.tracked={},this.firstClick=!0,this.debug=!1,this.levelPlaysHash=this.localStorage.getObject("plays"),this.levelPlaysHash?(this.levelPlaysHash.game_play_count++,this.localStorage.storeObject("plays",this.levelPlaysHash)):(this.levelPlaysHash={},this.levelPlaysHash.game_play_count=0,this.levelPlaysHash.minigames={mission1:0,mission2:0,mission3:0,mission4:0,mission5:0,mission6:0},this.localStorage.storeObject("plays",this.levelPlaysHash)),this.gameLocation="game",this.gameLevel="_",this.gamePlayCount=this.levelPlaysHash.game_play_count};s.prototype.init=function(t){},s.prototype.checkGmi=function(){this.gmi||(this.gmi=o())},s.prototype.track=function(t,e,n){this.checkGmi(),this.debug,this.gmi.sendStatsEvent(t,e,n||{})},s.prototype.trackOnce=function(t,e,n){if(this.checkGmi(),this.firstClick){var i=t+e;this.tracked[i]||(this.tracked[i]=!0,this.gmi.sendStatsEvent(t,e,n||{}),this.debug,this.firstClick=!1)}};var a=[["tutorial"],["world_1","world_2","world_3","world_4"],["world_5","world_6"],["world_7","world_8"]];s.prototype.trackLevelStart=function(){return void window.og.noTracking},s.prototype.trackMiniGame=function(t,e){if(!window.og.noTracking){var n=e.replace("mission","minigame");this.levelPlaysHash.minigames[e]++,this.localStorage.storeObject("plays",this.levelPlaysHash),t.game_play_count=this.gamePlayCount,t.minigame_name=n,t.minigame_play_count=this.levelPlaysHash.minigames[e],this.track("game_level","minigame_started",t)}},s.prototype.trackMiniGameComplete=function(t,e){var n=e.replace("mission","minigame");this.levelPlaysHash.minigames[e]++,this.localStorage.storeObject("plays",this.levelPlaysHash),t.game_play_count=this.gamePlayCount,t.minigame_name=n,t.minigame_difficulty=1,t.minigame_play_count=this.levelPlaysHash.minigames[e],this.track("game_level","minigame_complete",t)},s.prototype.trackWithLevel=function(t,e){window.og.noTracking||(e=e||{},e.game_level_name=this.gameLevel,e.game_play_count=this.gamePlayCount,this.gmi.sendStatsEvent("game_level",t,e))},s.prototype.trackClickFromScreen=function(t,e){e=e||{},e.game_screen=this.game_screen,this.gmi.sendStatsEvent("game_click",t,e),this.debug},s.prototype.getLevelPlayCount=function(){return this.levelPlaysHash[key]||(this.levelPlaysHash[key]=0),this.levelPlaysHash[key]},s.prototype.trackClickWithLevel=function(t,e){if(!window.og.noTracking){var n=a[GameConfig.storyIndex][GameConfig.worldIndex];window.MINI&&(n="mini"),e=e||{},e.game_level_name=n,e.game_world_level=GameConfig.levelIndex+1,e.level_play_count=this.getLevelPlayCount(),this.gmi.sendStatsEvent(t,"game_click",e),this.debug}},i.exports=new s}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i=function(t){"use strict";function e(t,e,n){if(i){var r=i.EchoClient,o=i.Enums,s=i.ConfigKeys,a=window.og.environment,u={},l="live"===a?"bbc":a;u[s.COMSCORE.URL]="http://sa.bbc.co.uk/bbc/"+l+"/s",u[s.RUM.ENABLED]=!1;var h=new r(t,o.ApplicationType.WEB,u);return window.bbccookies&&!window.bbccookies.isAllowed("ckpf_a_performance_cookie")&&h.optOutOfCookies(),n&&n.statsLabel&&h.addLabel(n.statsLabel.name,n.statsLabel.value),h.viewEvent(e),h}}var n,i=window.echo,o=function(t){var n=function n(){function i(){var t=window.bbccookies;return!t||t.isAllowed("ckps_whatever")}function o(t){var e=window.localStorage.getItem(t);try{return JSON.parse(e)}catch(t){}}function s(){function t(){var t={};return t.muted=!1,t.subtitles=!1,t.motion=!0,t}function e(){_.muted=!!_.muted,_.subtitles=!!_.subtitles,_.motion=!_.hasOwnProperty("motion")||_.motion}return i()?(_=o(v)||t(),e(),g=o(y)||{},void 0):t()}function a(){if(i())try{window.localStorage.setItem(v,JSON.stringify(_))}catch(t){}}var u=window.og.embedVars,l=u.statsAppName,h=u.statsCounterName,c=window.og.gid,f=window.og.gameContainerId,d=window.og.gameUrl,p=window.og.gameDir,m=window.og.environment;Object.defineProperty(n.prototype,"embedVars",{get:function(){return u}}),Object.defineProperty(n.prototype,"gameContainerId",{get:function(){return f}}),Object.defineProperty(n.prototype,"gameUrl",{get:function(){return d}}),Object.defineProperty(n.prototype,"gameDir",{get:function(){return p}}),Object.defineProperty(n.prototype,"environment",{get:function(){return m}}),Object.defineProperty(n.prototype,"shouldShowExitButton",{get:function(){return window.og.isFullScreen}}),Object.defineProperty(n.prototype,"shouldDisplayMuteButton",{get:function(){return!0}}),Object.defineProperty(n.prototype,"shouldLongPressForSettings",{get:function(){return!1}});var v="bbc_childrens_gmi_data",y=v+"_"+c,_={muted:!1,subtitles:!1,motion:!0},g={};this.stats=e(l,h,t),n.prototype.getAllSettings=function(){if(i()){var t=JSON.parse(JSON.stringify(_));return t.gameData=g,t}return _},n.prototype.isCyclic=function(t){function e(t){if(t&&"object"===("undefined"==typeof t?"undefined":r(t))){if(n.indexOf(t)!==-1)return!0;n.push(t);for(var i in t)if(t.hasOwnProperty(i)&&e(t[i]))return!0}return!1}var n=[];return e(t)},n.prototype.setGameData=function(t,e){if(i()){g[t]=e;try{this.isCyclic(g),window.localStorage.setItem(y,JSON.stringify(g))}catch(t){}}},n.prototype.setMuted=function(t){_.muted=!!t,a()},n.prototype.setSubtitles=function(t){_.subtitles=!!t,a()},n.prototype.setMotion=function(t){_.motion=!!t,a()},n.prototype.sendStatsEvent=function(t,e,n){this.stats&&this.stats.userActionEvent(e,t,n||{})},n.prototype.exit=function(){var t=window.og.exitGameUrl;window.open(t,"_top")},n.prototype.debug=function(t){},n.prototype.gameLoaded=function(){},s(),n.prototype=Object.create(n.prototype)},i=new n;return i};return{getGMI:window.getGMI||function(t){return n=o(t)}}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=i(s),u=n(24),l=i(u),h=n(188),c=i(h),f=n(187),d=i(f),p=function(t,e){return t+Math.random()*(e-t)},m=void 0,v=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);r(this,t);var n=1,i=PIXI.Texture.from(ASSET_URL+"image/high/common/badie_0"+(e+1)+".jpg"),o=PIXI.Texture.from(ASSET_URL+"image/high/common/badie_0"+(e+1)+"_hit.jpg");if(this.uniforms={uPosition:[0,0,0],uScale:[n,n,n],uRotation:[Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI],texture:i,textureHit:o,brightness:1},!m){var s=PIXI.loadedResources[ASSET_URL+"model/baddie.obj"].data;m=(0,l.default)(s)}var a=new PIXI.Shader.from(c.default,d.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(m,a),this._mesh.state.culling=!0,this._mesh.state.depthTest=!0,this.speed=[p(.1,1),p(.1,1),p(.1,1)]}return t.prototype.reset=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},t.prototype.setTexture=function(t){this.uniforms.texture=PIXI.Texture.from(ASSET_URL+"image/high/common/badie_0"+(t+1)+".jpg")},t.prototype.update=function(){var t=a.default.rockRotateSpeed;this.uniforms.uRotation[0]+=this.speed[0]*t,this.uniforms.uRotation[1]+=this.speed[1]*t,this.uniforms.uRotation[2]+=this.speed[2]*t},t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this.uniforms.uScale=[this._scale,this._scale,this._scale]}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=v,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=(i(s),n(14)),u=i(a),l=n(28),h=i(l),c=n(68),f=i(c),d=void 0,p=function(){function t(e,n,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r(this,t);var s=PIXI.Texture.from(e);this._totalFrame=n;var a=Math.floor(Math.random()*this._totalFrame),l=1;if(this.uniforms={uPosition:[0,0,0],uScale:[l,l,l],uRotation:[Math.random(),Math.random(),Math.random()],texture:s,brightness:1,frame:a,uvOffset:[0,0],numSeg:8},!d){var c=6;d=u.default.plane(c,c)}var p=void 0===i?f.default:i,m=new PIXI.Shader.from(h.default,p,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(d,m),this._mesh.state.culling=!1,this._mesh.state.blend=!0,this._mesh.state.depthTest=!0,o&&(this._mesh.state.blendMode=PIXI.BLEND_MODES.ADD)}return t.prototype.update=function(){this.uniforms.frame++,this.uniforms.frame>=this._totalFrame&&(this.uniforms.frame=0);var t=this.uniforms.frame%8/8,e=Math.floor(this.uniforms.frame/8)/8;this.uniforms.uvOffset=[t,e]},t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this.uniforms.uScale=[this._scale,this._scale,this._scale]}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=p,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(14),a=(i(s),n(24)),u=i(a),l=n(202),h=i(l),c=n(201),f=i(c),d=n(1),p=i(d),m=n(23),v=i(m),y={},_=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"videoReflection";r(this,t);var i=1,o=v.default.get("image/high/common/"+n+".jpg"),s=p.default.onBoarding.messagePosition;this.uniforms={texture:o,uPosition:[0,0,0],uPositionOffset:[0,s,0],uScale:[i,i,i],time:0,isFacingFront:0,opacity:1,theta:0};var a=void 0;if(y[e])a=y[e];else{var l=PIXI.loadedResources[ASSET_URL+"model/"+e+".obj"].data;a=(0,u.default)(l),y[e]=a}var c=new PIXI.Shader.from(h.default,f.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(a,c),this._mesh.state.depthTest=!0}return t.prototype.update=function(){this.uniforms.time+=.002},t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection,this.uniforms.uInvertViewMatrix=t.invertView},o(t,[{key:"isFacingFront",get:function(){return 1==this.uniforms.isFacingFront},set:function(t){this.uniforms.isFacingFront=t?1:0}},{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"opacity",get:function(){return this.uniforms.opacity},set:function(t){this.uniforms.opacity=t}},{key:"scale",get:function(){return this.uniforms.uScale[0]},set:function(t){this.uniforms.uScale[0]=t,this.uniforms.uScale[1]=t,this.uniforms.uScale[2]=t}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=_,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var n=function(t){var e=PIXI.Texture.from(window.ASSET_URL+"image/high/common/video"+t+".jpg");return e.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST,e.baseTexture.mipmap=!1,e};e.default=n,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(){n(this,e);var r=i(this,t.call(this));return r.thickness=10,r.startRads=0,r.endRads=Math.PI,r.xRadius=100,r.yRadius=100,r._ratio=0,r.angleOffset=2*Math.PI/3,r.redraw(),r}return r(e,t),e.prototype.redraw=function(){this.clear(),this.beginFill(16711680);var t=8,e=2*Math.PI/t,n=Math.ceil(8*this._ratio);this.moveTo(0,0);for(var i=0;i<n;i++){var r=-i*e+this.angleOffset;this.lineTo(Math.sin(r)*-100,Math.cos(r)*-100)}r=-this._ratio*Math.PI*2+this.angleOffset,this.lineTo(Math.sin(r)*-100,Math.cos(r)*-100),this.endFill()},o(e,[{key:"ratio",set:function(t){this._ratio=t,this._ratio>1?this._ratio=1:this._ratio<0&&(this._ratio=0),this.redraw()},get:function(){return this._ratio}}]),e}(PIXI.Graphics);e.default=s,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){
if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(26),c=n(1),f=i(c),d=n(8),p=i(d),m=n(25),v=i(m),y=n(10),_=i(y),g=n(41),b=i(g),x=n(119),w=i(x),T=n(123),S=i(T),M=n(7),E=i(M),P=n(17),O=i(P),A=n(16),C=i(A),I=n(12),R=i(I),D=n(11),k=i(D),L=function(t,e){return t+Math.random()*(e-t)},F=0,j=function(t){function e(){r(this,e);var n=o(this,t.call(this));return n.add(E.default),n.add(O.default),n.add(C.default),n.add(R.default),n._hasPassedBy=!1,n._index=-1,n._mesh=new b.default,n._mesh.uniforms.brightness=.2,n._fx=new w.default(n),n.id="Badie"+F++,n.signals.onAddedToWorld.addOnce(function(){return n._onAdded()}),n.groups=["collisionDetect","invertible","clearable"],n}return s(e,t),e.prototype.reset=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=t.w,o=(t.h,n.world),s=n.currentLevel;this._game=n,this._mesh.scale=r,this._data=t,this.speedOffset=i;var a=r;this.body=new h.CrashBody.fromRect(-a/2,-a/2,a,a),this.body.type=h.CrashBody.DYNAMIC;var u=this._data.y,l=Math.random()*Math.PI*2;this.position.x=Math.cos(l)*u,this.position.y=Math.sin(l)*u,this.position.z=(-this._data.x-f.default.tunnelDepth)*f.default.direction,this._originalPos={x:this.position.x,y:this.position.y,z:this.position.z},this._mesh.setTexture(s),this._fx.reset(t,o)},e.prototype._onAdded=function(){this._camera=(0,p.default)(this),this._mesh.setCamera(this._camera),this._player=(0,v.default)(this)},e.prototype.update=function(){this.velocity.value=f.default.speed*this.speedOffset,this.position.x=this._originalPos.x,this.position.y=this._originalPos.y,(0,_.default)(this.position,this._mesh.uniforms.uPosition),this._mesh.update();var t=f.default.planeDist;if(Math.abs(this.position.z)<t&&!this._hasPassedBy){this._hasPassedBy=!0;var e=this.position,n=e.x,i=e.y,r=Math.sqrt(n*n+i*i);r/=15,r>1?r=1:r<0&&(r=0),r=1-r,this._index>-1&&k.default.sfx.stop("rockPass"+this._prevIndex);var o=Math.floor(3*Math.random()),s=k.default.sfx.getSoundAtId("rockPass"+o);s.volume=r,k.default.sfx.play("rockPass"+o),this._index=o}},e.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);if(e.data&&"tardis"===e.data.name){if(this._break(t.projection),this._player.isInvincible)return;this.world.signals.onHitBadie.dispatch({value:this._data.value}),TweenLite.to(this._mesh,.35,{scale:0,ease:Expo.easeOut})}},e.prototype._break=function(t){for(var e=Math.round(L(2,4)),n=this._game,i=(n.world,n.currentLevel),r=0;r<e;r++){var o=new S.default(this.position,this._camera,i,t);this.world.add(o)}},e.prototype.preCollideBegin=function(){TweenLite.killTweensOf(this._mesh.uniforms),TweenLite.to(this._mesh.uniforms,.5,{brightness:1,ease:Expo.easeOut}),this._fx.rollover()},e.prototype.preCollideEnd=function(){TweenLite.killTweensOf(this._mesh.uniforms),TweenLite.to(this._mesh.uniforms,.25,{brightness:0,ease:Expo.easeOut}),this._fx.rollout()},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}},{key:"originalPos",get:function(){return this._originalPos}}]),e}(l.default);e.default=j,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(46),s=i(o),a=n(118),u=i(a),l=n(33),h=i(l),c=n(49),f=i(c),d=n(129),p=i(d),m=n(54),v=i(m),y={AddOn:u.default,Badie:s.default,Magnet:h.default,Text:f.default,Wall:p.default},_=function(){function t(){r(this,t)}return t.prototype.get=function(t){for(var e in y)if(y.hasOwnProperty(e)&&e.toLowerCase()===t.toLowerCase())return v.default.get(y[e]);return null},t}(),g=new _;e.default=g,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(26),c=n(8),f=i(c),d=n(10),p=i(d),m=n(42),v=i(m),y=n(7),_=i(y),g=n(16),b=(i(g),n(12)),x=i(b),w=n(1),T=(i(w),function(t){function e(n,i){r(this,e);var s=o(this,t.call(this));s._wall=n,s._hole=i,s.add(_.default),s.add(x.default),s.groups=["collisionDetect","transparent","invertible","clearable"];var a=ASSET_URL+"/image/high/common/shield.png",u=48;s._mesh=new v.default(a,u);var l=2;return s.body=new h.CrashBody.fromRect(-l/2,-l/2,l,l),s.body.type=h.CrashBody.DYNAMIC,s.data={pickType:"Shield"},s.signals.onAddedToWorld.addOnce(function(){return s._onAdded()}),s}return s(e,t),e.prototype._onAdded=function(){var t=(0,f.default)(this);this._mesh.setCamera(t)},e.prototype.update=function(){this._mesh.update();var t=this._hole,e=t.theta,n=t.offset;this.position.x=this._wall.position.x+Math.cos(-e)*n,this.position.y=this._wall.position.y+Math.sin(-e)*n,this.position.z=this._wall.position.z-.004,(0,p.default)(this.position,this._mesh.uniforms.uPosition)},e.prototype.updatePosition=function(t){this._hole.theta=t},e.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);e.data&&"tardis"===e.data.name&&this.world.signals.onHitPickup.dispatch({type:"shield"}),TweenLite.to(this._mesh,.35,{scale:0,ease:Expo.easeOut})},e.prototype.preCollideBegin=function(){},e.prototype.preCollideEnd=function(){},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default));e.default=T,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(8),c=i(h),f=n(10),d=i(f),p=n(43),m=i(p),v=n(1),y=i(v),_=n(4),g=i(_),b=n(7),x=i(b),w=n(17),T=i(w),S=n(12),M=i(S),E=function(t){function e(n){r(this,e);var i=o(this,t.call(this));return i.add(x.default),i.add(T.default),i.add(M.default),i.toMoveOut=!1,i.signals.onAddedToWorld.addOnce(function(){return i._onAdded()}),i.onMovedOut=new g.default,i.onMovedIn=new g.default,i.groups=["text","onboarding","clearable"],i.data={name:"text"},i._id=n,i._mesh=new m.default(n),i.position.z=.5*-y.default.tunnelDepth,i}return s(e,t),e.prototype._onAdded=function(){var t=(0,c.default)(this);this._mesh.setCamera(t),this.moveIn()},e.prototype.moveIn=function(){var t=this,e=y.default.onBoarding.flyingInDuration;TweenLite.to(this.position,e,{z:.25*-y.default.planeDist,ease:Cubic.easeOut,onComplete:function(){t.onMovedIn.dispatch()}})},e.prototype.moveOut=function(){var t=this,e=y.default.onBoarding.flyingOutDuration;this.toMoveOut=!0,TweenLite.to(this.position,e,{z:.5*y.default.tunnelDepth,ease:Expo.easeInOut,onComplete:function(){t.onMovedOut.dispatch()}})},e.prototype.update=function(){this._mesh.update(),this.toMoveOut&&(this.velocity.value=.1*y.default.speed),(0,d.default)(this.position,this._mesh.uniforms.uPosition)},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default);e.default=E,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(7),c=i(h),f=n(51),d=i(f),p=n(12),m=i(p),v=n(8),y=i(v),_=n(25),g=(i(_),n(10)),b=i(g),x=n(32),w=i(x),T=n(1),S=i(T),M=function(t){function e(n,i){r(this,e);var s=o(this,t.call(this));return s.add(c.default),s.add(d.default),s.add(m.default),s._parent=n,s.followitem.setTarget(n),s.followitem.posOffset[2]=i*S.default.ringLayerRange*S.default.direction,s._mesh=new w.default(i),s.groups=["invertible","transparent","clearable"],s.signals.onAddedToWorld.addOnce(function(){return s._onAdded()}),s}return s(e,t),e.prototype._onAdded=function(){var t=(0,y.default)(this);this._mesh.setCamera(t)},e.prototype.update=function(){this._mesh.update(),(0,b.default)(this.position,this._mesh.uniforms.uPosition)},e.prototype.updateHoles=function(t){this._mesh.updateHoles(t)},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default);e.default=M,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(e){n(this,t),this._item=e,this.posOffset=[0,0,0]}return t.prototype.setTarget=function(t){this._target=t},t.prototype.update=function(){this._target&&this._target.position&&this._item.position&&(this._item.position.x=this._target.position.x+this.posOffset[0],this._item.position.y=this._target.position.y+this.posOffset[1],this._item.position.z=this._target.position.z+this.posOffset[2])},t}();i.id="followitem",e.default=i,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(9),s=0,a=function(){function t(){i(this,t),this._vrDisplay,this._frameData,this.id="ID"+s++,this._gamePads=[],this.hasVR=!1,this.vrPresenting=!1}return t.prototype.init=function(t){var e=this;return navigator.getVRDisplays?void navigator.getVRDisplays().then(function(n){if(n.length>0){var i=n[0];e._vrDisplay=i,e._frameData=new VRFrameData,e.hasVR=!0,i.capabilities.canPresent,t(i)}else t(null)}):void t(null)},t.prototype.present=function(t,e){var n=this;this._vrDisplay&&this._vrDisplay.capabilities.canPresent&&this._vrDisplay.requestPresent([{source:t}]).then(function(){n.vrPresenting=!0,e&&e()},function(t){})},t.prototype.submitFrame=function(){this._vrDisplay.isPresenting&&this._vrDisplay.submitFrame()},t.prototype.getFrameData=function(){if(this._vrDisplay)return this._vrDisplay.getFrameData(this._frameData),this._checkGamepads(),this._frameData},t.prototype.setCamera=function(t,e){var n=this._frameData[e+"ProjectionMatrix"],i=this._frameData[e+"ViewMatrix"];o.mat4.copy(t.view,i),o.mat4.copy(t.projection,n),o.mat4.invert(t._mtxInvertView,t._mtxView)},t.prototype._checkGamepads=function(){var t=navigator.getGamepads(),e=0;this._gamePads=[];for(var n=0;n<t.length;n++){var i=t[n];if(i&&i.pose){var r={position:i.pose.position,orientation:i.pose.orientation,buttons:i.buttons};this._gamePads.push(r),e++}}},r(t,[{key:"gamepads",get:function(){return this._gamePads}},{key:"vrDisplay",get:function(){return this._vrDisplay}}]),t}(),u=void 0;void 0===u&&(u=new a),e.default=u,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(2),u=r(a),l=n(156),h=i(l),c=n(157),f=i(c),d=function(){function t(e,n,i,r){o(this,t),this.container=e||new u.Container,this.screens={},this.currentScreen,this.fading=!1,this.w=n||400,this.h=i||400,this.history=[],this.defaultTransition=r||new h.default,this.noTransition=new f.default,this.transition=this.defaultTransition,this.active=!1}return s(t,[{key:"gotoScreenByID",value:function(t,e,n,i){var r=this.screens[t];if(!r)throw new Error("screen not found with id : "+t);this.gotoScreen(r,e,n,i)}},{key:"getScreenByID",value:function(t){var e=this.screens[t];if(e)return e;throw new Error("screen not found with id : "+t)}},{key:"addScreen",value:function(t,e){return this.screens[e]=t,t.id=e,t.firstRun=!0,t.screenManager=this,t}},{key:"goBack",value:function(){this.history.pop();var t=this.history.pop();t&&this.gotoScreen(t)}},{key:"getScreenId",value:function(t){for(var e in this.screens)if(this.screens[e]===t)return e;return null}},{key:"gotoScreen",value:function(t,e,n,i){if((i||this.currentScreen!==t)&&(t.firstRun&&(t.init&&t.init(),t.firstRun=!1),this.history.push(t),this.nextScreen=t,this.active&&(t._tmpParams={params:e,instant:n,forceRefresh:i}),!this.active)){this.active=!0,this.transition=n?this.noTransition:t.transition||this.defaultTransition,this.transition.onResize&&this.transition.onResize(this.w,this.h);var r=this.currentScreen;this.nextScreen&&this.nextScreen.resize&&this.nextScreen.resize(this.w,this.h),this.currentScreen=t,this.currentScreen.beforeShow&&this.currentScreen.beforeShow(e),this.transition.begin(this,r,this.nextScreen)}}},{key:"onTransitionComplete",value:function(){if(this.active=!1,this.currentScreen!=this.nextScreen){var t=this.nextScreen._tmpParams;this.gotoScreen(this.nextScreen,t.params,t.instant,t.forceRefresh),delete this.nextScreen._tmpParams}}},{key:"resize",value:function(t,e){this.w=t,this.h=e,this.transition.onResize&&this.transition.onResize(t,e),this.currentScreen&&this.currentScreen.resize&&this.currentScreen.resize(t,e)}}]),t}();e.default=d,t.exports=e.default},function(t,e,n){var i;i=function(t,e,n){var i=function(t){this.classType=t,this.pool=[]};i.constructor=i,i.prototype.prepopulate=function(t){for(var e=0;e<t;e++)this.pool.push(new this.classType)},i.prototype.get=i.prototype.getObject=function(){var t=this.pool.pop();return t||(t=new this.classType),t._reset&&t._reset(),t},i.prototype.return=i.prototype.returnObject=function(t){t._clean&&t._clean(),this.pool.push(t)},Object.defineProperties(i.prototype,{total:{get:function(){return this.pool.length}},length:{get:function(){return this.pool.length}}}),i.pools=[],i.idGenerator=1,i.getPool=function(t){return t._CLASS_ID||(t._CLASS_ID=i.idGenerator++,i.pools[t._CLASS_ID]=new i(t)),i.pools[t._CLASS_ID]},i.get=i.getObject=function(t){t._CLASS_ID||(t._CLASS_ID=i.idGenerator++,i.pools[t._CLASS_ID]=new i(t));var e=i.pools[t._CLASS_ID].getObject();return e._CLASS_ID=t._CLASS_ID,e},i.return=i.returnObject=function(t){i.pools[t._CLASS_ID].returnObject(t)},n.exports=i}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(t,e,n){var i=function(t){this.children=t||[]};i.prototype.add=function(t){return this.children.push(t),t},i.prototype.remove=function(t){var e=this.children.indexOf(t);return e===-1?null:(this.children.splice(e,1),t)},i.prototype.contains=function(t){return this.children.indexOf(t)!==-1},i.prototype.getIndex=function(t){return this.children.indexOf(t)},i.prototype.getItem=function(t){return this.children[t]},i.prototype.run=function(t,e){if(e)for(var n=0;n<this.children.length;n++)t.call(e,this.children[n]);else for(var n=0;n<this.children.length;n++)t(this.children[n])},i.prototype.empty=function(){this.children.length=0},n.exports=i}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(t,e,n){var i=function(t,e,n,i,r){this.object1=t,this.object2=e,this.penetration=n,this.projection=i,this.ignore=r||!1,this._key=null,this._tickId=null};i.prototype.getOtherObject=function(t){return t===this.object1?this.object2:this.object1},i.pool=[],n.exports=i}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(t,e,i){var r=n(55),o=n(161),s=n(30),a=n(162),u=function(){this.staticItems=new a,this.kinimaticItems=new r,this.dynamicItems=new r,this.collisions=[],this.narrowPhase=new o,this.dt=1,this.collisionKeys={},this.DEBUG=!1,this.count=0};u.prototype.init=function(t){},u.prototype.preupdate=function(){},u.prototype.add=function(t){t.body&&(this.DEBUG&&(t._debugView||(t._debugView=t.body.getDebugView(),t._debugView.alpha=.5,t.view&&t.view.addChild(t._debugView))),t.body.type===s.STATIC?this.staticItems.add(t):t.body.type===s.KINIMATIC?this.kinimaticItems.add(t):t.body.type===s.DYNAMIC&&this.dynamicItems.add(t))},u.prototype.remove=function(t){t.body&&(t.body.type===s.STATIC?this.staticItems.remove(t):t.body.type===s.KINIMATIC?this.kinimaticItems.remove(t):t.body.type===s.DYNAMIC&&this.dynamicItems.remove(t))},u.prototype.update=function(){for(var t=0;t<this.dynamicItems.children.length;t++)this.dynamicItems.children[t].body.update(this.dt);if(this.count++,!(this.count%2)){var e=this.getCollisions();this.narrowPhase.hitTest(e)}},u.prototype.postupdate=function(t){},u.prototype.reset=function(){this.staticItems.empty(),this.kinimaticItems.empty(),this.dynamicItems.empty(),this.collisions.length=0,this.narrowPhase.reset()},u.prototype.onCollision=function(t,e){},u.prototype.getKey=function(t,e){return(t<<12)+e},u.prototype.registerCollison=function(t,e){this.collisionKeys[this.getKey(t,e)]=!0,this.collisionKeys[this.getKey(e,t)]=!0},u.prototype.getCollisions=function(){this.collisions.length=0;var t=this.dynamicItems.children;this.sortAxisList(t);for(var e=0;e<t.length;e++)for(var n=t[e],i=n.body.position.x+n.body.boundingBox.x+n.body.boundingBox.width+5,r=e+1;r<t.length;r++){var o=t[r],s=o.body.position.x+o.body.boundingBox.x-5;if(i<=s)break;var a=!0,u=this.getKey(o.type,n.type);this.collisionKeys[u]?o.canCollide&&n.canCollide||(a=!1):a=!1,a&&this.collisions.push(n,o)}for(var e=0;e<this.dynamicItems.children.length;e++)for(var l=this.dynamicItems.children[e],h=this.staticItems.retrieveArea(l),r=0;r<h.length;r++){var c=h[r];c.canCollide&&l.canCollide&&this.collisions.push(l,c)}for(var e=0;e<this.dynamicItems.children.length;e++)for(var r=0;r<this.kinimaticItems.children.length;r++){var l=this.dynamicItems.children[e],c=this.kinimaticItems.children[r],a=!0,u=this.getKey(c.type,l.type);this.collisionKeys[u]?l.canCollide&&c.canCollide||(a=!1):a=!1,a&&(l.debug,this.collisions.push(l,c))}return this.collisions},u.prototype.sortAxisList=function(t){for(var e=1,n=t.length;e<n;e++){for(var i=t[e],r=e-1;r>=0;r--){var o=t[r];if(o.body.boundingBox.x+o.body.position.x<=i.body.boundingBox.x+i.body.position.x)break;t[r+1]=t[r]}t[r+1]=i}return t},u.prototype.castRay=function(t,e){},u.prototype.constrainToBounds=function(){for(var t=this.bounds,e=0;e<this.dynamicItems.children.length;e++){var n=this.dynamicItems.children[e].body;n.position.x+n.shape.x<t.x?n.position.x=t.x+n.shape.x:n.position.x+n.shape.x+n.shape.width>t.x+t.width&&(n.position.x=t.x+t.width-(n.shape.x+n.shape.width)),n.position.y+n.shape.y<t.y?n.position.y=t.y+n.shape.y:n.position.y+n.shape.y+n.shape.height>t.y+t.height&&(n.position.y=t.y+t.height-(n.shape.y+n.shape.height))}},u.prototype.setBounds=function(t){this.bounds.x=t.x,this.bounds.y=t.y,this.bounds.width=t.width,this.bounds.height=t.height},u.prototype.clear=function(){this.reset()},i.exports=u}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var i=(n(2),n(18)),r=new i,o=function(t,e,n){var o=t.body,s=e.body,a=o.shape,u=s.shape,l=o.position.x+a.x,h=o.position.y+a.y,c=l-s.position.x,f=h-s.position.y,d=u.left,p=u.right,m=u.top,v=u.bottom,y=c,_=f;c<d?y=d:c>p&&(y=p),f<m?_=m:f>v&&(_=v);var g,b=y-c,x=_-f,w=Math.sqrt(b*b+x*x);if(0===w){var T=c-d,S=p-c,M=f-m,E=v-f,w=999999;T<w&&(w=T),S<w&&(w=S),M<w&&(w=M),E<w&&(w=E);var P=r;w==T?(P.x=-1,P.y=1e-5):w==S?(P.x=1,P.y=1e-5):w==M?(P.x=1e-5,P.y=-1):w==E&&(P.x=1e-5,P.y=1);var O=-w-a.radius,g=n(t,e,O,P);if(!g.ignore)return g}else if(w<a.radius){var O=w-a.radius,P=new i;0===w&&(w+=.001),P.x=-b/w,P.y=-x/w;var g=n(t,e,O,P);if(!g.ignore)return g}return null};t.exports=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(4),a=i(s),u=function(){function t(){r(this,t),"undefined"!=typeof document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.onHide=new a.default,this.onShow=new a.default,this.init()}return o(t,[{key:"handleVisibilityChange",value:function(){document[this.hidden]?this.onHide.dispatch():this.onShow.dispatch()}},{key:"init",value:function(){document.addEventListener(this.visibilityChange,this.handleVisibilityChange.bind(this),!1)}}]),t}();e.default=new u,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(2),c=r(h),f=n(20),d=i(f),p=n(11),m=i(p),v=n(3),y=i(v),_=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.textures,i=t.sounds,r=void 0===i?{down:"press",hover:"roll"}:i;o(this,e);var a;n.normal?(a=new c.Sprite.from(n.normal),a.anchor.set(.5)):a=new c.Container;var u=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a)),l=y.default.instance.isMobile?20:0;u.view.hitArea=new c.Rectangle(-u.view.width/2-l/2,-u.view.height/2-l/2,u.view.width+l,u.view.height+l);var h=new c.Graphics;return h.beginFill(16777215,0),h.drawRect(u.view.hitArea.x,u.view.hitArea.y,u.view.hitArea.width,u.view.hitArea.height),h.endFill(),u.view.addChild(h),u.isOnlyIcon=!1,n.normal||(u.isOnlyIcon=!0),u.normalTexture=n.normal,u.downTexture=n.down||u.normalTexture,u.hoverTexture=n.hover||u.normalTexture,u.sounds=r,u.offsetDown=5,n.icon&&(u.icon=new c.Sprite.from(n.icon),u.icon.anchor.set(.5),a.addChild(u.icon)),u.view.accessible=!0,u.onDown.add(u._onDown,u),u.onUp.add(u._onUp,u),u.onHover.add(u._onHover,u),u.onOut.add(u._onMouseOut,u),u}return a(e,t),l(e,[{key:"_onDown",value:function(){this.isOnlyIcon||(this.view.y+=this.offsetDown,m.default.sfx.play("press"),this.view.texture=c.Texture.from(this.downTexture))}},{key:"_onHover",value:function(){this.isOnlyIcon||(m.default.sfx.stop("roll"),m.default.sfx.play("roll"),this.view.texture=c.Texture.from(this.hoverTexture))}},{key:"_onMouseOut",value:function(){this.isOnlyIcon||(this.icon&&(this.icon.y=0),this.view.texture=c.Texture.from(this.normalTexture))}},{key:"_onUp",value:function(){this.isOnlyIcon||(this.view.y-=this.offsetDown,this.view.texture=c.Texture.from(this.normalTexture))}},{key:"setIcon",value:function(t){this.icon.texture=c.Texture.from(t)}},{key:"setSize",value:function(t){this.defaultScale=t,this.overScale=1.1*t,this.view.scale.set(t)}},{key:"froms",value:function(t,n,i,r){return new e(c.Texture.from(t),c.Texture.from(n),c.Texture.from(i),r?c.Texture.from(r):null)}}]),e}(d.default);_.gameSpecificButton=function(t){var e=new _("bigbutton_up.png","bigbutton_down.png","bigbutton_over.png",t?t:null);return e.defaultScale=1,t&&(e.icon.pivot.y=13),e},e.default=_,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),h=r(l),c=n(20),f=i(c),d=function(t){function e(t){o(this,e);var n=new h.Graphics;n.beginFill(4473924).drawRect(-50,-16,100,32).endFill();var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.hitArea=new h.Rectangle(-50,-16,100,32),i.label=new h.Text(t,{fill:"white",font:"20px lubalin"}),i.label.anchor.set(.5),n.addChild(i.label),i}return a(e,t),e}(f.default);e.default=d,t.exports=e.default},function(t,e,n){var i=n(15),r={};r.create=function(){var t=new i.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},r.clone=function(t){var e=new i.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromValues=function(t,e,n,r,o,s,a,u,l){var h=new i.ARRAY_TYPE(9);return h[0]=t,h[1]=e,h[2]=n,h[3]=r,h[4]=o,h[5]=s,h[6]=a,h[7]=u,h[8]=l,h},r.set=function(t,e,n,i,r,o,s,a,u,l){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=l,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},r.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=h*s-a*l,f=-h*o+a*u,d=l*o-s*u,p=n*c+i*f+r*d;return p?(p=1/p,t[0]=c*p,t[1]=(-h*i+r*l)*p,t[2]=(a*i-r*s)*p,t[3]=f*p,t[4]=(h*n-r*u)*p,t[5]=(-a*n+r*o)*p,t[6]=d*p,t[7]=(-l*n+i*u)*p,t[8]=(s*n-i*o)*p,t):null},r.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],h=e[8];return t[0]=s*h-a*l,t[1]=r*l-i*h,t[2]=i*a-r*s,t[3]=a*u-o*h,t[4]=n*h-r*u,t[5]=r*o-n*a,t[6]=o*l-s*u,t[7]=i*u-n*l,t[8]=n*s-i*o,t},r.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],u=t[7],l=t[8];return e*(l*o-s*u)+n*(-l*r+s*a)+i*(u*r-o*a)},r.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=n[0],d=n[1],p=n[2],m=n[3],v=n[4],y=n[5],_=n[6],g=n[7],b=n[8];return t[0]=f*i+d*s+p*l,t[1]=f*r+d*a+p*h,t[2]=f*o+d*u+p*c,t[3]=m*i+v*s+y*l,t[4]=m*r+v*a+y*h,t[5]=m*o+v*u+y*c,t[6]=_*i+g*s+b*l,t[7]=_*r+g*a+b*h,t[8]=_*o+g*u+b*c,t},r.mul=r.multiply,r.translate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=n[0],d=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=f*i+d*s+l,t[7]=f*r+d*a+h,t[8]=f*o+d*u+c,t},r.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=Math.sin(n),d=Math.cos(n);return t[0]=d*i+f*s,t[1]=d*r+f*a,t[2]=d*o+f*u,t[3]=d*s-f*i,t[4]=d*a-f*r,t[5]=d*u-f*o,t[6]=l,t[7]=h,t[8]=c,t},r.scale=function(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},r.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},r.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,u=r+r,l=n*s,h=i*s,c=i*a,f=r*s,d=r*a,p=r*u,m=o*s,v=o*a,y=o*u;return t[0]=1-c-p,t[3]=h-y,t[6]=f+v,t[1]=h+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-v,t[5]=d+m,t[8]=1-l-c,t},r.normalFromMat4=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],y=e[15],_=n*a-i*s,g=n*u-r*s,b=n*l-o*s,x=i*u-r*a,w=i*l-o*a,T=r*l-o*u,S=h*m-c*p,M=h*v-f*p,E=h*y-d*p,P=c*v-f*m,O=c*y-d*m,A=f*y-d*v,C=_*A-g*O+b*P+x*E-w*M+T*S;
return C?(C=1/C,t[0]=(a*A-u*O+l*P)*C,t[1]=(u*E-s*A-l*M)*C,t[2]=(s*O-a*E+l*S)*C,t[3]=(r*O-i*A-o*P)*C,t[4]=(n*A-r*E+o*M)*C,t[5]=(i*E-n*O-o*S)*C,t[6]=(m*T-v*w+y*x)*C,t[7]=(v*b-p*T-y*g)*C,t[8]=(p*w-m*b+y*_)*C,t):null},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},r.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},r.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],u=t[5],l=t[6],h=t[7],c=t[8],f=e[0],d=e[1],p=e[2],m=e[3],v=e[4],y=e[5],_=t[6],g=e[7],b=e[8];return Math.abs(n-f)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-p)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(a-v)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-y)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(l-_)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(h-g)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(c-b)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))},t.exports=r},function(t,e,n){var i=n(15),r={};r.create=function(){var t=new i.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},r.clone=function(t){var e=new i.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},r.fromValues=function(t,e,n){var r=new i.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},r.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},r.sub=r.subtract,r.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},r.mul=r.multiply,r.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},r.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},r.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},r.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},r.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},r.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)},r.dist=r.distance,r.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)},r.len=r.length,r.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},r.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},r.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2];return t[0]=r*u-o*a,t[1]=o*s-i*u,t[2]=i*a-r*s,t},r.lerp=function(t,e,n,i){var r=e[0],o=e[1],s=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t},r.hermite=function(t,e,n,i,r,o){var s=o*o,a=s*(2*o-3)+1,u=s*(o-2)+o,l=s*(o-1),h=s*(3-2*o);return t[0]=e[0]*a+n[0]*u+i[0]*l+r[0]*h,t[1]=e[1]*a+n[1]*u+i[1]*l+r[1]*h,t[2]=e[2]*a+n[2]*u+i[2]*l+r[2]*h,t},r.bezier=function(t,e,n,i,r,o){var s=1-o,a=s*s,u=o*o,l=a*s,h=3*o*a,c=3*u*s,f=u*o;return t[0]=e[0]*l+n[0]*h+i[0]*c+r[0]*f,t[1]=e[1]*l+n[1]*h+i[1]*c+r[1]*f,t[2]=e[2]*l+n[2]*h+i[2]*c+r[2]*f,t},r.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI,r=2*i.RANDOM()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t},r.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/s,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t},r.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},r.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2],l=n[3],h=l*i+a*o-u*r,c=l*r+u*i-s*o,f=l*o+s*r-a*i,d=-s*i-a*r-u*o;return t[0]=h*l+d*-s+c*-u-f*-a,t[1]=c*l+d*-a+f*-s-h*-u,t[2]=f*l+d*-u+h*-a-c*-s,t},r.rotateX=function(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},r.rotateY=function(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},r.rotateZ=function(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},r.forEach=function(){var t=r.create();return function(e,n,i,r,o,s){var a,u;for(n||(n=3),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,a=i;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}(),r.angle=function(t,e){var n=r.fromValues(t[0],t[1],t[2]),i=r.fromValues(e[0],e[1],e[2]);r.normalize(n,n),r.normalize(i,i);var o=r.dot(n,i);return o>1?0:Math.acos(o)},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},r.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=e[0],a=e[1],u=e[2];return Math.abs(n-s)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-u)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},t.exports=r},function(t,e,n){var i=n(15),r={};r.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},r.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.fromValues=function(t,e,n,r){var o=new i.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.set=function(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},r.sub=r.subtract,r.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},r.mul=r.multiply,r.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},r.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},r.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},r.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},r.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},r.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+o*o)},r.dist=r.distance,r.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return n*n+i*i+r*r+o*o},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)},r.len=r.length,r.squaredLength=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},r.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s),t[0]=n*s,t[1]=i*s,t[2]=r*s,t[3]=o*s),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},r.lerp=function(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t[3]=a+i*(n[3]-a),t},r.random=function(t,e){return e=e||1,t[0]=i.RANDOM(),t[1]=i.RANDOM(),t[2]=i.RANDOM(),t[3]=i.RANDOM(),r.normalize(t,t),r.scale(t,t,e),t},r.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t},r.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2],l=n[3],h=l*i+a*o-u*r,c=l*r+u*i-s*o,f=l*o+s*r-a*i,d=-s*i-a*r-u*o;return t[0]=h*l+d*-s+c*-u-f*-a,t[1]=c*l+d*-a+f*-s-h*-u,t[2]=f*l+d*-u+h*-a-c*-s,t[3]=e[3],t},r.forEach=function(){var t=r.create();return function(e,n,i,r,o,s){var a,u;for(n||(n=4),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,a=i;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}(),r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=e[0],u=e[1],l=e[2],h=e[3];return Math.abs(n-a)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-l)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-h)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))},t.exports=r},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(c===clearTimeout)return clearTimeout(t);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function s(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&a())}function a(){if(!m){var t=r(s);m=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;)d&&d[v].run();v=-1,e=p.length}d=null,m=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var h,c,f=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(t){c=i}}();var d,p=[],m=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||m||r(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){var i;!function(){"use strict";function r(t){t||(t=Math.random),this.p=o(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var e=0;e<512;e++)this.perm[e]=this.p[255&e],this.permMod12[e]=this.perm[e]%12}function o(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var i=e+1+~~(t()*(255-e)),r=n[e];n[e]=n[i],n[i]=r}return n}var s=.5*(Math.sqrt(3)-1),a=(3-Math.sqrt(3))/6,u=1/3,l=1/6,h=(Math.sqrt(5)-1)/4,c=(5-Math.sqrt(5))/20;r.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var n,i,r=this.permMod12,o=this.perm,u=this.grad3,l=0,h=0,c=0,f=(t+e)*s,d=Math.floor(t+f),p=Math.floor(e+f),m=(d+p)*a,v=d-m,y=p-m,_=t-v,g=e-y;_>g?(n=1,i=0):(n=0,i=1);var b=_-n+a,x=g-i+a,w=_-1+2*a,T=g-1+2*a,S=255&d,M=255&p,E=.5-_*_-g*g;if(E>=0){var P=3*r[S+o[M]];E*=E,l=E*E*(u[P]*_+u[P+1]*g)}var O=.5-b*b-x*x;if(O>=0){var A=3*r[S+n+o[M+i]];O*=O,h=O*O*(u[A]*b+u[A+1]*x)}var C=.5-w*w-T*T;if(C>=0){var I=3*r[S+1+o[M+1]];C*=C,c=C*C*(u[I]*w+u[I+1]*T)}return 70*(l+h+c)},noise3D:function(t,e,n){var i,r,o,s,a,h,c,f,d,p,m=this.permMod12,v=this.perm,y=this.grad3,_=(t+e+n)*u,g=Math.floor(t+_),b=Math.floor(e+_),x=Math.floor(n+_),w=(g+b+x)*l,T=g-w,S=b-w,M=x-w,E=t-T,P=e-S,O=n-M;E>=P?P>=O?(a=1,h=0,c=0,f=1,d=1,p=0):E>=O?(a=1,h=0,c=0,f=1,d=0,p=1):(a=0,h=0,c=1,f=1,d=0,p=1):P<O?(a=0,h=0,c=1,f=0,d=1,p=1):E<O?(a=0,h=1,c=0,f=0,d=1,p=1):(a=0,h=1,c=0,f=1,d=1,p=0);var A=E-a+l,C=P-h+l,I=O-c+l,R=E-f+2*l,D=P-d+2*l,k=O-p+2*l,L=E-1+3*l,F=P-1+3*l,j=O-1+3*l,B=255&g,N=255&b,U=255&x,z=.6-E*E-P*P-O*O;if(z<0)i=0;else{var V=3*m[B+v[N+v[U]]];z*=z,i=z*z*(y[V]*E+y[V+1]*P+y[V+2]*O)}var X=.6-A*A-C*C-I*I;if(X<0)r=0;else{var G=3*m[B+a+v[N+h+v[U+c]]];X*=X,r=X*X*(y[G]*A+y[G+1]*C+y[G+2]*I)}var H=.6-R*R-D*D-k*k;if(H<0)o=0;else{var Y=3*m[B+f+v[N+d+v[U+p]]];H*=H,o=H*H*(y[Y]*R+y[Y+1]*D+y[Y+2]*k)}var W=.6-L*L-F*F-j*j;if(W<0)s=0;else{var q=3*m[B+1+v[N+1+v[U+1]]];W*=W,s=W*W*(y[q]*L+y[q+1]*F+y[q+2]*j)}return 32*(i+r+o+s)},noise4D:function(t,e,n,i){var r,o,s,a,u,l=(this.permMod12,this.perm),f=this.grad4,d=(t+e+n+i)*h,p=Math.floor(t+d),m=Math.floor(e+d),v=Math.floor(n+d),y=Math.floor(i+d),_=(p+m+v+y)*c,g=p-_,b=m-_,x=v-_,w=y-_,T=t-g,S=e-b,M=n-x,E=i-w,P=0,O=0,A=0,C=0;T>S?P++:O++,T>M?P++:A++,T>E?P++:C++,S>M?O++:A++,S>E?O++:C++,M>E?A++:C++;var I,R,D,k,L,F,j,B,N,U,z,V;I=P>=3?1:0,R=O>=3?1:0,D=A>=3?1:0,k=C>=3?1:0,L=P>=2?1:0,F=O>=2?1:0,j=A>=2?1:0,B=C>=2?1:0,N=P>=1?1:0,U=O>=1?1:0,z=A>=1?1:0,V=C>=1?1:0;var X=T-I+c,G=S-R+c,H=M-D+c,Y=E-k+c,W=T-L+2*c,q=S-F+2*c,Z=M-j+2*c,K=E-B+2*c,Q=T-N+3*c,J=S-U+3*c,$=M-z+3*c,tt=E-V+3*c,et=T-1+4*c,nt=S-1+4*c,it=M-1+4*c,rt=E-1+4*c,ot=255&p,st=255&m,at=255&v,ut=255&y,lt=.6-T*T-S*S-M*M-E*E;if(lt<0)r=0;else{var ht=l[ot+l[st+l[at+l[ut]]]]%32*4;lt*=lt,r=lt*lt*(f[ht]*T+f[ht+1]*S+f[ht+2]*M+f[ht+3]*E)}var ct=.6-X*X-G*G-H*H-Y*Y;if(ct<0)o=0;else{var ft=l[ot+I+l[st+R+l[at+D+l[ut+k]]]]%32*4;ct*=ct,o=ct*ct*(f[ft]*X+f[ft+1]*G+f[ft+2]*H+f[ft+3]*Y)}var dt=.6-W*W-q*q-Z*Z-K*K;if(dt<0)s=0;else{var pt=l[ot+L+l[st+F+l[at+j+l[ut+B]]]]%32*4;dt*=dt,s=dt*dt*(f[pt]*W+f[pt+1]*q+f[pt+2]*Z+f[pt+3]*K)}var mt=.6-Q*Q-J*J-$*$-tt*tt;if(mt<0)a=0;else{var vt=l[ot+N+l[st+U+l[at+z+l[ut+V]]]]%32*4;mt*=mt,a=mt*mt*(f[vt]*Q+f[vt+1]*J+f[vt+2]*$+f[vt+3]*tt)}var yt=.6-et*et-nt*nt-it*it-rt*rt;if(yt<0)u=0;else{var _t=l[ot+1+l[st+1+l[at+1+l[ut+1]]]]%32*4;yt*=yt,u=yt*yt*(f[_t]*et+f[_t+1]*nt+f[_t+2]*it+f[_t+3]*rt)}return 27*(r+o+s+a+u)}},r._buildPermutationTable=o,i=function(){return r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)),e.SimplexNoise=r,t.exports=r}()},function(t,e){t.exports="precision highp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform float opacity;\nuniform float ratio;\n\nfloat contrast(float mValue, float mScale, float mMidPoint) {\n\treturn clamp( (mValue - mMidPoint) * mScale + mMidPoint, 0.0, 1.0);\n}\n\nfloat contrast(float mValue, float mScale) {\n\treturn contrast(mValue,  mScale, .5);\n}\n\nvec3 contrast(vec3 mValue, float mScale, float mMidPoint) {\n\treturn vec3( contrast(mValue.r, mScale, mMidPoint), contrast(mValue.g, mScale, mMidPoint), contrast(mValue.b, mScale, mMidPoint) );\n}\n\nvec3 contrast(vec3 mValue, float mScale) {\n\treturn contrast(mValue, mScale, .5);\n}\n\nvoid main(void) {\n\tvec2 uv = vTextureCoord;\n\t// uv.y *= ratio;\n\tuv.y = contrast(uv.y, ratio);\n    gl_FragColor = texture2D(texture, uv) * opacity;\n}"},function(t,e){t.exports="// vortex.frag\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform float brightness;\nuniform float frame;\nuniform float numSeg;\nuniform vec2 uvOffset;\n\nvoid main(void) {\n\tvec2 uv = vTextureCoord / numSeg;\n\tvec4 color = texture2D(texture, uv + uvOffset);\n\tif(color.a < 0.01) discard;\n\n\tcolor *= brightness - 0.5;\n    gl_FragColor = color;\n}"},function(t,e){t.exports="// color.frag\n\nprecision highp float;\n\nvarying vec2 vTextureCoord;\nuniform float opacity;\nuniform sampler2D texture;\n\nuniform vec3 hole0;\nuniform vec3 hole1;\n\n\nfloat isInHole(vec2 uv, vec3 hole) {\n\tfloat x = .5 + cos(hole.x) * hole.y;\n\tfloat y = .5 + sin(hole.x) * hole.y;\n\tfloat distToHole = distance(uv, vec2(x, y));\n\treturn distToHole - hole.z;\n}\n\nvoid main(void) {\n\tvec4 color = texture2D(texture, vTextureCoord);\n\n\tif(isInHole(vTextureCoord, hole0) < 0.0) {\n\t\tdiscard;\n\t}\n\n\tif(isInHole(vTextureCoord, hole1) < 0.0) {\n\t\tdiscard;\n\t}\n\t\n\n    gl_FragColor = color * opacity;\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, 0.5);\n}"},function(t,e){t.exports="// basic.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec3 uPosition;\nuniform vec3 uScale;\nuniform float uRotation;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nvoid main(void) {\n\tvec3 position = aVertexPosition;\n\tposition.xy = rotate(position.xy, uRotation);\n\tposition = position * uScale + uPosition;\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n    vTextureCoord = aTextureCoord;\n}"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(2),l=r(u),h=n(149),c=i(h),f=n(3),d=i(f),p=n(73),m=i(p),v=n(85),y=i(v),_=n(19),g=i(_),b=n(27),x=i(b),w=n(86),T=i(w),S=n(84),M=i(S),E=n(74),P=i(E),O=n(79),A=i(O),C=n(31),I=i(C),R=n(29),D=i(R),k=n(88),L=i(k),F=n(150),j=i(F),B=n(72),N=i(B),U=n(52),z=i(U),V=n(23),X=(i(V),n(6)),G=i(X),H=n(89),Y=(i(H),n(39)),W=i(Y),q=n(78),Z=n(77),K=n(38),Q=void 0,J=function(t){function e(){o(this,e);var n={config:window.ASSET_URL+"json/config.json",loaderScreen:y.default},i=s(this,t.call(this,n));if(window.app=i,i.safeSize={width:960,height:560},i.maxSize={width:1024,height:626},i.loader.addManifest(N.default.getManifest(q),window.ASSET_URL).addManifest(N.default.getManifest(Z),window.ASSET_URL).addManifest(N.default.getManifest(K),window.ASSET_URL).addJson(window.ASSET_URL+"json/levels.json","levels").addJson(window.ASSET_URL+"json/save.json","save"),i.loader.addPixiAssets([ASSET_URL+"font/heroic_numeric_big_glow.xml",ASSET_URL+"font/heroic_numeric.xml"]),(0,m.default)(),i.onReady.add(i.onAppReady,i),i.startup(),i._hasSetupSave=!1,i._hasVRStarted=!1,!d.default.instance.desktop){var r=document.body.querySelector(".taster-offsite-panel");r&&(r.style.display="none")}return window.Stats=W.default,i}return a(e,t),e.prototype.setupPixi=function(){var t=this.options;if(t.forceCanvas||d.default.instance.android&&!d.default.instance.chrome)this.renderer=new l.CanvasRenderer(t.width,t.height),this.renderer.clearBeforeRender=!0;else{var e={resolution:1,backgroundColor:t.backgroundColor,antialias:d.default.instance.desktop};this.renderer=l.autoDetectRenderer(t.width,t.height,e)}if(window.WEBGL=l.isWebGL=this.renderer instanceof l.WebGLRenderer,window.renderer=this.renderer,this.view=this.renderer.view,this.stage=new l.Container,this.view.style.position="absolute",this.view.addEventListener("mousedown",function(){window.focus()},!0),l.stage=this.stage,d.default.instance.iOS){var n=navigator.userAgent.split(" "),i=n.indexOf("like"),r=n[i-1],o=r.split("_").map(function(t){return parseInt(t)}),s=o[0],a=o[1];d.default.instance.iOSVersion={majorVersion:s,minorVersion:a}}},e.prototype.onAppReady=function(){var t=this;z.default.init(function(e){e&&(d.default.instance.hasVR=!0),t._onAppReady()})},e.prototype._onAppReady=function(){function t(t,e){for(var n in e)t.style[n]=e[n]}var e=this;if(j.default.init(),Q=(0,I.default)(),Q.gameLoaded(),W.default.track("game_loaded",!0),!this._hasSetupSave){D.default.instance=new D.default("doctor-who-time-vortex-360-rc"),(0,L.default)(D.default.instance);var n=g.default.getJson("save");D.default.instance.load(n.save),"true"===x.default.get_query("clearSave")&&(D.default.instance.reset(),D.default.instance.save()),this._hasSetupSave=!0}if(this.container3D=new l.Container,this._vignette=l.Sprite.from(window.ASSET_URL+"image/high/common/vignet_multiply.png"),this.stage.addChild(this.container3D),this.stage.addChild(this._vignette),this.stage.setChildIndex(this.container3D,0),this.stage.setChildIndex(this._vignette,1),this.titleScreen=new T.default(this),this.gameScreen=new M.default(this,this.container3D),this._camera=this.gameScreen.game.camera,this.screenManager.addScreen(this.titleScreen,"title"),this.screenManager.addScreen(this.gameScreen,"game"),this.overlayManager=new A.default(this),this.stage.addChild(this.overlayManager.view),this.topMenu=new P.default(this),this.stage.addChild(this.topMenu),"true"===x.default.get_query("fastplay")?this.screenManager.gotoScreenByID("game"):this.screenManager.gotoScreenByID("title",{cc:"coucou"}),this.resize(this.w,this.h),"true"===x.default.get_query("stats")){var i=new W.default;document.body.appendChild(i.domElement),G.default.addEF(function(){i.update()})}this._btnVR=document.body.querySelector(".enter-vr"),z.default.hasVR&&(this._vrUpdate(),t(this._btnVR,{display:"block"}),this._btnVR.addEventListener("click",function(){return e._enterVR()}))},e.prototype._enterVR=function(){var t=d.default.instance.desktop?2:1,e=renderer,n=e.width,i=e.height,r=renderer.context.gl.canvas;z.default.present(r,function(){window.vrPresenting=!0,d.default.instance.desktop?renderer.resize(n*t,i*t):renderer.resize(1920,1080)})},e.prototype._vrUpdate=function(){var t=this,e=this.renderer,n=e.context.gl.canvas,i=e.context.gl,r=n.width/2,o=n.height;z.default.vrDisplay.requestAnimationFrame(function(){return t._vrUpdate()}),z.default.getFrameData();var s=function(t,e,n,r){i.scissor(t,e,n,r),i.viewport(t,e,n,r)};if(e.framebuffer.clear(),z.default.setCamera(this._camera.camera,"left"),s(0,0,r,o),e.render(this.stage,null,!1),z.default.setCamera(this._camera.camera,"right"),s(r,0,r,o),e.render(this.stage,null,!1),z.default.submitFrame(),0!=z.default.gamepads.length&&z.default.vrPresenting){var a=z.default.gamepads[0];Math.random()>.99,this._hasVRStarted||a.buttons[0].pressed&&(this.screenManager.gotoScreenByID("game"),this._hasVRStarted=!0)}},e.prototype.update=function(){d.default.instance.hasVR||t.prototype.update.call(this)},e.prototype.resize=function(t,e){this.w=t,this.h=e;var n=1;d.default.instance.isMobile&&(n=window.devicePixelRatio?window.devicePixelRatio:window.screen.deviceXDPI/window.screen.logicalXDPI),n>2&&(n=2);var i=t/this.safeSize.width<e/this.safeSize.height?t/this.safeSize.width:e/this.safeSize.height,r=Math.min(this.maxSize.width*i,t),o=Math.min(this.maxSize.height*i,e);this.renderer.resize(r*n|0,o*n|0),this.view.style.width=r+"px",this.view.style.height=o+"px",this.view.style.left=t/2-r/2+"px",this.view.style.top=e/2-o/2+"px",this.screenManager.resize(r/i,o/i),this.gameScreen&&this.gameScreen.resize(r/i,o/i),this.overlayManager&&(this.overlayManager.resize(r/i,o/i),this.overlayManager.view.scale.set(i*n)),this.topMenu&&(this.topMenu.scale.set(i*n),this.topMenu.resize(r/i,o/i)),this.screenManager.container.scale.set(i*n),this.width=r,this.height=o,this._vignette&&(this._vignette.width=r*n,this._vignette.height=o*n)},e}(c.default);t.exports=J},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(3),s=i(o),a=void 0,u=function(){function t(){r(this,t),this._version=s.default.instance.desktop?"high":"low"}return t.prototype.getManifest=function(t){var e=this;return t.map(function(t){return t.replace("high",e._version)})},t.prototype.fromImage=function(t){},t}();a||(a=new u),e.default=a,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(){o.default.sfx.addSound(window.ASSET_URL+"audio/buttons/roll","roll",{loop:!1,volume:.3,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/buttons/press","press",{loop:!1,volume:.3,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/level_up","level_up",{loop:!1,volume:1,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/crash","crash0",{loop:!1,volume:.4,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/crash1","crash1",{loop:!1,volume:.4,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/crash2","crash2",{loop:!1,volume:.4,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/pickup_magnet","pickup_magnet",{loop:!1,volume:.6,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/pickup_shield","pickup_shield",{loop:!1,volume:.6,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/pickup","pickup0",{loop:!1,volume:.4,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/pickup1","pickup1",{loop:!1,volume:.4,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/pickup2","pickup2",{loop:!1,volume:.4,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/warning_low_shield","warning_low_shield",{loop:!0,volume:.4,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/warning","warning",{loop:!0,volume:1,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/rock_pass_1","rockPass0",{loop:!1,volume:.4,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/rock_pass_2","rockPass1",{loop:!1,volume:.4,autoplay:!1}),o.default.sfx.addSound(window.ASSET_URL+"audio/rock_pass_3","rockPass2",{loop:!1,volume:.4,autoplay:!1}),o.default.music.addSound(window.ASSET_URL+"audio/background_loop","background",{loop:!0,volume:.5,autoplay:!1})};var r=n(11),o=i(r);t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(21),c=i(h),f=n(11),d=i(f),p=n(3),m=i(p),v=n(29),y=i(v),_=n(6),g=i(_),b=n(22),x=function(t){function e(n){o(this,e);var i=s(this,t.call(this));return window.topMenu=i,i.app=n,i.state="home",i.muted=!y.default.instance.object.soundOn,i._isLocked=!1,i.previousState=i.state,i.states={home:["exit","mute","settings"],pause:["home","mute","settings"],tutorial:["back","mute","settings"],game:["pause"],gameover:["home","mute"]},i.buildButtons(),i.hideButtons(),i.muted&&(d.default.sfx.mute(),d.default.music.mute(),i.buttons.mute.setIcon("icon_sound_off.png")),m.default.instance.hasVR&&(i.visible=!1),i}return a(e,t),e.prototype.buildButtons=function(){this.buttons={};var t=c.default.primary("icon_pause.png","pause");t.view.accessible=!0,t.view.tabIndex=6,this.addChild(t.view),this.buttons.pause=t;var e=c.default.tertiary("icon_settings.png","settings");e.view.tabIndex=5,e.view.accessible=!0,this.buttons.settings=e;var n=c.default.tertiary("icon_sound_on.png","sound");n.view.tabIndex=4,n.view.accessible=!0,this.addChild(n.view),this.buttons.mute=n;var i=c.default.primary("icon_back.png","back");i.view.tabIndex=3,i.view.accessible=!0,this.addChild(i.view),this.buttons.back=i;var r=c.default.primary("icon_exit.png","exit");r.view.tabIndex=1,r.view.accessible=!0,this.addChild(r.view),this.buttons.exit=r;var o=c.default.primary("icon_home.png","home");o.view.tabIndex=2,o.view.accessible=!0,this.addChild(o.view),this.buttons.home=o;for(var s in this.buttons)this.buttons[s].onPress.add(this.onButtonPressed,this)},e.prototype.hideButtons=function(){for(var t in this.buttons)this.buttons[t].view.visible=!1},e.prototype.setState=function(t){this.hideButtons();for(var e in this.states)if(t===e)for(var n=this.states[e],i=0;i<n.length;i++){var r=n[i];this.buttons[r].view.visible=!0}this.previousState=this.state,this.state=t},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(t){this.visible=!t},e.prototype.onButtonPressed=function(t){var e=this;switch(t){case this.buttons.mute:if(this._isLocked)return;Stats.trackOnce("game_first_click","mute",{game_screen:"menu"}),this._isLocked=!0,y.default.instance.toggleSound(),this.muted=!y.default.instance.object.soundOn,d.default.music.unmute(),this.muted?(d.default.music.fadeTo("background",0,.5),this.buttons.mute.setIcon("icon_sound_off.png"),g.default.delay(function(){d.default.sfx.mute(),e._isLocked=!1},null,500),Stats.track("game_click","sound_off",{game_screen:"menu"})):(d.default.sfx.unmute(),d.default.music.setVolume("background",0),"pause"!==this.state&&d.default.music.fadeTo("background",.5,.5),this.buttons.mute.setIcon("icon_sound_on.png"),g.default.delay(function(){
e._isLocked=!1},null,500),Stats.track("game_click","sound_on",{game_screen:"menu"}));break;case this.buttons.pause:this.app.overlayManager.show("pause",{log:Math.random()}),this.setState("pause"),Stats.track("game_click","pause",{game_screen:"menu"});break;case this.buttons.back:break;case this.buttons.settings:this.app.overlayManager.show("settings"),Stats.track("game_click","settings",{game_screen:"menu"});break;case this.buttons.home:this.app.overlayManager.hide(),this.app.screenManager.gotoScreenByID("title"),this.app.gameScreen.game.gameEnd();break;case this.buttons.exit:window.location.href="http://www.bbc.co.uk/taster/projects/doctor-who-time-vortex-360"}},e.prototype.resize=function(t,e){var n=this.buttons.mute.view.width/2,i=b.GEL_PADDING_TOP+50,r=n+i;this.buttons.pause.view.position.set(t-n-b.GEL_PADDING_LEFT,r),this.buttons.mute.view.position.set(t-n-b.GEL_PADDING_LEFT,r);var o=this.buttons.home.view.width/2;this.buttons.back.view.position.set(o+b.GEL_PADDING_LEFT,o+i),this.buttons.home.view.position.set(o+b.GEL_PADDING_LEFT,o+i),this.buttons.exit.view.position.x=this.buttons.home.view.position.x,this.buttons.exit.view.position.y=this.buttons.home.view.position.y,this.buttons.settings.view.position.x=this.buttons.pause.view.position.x,this.buttons.settings.view.position.y=this.buttons.pause.view.position.y,this.buttons.mute.view.position.y=this.buttons.pause.view.position.y,this.buttons.mute.view.position.y=this.buttons.pause.view.position.y},e}(l.Container);e.default=x,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(4),c=(i(h),n(20)),f=i(c),d=function(t){function e(n){o(this,e);var i=new l.Sprite.from("switch_off.png"),r=s(this,t.call(this,i));return i.accessible=!0,i.accessibleTitle=n,r}return a(e,t),e.prototype.reset=function(){this.view.texture=l.Texture.from("switch_off.png")},e.prototype.tick=function(){this.view.texture=l.Texture.from("switch_on.png")},e}(f.default);e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(4),c=(i(h),n(60)),f=i(c),d=n(27),p=i(d),m=n(11),v=(i(m),function(t){function e(n,i,r){var a=n.textures,u=n.sounds;o(this,e);var h=s(this,t.call(this,{textures:a,sounds:u}));return h.label=new l.Text(i,{align:"right",fill:"white",font:"40px helvetica"}),h.label.anchor.set(.5),h.label.position.y=0,p.default.resizeText(h.label,150),h.view.addChild(h.label),a.icon&&(h.label.position.x=-20,r&&(h.label.position.x=20)),r?h.icon.position.x=-h.view.width/3:h.icon.position.x=h.view.width/3,h}return a(e,t),e}(f.default));e.default=v,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var n=["image/high/preload/loader_bg.jpg","image/high/preload/loader_fill.png","image/high/preload/loader_fill_ui.png","image/high/preload/loader_frame.png","image/high/preload/loader_text.png","image/high/preload/old_browser.jpg"];e.default=n,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var n=["model/baddie.obj","model/bar.obj","model/game_logo copy.obj","model/game_logo.obj","model/tardis.obj","model/tutorial0.obj","model/tutorial0Desktop.obj","model/tutorial1.obj","model/tutorial2.obj","model/tutorial3.obj","model/tutorial4.obj","model/tutorial5.obj","model/tutorial6.obj","model/tutorial7.obj"];e.default=n,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(4),c=i(h),f=n(53),d=i(f),p=n(21),m=i(p),v=n(81),y=i(v),_=n(80),g=i(_),b=n(83),x=i(b),w=n(82),T=i(w),S=function(t){function e(n){o(this,e);var i=s(this,t.call(this));return i.app=n,i.view=new l.Container,i.pauseScreen=new y.default(n),i.gameoverScreen=new g.default(n),i.tutorialScreen=new x.default(n),i.settingsScreen=new T.default(n),i.addScreen(i.pauseScreen,"pause"),i.addScreen(i.gameoverScreen,"gameover"),i.addScreen(i.tutorialScreen,"tutorial"),i.addScreen(i.settingsScreen,"settings"),i.addScreen(new l.Container,"empty"),i.onShow=new c.default,i.onHide=new c.default,i.black=(new l.Graphics).beginFill(0).drawRect(0,0,100,100),i.black.alpha=.5,i.black.interactive=!0,i.black.hitArea=new l.Rectangle(0,0,1e4,1e4),i.view.visible=!1,i.closeButton=m.default.close("icon_close.png"),i.closeButton.onPress.add(i.goBack,i),i.closeButton.view.x=1e4,i.closeButton.view.y=120,i.view.addChild(i.container),i.view.addChild(i.closeButton.view),i.app.screenManager.container.filterArea=new l.Rectangle(0,0,1e4,1e4),i}return a(e,t),e.prototype.goBack=function(){this.history.pop();var t=this.history.pop();t?this.gotoScreen(t):this.hide()},e.prototype.show=function(t,e){this.history=[],this.gotoScreenByID(t,e,!0),this.onShow.dispatch(),this.view.visible=!0,this.view.alpha=0,TweenLite.to(this.view,.3,{alpha:1}),this.closeButton.view.scale.set(0)},e.prototype.gotoScreen=function(t,e,n,i){void 0===t.hasClose||t.hasClose===!0?(this.closeButton.view.interactive=!0,TweenLite.to(this.closeButton.view.scale,.3,{x:this.closeButton.defaultScale,y:this.closeButton.defaultScale,ease:Back.easeOut,delay:.4})):(this.closeButton.view.interactive=!1,TweenLite.to(this.closeButton.view.scale,.3,{x:0,y:0,ease:Back.easeOut})),d.default.prototype.gotoScreen.call(this,t,e,n,i)},e.prototype.hide=function(){this.history=[],this.closeButton.view.interactive=!1,this.gotoScreenByID("empty"),TweenLite.to(this.closeButton.view.scale,.3,{x:0,y:0,ease:Back.easeOut}),TweenLite.to(this.view,.3,{alpha:0,onComplete:function(){this.view.visible=!1,this.onHide.dispatch()}.bind(this)})},e.prototype.resize=function(t,e){this.closeButton.view.x=t/2+320-5,this.closeButton.view.y=e/2-180-12,this.black.scale.set(t/100,e/100),d.default.prototype.resize.call(this,t,e)},e.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.container.removeChild(this.currentScreen)),this.currentScreen=this.nextScreen,this.currentScreen.alpha=0,this.currentScreen.onShow&&this.currentScreen.onShow(),this.currentScreen.resize&&this.currentScreen.resize(this.w,this.h),TweenLite.to(this.currentScreen,.4,{alpha:1,onComplete:this.onFadein.bind(this)}),this.container.addChild(this.currentScreen)},e}(d.default);e.default=S,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(21),c=i(h),f=n(19),d=(i(f),n(61)),p=(i(d),n(22),n(29)),m=i(p),v=n(3),y=(i(v),n(1)),_=i(y),g=function(t){function e(n){o(this,e);var i=s(this,t.call(this));i.app=n,i._blackBg=new l.Graphics,i._blackBg.beginFill(0,.5),i._blackBg.drawRect(0,0,100,100),i.addChild(i._blackBg);var r=renderer.context.gl.canvas;return i.world=i.app.gameScreen.game.world,i.world.signals.onUpdateScore.add(function(t){return i._onUpdateScore(t)}),i.bg=l.Sprite.from("ui_text_panel.png"),i.addChild(i.bg),i.bg.anchor.set(.5),i.bg.scale.set(.625),i.hasClose=!1,i.title=l.Sprite.from("ui_title_gameover.png"),i.title.anchor.set(.5),i.addChild(i.title),r.style.letterSpacing="4px",i._textScore=new l.extras.BitmapText("SCORE : 0",{align:"center",font:"32px Heroic Condensed Glow"}),i.addChild(i._textScore),i._textScore.position.set(-170,-34),window.txtScore=i._textScore,i._textBestScore=new l.extras.BitmapText("YOUR BEST : 0",{align:"center",font:"21px Heroic Condensed Glow"}),i.addChild(i._textBestScore),i._textBestScore.position.set(-170,16),window.bestScore=i._textBestScore,i._btnContainer=new l.Container,i.addChild(i._btnContainer),window.btnContainer=i._btnContainer,i.restartButton=c.default.primaryBig("icon_restart.png"),i.restartButton.onPress.add(i.onPress,i),i.restartButton.view.position.set(80,-17),i._btnContainer.addChild(i.restartButton.view),window.btnRestart=i.restartButton.view,i._btnFaceBook=c.default.tertiary("icon_facebook.png"),i._btnFaceBook.view.position.set(137,55),i._btnContainer.addChild(i._btnFaceBook.view),i._btnFaceBook.onPress.add(i.onPress,i),window.btnFacebook=i._btnFaceBook.view,i._btnTwitter=c.default.tertiary("icon_twitter.png"),i._btnTwitter.view.position.set(172,-2),i._btnContainer.addChild(i._btnTwitter.view),i._btnTwitter.onPress.add(i.onPress,i),window.btnTwitter=i._btnTwitter.view,i}return a(e,t),e.prototype._onUpdateScore=function(t){this._textScore&&(m.default.instance.setScore(t.score),this._textScore.text="SCORE : "+t.score,this._textBestScore.text="YOUR BEST : "+m.default.instance.object.bestScore,this._score=t.score)},e.prototype.onPress=function(t){var e=_.default.sharing.useCurrentURL?window.location.href:translations.site_url;if(t===this.restartButton)Stats.track("game_click","replay",{game_screen:"paused"}),this.app.overlayManager.hide(),this.app.gameScreen.game.restart();else if(t===this._btnFaceBook){Stats.track("game_click","faceboook_share",{game_screen:"paused"});var n=(translations.sharing_facebook,"https://www.facebook.com/sharer/sharer.php?u="+e);window.open(n,"_blank")}else if(t===this._btnTwitter){Stats.track("game_click","twitter_share",{game_screen:"paused"});var i=translations.sharing_twitter;i=i.replace("${score}",this._score);var r="http://twitter.com/share?text="+i+"&url="+e;window.open(r,"_blank")}},e.prototype.init=function(){},e.prototype.onShow=function(){this.app.topMenu.setState("gameover")},e.prototype.onHide=function(){this.app.topMenu.setState(this.app.topMenu.previousState)},e.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2;var n=t/1136;this.guide&&(this.guide.scale.set(n),this.guide.position.set(-this.guide.width/2,-this.guide.height/2)),this.title.scale.set(n),this.title.position.set(3*n,-194.5*n),this._btnContainer.scale.set(n,n),this._btnContainer.y=7,this.bg.position.set(-1*n,7.4*n),this._blackBg.width=t,this._blackBg.height=e,this._blackBg.position.set(-t/2,-e/2)},e}(l.Container);e.default=g,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(11),c=i(h),f=n(21),d=i(f),p=n(19),m=(i(p),n(61)),v=(i(m),n(37)),y=i(v),_=(n(22),n(3)),g=i(_),b=function(t){function e(n){o(this,e);var i=s(this,t.call(this));return window.pause=i,i.app=n,i.hasClose=!1,i._blackBg=new l.Graphics,i._blackBg.beginFill(0,.65),i._blackBg.drawRect(0,0,100,100),i.addChild(i._blackBg),i.bg=l.Sprite.from("ui_text_panel.png"),i.addChild(i.bg),i.bg.anchor.set(.5),i.bg.scale.set(.625),i.title=l.Sprite.from("ui_title_paused.png"),i.title.anchor.set(.5),i.addChild(i.title),i._btnContainer=new l.Container,i.addChild(i._btnContainer),i.playButton=d.default.primaryBig("icon_play.png"),i.playButton.accessible=!0,i.playButton.view.tabIndex=2,i.playButton.view.anchor.set(.5),i.playButton.onPress.add(i.onPress,i),i._btnContainer.addChild(i.playButton.view),i.restartButton=d.default.tertiary("icon_restart.png"),i.restartButton.accessible=!0,i.restartButton.view.tabIndex=1,i.restartButton.onPress.add(i.onPress,i),i.restartButton.view.x=10,i._btnContainer.addChild(i.restartButton.view),g.default.instance.desktop||(i._textControlType=new l.extras.BitmapText("CONTROL TYPE",{align:"center",font:"30px Heroic Condensed Glow"}),i._btnContainer.addChild(i._textControlType),i._textControlType.position.set(262,-36),i._textTilt=new l.extras.BitmapText("TILT",{align:"center",font:"30px Heroic Condensed Glow"}),i._btnContainer.addChild(i._textTilt),i._textTilt.position.set(238,3.5),i._textTouch=new l.extras.BitmapText("TOUCH",{align:"center",font:"30px Heroic Condensed Glow"}),i._btnContainer.addChild(i._textTouch),i._textTouch.position.set(343,3.5),i.controlButton=new y.default(!0),i._btnContainer.addChild(i.controlButton.view),i.controlButton.onPress.add(function(){return i._onToggled()})),i}return a(e,t),e.prototype._onToggled=function(){this.controlButton.toggle(!this.controlButton.on),this.app.gameScreen.game.toggleControl(this.controlButton.on),c.default.sfx.stop("press"),c.default.sfx.play("press"),this.controlButton.on?Stats.track("game_control","gyroscope"):Stats.track("game_control","swipe")},e.prototype.onPress=function(t){t===this.restartButton?(this.app.gameScreen.game.clear(),this.app.gameScreen.game.restart(),this.app.overlayManager.hide(),Stats.track("game_click","replay",{game_screen:"paused"})):t===this.playButton&&(this.app.overlayManager.hide(),this.app.gameScreen.game.resume())},e.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2;var n=t/1136;this.title.scale.set(n),this.title.position.set(3*n,-194.5*n),this.bg.position.set(-1*n,7.4*n),this._btnContainer.scale.set(n,n),this._btnContainer.x=-this.bg.width/2+(this.bg.width-this._btnContainer.width)/2,g.default.instance.desktop||(this._btnContainer.x+=45*n),this._btnContainer.y=7,this.restartButton.view.position.x=34.3,this.playButton.view.position.x=140,this.controlButton&&(this.controlButton.view.position.x=263.05,this.controlButton.view.position.y=-11),this._blackBg.width=t,this._blackBg.height=e,this._blackBg.position.set(-t/2,-e/2)},e}(l.Container);e.default=b,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(11),c=i(h),f=n(37),d=(i(f),n(75)),p=(i(d),n(20)),m=(i(p),function(t){function e(n){o(this,e);var i=s(this,t.call(this,n));return window.ss=i,i.app=n,i.hasClose=!1,i.hasCleared=!1,i.noRenderBlur=!0,i}return a(e,t),e.prototype.next=function(){this._showPage(1)},e.prototype.prev=function(){this._showPage(0)},e.prototype._showPage=function(t){},e.prototype.onAudioToggle=function(t){this._btnAudio.toggle(!t)},e.prototype.onMotionToggle=function(t){this._btnMotion.toggle(t)},e.prototype.onShow=function(){this._showPage(0),this.app.topMenu.hide(!0),this._btnClear.reset(),this._btnClear.enable()},e.prototype.onHide=function(){this.app.topMenu.hide(!1)},e.prototype.onPress=function(t){c.default.sfx.play("settings_slider"),t===this._btnAudio||t===this._btnMotion||t===this._btnClear&&(this._btnClear.tick(),this._btnClear.disable(),window.location.reload(),this.app.gameScreen.game.player.resetAll(),this.screenManager.hide(),this.app.screenManager.gotoScreenByID("title"))},e.prototype.goBack=function(){"title"===this.app.screenManager.currentScreen.id?this.app.overlayManager.goBack():this.screenManager.show("pause")},e.prototype.resize=function(t,e){this.x=t/2,this.y=e/2},e}(l.Container));e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(11),c=(i(h),n(21)),f=i(c),d=n(13),p=i(d),m=n(167),v=i(m),y=n(168),_=(i(y),n(3)),g=i(_),b=n(22),x=function(t){function e(n){o(this,e);var i=s(this,t.call(this));return i.app=n,i.hasClose=!1,i.panels=[],window.tuto=i,i}return a(e,t),e.prototype.init=function(){if(!this.inited){this.inited=!0;var t=[{thumb_desktop:"how-to-1.jpg",thumb_mobile:"how-to-1.jpg"},{thumb_desktop:"how-to-2.jpg",thumb_mobile:"how-to-2.jpg"},{thumb_desktop:"how-to-3.jpg",thumb_mobile:"how-to-3.jpg"}].map(function(t){return g.default.instance.desktop?(t.thumb=t.thumb_desktop,t.copy=t.copy_desktop):(t.thumb=t.thumb_mobile,t.copy=t.copy_mobile),t});g.default.instance.desktop;for(var e=0;e<t.length;e++){var n=t[e],i=new l.Container,r=l.Sprite.from(n.thumb);i.addChild(r),r.anchor.set(0,.5),i.y=150,i.pivot.x=-105,this.panels.push(i)}var o={itemWidth:650,padding:160,useMask:!0,bounds:new l.Rectangle(-300,0,600,300),dots:!1};this.carousel=new v.default(this.panels,o),this.carousel.y=-146,this.bg=new l.Graphics,this.bg.beginFill(8026746),this.bg.drawRect(0,0,300,200),this.addChild(this.bg),this.addChild(this.carousel),this.title=new l.Text("How to play",{font:"60px helvetica",fill:"white"}),this.title.anchor.x=.5,this.title.position.y=this.bg.position.y-this.bg.height/2+b.GEL_TITLE_PADDING_TOP,this.addChild(this.title),this.leftArrow=f.default.tertiary("icon_prev.png","previous"),this.leftArrow.talk="dm_interface_elements_vo_narrator_back_t1",this.addChild(this.leftArrow.view),this.rightArrow=f.default.tertiary("icon_next.png","next"),this.rightArrow.talk="dm_interface_elements_vo_narrator_next_t1",this.addChild(this.rightArrow.view),this.leftArrow.view.x=240,this.leftArrow.view.y=0,this.rightArrow.view.x=240,this.rightArrow.view.y=0,this.carousel.setButtons(this.leftArrow,this.rightArrow)}},e.prototype.update=function(){},e.prototype.onNextPressed=function(){this.trackpad.nextSlot(),this.currentPage++,this.pageTwoTimeout=Math.round((new Date).getTime()/1e3),p.default.instance.add(this.update,this)},e.prototype.onPreviousPressed=function(){this.trackpad.previousSlot(),this.currentPage--,p.default.instance.remove(this.update,this)},e.prototype.onShow=function(){var t=this;this.init(),this.screenManager.app.topMenu.setState("tutorial"),this.app.topMenu.buttons.back.onPress.add(function(){t.app.screenManager.currentScreen.game?t.app.overlayManager.gotoScreenByID("pause"):"title"===t.app.screenManager.currentScreen.id?t.app.overlayManager.hide():t.app.overlayManager.gotoScreenByID("pause")})},e.prototype.onHide=function(){this.screenManager.app.topMenu.setState(this.screenManager.app.topMenu.previousState)},e.prototype.onPress=function(t){},e.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2,this.title.position.y=-this.h/2+b.GEL_TITLE_PADDING_TOP,this.bg.width=this.w/1.4,this.bg.height=this.h/1.7,this.carousel.y=-this.bg.height/2+34,this.bg.position.x=-this.bg.width/2,this.bg.position.y=-this.bg.height/2,this.leftArrow.view.position.x=-t/2+this.leftArrow.view.width/2+b.GEL_PADDING_LEFT,this.rightArrow.view.position.x=t/2-this.rightArrow.view.width/2-b.GEL_PADDING_RIGHT},e}(l.Container);e.default=x,t.exports=e.default},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(107),l=r(u),h=n(2),c=i(h),f=n(155),d=r(f),p=function(t){function e(n,i){o(this,e);var r=s(this,t.call(this));return r.app=n,r.game=new l.default(i),r.game.onGameover.add(r.onGameover,r),r.addChild(r.game.view),r.transition=new d.default,r}return a(e,t),e.prototype.onShow=function(){this.game.start(),this.app.overlayManager.onShow.add(this.onOverlayShow,this),this.app.overlayManager.onHide.add(this.onOverlayHide,this),this.app.topMenu.setState("game")},e.prototype.quit=function(){this.screenManager.gotoScreenByID("title")},e.prototype.onGameover=function(){this.app.overlayManager.show("gameover")},e.prototype.onShown=function(){},e.prototype.onHide=function(){this.app.overlayManager.onShow.remove(this.onOverlayShow,this),this.app.overlayManager.onHide.remove(this.onOverlayHide,this),this.app.view.style["-webkit-filter"]=null},e.prototype.onHidden=function(){this.game.pause(),this.app.topMenu.setState("home")},e.prototype.onOverlayShow=function(){this.game.pause()},e.prototype.onOverlayHide=function(){this.game.isGameover?(this.game.reset(),this.game.resume()):(this.game.resume(),this.app.topMenu.setState("game"))},e.prototype.resize=function(t,e){this.game.view.x=0,this.game.view.y=0,this.game.resize(t,e)},e}(c.Container);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(13),c=i(h),f=n(3),d=(i(f),n(35)),p=i(d),m=n(27),v=(i(m),n(4)),y=i(v),_=n(45),g=i(_),b=n(6),x=i(b),w=n(23),T=i(w),S=function(t){function e(n){o(this,e);var i=s(this,t.call(this));return i.app=n,n.loader.onProgress.add(i.onProgress,i),i.easeLoad=0,i.targetLoad=0,i._isClosing=!1,i.onReady=new y.default,i.onComplete=new y.default,i.onAssetsLoaded(),i}return a(e,t),e.prototype.onShown=function(){},e.prototype.onAssetsLoaded=function(){this._bg=new l.Sprite.fromImage(window.ASSET_URL+"image/high/preload/loader_bg.jpg"),this.addChild(this._bg),this.container=new l.Container,this.barBg=new l.Sprite.fromImage(window.ASSET_URL+"image/high/preload/loader_frame.png"),this.barBg.anchor.set(.5),this.bar=new l.Sprite.fromImage(window.ASSET_URL+"image/high/preload/loader_fill_ui.png"),this.bar.anchor.set(.5),this._circleMask=new g.default,this._circleMask.angleOffset=0,this.container.addChild(this._circleMask),this.bar.mask=this._circleMask,window.circleMask=this._circleMask,this.textLoading=new l.Sprite.fromImage(window.ASSET_URL+"image/high/preload/loader_text.png"),this.textLoading.anchor.set(.5),this.textLoading.y=90,this.container.addChild(this.textLoading),this.container.addChild(this.barBg),this.container.addChild(this.bar),c.default.instance.add(this.update,this),this.addChild(this.container),this.resize(this.w,this.h),p.default.wait(this.showLoader.bind(this))},e.prototype.showLoader=function(){this.app.loader.load()},e.prototype.update=function(){var t=this;this.easeLoad+=.3*(this.targetLoad-this.easeLoad),this._circleMask.ratio=this.easeLoad,this.easeLoad>.99&&!this._isClosing&&T.default.hasComplete&&(this._isClosing=!0,this._circleMask.ratio=1,TweenLite.to(this,1,{alpha:0,ease:Cubic.easeInOut}),x.default.delay(function(){t._toClose()},null,1e3))},e.prototype._toClose=function(){this.bar.mask=null,this.visible=!1,this.container.visible=!1,c.default.instance.remove(this.update,this),this.onComplete.dispatch()},e.prototype.onProgress=function(t){this.targetLoad=t,1==t&&T.default.pregenerate()},e.prototype.onShow=function(){},e.prototype.onHide=function(){c.default.instance.remove(this.update,this)},e.prototype.resize=function(t,e){this.w=t,this.h=e,this.container.position.set(t/2,e/2-40),this._bg.width=t,this._bg.height=e},e}(l.Container);e.default=S,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(20),c=(i(h),n(21)),f=i(c),d=n(3),p=i(d),m=n(11),v=i(m),y=n(27),_=(i(y),n(145)),g=i(_),b=(n(22),function(t){function e(n){o(this,e);var i=s(this,t.call(this));return i.app=n,i.title=l.Sprite.from(window.ASSET_URL+"image/high/common/title_screen.png"),i.title.anchor.set(.5,.5),i.addChild(i.title),i.playButton=f.default.primaryBig("icon_play.png"),i.playButton.view.accessible=!0,i.playButton.view.tabIndex=10,i.addChild(i.playButton.view),i.playButton.onPress.add(i.onButtonPressed,i),p.default.instance.hasVR&&(i.visible=!1),i}return a(e,t),e.prototype.onButtonPressed=function(t){t===this.playButton&&(Stats.trackOnce("game_first_click","play",{game_screen:"home"}),Stats.track("game_click","play",{game_screen:"home"}),p.default.instance.desktop||(this.wakelock=new g.default,this.wakelock.request()),v.default.music.play("background"),v.default.music.setVolume("background",0),v.default.music.fadeTo("background",.5,.5),p.default.instance.android&&(document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullScreen&&document.body.webkitRequestFullScreen()),this.screenManager.gotoScreenByID("game"))},e.prototype.init=function(){},e.prototype.beforeShow=function(t){},e.prototype.onShow=function(){this.app.topMenu.setState("home"),this.alpha=0,TweenLite.to(this,1,{alpha:1,ease:Cubic.easeOut})},e.prototype.onShown=function(){},e.prototype.resize=function(t,e){this.title.position.set(t/2,e/2-60),this.playButton.view.position.set(t/2,e/2+100)},e}(l.Container));e.default=b,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(3),s=i(o),a=void 0,u=function t(){r(this,t),this.device=s.default.instance,this.hasWebVR=!1};a||(a=new u),e.default=a,t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=(n(19),function(t){t.setScore=function(t){this.object.bestScore=Math.max(t,this.object.bestScore)},t.finishOnboarding=function(){this.object.hasPassOnboarding=!0},t.toggleSound=function(t){this.object.soundOn=!this.object.soundOn}});e.default=i,t.exports=e.default},function(t,e,n){var i;i=function(t,e,i){var r=(n(34),n(13)),o=n(59),s=n(39),a=function(){this.frequency=15,this.trackObj={heartbeat_period:this.frequency},this.timer=0,o.onShow.add(this.onShow,this),o.onHide.add(this.onHide,this),this.active=!1,this.onShow()};a.prototype.update=function(){var t=new Date,e=t-this.lastTime,n=e/1e3;this.timer+=n;var i;app.gameScreen&&(i=app.gameScreen.game),this.timer>=this.frequency&&(this.trackObj.game_play_count=s.gamePlayCount,i&&(this.trackObj.controls=i.controlType,this.trackObj.game_level_number=i.levelTotal),s.track("timer","heartbeat",this.trackObj),this.timer-=this.frequency),this.lastTime=t},a.prototype.onShow=function(){this.active||(this.active=!0,this.lastTime=new Date,r.instance.add(this.update,this))},a.prototype.onHide=function(){this.active&&(this.active=!1,r.instance.remove(this.update,this))},i.exports=new a}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(40),o=i(r),s=function(){
return o.default.getGMI()};e.default=s,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(9),s=function(){function t(){i(this,t),this._mtxView=o.mat4.create(),this._mtxInvertView=o.mat4.create(),this._mtxProj=o.mat4.create(),this._position=o.vec3.create(),this._target=o.vec3.create()}return t.prototype.lookAt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1,0];o.vec3.copy(this._position,t),o.vec3.copy(this._target,e),o.mat4.identity(this._mtxView),o.mat4.lookAt(this._mtxView,t,e,n)},t.prototype.setProjection=function(t){this._projection=o.mat4.clone(t)},t.prototype.setView=function(t){this._matrixView=o.mat4.clone(t)},t.prototype.setFromViewProj=function(t,e){this.setView(t),this.setProjection(e)},t.prototype.setPerspective=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this._fov=t,this._near=n,this._far=i,this._aspectRatio=e,o.mat4.perspective(this._mtxProj,t,e,n,i)},r(t,[{key:"viewMatrix",get:function(){return this._mtxView}},{key:"projectionMatrix",get:function(){return this._mtxProj}},{key:"invertViewMatrix",get:function(){return this._mtxInvertView}},{key:"view",get:function(){return this._mtxView}},{key:"projection",get:function(){return this._mtxProj}},{key:"invertView",get:function(){return this._mtxInvertView}},{key:"position",get:function(){return this._position}},{key:"target",get:function(){return this._target}}]),t}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=(i(s),n(14)),u=i(a),l=n(28),h=i(l),c=n(185),f=i(c),d=void 0,p=26,m=function(){function t(){r(this,t);var e=PIXI.Texture.from(window.ASSET_URL+"image/high/common/fx-badies.png"),n=1,i=Math.floor(Math.random()*p);if(this.uniforms={uPosition:[0,0,0],uScale:[n,n,n],uRotation:[Math.random(),Math.random(),Math.random()],texture:e,brightness:1,frame:i,uvOffset:[0,0],numSeg:8,opacity:.2},!d){var o=4;d=u.default.plane(o,o)}var s=new PIXI.Shader.from(h.default,f.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(d,s),this._mesh.state.culling=!1,this._mesh.state.depthTest=!0}return t.prototype.update=function(){this.uniforms.frame++,this.uniforms.frame>=p&&(this.uniforms.frame=0);var t=this.uniforms.frame%8/8,e=Math.floor(this.uniforms.frame/8)/8;this.uniforms.uvOffset=[t,e]},t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this.uniforms.uScale=[this._scale,this._scale,this._scale]}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(14),a=i(s),u=n(191),l=i(u),h=n(36),c=i(h),f=void 0,d=function(){function t(){r(this,t),this.uniforms={color:[0,0,0],opacity:1},f||(f=a.default.plane(2,2,1));var e=new PIXI.Shader.from(l.default,c.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(f,e),this._mesh.state.depthTest=!1}return o(t,[{key:"mesh",get:function(){return this._mesh}},{key:"opacity",get:function(){return this.uniforms.opacity},set:function(t){this.uniforms.opacity=t}}]),t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=i(s),u=n(186),l=i(u),h=n(36),c=i(h),f=void 0,d=function(){function t(){r(this,t);var e=1;if(this.uniforms={uPosition:[0,0,0],uScale:[e,e,e],color:[.474,1,1],opacity:.5,uFlip:1},!f){for(var n=function(t,e){var n=e/2,i=t/h*Math.PI*2,r=.25*(1-n),o=Math.cos(i)*r,s=Math.sin(i)*r;return n*=-a.default.trialLength,[o,s,n]},i=[],o=[],s=[],u=0,h=12,d=0;d<h;d++)for(var p=0;p<2;p++)i=i.concat(n(d,p)),i=i.concat(n(d+1,p)),i=i.concat(n(d+1,p+1)),i=i.concat(n(d,p+1)),o=o.concat([d/h,p/2]),o=o.concat([(d+1)/h,p/2]),o=o.concat([(d+1)/h,(p+1)/2]),o=o.concat([d/h,(p+1)/2]),s.push(4*u+0),s.push(4*u+1),s.push(4*u+2),s.push(4*u+0),s.push(4*u+2),s.push(4*u+3),u++;f=(new PIXI.mesh.Geometry).addAttribute("aVertexPosition",i,3).addIndex(s)}var m=new PIXI.Shader.from(l.default,c.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(f,m),this._mesh.state.culling=!1,this._mesh.state.depthTest=!0}return t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this.uniforms.uScale=[this._scale,this._scale,this._scale]}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(24),a=i(s),u=n(190),l=i(u),h=n(189),c=i(h),f=n(1),d=(i(f),void 0),p=function(){function t(){if(r(this,t),this.uniforms={uPosition:[0,-1,-3.5],uScale:[1,1,1],color:[161/255,227/255,88/255],opacity:1},!d){var e=PIXI.loadedResources[ASSET_URL+"model/bar.obj"].data;d=(0,a.default)(e)}var n=new PIXI.Shader.from(l.default,c.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(d,n),this._mesh.state.depthTest=!0}return t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection,this.uniforms.uInvertViewMatrix=t.invertView},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"ratio",get:function(){return this.uniforms.uScale[0]},set:function(t){this.uniforms.uScale[0]=t}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=p,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(28),a=i(s),u=n(67),l=i(u),h=n(1),c=i(h),f=void 0,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(this,t);var n=e?"lens_flare.jpg":"lens_flare_abrams.png",i=e?2:64,o=PIXI.Texture.from(ASSET_URL+"image/high/common/"+n),s=e?.95:.965,u=-c.default.tunnelDepth*s;if(this.uniforms={uPosition:[0,0,u],uScale:[1,1,1],texture:o,opacity:1,ratio:i},!f){var h=[],d=[],p=[0,1,2,0,2,3];h=h.concat([-1,-1,0]),h=h.concat([1,-1,0]),h=h.concat([1,1,0]),h=h.concat([-1,1,0]),d=d.concat([0,0]),d=d.concat([1,0]),d=d.concat([1,1]),d=d.concat([0,1]),f=(new PIXI.mesh.Geometry).addAttribute("aVertexPosition",h,3).addAttribute("aTextureCoord",d,2).addIndex(p)}var m=new PIXI.Shader.from(a.default,l.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(f,m),this._mesh.state.depthTest=!0,this._mesh.state.blendMode=PIXI.BLEND_MODES.ADD,this.size=e?70:40,this.scale=0}return t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this.uniforms.uScale[0]=this._scale*this.size,this.uniforms.uScale[1]=this._scale*this.size,this.uniforms.uScale[2]=this._scale*this.size}},{key:"color",get:function(){return this.uniforms.color},set:function(t){this.uniforms.color=t}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=i(s),u=n(14),l=i(u),h=n(70),c=i(h),f=n(69),d=i(f),p=void 0,m=function(){function t(){r(this,t);var e=Math.floor(2*Math.random()),n=PIXI.Texture.from(window.ASSET_URL+"image/high/common/layer"+(e+1)+"_gate.png"),i=1;this.uniforms={uPosition:[0,0,0],uScale:[i,i,i],uRotation:0,opacity:0,hole0:[0,0,0],hole1:[0,0,0],texture:n},p||(p=l.default.plane(a.default.tunnelRadius,a.default.tunnelRadius,1));var o=new PIXI.Shader.from(c.default,d.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(p,o),this._mesh.state.depthTest=!0,TweenLite.to(this.uniforms,1,{opacity:.8,ease:Cubic.easeOut})}return t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(14),a=i(s),u=n(192),l=i(u),h=n(67),c=(i(h),n(36)),f=i(c),d=void 0,p=3,m=function(){function t(e){r(this,t),this.uniforms={texture:e,uPosition:[0,1,-3.5],uScale:[1,1,1],color:[1,1,1],opacity:1},d||(d=a.default.plane(p,p,1));var n=new PIXI.Shader.from(l.default,f.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(d,n),this._mesh.state.depthTest=!0}return t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection,this.uniforms.uInvertViewMatrix=t.invertView},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(194),a=i(s),u=n(193),l=i(u),h=n(1),c=i(h),f=void 0,d=function(t,e){return t+Math.random()*(e-t)},p=[[90/255,147/255,219/255],[25/255,61/255,216/255],[181/255,117/255,55/255],[240/255,234/255,211/255]],m=function(){function t(){if(r(this,t),this.uniforms={uPosition:[0,0,0],uScale:[1,1,1],color:[.474,1,1],opacity:0,time:0,uDepth:c.default.tunnelDepth},!f){for(var e=function(t,e){var n=-4+2*e,i=-t/v*Math.PI*2,r=.01,o=-Math.cos(i)*r,s=-Math.sin(i)*r;return[o,s,n]},n=function(){var t=1,e=Math.random()*Math.PI*2,n=c.default.tunnelDepth,i=d(-n,n),r=[Math.cos(e)*t,Math.sin(e)*t,i];return r},i=function(){return p[Math.floor(Math.random()*p.length)]},o=[],s=[],u=[],h=[],m=0,v=24,y=0;y<v;y++)for(var _=0;_<2;_++)o=o.concat(e(y,_)),o=o.concat(e(y+1,_)),o=o.concat(e(y+1,_+1)),o=o.concat(e(y,_+1)),u.push(4*m+0),u.push(4*m+1),u.push(4*m+2),u.push(4*m+0),u.push(4*m+2),u.push(4*m+3),m++;for(var g=100,b=0;b<g;b++)s=s.concat(n()),h=h.concat(i());f=(new PIXI.mesh.Geometry).addAttribute("aVertexPosition",o,3).addAttribute("aPosOffset",s,3,!1,PIXI.TYPES.FLOAT,0,0,!0).addAttribute("aColor",h,3,!1,PIXI.TYPES.FLOAT,0,0,!0).addIndex(u),f.instanceCount=g}var x=new PIXI.Shader.from(a.default,l.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(f,x),this._mesh.state.culling=!0,this._mesh.state.depthTest=!0,this._mesh.state.blendMode=PIXI.BLEND_MODES.ADD,this._scale=1}return t.prototype.update=function(){this.uniforms.time+=1},t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this.uniforms.uScale=[this._scale,this._scale,this._scale]}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(14),a=i(s),u=n(1),l=i(u),h=n(196),c=i(h),f=n(195),d=i(f),p=n(23),m=i(p),v=n(9),y=function(){function t(){r(this,t);var e=m.default.get("image/high/common/starsmap.jpg");v.mat4.create();this.uniforms={texture:e,time:0};var n=PIXI.Shader.from(c.default,d.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(a.default.sphere(l.default.tunnelDepth+100,24),n),this._mesh.state.culling=!0}return t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},t.prototype.update=function(){this.uniforms.time+=.002},o(t,[{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=y,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(24),a=i(s),u=n(198),l=i(u),h=n(197),c=i(h),f=n(1),d=i(f),p=n(23),m=i(p),v=function(){function t(){r(this,t),this._time=255*Math.random();var e=m.default.get("image/high/common/tardis-exterior.jpg"),n=.2;this.uniforms={uPosition:[0,0,0],uScale:[n,n,n],uRotation:[0,0,0],uCircleColor:[1,1,1],uAngle:-.2,uTime:this._time,texture:e,uDirection:1,uPosOffset:0};var i=PIXI.loadedResources[ASSET_URL+"model/tardis.obj"].data,o=(0,a.default)(i),s=new PIXI.Shader.from(l.default,c.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(o,s),this._mesh.state.culling=!1,this._mesh.state.depthTest=!0}return t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},t.prototype.update=function(){this._time+=.01;var t=.25;this.uniforms.uRotation[0]=Math.cos(1.218934*Math.sin(this._time))*t,this.uniforms.uRotation[1]=this._time,this.uniforms.uRotation[2]=Math.sin(Math.cos(1.9237*this._time))*t,this.uniforms.uTime=this._time,this.uniforms.uDirection=d.default.direction},t.prototype.open=function(){TweenLite.to(this.uniforms,.5,{uPosOffset:-15,ease:Cubic.easeIn,delay:1}),TweenLite.to(this.uniforms,1.5,{uPosOffset:0,ease:Elastic.easeOut,delay:1.5})},o(t,[{key:"angle",get:function(){return this.uniforms.uAngle},set:function(t){this.uniforms.uAngle=t}},{key:"circleColor",get:function(){return this.uniforms.uCircleColor},set:function(t){this.uniforms.uCircleColor=t}},{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=v,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(200),a=i(s),u=n(199),l=i(u),h=function(t,e){return t+Math.random()*(e-t)},c=void 0,f=function(){function t(){r(this,t),this.texture0=PIXI.Texture.from(ASSET_URL+"image/high/common/magnetParticle.png"),this.texture1=PIXI.Texture.from(ASSET_URL+"image/high/common/shieldParticle.png");var e=1.5;if(this.uniforms={uPosition:[0,0,0],uScale:[0,0,0],color:[1,1,1],opacity:1,time:0,uRadius:e,texture:this.texture0,offset:0},!c){for(var n=function(){var t=Math.random()*Math.PI*2,n=h(-e,e),i=Math.cos(t)*e,r=Math.sin(t)*e;return[i,n,r]},i=100,o=[],s=[],u=[],f=0;f<i;f++)o=o.concat(n()),s=s.concat([Math.random(),Math.random(),Math.random()]),u.push(f);c=(new PIXI.mesh.Geometry).addAttribute("aVertexPosition",o,3).addAttribute("aExtra",s,3).addIndex(u)}var d=new PIXI.Shader.from(a.default,l.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(c,d,null,PIXI.DRAW_MODES.POINTS),this._mesh.state.depthTest=!0,this._mesh.state.blendMode=PIXI.BLEND_MODES.ADD,this.scale=0}return t.prototype.showMagnet=function(){this.show("magnet"),this.scale=1},t.prototype.showShield=function(){this.show("shield"),this.scale=1},t.prototype.show=function(t){this.uniforms.texture="magnet"===t?this.texture0:this.texture1,this.uniforms.offset="magnet"===t?0:1},t.prototype.update=function(){this.uniforms.time+=.05},t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"scale",get:function(){return this.uniforms.uScale[0]},set:function(t){this.uniforms.uScale[0]=t,this.uniforms.uScale[1]=t,this.uniforms.uScale[2]=t}},{key:"color",get:function(){return this.uniforms.color},set:function(t){this.uniforms.color=t}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=f,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=i(s),u=n(44),l=i(u),h=n(204),c=i(h),f=n(203),d=i(f),p=function(){function t(){r(this,t),this._time=255*Math.random();for(var e=a.default.numSegTunnel,n=[],i=0;i<e;i++)n.push(5*Math.sin(i/e*Math.PI*4)),n.push(0);var o=(0,l.default)(0);o.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST,o.baseTexture.mipmap=!1;var s=PIXI.Texture.from(window.ASSET_URL+"image/high/common/tunnel_colour_hue.png");this.uniforms={uNoiseOffset:n,uUVOffset:0,uTime:this._time,texture:o,textureNext:o,textureHue:s,uOffset:0,uSwirling:.2,uRevelOffset:0,tunnelDepth:a.default.tunnelDepth},this._init()}return t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},t.prototype.next=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.uniforms.texture=(0,l.default)(t),this.uniforms.textureNext=(0,l.default)(e),TweenLite.killTweensOf(this.uniforms),this.uniforms.uOffset=0,TweenLite.to(this.uniforms,3*n,{uOffset:1,uSwirling:.2,ease:Cubic.easeInOut})},t.prototype.transitionOut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;TweenLite.killTweensOf(this.uniforms),TweenLite.to(this.uniforms,t,{uSwirling:1,ease:Cubic.easeOut})},t.prototype.open=function(){var t=1;TweenLite.killTweensOf(this.uniforms),this.uniforms.uRevelOffset=0,TweenLite.to(this.uniforms,3*t,{uRevelOffset:1,ease:Cubic.easeInOut})},t.prototype.close=function(){var t=1;TweenLite.killTweensOf(this.uniforms),TweenLite.to(this.uniforms,t,{uRevelOffset:0,ease:Cubic.easeOut})},t.prototype._init=function(){function t(t,r){var o=t/i*Math.PI*2,s=Math.cos(o)*e,a=Math.sin(o)*e,u=n-r/i*n*2;return[s,a,u]}for(var e=a.default.tunnelRadius,n=a.default.tunnelDepth,i=a.default.numSegTunnel,r=[],o=[],s=[],u=[],l=[],h=0,f=0;f<i;f++)for(var p=0;p<i;p++){r=r.concat(t(f,p+1)),r=r.concat(t(f+1,p+1)),r=r.concat(t(f+1,p)),r=r.concat(t(f,p));var m=t(f+.5,p+.5);o=o.concat(m),o=o.concat(m),o=o.concat(m),o=o.concat(m),s=s.concat([f/i,(p+1)/i]),s=s.concat([(f+1)/i,(p+1)/i]),s=s.concat([(f+1)/i,p/i]),s=s.concat([f/i,p/i]),u=u.concat([p+1,0]),u=u.concat([p+1,0]),u=u.concat([p,0]),u=u.concat([p,0]),l.push(4*h+0),l.push(4*h+1),l.push(4*h+2),l.push(4*h+0),l.push(4*h+2),l.push(4*h+3),h++}var v=(new PIXI.mesh.Geometry).addAttribute("aVertexPosition",r,3).addAttribute("aExtra",u,2).addAttribute("aTextureCoord",s,2).addIndex(l),y=c.default.replace("${NUM}",a.default.numSegTunnel),_=new PIXI.Shader.from(y,d.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(v,_)},t.prototype.update=function(){this.uniforms.uTime-=.01},o(t,[{key:"noiseOffset",get:function(){return this.uniforms.noiseOffset},set:function(t){this.uniforms.uNoiseOffset=t}},{key:"uvOffset",get:function(){return this.uniforms.uUVOffset},set:function(t){this.uniforms.uUVOffset=t}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=p,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=i(s),u=n(44),l=i(u),h=n(28),c=i(h),f=n(205),d=i(f),p=function(){function t(e){r(this,t);var n=(0,l.default)(0),i=PIXI.Texture.from(ASSET_URL+"image/high/common/tunnel_end_light.png");this.uniforms={uPosition:[0,0,0],uScale:[1,1,1],uTime:0,texture:n,textureEnd:i,textureNext:n,uOffset:0,uOpacity:0,isFront:e?1:0},this._isFront=e,this._init()}return t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},t.prototype.next=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.uniforms.texture=(0,l.default)(t),this.uniforms.textureNext=(0,l.default)(e),TweenLite.killTweensOf(this.uniforms),this.uniforms.uOffset=0,TweenLite.to(this.uniforms,n,{uOffset:1,ease:Expo.easeIn})},t.prototype.open=function(){var t=1;TweenLite.killTweensOf(this.uniforms),this.uniforms.uOpacity=0,TweenLite.to(this.uniforms,t,{uOpacity:1,ease:Expo.easeIn,delay:.4})},t.prototype.close=function(){var t=1;TweenLite.killTweensOf(this.uniforms),TweenLite.to(this.uniforms,t,{uOpacity:0,ease:Expo.easeOut,delay:.4})},t.prototype._init=function(){var t=[],e=[],n=[0,1,2,0,2,3];t=t.concat([-1,-1,0]),t=t.concat([1,-1,0]),t=t.concat([1,1,0]),t=t.concat([-1,1,0]),e=e.concat([0,0]),e=e.concat([1,0]),e=e.concat([1,1]),e=e.concat([0,1]);var i=(new PIXI.mesh.Geometry).addAttribute("aVertexPosition",t,3).addAttribute("aTextureCoord",e,2).addIndex(n),r=new PIXI.Shader.from(c.default,d.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(i,r),this._mesh.state.culling=!1,this._mesh.state.depthTest=!0},t.prototype.update=function(){var t=this._isFront?-1:1;this.uniforms.uTime+=a.default.speed*t*a.default.textureSpeed},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"scale",get:function(){return this.uniforms.uScale},set:function(t){var e=t.length?t:[t,t,t];this.uniforms.uScale=e}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=p,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=(i(s),n(14)),u=i(a),l=n(28),h=i(l),c=n(68),f=i(c),d=void 0,p=40,m=function(){function t(){r(this,t);var e=PIXI.Texture.from(ASSET_URL+"/image/high/common/vortex.png"),n=1,i=Math.floor(Math.random()*p);if(this.uniforms={uPosition:[0,0,0],uScale:[n,n,n],uRotation:[Math.random(),Math.random(),Math.random()],texture:e,brightness:1,frame:i,uvOffset:[0,0],numSeg:8},!d){var o=2;d=u.default.plane(o,o)}var s=new PIXI.Shader.from(h.default,f.default,this.uniforms);this._mesh=new PIXI.mesh.RawMesh(d,s),this._mesh.state.culling=!1,this._mesh.state.blend=!0,this._mesh.state.depthTest=!0,this._mesh.state.blendMode=PIXI.BLEND_MODES.ADD}return t.prototype.update=function(){this.uniforms.frame++,this.uniforms.frame>=p&&(this.uniforms.frame=0);var t=this.uniforms.frame%8/8,e=Math.floor(this.uniforms.frame/8)/8;this.uniforms.uvOffset=[t,e]},t.prototype.setCamera=function(t){this.uniforms.uViewMatrix=t.view,this.uniforms.uProjectionMatrix=t.projection},o(t,[{key:"position",get:function(){return this.uniforms.uPosition},set:function(t){this.uniforms.uPosition=t}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this.uniforms.uScale=[this._scale,this._scale,this._scale]}},{key:"mesh",get:function(){return this._mesh}}]),t}();e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(1),s=i(o),a=5,u=function(t,e,n,i){var r=n-t,o=i-e;return Math.sqrt(r*r+o*o)},l=function(){function t(e){r(this,t),this._game=e,this._world=this._game.world,this._player=this._game.player,this._count=0,this._existingCollision=[];var n=this._world.allItems;this._tardis=n.children.find(function(t){return t.data?"tardis"==t.data.name:null})}return t.prototype.update=function(){var t=this;if(this._count++%a===0){var e=this._world.groups.collisionDetect.children;e=e.filter(function(t){return!t.data||"tardis"!==t.data.name});var n=[],i=[],r=this._tardis.position,o=r.x,l=r.y,h=s.default.pickupEffects.magnetRange,c=void 0,f=void 0,d=void 0,p=void 0;e.forEach(function(e){if(c=e.position.x,f=e.position.y,d=e.body.shape.width,p=u(o,l,c,f),p<d+1&&n.push(e),e.data&&t._player.isMagnet&&"addon"===e.data.name){var r=Math.abs(t._tardis.position.z-e.position.z);p<d+h&&r<.75*h&&i.push(e)}}),n.forEach(function(e){t._existingCollision.indexOf(e)<0&&e.preCollideBegin&&e.preCollideBegin()}),this._existingCollision.forEach(function(t){n.indexOf(t)<0&&t.preCollideEnd&&t.preCollideEnd()}),i.forEach(function(e){e.drawToTarget(t._tardis)}),this._existingCollision=n,this._count=0}},t}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(2),u=r(a),l=n(4),h=i(l),c=n(139),f=i(c),d=n(158),p=i(d),m=n(57),v=i(m),y=n(13),_=i(y),g=n(113),b=i(g),x=n(108),w=i(x),T=n(1),S=i(T),M=n(6),E=i(M),P=n(106),O=i(P),A=n(134),C=i(A),I=n(137),R=i(I),D=n(138),k=i(D),L=n(11),F=i(L),j=n(136),B=i(j),N=n(135),U=i(N),z=n(29),V=i(z),X=n(120),G=i(X),H=n(121),Y=i(H),W=n(126),q=i(W),Z=n(127),K=i(Z),Q=n(125),J=i(Q),$=n(128),tt=i($),et=n(124),nt=i(et),it=n(122),rt=i(it),ot=n(109),st=i(ot);u.DisplayObject.prototype.depthOffset=0;var at=function(){return 2e3*Math.random()+2e3},ut=function(){function t(e){o(this,t),this.onGameover=new h.default,this._container3D=e,this.hud=new b.default(this),this.isGameover=!1,this.paused=!0,this._level=0,this._levelTotal=0,this._milestoneCount=0,this._totalMilestoneCount=0,this._currentDist=0,this._needToTurn=!1,this._started=!1,this.view=new u.Container,this._hasLoaded=!1,this._waitTurn=!1,this._waitMove=!1,this._isInOnboarding=!V.default.instance.object.hasPassOnboarding,this._difficulty=0,this._init()}return t.prototype._init=function(){var t=this;this.levelLoader=new w.default(this),this.world=new p.default,this.world.registerSignal("onResize","onHitPickup","onHitBadie","onGameStart","onGameOver","onGameEnd","onLevelUp","onTurnAround","onTurnBack","onUserTurned","onUserMoved","onPickup","onLevelChange","onUpdateScore","onDisplayOnBoardingMsg","onHideOnBoardingMsg","onHitPowerup","onClearPowerup"),this._pixiView=new f.default(this.world),this.world.install(new v.default,"crash"),this.world.install(this._pixiView,"pixi3d"),this._container3D.addChild(this.world.pixi3d),this.view.addChild(this.hud),this._camera=new G.default,this.world.add(this._camera),this._skybox=new nt.default,this.world.add(this._skybox),this._player=new Y.default,this.world.add(this._player),this._player.signals.onHealthDepleted.add(function(e){return t._onHealthDepleted(e)}),this._player.signals.onMilestone.add(function(e){return t._onMilestone(e)}),this._tunnelEndFront=new K.default(!0),this.world.add(this._tunnelEndFront),this._tunnelEndBack=new K.default(!1),this.world.add(this._tunnelEndBack),this._tunnel=new q.default,this.world.add(this._tunnel),this._tardis=new J.default,this.world.add(this._tardis),this.world.signals.onLevelUp.add(function(){return t._onLevelUp()}),this.world.signals.onUserTurned.add(function(){return t._onUserTurned()}),this._onBoarding=new st.default(this),this._onBoarding.onFinished.addOnce(function(){return t._onBoardingFinished()}),this._onBoarding.onFirstCopyIn.addOnce(function(){t._waitMove=!0}),this._collisionManager=new O.default(this),this.world.crash.registerCollison(0,0),this._asteroidShooter=new C.default(this),this.hud.init(),window.clearSave=this.clearSave,
E.default.addEF(function(){return t._loop()})},t.prototype.restart=function(){this.reset(),this.start()},t.prototype.reset=function(t){this.isGameover=!1,t=t||this.config,this.config=t,this._level=0,this._levelTotal=0,S.default.direction=1,S.default.speed=S.default.initSpeed,this._player.reset(),this.hud.reset(),this.world.signals.onLevelChange.dispatch({prev:0,curr:0}),this._tunnel.next(this._level,this._level,0),this._tunnelEndFront.next(this._level,this._level,0),this._tunnelEndBack.next(this._level,this._level,0);var e=1;TweenLite.killTweensOf(this._camera),TweenLite.to(this._camera,e,{fov:170,ease:Expo.easeOut,delay:0}),TweenLite.to(this._camera,e,{fov:S.default.fov,ease:Expo.easeInOut,delay:e})},t.prototype.clear=function(){var t=this,e=this.world.groups.clearable.children;e.forEach(function(e){t.world.remove(e)})},t.prototype.start=function(t){var e=this,n=document.body.querySelector(".taster-offsite-panel");n&&(n.style.display="none"),this._isInOnboarding?(this.world.signals.onUserMoved.addOnce(function(){return e._onUserMoved()}),this._onBoarding.start()):this._onBoardingFinished(),this._tardis.open(),this.reset(t),this.resume(!0),this.world.signals.onGameStart.dispatch()},t.prototype.pause=function(){this.paused||(this.paused=!0,this.view.interactive=!1,_.default.instance.remove(this.update,this),this._player.stop(),TweenLite.killTweensOf(this._camera),TweenLite.to(this._camera,.5,{fov:S.default.fov+30,ease:Expo.easeOut}),E.default.remove(this._decoDelay),V.default.instance.object.soundOn&&F.default.music.fadeTo("background",0,.5),F.default.sfx.fadeTo("warning",0,.5))},t.prototype.resume=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.paused&&(this._started=!0,this.paused=!1,this.view.interactive=!0,_.default.instance.add(this.update,this,1),this._waitTurn||this._player.start(),e||(TweenLite.killTweensOf(this._camera),TweenLite.to(this._camera,.5,{fov:S.default.fov,ease:Expo.easeOut})),this._decoDelay=E.default.delay(function(){return t._addDecoration()},null,at()),V.default.instance.object.soundOn&&F.default.music.fadeTo("background",.5,.5),F.default.sfx.fadeTo("warning",.5,.5))},t.prototype.update=function(){if(this.hud.update(this._camera.screenOrientation),this._collisionManager.update(),this._waitTurn)return void(0,B.default)(this.world);if(this._waitMove)return void(0,U.default)(this.world);if(this._needToTurn){if(!(0,R.default)(this.world))return;this._needToTurn=!1,this.isInvert?this.turnBack():this.turn()}},t.prototype.gameover=function(){this.isGameover||(this.isGameover=!0,this.pause(),(0,k.default)(this.world),app.overlayManager.show("gameover"),this.world.signals.onGameOver.dispatch(),this._asteroidShooter.stop(),E.default.remove(this._decoDelay),this._started=!1,this.hud.showGameover(),Stats.track("game_over","ended",{stars_collected:this.pickupsCollected,game_level_number:this.levelTotal,game_score:this.score,energy_level:0}))},t.prototype.gameEnd=function(){this.clear(),this.resume(),this._started=!1,this.world.signals.onGameEnd.dispatch()},t.prototype._loop=function(){this._started?this.paused||(S.default.time+=S.default.speed,this.world.update()):(S.default.time+=S.default.speed,this.world.update())},t.prototype._onBoardingFinished=function(){this._waitMove=!1,this._isInOnboarding=!1,this.player.isInOnboarding=!1,this.levelLoader.setDifficultly(0),this.levelLoader.load(),V.default.instance.finishOnboarding()},t.prototype._onHealthDepleted=function(t){this.gameover()},t.prototype._onMilestone=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._isInOnboarding){if(this._milestoneCount++,this._currentDist=t,this._isInOnboarding||(this.isInvert?this._milestoneCount>S.default.turn.numInvertLevels&&(this._needToTurn=!0,this._asteroidShooter.stop()):this._milestoneCount>S.default.turn.numLevelsToInvert&&(this._needToTurn=!0)),!this._needToTurn&&(this.levelLoader.load(t.distance),!e&&!this.isInvert&&Math.random()>.6&&!this._isInOnboarding)){var n=new tt.default;this.world.add(n)}this._totalMilestoneCount++,this._totalMilestoneCount>S.default.difficulties[this._difficulty]&&(this._difficulty++,this.levelLoader.setDifficultly(this._difficulty))}},t.prototype._addDecoration=function(){var t=this,e=new rt.default;this.world.add(e),this._decoDelay=E.default.delay(function(){return t._addDecoration()},null,at())},t.prototype._onLevelUp=function(){var t=this,e=this._level+1;e>2&&(e=0);var n=S.default.speed+S.default.speedIncrease;TweenLite.to(S.default,1,{speed:n,ease:Cubic.easeOut}),this.world.signals.onLevelChange.dispatch({prev:this._level,curr:e});var i=1;TweenLite.killTweensOf(this._camera),TweenLite.to(this._camera,i,{fov:170,ease:Expo.easeOut,delay:0}),TweenLite.to(this._camera,i,{fov:S.default.fov,ease:Expo.easeInOut,delay:i}),this._tunnel.transitionOut(i),E.default.delay(function(){t._tunnel.next(t._level,e,i),t._tunnelEndFront.next(t._level,e,i),t._tunnelEndBack.next(t._level,e,i),t._level=e},null,1e3*i*.5),F.default.sfx.play("level_up"),Stats.track("game_level","complete",{zeitoninfront_collected:this.pickupsCollected,zeitonbehind_collected:0,bonus_collected:this.powerupsCollected,game_level_number:this.levelTotal,game_score:this.score,energy_level:this.player.life.value}),this._levelTotal++},t.prototype.turn=function(){(0,k.default)(this.world),this.world.signals.onTurnAround.dispatch(),S.default.direction=-1,this._milestoneCount=0,this._waitTurn=!0},t.prototype.turnBack=function(){(0,k.default)(this.world),this.world.signals.onTurnBack.dispatch(),S.default.direction=1,this._milestoneCount=0,this._waitTurn=!0},t.prototype._onUserTurned=function(){this._waitTurn=!1,S.default.direction<0&&(this._asteroidShooter.start(),Stats.track("game_reverse","activated",{game_level_number:this.levelTotal})),this._onMilestone(this._currentDist,!0)},t.prototype._onUserMoved=function(){var t=this;this._waitMove=!1;var e=this.world.findAll("text","text");if(e&&0!=e.length){var n=e[0];n&&n.moveOut(),E.default.delay(function(){t._hasLoaded=!0,t.player.start(),t._onMilestone(t._currentDist,!0)},null,1e3)}},t.prototype.toggleControl=function(t){this._camera.toggleControl(t),this._onBoarding&&this._onBoarding.toggleControl(t)},t.prototype.resize=function(t,e){this.world.signals.onResize.dispatch({w:t,h:e})},t.prototype.clearSave=function(){V.default.instance.reset(),V.default.instance.save(),window.location.reload()},s(t,[{key:"isInvert",get:function(){return S.default.direction===-1}},{key:"player",get:function(){return this._player}},{key:"camera",get:function(){return this._camera}},{key:"currentLevel",get:function(){return this._level}},{key:"levelTotal",get:function(){return this._levelTotal}},{key:"pickupsCollected",get:function(){return this._player.numPickups}},{key:"powerupsCollected",get:function(){return this._player.numPowerups}},{key:"score",get:function(){return this._player.score}},{key:"controlType",get:function(){return this._camera.controlType}}]),t}();e.default=ut,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(19),s=i(o),a=n(47),u=i(a),l=n(6),h=i(l),c=n(1),f=i(c),d=0,p=function(){function t(e){r(this,t),this._game=e,this._alllevels=s.default.getJson("levels"),f.default.tunnelDepth=this._alllevels[0].width/2,this._levelTutorial=this._alllevels.filter(function(t){return t.id.indexOf("tutorial")>-1}),this._levelCombined=this._alllevels.filter(function(t){return t.id.indexOf("tutorial")==-1}),this._levelEasy=this._alllevels.filter(function(t){return t.id.indexOf("easy")>-1}),this._levelMedium=this._alllevels.filter(function(t){return t.id.indexOf("medium")>-1}),this._levelHard=this._alllevels.filter(function(t){return t.id.indexOf("hard")>-1}),this._isInTutorial=!0,this._levels=this._levelTutorial}return t.prototype.loadDefault=function(){this._isInTutorial&&this._addLevel(0)},t.prototype.setDifficultly=function(t){t>=0&&(this._isInTutorial=!1,0==t?this._levels=this._levelEasy:1===t?this._levels=this._levelMedium:2===t?this._levels=this._levelHard:this._levels=this._levelCombined)},t.prototype._addLevel=function(t){var e=this,n=this._getLevelData(t),i=void 0!=t&&0===t;this._itemsToAdd=[],n.forEach(function(t,n){e._itemsToAdd.push({item:t,index:n,isFirst:i})}),d++,d>=this._levels.length&&(d=0),this._toAddItem()},t.prototype._toAddItem=function(){var t=this;if(0!=this._itemsToAdd.length){var e=this._itemsToAdd.shift();this._addItem(e.item,e.isFirst),this._itemsToAdd.length>0&&h.default.delay(function(){return t._toAddItem()},null,150)}},t.prototype._addItem=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=u.default.get(t.id);n&&(f.default.direction<0&&("AddOn"===t.id||"Magnet"===t.id)||(n.reset(t,e,this._game),this._game.world.add(n)))},t.prototype.load=function(){this._isInTutorial?this._addLevel(d):this._addLevel()},t.prototype._getLevelData=function(t){var e=Math.floor(Math.random()*this._levels.length);return void 0!==t&&(e=t),this._levels[e].elements},t}();e.default=p,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(49),a=i(s),u=n(6),l=i(u),h=n(4),c=i(h),f=n(1),d=i(f),p=n(3),m=i(p),v=function(){function t(e){var n=this;r(this,t),this.game=e,this.world=this.game.world,this.player=this.game.player,this.player.signals.onMilestone.add(function(t){return n._onMilestone(t)}),this.world.signals.onUserMoved.addOnce(function(){return n._onUserMoved()}),this.levelLoader=this.game.levelLoader,this._isFirstTime=!0,this.onFinished=new c.default,this.onFirstCopyIn=new c.default,this._step=0,this._steps=["tutorial0","tutorial1","loadNextLevel","tutorial2","loadNextLevel","tutorial3","loadNextLevel","tutorial4","loadNextLevel","tutorial5"],m.default.instance.desktop&&(this._steps[0]="tutorial0Desktop")}return t.prototype.start=function(){var t=this;l.default.delay(function(){t.displayText(t._steps[0])},null,1500)},t.prototype.displayText=function(t){var e=this;this._text=new a.default(t),this._text._mesh.scale=.75,this.world.add(this._text),this._text.moveIn(),this._text.onMovedOut.addOnce(function(){return e._onMovedOut()}),this._text.onMovedIn.addOnce(function(){return e._onMovedIn()})},t.prototype.nextStep=function t(){var e=this;if(this._step++,this._step>=this._steps.length)return void this.onFinished.dispatch();var t=this._steps[this._step];"loadNextLevel"===t?(this._isInSegment=!0,this.levelLoader.load()):(this._isInSegment=!1,this._text=new a.default(t),this.world.add(this._text),this._text._mesh.scale=.75,this._text.onMovedOut.addOnce(function(){return e._onMovedOut()}),this._isFirstTime||this._text.onMovedIn.addOnce(function(){var t=1e3*d.default.onBoarding.messageHold;l.default.delay(function(){e._text.moveOut()},null,t)}),this._text.moveIn())},t.prototype.toggleControl=function(t){0===this._step&&(this._text.mesh.visible=t)},t.prototype._onMilestone=function(){var t=this;if(this._isInSegment){var e=1e3*d.default.onBoarding.messageDelay;this._isInSegment=!1,l.default.delay(function(){t.nextStep()},null,e)}},t.prototype._onMovedIn=function(){this._isFirstTime&&this.onFirstCopyIn.dispatch()},t.prototype._onMovedOut=function(){this.nextStep()},t.prototype._onUserMoved=function(){this._isFirstTime=!1,this._text&&this._text.moveOut()},o(t,[{key:"isFirstTime",get:function(){return this._isFirstTime}}]),t}();e.default=v,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(6),u=i(a),l=function(t,e){return t+Math.random()*(e-t)},h=function(t){function e(n,i,s,a,h,c){r(this,e);var f=o(this,t.call(this)),d=PIXI.Sprite.from(n);return f.addChild(d),f.stopped=!1,f._funcStr0="return "+i+";",f._func=new Function("t",f._funcStr0),f.time=255*Math.random(),f.speed=c||l(.01,.02),f._center=(a+h)/2,f._r=Math.abs(a-f._center),f.x=s,f.y=a,d.blendMode=PIXI.BLEND_MODES.ADD,u.default.addEF(function(){return f.update()}),f}return s(e,t),e.prototype.update=function(){if(!this.stopped){this.time+=this.speed;var t=this._func(this.time);this.y=this._center+t*this._r}},e}(PIXI.Container);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(6),u=i(a),l=function(t){function e(n){r(this,e);var i=o(this,t.call(this));return i.time=0,i._initView(),n.signals.onResize.add(function(t){i.resize(t.w,t.h)}),i}return s(e,t),e.prototype._initView=function(){var t=this;this.sideBar0=PIXI.Sprite.from("overlay_hud_side.png"),this.addChild(this.sideBar0),this.sideBar1=PIXI.Sprite.from("overlay_hud_side.png"),this.addChild(this.sideBar1),this.sideBar1.y=-this.sideBar1.height,this.sideBar0.blendMode=PIXI.BLEND_MODES.ADD,this.sideBar1.blendMode=PIXI.BLEND_MODES.ADD,u.default.addEF(function(){return t._loop()})},e.prototype._loop=function(){this.time=.5,this.y+=this.time,this.y>=this.sideBar0.height&&(this.y-=this.sideBar0.height)},e.prototype.resize=function(t,e){this.x=t-80},e}(PIXI.Container);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(110),u=i(a),l=function(t){function e(n){function i(){return a[Math.floor(Math.random()*a.length)]}r(this,e);var s=o(this,t.call(this));s.titleText=new PIXI.extras.BitmapText("ENERGY",{align:"center",font:"24px Heroic Condensed Glow"}),s.addChild(s.titleText),s._containerBar=new PIXI.Container,s.addChild(s._containerBar),s._containerBar.position.set(8,20),s._barBg=PIXI.Sprite.from("energy_ui_bg.png"),s._containerBar.addChild(s._barBg),s._bar=PIXI.Sprite.from("energy_ui_fill_tint.png"),s._containerBar.addChild(s._bar),s.__mask=new PIXI.Graphics,s.__mask.beginFill(16777215),s.__mask.drawRect(0,0,s._bar.width,s._bar.height),s._containerBar.addChild(s.__mask),s._bar.mask=s.__mask,n.signals.onResize.add(function(t){s.resize(t.w,t.h)}),s._deco=PIXI.Sprite.from("overlay_hud_power.png"),s.addChild(s._deco),s._deco.blendMode=PIXI.BLEND_MODES.ADD;var a=["Math.sin(Math.tan(Math.cos(t)*1.2))","Math.sin(Math.pow(8, Math.sin(t)))","Math.sin(Math.exp(Math.cos(t*0.8)) * 2)","Math.sin(t)*Math.sin(t*1.5)","Math.pow(Math.sin(t),3)","Math.cos(t)*Math.sin(t)","Math.cos(Math.sin(t*3) + t*3)"];return s._sp0=new u.default("ui_animate_detail1.png",i(),2,58,138),s.addChild(s._sp0),s._sp01=new u.default("ui_animate_detail2.png",i(),5,58,138),s.addChild(s._sp01),s._sp1=new u.default("ui_animate_detail1.png",i(),69,0,83),s.addChild(s._sp1),s._sp11=new u.default("ui_animate_detail3.png",i(),69,0,83),s.addChild(s._sp11),s._sp2=new u.default("ui_animate_detail2.png",i(),6,180,240),s.addChild(s._sp2),s._sp21=new u.default("ui_animate_detail3.png",i(),5,180,240),s.addChild(s._sp21),window.sp=s._sp2,s.resize(),s}return s(e,t),e.prototype.update=function(t){this.__mask.scale.y=t,this.__mask.position.y=this._barBg.height-this.__mask.height},e.prototype.resize=function(t,e){this.position.set(20,110)},e}(PIXI.Container);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(2),l=r(u),h=n(4),c=(i(h),n(112)),f=i(c),d=n(116),p=i(d),m=n(114),v=i(m),y=n(115),_=i(y),g=n(111),b=i(g),x=n(117),w=i(x),T=n(3),S=i(T),M=function(t){function e(n){o(this,e);var i=s(this,t.call(this));return i.game=n,i}return a(e,t),e.prototype.init=function(){var t=this;if(this._decorationView=new b.default(this.game.world),this.addChild(this._decorationView),this._pickupView=new _.default(this.game.world),this.addChild(this._pickupView),this._scoreView=new p.default(this.game.world),this.addChild(this._scoreView),this._healthView=new f.default(this.game.world),this.addChild(this._healthView),this._overlayView=new v.default(this.game.world),this.addChild(this._overlayView),S.default.instance.iOS){var e=S.default.instance.iOSVersion;e.majorVersion,e.minorVersion;this._touchHelpView=new w.default(this.game.world),this.addChild(this._touchHelpView)}this.game.player.signals.onHealthChange.add(function(e){return t._onHealthChange(e)}),S.default.instance.hasVR&&(this.visible=!1)},e.prototype.onPausePressed=function(){this.game.reset()},e.prototype.reset=function(){this._scoreView.reset(),this._pickupView.reset(),TweenLite.to(this,.5,{alpha:1,ease:Expo.easeOut})},e.prototype.update=function(t){this._overlayView.rotation=t},e.prototype.showGameover=function(){this._healthView.update(0),TweenLite.to(this,.5,{alpha:0,ease:Expo.easeOut})},e.prototype.onGameoverComplete=function(){this.game.onGameover.dispatch()},e.prototype._onHealthChange=function(t){this._healthView.update(t.life.value)},e.prototype.resize=function(t,e){},e}(l.Container);e.default=M,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(t){function e(r){n(this,e);var o=i(this,t.call(this));o._world=r,o._overlay=PIXI.Sprite.from("overlay_hud.png"),o.addChild(o._overlay),o._overlay.anchor.set(.5),o._overlay.blendMode=PIXI.BLEND_MODES.ADD;var s=new PIXI.Graphics;s.beginFill(16777215,.1);var a=100;return s.drawRect(-a,-a,2*a,2*a),r.signals.onResize.add(function(t){o.resize(t.w,t.h)}),o}return r(e,t),e.prototype.resize=function(t,e){t&&(this.x=t/2,this.y=e/2)},e}(PIXI.Container);e.default=o,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(45),u=i(a),l=n(3),h=(i(l),n(6)),c=i(h),f=function(t){function e(n){r(this,e);var i=o(this,t.call(this));return i._initView(),n.signals.onResize.add(function(t){i.resize(t.w,t.h)}),n.signals.onPickup.add(function(t){return i._onUpdate(t)}),i}return s(e,t),e.prototype._initView=function(){var t=this;this._container=new PIXI.Container,this.addChild(this._container);var e=function(t,e){var n=PIXI.Sprite.from(t);return n.anchor.set(.5),e&&e.addChild(n),n};this._spBase=e("levelup_ui_base.png",this._container),this._ringInner=e("levelup_ui_inner_calib.png",this._container),this._ringOuter=e("levelup_ui_outer_calib.png",this._container),this._containerFill=new PIXI.Container,this._container.addChild(this._containerFill),this._fill1=e("levelup_ui_fill1.png",this._containerFill),this._fill2=e("levelup_ui_fill2.png",this._containerFill),this._fill3=e("levelup_ui_fill3.png",this._containerFill),this._fill1.blendMode=PIXI.BLEND_MODES.ADD,this._fill2.blendMode=PIXI.BLEND_MODES.ADD,this._fill3.blendMode=PIXI.BLEND_MODES.ADD,this._circleMask=new u.default,this._container.addChild(this._circleMask),this._containerFill.mask=this._circleMask,this._time=0,c.default.addEF(function(){return t._loop()})},e.prototype._loop=function(){this._time+=.02;var t=this._time,e=Math.pow,n=Math.sin,i=Math.PI,r=e(.5*n(t*i)+.5,6);this._ringOuter.rotation+=.03*r;var o=e(.5*n(t*i)+.5,10);this._ringInner.rotation-=.02*o},e.prototype._onUpdate=function(t){if(this._circleMask){var e=1/3;this._circleMask.ratio=t.numPickups/t.totalPickups*e+t.level*e}},e.prototype.reset=function(){this._circleMask.ratio=0},e.prototype.resize=function(t,e){this.position.set(90,e-120)},e}(PIXI.Container);e.default=f,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(6),u=i(a),l=void 0,h=function(t){function e(n){r(this,e);var i=o(this,t.call(this));return i._score=0,i._targetScore=0,i.scoreText=new PIXI.extras.BitmapText("SCORE :",{align:"center",font:"24px Heroic Condensed Glow"}),i.addChild(i.scoreText),i.position.set(20,70),i.numberText=new PIXI.extras.BitmapText("0",{align:"center",font:"24px Heroic Condensed"}),i.addChild(i.numberText),i.numberText.position.set(60,3),n.signals.onHitPickup.add(function(){i._targetScore+=100}),i._world=n,u.default.addEF(function(){return i._loop()}),i}return s(e,t),e.prototype.reset=function(){this._score=0,this._targetScore=0},e.prototype._loop=function(){l||(l=this._world.find("player","player"));var t=this._targetScore+.1*l.distance.distanceTraveled;this._score+=.1*(t-this._score);var e=Math.ceil(this._score);this.numberText.text=""+e,this._world.signals.onUpdateScore.dispatch({score:e}),l.score=this._targetScore},e}(PIXI.Container);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(20),u=i(a),l=function(t){function e(n){r(this,e);var i=o(this,t.call(this));return i._init(),n.signals.onResize.add(function(t){i.resize(t.w,t.h)}),i}return s(e,t),e.prototype._init=function(){var t=this;this._btnView=new PIXI.Container;var e=150,n=new PIXI.Graphics;n.beginFill(16777215),n.drawRect(0,0,e,e),this._btnView.addChild(n),this._button=new u.default(this._btnView),this.addChild(this._button.view),this._button.onDown.add(function(){return t._onDown()}),this._button.onUp.add(function(){return t._onUp()}),this.alpha=.8},e.prototype._onDown=function(){this.alpha=.5},e.prototype._onUp=function(){this.alpha=.8},e.prototype.resize=function(t,e){this.position.set(t-this.width,e-this.height)},e}(PIXI.Container);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(26),c=n(8),f=i(c),d=n(25),p=i(d),m=n(10),v=i(m),y=n(105),_=i(y),g=n(94),b=i(g),x=n(7),w=i(x),T=n(17),S=i(T),M=n(16),E=i(M),P=n(12),O=i(P),A=n(1),C=i(A),I=0,R=function(t){function e(){r(this,e);var n=o(this,t.call(this));return n.add(w.default),n.add(S.default),n.add(E.default),n.add(O.default),n._container=new PIXI.Container,n.signals.onAddedToWorld.addOnce(function(){return n._onAdded()}),n.groups=["collisionDetect","transparent","invertible","clearable"],n.data={name:"addon"},n}return s(e,t),e.prototype.reset=function(t,e){this.id="AddOn"+I++;var n=t.w;t.h;this._mesh=new _.default,this._mesh.scale=n,this._cone=new b.default,this._cone.scale=n,this._container.addChild(this._mesh.mesh),this._data=t;var i=n;this.body=new h.CrashBody.fromRect(-i/2,-i/2,i,i),this.body.type=h.CrashBody.DYNAMIC;var r=this._data.y,o=C.default.indexTable;C.default.indexTable-=C.default.itemRotateAngle,this.position.x=r,this.position.y=Math.sin(o)*r*.5-2,this.position.z=(-this._data.x-C.default.tunnelDepth)*C.default.direction,this._originalPos={x:this.position.x,y:this.position.y,z:this.position.z}},e.prototype._onAdded=function(){var t=(0,f.default)(this);this._mesh.setCamera(t),this._cone.setCamera(t),this._player=(0,p.default)(this)},e.prototype.update=function(){this._mesh.update(),this.velocity.value=C.default.speed,this.position.x=this._originalPos.x,this.position.y=this._originalPos.y,(0,v.default)(this.position,this._mesh.uniforms.uPosition),(0,v.default)(this.position,this._cone.uniforms.uPosition),this._cone.uniforms.uFlip=C.default.direction>0?1:-1},e.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);e.data&&"tardis"===e.data.name&&this.world.signals.onHitPickup.dispatch({value:this._data.value}),TweenLite.to(this._mesh,.35,{scale:0,ease:Expo.easeOut}),TweenLite.to(this._cone,.35,{scale:0,ease:Expo.easeOut})},e.prototype.drawToTarget=function(t){var e=.1;this._originalPos.x+=(t.position.x-this._originalPos.x)*e,this._originalPos.y+=(t.position.y-this._originalPos.y)*e},e.prototype.preCollideBegin=function(){TweenLite.killTweensOf(this._mesh.uniforms),TweenLite.killTweensOf(this._cone.uniforms),TweenLite.to(this._mesh.uniforms,.25,{brightness:2,ease:Expo.easeOut}),TweenLite.to(this._cone.uniforms,.25,{brightness:2,ease:Expo.easeOut})},e.prototype.preCollideEnd=function(){TweenLite.killTweensOf(this._mesh.uniforms),TweenLite.killTweensOf(this._cone.uniforms),TweenLite.to(this._mesh.uniforms,.25,{brightness:1,ease:Expo.easeOut}),TweenLite.to(this._cone.uniforms,.25,{brightness:1,ease:Expo.easeOut})},a(e,[{key:"mesh",get:function(){return this._container}}]),e}(l.default);e.default=R,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(1),c=(i(h),n(8)),f=i(c),d=n(10),p=i(d),m=n(92),v=i(m),y=n(7),_=i(y),g=n(51),b=i(g),x=n(12),w=i(x),T=function(t){function e(n){r(this,e);var i=o(this,t.call(this));return i.add(_.default),i.add(b.default),i.add(w.default),i.followitem.setTarget(n),i._mesh=new v.default,i.followitem.posOffset[2]=2,i.signals.onAddedToWorld.addOnce(function(){return i._onAdded()}),i.groups=["invertible","transparent","clearable"],i}return s(e,t),e.prototype.reset=function(t,e){var n=t.w;t.h;this._mesh.scale=1.25*n,e.add(this)},e.prototype._onAdded=function(){var t=(0,f.default)(this);this._mesh.setCamera(t)},e.prototype.update=function(){this._mesh.update(),(0,p.default)(this.position,this._mesh.uniforms.uPosition)},e.prototype.rollover=function(){TweenLite.killTweensOf(this._mesh.uniforms),TweenLite.to(this._mesh.uniforms,.25,{opacity:1,ease:Expo.easeOut})},e.prototype.rollout=function(){TweenLite.killTweensOf(this._mesh.uniforms),TweenLite.to(this._mesh.uniforms,.25,{opacity:.2,ease:Expo.easeOut})},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default);e.default=T,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(9),l=n(5),h=i(l),c=n(6),f=i(c),d=n(91),p=i(d),m=n(140),v=i(m),y=n(142),_=i(y),g=n(180),b=(i(g),n(87)),x=i(b),w=n(3),T=i(w),S=n(7),M=i(S),E=Math.PI/180,P=function(t,e){return t+Math.random()*(e-t)},O=function(t){function e(){r(this,e);var n=o(this,t.call(this));n._fov=75,n.add(M.default);var i=app.view.width/app.view.height;return n._camera=new p.default,n._camera.setPerspective(n._fov*E,i,.1,2500),n._projection=u.mat4.create(),u.mat4.copy(n._projection,n._camera.projection),n._isHit=!1,n._invertViewMatrix=u.mat4.create(),n.groups=["camera"],n._uniformObj=new PIXI.UniformGroup({uViewMatrix:n.view,uProjectionMatrix:n.projection}),n._controlType="",T.default.instance.hasVR||(x.default.device.desktop?(n._control=new _.default(n._camera,app.view),n._controlType="swipe"):(n._controlOri=new v.default(n._camera),n._controlTouch=new _.default(n._camera,app.view),n._controlTouch.senstivity=.01,n._controlTouch.lock(!0),n._control=n._controlOri,n._controlType="gyroscope")),n.data={name:"camera"},n.signals.onAddedToWorld.addOnce(function(){return n._onAdded()}),n}return s(e,t),e.prototype.toggleControl=function(t){t?(this._control=this._controlOri,this._controlTouch.lock(!0),this._controlType="gyroscope"):(this._control=this._controlTouch,this._controlOri.lock(!0),this._controlType="swipe"),this._control.lock(!1)},e.prototype._onAdded=function(){var t=this;this.world.signals.onHitBadie.add(function(e){return t._onHitBadie(e)}),this.world.signals.onResize.add(function(e){t.resize(e.w,e.h)})},e.prototype._onHitBadie=function(){var t=this;this._isHit=!0,f.default.delay(function(){t._isHit=!1},null,700)},e.prototype.resize=function(t,e){var n=t/e;this._camera.setPerspective(this._fov*E,n,.1,2500)},e.prototype.update=function(){this._control&&this._control.update();var t=0,e=0,n=.5;this._isHit&&(t=P(-n,n),e=P(-n,n));u.mat4.translate(this._camera.view,this._camera.view,u.vec3.fromValues(t,e,0))},e.prototype.resetProjection=function(){u.mat4.copy(this._camera.projection,this._projection)},a(e,[{key:"cameraObj",get:function(){return this._uniformObj}},{key:"fov",set:function(t){this._fov=t;var e=app.view.width/app.view.height;this._camera.setPerspective(this._fov*E,e,.1,500)},get:function(){return this._fov}},{key:"view",get:function(){return this._camera.view}},{key:"invertView",get:function(){return this._camera.invertViewMatrix}},{key:"projection",get:function(){return this._camera.projection}},{key:"camera",get:function(){return this._camera}},{key:"screenOrientation",get:function(){return this._control?this._control.uiOrientation||0:0}},{key:"controlType",get:function(){return this._controlType}}]),e}(h.default);e.default=O,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(133),c=i(h),f=n(131),d=i(f),p=n(1),m=i(p),v=n(11),y=i(v),_=n(6),g=i(_),b=function(t){function e(){r(this,e);var n=o(this,t.call(this));return n.add(c.default),n.add(d.default),n._numPickups=0,n._numPowerups=0,n._level=0,n.score=0,n.isInvincible=!1,n.isMagnet=!1,n.isInOnboarding=!0,n._prevIndex=-1,n._preCrashIndex=-1,n._clearEFIndex=-1,n.groups=["player"],n.data={name:"player"},n.signals.onAddedToWorld.addOnce(function(){return n._onAdded()}),n}return s(e,t),e.prototype._onAdded=function(){var t=this;this.world.signals.onHitPickup.add(function(e){return t._onHitPickup(e)}),this.world.signals.onHitBadie.add(function(e){return t._onHitBadie(e)}),this.world.signals.onTurnAround.add(function(){return t.stop()}),this.world.signals.onTurnBack.add(function(){return t.stop()}),this.world.signals.onUserTurned.add(function(){return t.start()}),this.world.signals.onLevelChange.add(function(e){t._level=e.curr})},e.prototype._onHitPickup=function(t){var e=this;if(t.type)return"magnet"===t.type?(y.default.sfx.stop("pickup_magnet"),y.default.sfx.play("pickup_magnet"),this.isMagnet=!0,this._numPowerups++):"shield"===t.type&&(y.default.sfx.stop("pickup_shield"),y.default.sfx.play("pickup_shield"),this.isInvincible=!0,this._numPowerups++),this.world.signals.onHitPowerup.dispatch({type:t.type}),void(this._clearEFIndex=g.default.delay(function(){return e._clearEffects()},null,1e3*m.default.pickupEffects.effectDuration));t.value&&this.life.hit(t.value),this.isInOnboarding||this._numPickups++,this._numPickups>=m.default.numPickupsToLevelUp&&(this.world.signals.onLevelUp.dispatch(),this._numPickups=0),this.world.signals.onPickup.dispatch({numPickups:this._numPickups,totalPickups:m.default.numPickupsToLevelUp,level:this._level}),this._prevIndex>=0&&y.default.sfx.stop("pickup"+this._prevIndex);var n=Math.floor(3*Math.random());y.default.sfx.play("pickup"+n),this._prevIndex=n},e.prototype._clearEffects=function(){this.isInvincible=!1,this.isMagnet=!1,this.world.signals.onClearPowerup.dispatch(),this._clearEFIndex=-1},e.prototype._onHitMagnet=function(){y.default.sfx.stop("pickup_magnet"),y.default.sfx.play("pickup_magnet")},e.prototype._onHitShield=function(){y.default.sfx.stop("pickup_shield"),y.default.sfx.play("pickup_shield")},e.prototype._onHitBadie=function(t){this.life.hit(t.value),this._preCrashIndex>-1&&y.default.sfx.stop("crash"+this._preCrashIndex);var e=Math.floor(3*Math.random());y.default.sfx.play("crash"+e),this._preCrashIndex=e},e.prototype.start=function(){this.distance.start()},e.prototype.stop=function(){this.distance.stop()},e.prototype.reset=function(){this._level=0,this._numPickups=0,this._numPowerups=0,this._clearEffects(),this.life.reset(),this.distance.reset()},e.prototype.update=function(){},a(e,[{key:"numPickups",get:function(){return this._numPickups}},{key:"numPowerups",get:function(){return this._numPowerups}}]),e}(l.default);e.default=b,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(1),c=i(h),f=n(8),d=i(f),p=n(10),m=i(p),v=n(97),y=i(v),_=n(7),g=i(_),b=n(17),x=i(b),w=n(12),T=i(w),S=n(16),M=i(S),E=function(t,e){return t+Math.random()*(e-t)},P=function(t){function e(){r(this,e);var n=o(this,t.call(this));return n.add(g.default),n.add(x.default),n.add(M.default),n.add(T.default),n._mesh=new y.default,n.velocity.invertible=!1,n.position.z=-c.default.tunnelDepth*c.default.direction,n.rotation=Math.random()*Math.PI*2,n._originalPos={x:n.position.x,y:n.position.y,z:n.position.z},n.data={name:"wall"},n.groups=["transparent","clearable"],n.speed=E(.007,.004),Math.random()>.5&&(n.speed*=-1),n.signals.onAddedToWorld.addOnce(function(){return n._onAdded()}),n}return s(e,t),e.prototype._onAdded=function(){var t=(0,d.default)(this);this._mesh.setCamera(t)},e.prototype.update=function(){this.velocity.value=c.default.speed,this.position.x=this._originalPos.x,this.position.y=this._originalPos.y,(0,m.default)(this.position,this._mesh.uniforms.uPosition),this.rotation+=this.speed},a(e,[{key:"rotation",get:function(){return this._mesh.uniforms.uRotation},set:function(t){this._mesh.uniforms.uRotation=t}},{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default);e.default=P,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(10),c=i(h),f=n(41),d=i(f),p=n(1),m=i(p),v=n(7),y=i(v),_=n(17),g=i(_),b=n(12),x=i(b),w=n(130),T=i(w),S=function(t,e){return t+Math.random()*(e-t)},M=function(t){function e(n,i,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,-1];r(this,e);var u=o(this,t.call(this));return u.add(y.default),u.add(g.default),u.add(x.default),u.add(T.default),u._mesh=new d.default,u._originalPos={x:n.x,y:n.y,z:n.z},u.position.x=u._originalPos.x,u.position.y=u._originalPos.y,u.position.z=u._originalPos.z,u._camera=i,u._mesh.setCamera(u._camera),u._mesh.setTexture(s),u.breaking.setDirection(a),u._mesh.scale=S(.2,.5),u.groups=["clearable"],u}return s(e,t),e.prototype.update=function(){this.velocity.value=m.default.speed,this.position.x+=this.breaking.x,this.position.y+=this.breaking.y,this.position.z+=this.breaking.z,(0,c.default)(this.position,this._mesh.uniforms.uPosition),this._mesh.update()},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default);e.default=M,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(8),c=i(h),f=n(100),d=i(f),p=n(1),m=(i(p),function(t){function e(){r(this,e);var n=o(this,t.call(this));return n._mesh=new d.default,n.signals.onAddedToWorld.addOnce(function(){return n._onAdded()}),n}return s(e,t),e.prototype._onAdded=function(){var t=(0,c.default)(this);this._mesh.setCamera(t)},e.prototype.update=function(){this._mesh.update()},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default));e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(9),l=n(5),h=i(l),c=n(26),f=i(c),d=n(1),p=i(d),m=n(3),v=i(m),y=n(6),_=i(y),g=n(8),b=i(g),x=n(10),w=i(x),T=n(7),S=i(T),M=n(132),E=i(M),P=n(101),O=i(P),A=n(52),C=i(A),I=void 0,R=function(t){function e(){r(this,e);var n=o(this,t.call(this)),i=p.default.planeDist,s=1;return n.body=new f.default.CrashBody.fromRect(-s/2,-s/2,s,s),n.body.type=f.default.CrashBody.DYNAMIC,n.add(S.default),n.add(E.default),n._mesh=new O.default,n.signals.onAddedToWorld.addOnce(function(){return n._onAdded()}),n.position.z=-i,n._rotation=u.mat4.create(),n._cameraTarget=u.vec3.create(),n._cameraDirection=u.vec3.create(),I=u.vec3.fromValues(0,0,-p.default.tunnelRadius),n.data={name:"tardis"},n.mesh.visible=!1,n.groups=["collisionDetect"],n}return s(e,t),e.prototype._onAdded=function(t){var e=this;this.camera=(0,b.default)(this),C.default.hasVR&&(this.follow.easing=.05),this._mesh.setCamera(this.camera),this.world.signals.onHitPickup.add(function(t){return e._onHitPickup(t)}),this.world.signals.onHitBadie.add(function(t){return e._onHitBadie(t)}),_.default.delay(function(){e.mesh.visible=!0},null,500)},e.prototype.open=function(){this._mesh.open()},e.prototype.update=function(){u.mat4.copy(this._rotation,this.camera.view),u.mat4.invert(this._rotation,this._rotation),u.vec3.transformMat4(this._cameraTarget,I,this._rotation);var t=p.default.planeDist;this._cameraTarget[2]>t?this._cameraTarget[2]=t:this._cameraTarget[2]<-t&&(this._cameraTarget[2]=-t);var e=v.default.instance.desktop?p.default.controlSensitivity.desktop:p.default.controlSensitivity.mobile;u.vec3.copy(this._cameraDirection,this.cameraTarget),this._cameraTarget[0]*=p.default.magnitude*e,this._cameraTarget[1]*=p.default.magnitude*e;var n=u.vec2.fromValues(this._cameraTarget[0],this._cameraTarget[1]),i=u.vec2.length(n),r=p.default.tunnelRadius-2;i>r&&(u.vec2.normalize(n,n),this._cameraTarget[0]=n[0]*r,this._cameraTarget[1]=n[1]*r),this.follow.setTarget(this._cameraTarget),this._checkWall(),(0,w.default)(this.position,this._mesh.uniforms.uPosition),this._mesh.update()},e.prototype._checkWall=function(){var t=this;if(this.world.groups.wall){var e=this.world.groups.wall.children,n=e[e.length-1];if(n){if(Math.abs(n.position.z-this.position.z)<1){var i=!1;n.holes.forEach(function(e,r){var o=e.offset,s=Math.cos(-n.rotation)*o,a=Math.sin(-n.rotation)*o,u=t.position.x-s,l=t.position.y-a,h=Math.sqrt(u*u+l*l);h<e.radius-1&&(i=!0)}),i||this.world.signals.onHitBadie.dispatch({value:-10})}p.default.direction>0?n.position.z>-p.default.planeDist&&!n.hasPassed&&(n.hasPassed=!0,n.fadeOut()):n.position.z<p.default.planeDist&&!n.hasPassed&&(n.hasPassed=!0,n.fadeOut())}}},e.prototype._onHitPickup=function(t){TweenLite.killTweensOf(this._mesh),this._mesh.angle=-.2,TweenLite.to(this._mesh,1.75,{angle:Math.PI+.2,ease:Cubic.easeOut}),this._mesh.circleColor=[.5,.5,.5]},e.prototype._onHitBadie=function(t){TweenLite.killTweensOf(this._mesh),this._mesh.angle=Math.PI+.2,TweenLite.to(this._mesh,1.75,{angle:-.2,ease:Expo.easeOut}),this._mesh.circleColor=[1,0,0]},a(e,[{key:"cameraTarget",get:function(){return this._cameraTarget}},{key:"cameraDirection",get:function(){return this._cameraDirection}},{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(h.default);e.default=R,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(1),c=i(h),f=n(8),d=i(f),p=n(7),m=i(p),v=n(103),y=i(v),_=n(66),g=i(_),b=function(t){function e(){r(this,e);var n=o(this,t.call(this));return n.add(m.default),n._mesh=new y.default,n.signals.onAddedToWorld.addOnce(function(){return n._onAdded()}),n.data={name:"tunnel"},c.default.simplex||(c.default.simplex=new g.default),n}return s(e,t),e.prototype._onAdded=function(t){var e=this,n=(0,d.default)(this);this._mesh.setCamera(n),this.world.signals.onGameStart.add(function(){return e._onGameStart()}),this.world.signals.onGameOver.add(function(){return e._onGameOver()}),this.world.signals.onGameEnd.add(function(){return e._onGameOver()})},e.prototype.update=function(){this._mesh.update();for(var t=[],e=c.default.numSegTunnel,n=c.default.tunnelDepth,i=c.default.simplex,r=c.default.noiseScale,o=c.default.noiseRange,s=void 0,a=void 0,u=void 0,l=0;l<e;l++)s=n-l/e*n*2,a=i.noise2D(s*r,c.default.time)*o,u=i.noise2D(c.default.time,s*r)*o,t.push(a),t.push(u);this._mesh.noiseOffset=t,this._mesh.uvOffset+=c.default.speed*c.default.textureSpeed},e.prototype.next=function(t,e,n){this._mesh.next(t,e,n)},e.prototype.transitionOut=function(t){this._mesh.transitionOut(t)},e.prototype._onGameStart=function(){this._mesh.open()},e.prototype._onGameOver=function(){this._mesh.close()},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default);e.default=b,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(1),c=i(h),f=n(8),d=i(f),p=n(10),m=i(p),v=n(104),y=i(v),_=n(7),g=i(_),b=n(16),x=i(b),w=function(t){function e(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r(this,e);var i=o(this,t.call(this));i._isFront=n,i.add(g.default),i.add(x.default);var s=.97*c.default.tunnelDepth;return i.position.z=i._isFront?-s:s,i._mesh=new y.default(n),i._mesh.scale=1.5*c.default.tunnelRadius,i.groups=["tunnelEnd"],i.data={name:n?"front":"back"},i.signals.onAddedToWorld.addOnce(function(){return i._onAdded()}),i}return s(e,t),e.prototype._onAdded=function(t){var e=this,n=(0,d.default)(this);this._mesh.setCamera(n),this.world.signals.onGameStart.add(function(){return e._onGameStart()}),this.world.signals.onGameOver.add(function(){return e._onGameOver()}),this.world.signals.onGameEnd.add(function(){return e._onGameOver()})},e.prototype.update=function(){this._mesh.update(),this.position.x=this.perlinpositionoffset.x,this.position.y=this.perlinpositionoffset.y,(0,m.default)(this.position,this._mesh.uniforms.uPosition)},e.prototype.next=function(t,e,n){this._mesh.next(t,e,n)},e.prototype._onGameStart=function(){this._mesh.open()},e.prototype._onGameOver=function(){this._mesh.close()},a(e,[{key:"mesh",get:function(){return this._mesh.mesh}}]),e}(l.default);e.default=w,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(1),c=i(h),f=n(8),d=i(f),p=n(25),m=i(p),v=n(10),y=i(v),_=n(32),g=i(_),b=n(33),x=i(b),w=n(48),T=i(w),S=n(7),M=i(S),E=n(17),P=i(E),O=n(12),A=i(O),C=n(16),I=i(C),R=n(50),D=i(R),k=[[{offset:11.269,radius:9.6}],[{offset:9.28,radius:9},{offset:-11.422,radius:6.145}]],L=function(t){function e(n){r(this,e);var i=o(this,t.call(this));i.add(M.default),i.add(P.default),i.add(I.default),i.add(A.default);var s=Math.random()>.5?2:1;n&&(s=n),i._rotation=0,i._decos=[],i._mesh=new g.default(0,s),i._holes=[];for(var a=0;a<s;a++){var u=k[s-1][a],l=u.offset,h=u.radius,f={theta:0,offset:l,radius:h};i._holes.push(f),1==a&&(i._specialItem=Math.random()>.5?new x.default(i,f):new T.default(i,f))}for(var d=0;d<4;d++){var p=new D.default(i,d+1);i._decos.push(p)}return i.position.z=-c.default.tunnelDepth*c.default.direction,i.rotation=Math.random()*Math.PI*2,i._originalPos={x:i.position.x,y:i.position.y,z:i.position.z},i.data={name:"wall"},i.groups=["wall","transparent","invertible","clearable"],i.hasPassed=!1,i.signals.onAddedToWorld.addOnce(function(){return i._onAdded()}),i}return s(e,t),e.prototype.reset=function(t){this._data=t,this.position.z=(-this._data.x-c.default.tunnelDepth)*c.default.direction},e.prototype._onAdded=function(){var t=this,e=((0,d.default)(this),(0,m.default)(this));this._rotationSpeed=e.distance.value*c.default.gateRotationSpeed,Math.random()>.5&&(this._rotationSpeed*=-1),this._decos.forEach(function(e){t.world.add(e)}),this._specialItem&&this.world.add(this._specialItem)},e.prototype.update=function(){var t=this;this.velocity.value=c.default.speed,this.position.x=this._originalPos.x,this.position.y=this._originalPos.y,(0,y.default)(this.position,this._mesh.uniforms.uPosition),this.rotation+=this._rotationSpeed,this._holes.forEach(function(e){e.theta=t.rotation}),this._decos.forEach(function(e){e.updateHoles(t._holes)}),this._specialItem&&this._specialItem.updatePosition(this.rotation)},e.prototype.fadeOut=function(){},e.prototype.preRemove=function(){this._specialItem&&this.world.remove(this._specialItem)},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this._mesh.uniforms.uRotation=t}},{key:"mesh",get:function(){return this._mesh.mesh}},{key:"holes",get:function(){return this._holes}}]),e}(l.default);e.default=L,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(5),l=i(u),h=n(1),c=i(h),f=n(8),d=i(f),p=n(25),m=i(p),v=n(10),y=i(v),_=n(32),g=i(_),b=n(33),x=i(b),w=n(48),T=i(w),S=n(7),M=i(S),E=n(17),P=i(E),O=n(12),A=i(O),C=n(16),I=i(C),R=n(50),D=i(R),k=[[{offset:11.269,radius:9.6}],[{offset:9.28,radius:9},{offset:-11.422,radius:6.145}]],L=function(t){function e(n){r(this,e);var i=o(this,t.call(this));i.add(M.default),i.add(P.default),i.add(I.default),i.add(A.default);var s=1;i._rotation=0,i._decos=[],i._mesh=new g.default(0,s),i._holes=[];for(var a=0;a<s;a++){var u=k[s-1][a],l=u.offset,h=u.radius,f={theta:0,offset:l,radius:h};i._holes.push(f),1==a&&(i._specialItem=Math.random()>.5?new x.default(i,f):new T.default(i,f))}for(var d=0;d<4;d++){var p=new D.default(i,d+1);i._decos.push(p)}return i.position.z=-c.default.tunnelDepth*c.default.direction,i.rotation=Math.random()*Math.PI*2,i._originalPos={x:i.position.x,y:i.position.y,z:i.position.z},i.data={name:"wall"},i.groups=["wall","transparent","invertible","clearable"],i.hasPassed=!1,i.signals.onAddedToWorld.addOnce(function(){return i._onAdded()}),i}return s(e,t),e.prototype.reset=function(t){this._data=t,this.position.z=(-this._data.x-c.default.tunnelDepth)*c.default.direction},e.prototype._onAdded=function(){var t=this,e=((0,d.default)(this),(0,m.default)(this));this._rotationSpeed=e.distance.value*c.default.gateRotationSpeed,Math.random()>.5&&(this._rotationSpeed*=-1),this._decos.forEach(function(e){t.world.add(e)}),this._specialItem&&this.world.add(this._specialItem)},e.prototype.update=function(){var t=this;this.velocity.value=c.default.speed,this.position.x=this._originalPos.x,this.position.y=this._originalPos.y,(0,y.default)(this.position,this._mesh.uniforms.uPosition),this.rotation+=this._rotationSpeed,this._holes.forEach(function(e){e.theta=t.rotation}),this._decos.forEach(function(e){e.updateHoles(t._holes)}),this._specialItem&&this._specialItem.updatePosition(this.rotation)},e.prototype.fadeOut=function(){},e.prototype.preRemove=function(){this._specialItem&&this.world.remove(this._specialItem)},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this._mesh.uniforms.uRotation=t}},{key:"mesh",get:function(){return this._mesh.mesh}},{key:"holes",get:function(){return this._holes}}]),e}(l.default);e.default=L,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(9),s=function(t,e){return t+Math.random()*(e-t)},a=function(){function t(e){i(this,t),this._item=e,this._multiplier=.1,this._force=0,this.launch()}return t.prototype.launch=function(){this._force=s(1,4),TweenLite.to(this,.5,{_force:0,ease:Expo.easeOut})},t.prototype.setDirection=function(t){var e=5;this._dir=o.vec3.clone(t),this._dir[0]=s(-e,e),this._dir[1]=s(-e,e)},r(t,[{key:"x",get:function(){return this._dir[0]*this._multiplier*this._force}},{key:"y",get:function(){return this._dir[1]*this._multiplier*this._force}},{key:"z",get:function(){return this._dir[2]*this._multiplier*this._force}}]),t}();a.id="breaking",e.default=a,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),a=i(s),u=function(){function t(e){r(this,t),this._item=e,this._distanceTraveled=0,this._item.registerSignal("onMilestone"),this._isStarted=!1,this._currentMilestone=0,this._distStarted=0}return t.prototype.start=function(){this._isStarted=!0},t.prototype.stop=function(){this._isStarted=!1},t.prototype.reset=function(){this._distanceTraveled=0,this._currentMilestone=0},t.prototype.update=function(){if(this._isStarted){var t=a.default.tunnelDepth;t*=2,this._distanceTraveled+=a.default.speed*a.default.objectSpeed,this._distanceTraveled>this._currentMilestone+t&&(this._item.signals.onMilestone.dispatch({distance:this._distanceTraveled}),this._currentMilestone=Math.floor(this._distanceTraveled/t)*t),this._item.isInOnboarding&&(this._distStarted=this._distanceTraveled)}},o(t,[{key:"value",get:function(){return this._distanceTraveled}},{key:"distanceTraveled",get:function(){return this._distanceTraveled-this._distStarted}}]),t}();u.id="distance",e.default=u,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=n(9),o=function(){function t(e){i(this,t),this._item=e,this.easing=.1,this._target=r.vec3.create()}return t.prototype.setTarget=function(t){r.vec3.copy(this._target,t)},t.prototype.update=function(){this._item.position.x+=(this._target[0]-this._item.position.x)*this.easing,this._item.position.y+=(this._target[1]-this._item.position.y)*this.easing,this._item.position.z+=(this._target[2]-this._item.position.z)*this.easing},t}();o.id="follow",e.default=o,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(27),a=i(s),u=100,l=function(){function t(e){r(this,t),this._item=e,this.decreaseRate=1e-4,this._life=u,this._item.registerSignal("onHealthDepleted","onHealthChange")}return t.prototype.reset=function(){this._life=u},t.prototype.hit=function(t){this._life+=t,this._life>u&&(this._life=u),this._life<0&&(this._life=0)},t.prototype.update=function(){if(this._item.isInOnboarding,this._life-=this.decreaseRate,this._life<=0){if("true"===a.default.get_query("endless"))return;this._item.signals.onHealthDepleted.dispatch(this._item)}else this._item.signals.onHealthChange.dispatch(this._item)},o(t,[{
key:"value",get:function(){return this._life/u}}]),t}();l.id="life",e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(6),s=i(o),a=n(1),u=i(a),l=n(46),h=(i(l),n(47)),c=i(h),f=function(t,e){return t+Math.random()*(e-t)},d=function(){function t(e){r(this,t),this._game=e,this._world=e.world,this._hasStarted=!1,this._launch()}return t.prototype.start=function(){this._hasStarted=!0},t.prototype.stop=function(){this._hasStarted=!1},t.prototype._launch=function(){var t=this;if(this._hasStarted){var e=c.default.get("Badie"),n=7,i=f(1,n);Math.random()>.5&&(i*=-1);var r={id:"Badie",value:-10,w:1,h:1,x:-40,y:i};e.reset(r,!1,this._game,u.default.attackFromPast.asteroidSpeed),this._world.add(e)}var o=f(1e3,2e3)*u.default.attackFromPast.timeBetween;s.default.delay(function(){return t._launch()},null,o)},t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(9),o=n(1),s=(i(o),void 0),a=r.vec3.fromValues(0,0,-1),u=180/Math.PI,l=15,h=function(t,e){var n=r.vec3.fromValues(t[0],0,t[2]),i=r.vec3.fromValues(e[0],0,e[2]);r.vec3.normalize(n,n),r.vec3.normalize(i,i);var o=Math.acos(r.vec3.dot(n,i))*u;return o},c=function(t){s||(s=t.find("collisionDetect","tardis"));var e=s,n=e.cameraTarget,i=h(n,a);i>l&&t.signals.onUserMoved.dispatch()};e.default=c,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(9),o=n(1),s=i(o),a=void 0,u=r.vec3.fromValues(0,0,-1),l=r.vec3.fromValues(0,0,1),h=180/Math.PI,c=function(t,e){var n=r.vec3.fromValues(t[0],0,t[2]),i=r.vec3.fromValues(e[0],0,e[2]);r.vec3.normalize(n,n),r.vec3.normalize(i,i);var o=Math.acos(r.vec3.dot(n,i))*h;return o},f=function(t){a||(a=t.find("collisionDetect","tardis"));var e=a,n=e.cameraTarget;if(s.default.direction>0){var i=c(n,u);i<s.default.turn.angleThreshold&&t.signals.onUserTurned.dispatch()}else{var r=c(n,l);r<s.default.turn.angleThreshold&&t.signals.onUserTurned.dispatch()}};e.default=f,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(1),o=i(r),s=void 0,a=function(t){s=t.groups.invertible.children;var e=!0;Math.random()>1.99;return s.forEach(function(t){o.default.direction>0?t.position.z<0&&(e=e&&!1):t.position.z>0&&(e=e&&!1)}),e};e.default=a,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var n=function(t){if(t.groups.invertible)for(var e=t.groups.invertible.children;e.length;){var n=e.pop();t.remove(n)}};e.default=n,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(9),l=n(8),h=i(l),c=n(99),f=i(c),d=n(43),p=i(d),m=n(102),v=i(m),y=n(96),_=i(y),g=n(95),b=i(g),x=n(93),w=i(x),T=n(98),S=(i(T),n(1)),M=i(S),E=n(3),P=i(E),O=n(6),A=i(O),C=n(11),I=i(C),R=function(t){function e(n){r(this,e);var i=o(this,t.call(this));return i._world=n,i._init(),i._hasSetup=!1,i._world.signals.onTurnAround.add(function(){return i._onTurnAround()}),i._world.signals.onTurnBack.add(function(){return i._onTurnBack()}),i._world.signals.onUserTurned.add(function(){return i._onUserTurned()}),i._world.signals.onHitPowerup.add(function(t){return i._onPowerUp(t)}),i._world.signals.onClearPowerup.add(function(){return i._onClearPowerUp()}),i._world.signals.onGameStart.add(function(){return i._onGameStart()}),i._world.signals.onGameOver.add(function(){return i._onGameOver()}),i._world.signals.onGameEnd.add(function(){return i._onGameEnd()}),i._world.signals.onUpdateScore.add(function(t){return i._onUpateScore(t)}),i}return s(e,t),e.prototype._init=function(){var t=this;if(this._cover||(this._cover=new w.default,this.addChild(this._cover.mesh)),!this._items)return void A.default.next(function(){t._init()});this.camera=(0,h.default)(this._items[0]),this.player=this._world.find("player","player"),P.default.instance.hasVR&&this.player.signals.onHealthChange.add(function(e){return t._onHealthChange(e)}),this._shootingLines=new f.default,this.addChild(this._shootingLines.mesh),this._shootingLines.setCamera(this.camera);var e=.25*-M.default.planeDist,n=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"videoReflection",r=new p.default(n,i);return r.isFacingFront=!0,r.position=[0,0,e],r.setCamera(t.camera),t.addChild(r.mesh),r};this._textTurn=n("tutorial6"),this._textTurn.scale=0,this._textTurnBack=n("tutorial7"),this._textTurnBack.scale=0,this._textTitle=n("game_logo","starsmapBlur"),this._textTitle.uniforms.uPositionOffset[1]=.2,this._textTitle.uniforms.theta=.25,this._tardisShield=new v.default,this.addChild(this._tardisShield.mesh),this._tardisShield.setCamera(this.camera),this._lensflareFixed=new _.default,this.addChild(this._lensflareFixed.mesh),this._lensflareFixed.setCamera(this.camera),this._lensflare=new _.default(!0),this.addChild(this._lensflare.mesh),this._lensflare.setCamera(this.camera),P.default.instance.hasVR&&(this._healthBar=new b.default,this.addChild(this._healthBar.mesh),this._healthBar.setCamera(this.camera),this._scoreTexture=PIXI.RenderTexture.create(512,512),this.numberText=new PIXI.extras.BitmapText("Score : 0",{align:"center",font:"24px Heroic Condensed"})),this.setChildIndex(this._cover.mesh,this.children.length-1),A.default.delay(function(){TweenLite.to(t._cover,.5,{opacity:0,ease:Expo.easeInOut})},null,100),this._hasSetup=!0},e.prototype.init=function(t){},e.prototype._onHealthChange=function(t){this._healthBar.ratio=t.life.value},e.prototype._onUpateScore=function(t){},e.prototype._onPowerUp=function(t){this._tardisShield.color="magnet"===t.type?[1,245/255,0]:[1,49/255,1],this._tardisShield.show(t.type),TweenLite.killTweensOf(this._tardisShield),TweenLite.to(this._tardisShield,1,{scale:1,ease:Elastic.easeOut})},e.prototype._onClearPowerUp=function(){TweenLite.killTweensOf(this._tardisShield),TweenLite.to(this._tardisShield,.5,{scale:0,ease:Expo.easeInOut})},e.prototype._onGameStart=function(){this._shootingLines&&TweenLite.to(this._shootingLines.uniforms,1,{opacity:1,ease:Cubic.easeOut,delay:2}),this._lensflare&&(TweenLite.killTweensOf(this._lensflare),TweenLite.killTweensOf(this._lensflareFixed),TweenLite.to(this._lensflare,1,{scale:1,ease:Expo.easeInOut}),TweenLite.to(this._lensflareFixed,1,{scale:1,ease:Expo.easeInOut}),TweenLite.to(this._textTitle,1,{scale:0,opacity:0,ease:Expo.easeOut}))},e.prototype._onGameOver=function(){this._shootingLines&&TweenLite.to(this._shootingLines.uniforms,1,{opacity:0,ease:Cubic.easeOut}),this._lensflare&&(TweenLite.killTweensOf(this._lensflare),TweenLite.killTweensOf(this._lensflareFixed),TweenLite.to(this._lensflare,1,{scale:0,ease:Expo.easeInOut}),TweenLite.to(this._lensflareFixed,1,{scale:0,ease:Expo.easeInOut}))},e.prototype._onGameEnd=function(){this._shootingLines&&TweenLite.to(this._shootingLines.uniforms,1,{opacity:0,ease:Cubic.easeOut}),this._lensflare&&(TweenLite.killTweensOf(this._lensflare),TweenLite.killTweensOf(this._lensflareFixed),TweenLite.to(this._lensflare,1,{scale:0,ease:Expo.easeInOut}),TweenLite.to(this._lensflareFixed,1,{scale:0,ease:Expo.easeInOut}),TweenLite.to(this._textTitle,1,{scale:1,opacity:1,ease:Expo.easeOut}))},e.prototype._onTurnAround=function(){I.default.sfx.play("warning"),I.default.sfx.setVolume("warning",0),I.default.sfx.fadeTo("warning",.3,.5),TweenLite.killTweensOf(this._textTurn),TweenLite.to(this._textTurn,1,{scale:.7,ease:Elastic.easeOut})},e.prototype._onTurnBack=function(){I.default.sfx.play("warning"),I.default.sfx.setVolume("warning",0),I.default.sfx.fadeTo("warning",.3,.5),TweenLite.killTweensOf(this._textTurnBack),TweenLite.to(this._textTurnBack,1,{scale:.7,ease:Elastic.easeOut})},e.prototype._onUserTurned=function(){I.default.sfx.fadeTo("warning",0,.5),A.default.delay(function(){I.default.sfx.stop("warning")},null,500),TweenLite.killTweensOf(this._textTurn),TweenLite.killTweensOf(this._textTurnBack);var t=.5;TweenLite.to(this._textTurn,t,{scale:0,ease:Expo.easeInOut}),TweenLite.to(this._textTurnBack,t,{scale:0,ease:Expo.easeInOut})},e.prototype.preupdate=function(t){},e.prototype.update=function(){if(this._hasSetup){var t=this.findItem("tardis");if(t){this._textTurn.update(),this._textTitle.update(),this._textTurnBack.update(),this._shootingLines.update(),this._tardisShield.update();var e=t.position,n=e.x,i=e.y,r=e.z;u.vec3.copy(this._shootingLines.position,[n,i,r]),u.vec3.copy(this._tardisShield.position,[n,i,r]),this.setChildIndex(t.mesh,this.children.length-1),this._alphaSorting(t),this.setChildIndex(this._tardisShield.mesh,this.children.length-1);var o=this._world.find("tunnelEnd","front");this._lensflareFixed.position[0]=o.position.x,this._lensflareFixed.position[1]=o.position.y;var s=t.cameraDirection,a=u.vec2.fromValues(s[0],s[1]),l=u.vec2.length(a),h=20;l=Math.min(l,h),u.vec2.normalize(a,a),u.vec2.scale(a,a,l);var c=1.2;this._lensflare.position[0]=o.position.x+a[0]*c,this._lensflare.position[1]=o.position.y+a[1]*c}}},e.prototype._alphaSorting=function(t){var e=this;if(this._world.groups.transparent){var n=this._world.groups.transparent.children.concat();n.sort(function(e,n){return t.cameraTarget[2]<0?e.position.z-n.position.z:n.position.z-e.position.z}),n.forEach(function(t){e.setChildIndex(t.mesh,e.children.length-1)}),this.setChildIndex(this._cover.mesh,this.children.length-1),0==this._cover.opacity&&(this._cover.mesh.visible=!1,this._cover.visible=!1)}},e.prototype.render=function(){},e.prototype.postupdate=function(t){},e.prototype.add=function(t){this._items||(this._items=[]),this._items.push(t),t.mesh&&this.addChild(t.mesh)},e.prototype.remove=function(t){var e=this._items.indexOf(t);e>-1&&this._items.splice(e,1),t.mesh&&this.removeChild(t.mesh),t.speedOffset&&t.speedOffset>1&&this.removeChild(t.mesh)},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.clear=function(){},e.prototype.findItem=function(t){return this._items.find(function(e){return!!e.data&&e.data.name===t})},a(e,[{key:"cover",get:function(){return this._cover}}]),e}(PIXI.Container);e.default=R,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(9),s=function(t){return t*Math.PI/180},a=function(){function t(e){i(this,t),this._camera=e,this._rotation=o.mat4.create(),this._hasSet=!1,this._alpha=0,this._beta=0,this._gamma=0,this.easing=.15,this._init(),this.connect(),this._screenRotation=0,this._isLocked=!1}return t.prototype.lock=function(t){this._isLocked=t,this._isLocked?this.disconnect():this.connect()},t.prototype._init=function(){var t=this;this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffsetAngle=90,this.onScreenOrientationChangeBind=function(e){return t._onScreenOrientationChange(e)},this.onDeviceOrientationChangeBind=function(e){return t._onDeviceOrientationChange(e)}},t.prototype.connect=function(){this.onScreenOrientationChangeBind(),window.addEventListener("orientationchange",this.onScreenOrientationChangeBind,!1),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeBind,!1),this.enabled=!0},t.prototype.disconnect=function(){window.removeEventListener("orientationchange",this.onScreenOrientationChangeBind,!1),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeBind,!1),this.enabled=!1},t.prototype.update=function(){this.alphaOffsetAngle=this.screenOrientation;var t=this.deviceOrientation.alpha?s(this.deviceOrientation.alpha+this.alphaOffsetAngle):0,e=this.deviceOrientation.beta?s(this.deviceOrientation.beta):0,n=this.deviceOrientation.gamma?s(this.deviceOrientation.gamma):0,i=this.screenOrientation?s(this.screenOrientation):0,r=(180/Math.PI,e>0?1:-1),o=void 0;o=n>0?e:e<0?-(Math.PI+e):Math.PI-e,i>0&&(r<0?o=Math.PI+o:o-=Math.PI),this._screenRotation=o,this._hasSet?(this._alpha+=(t-this._alpha)*this.easing,this._beta+=(e-this._beta)*this.easing,this._gamma+=(n-this._gamma)*this.easing):(this._alpha=t,this._beta=e,this._gamma=n),this.setObjectQuaternion(this._alpha,this._beta,this._gamma,i)},t.prototype.setObjectQuaternion=function(t,e,n,i){var r=o.quat.create(),s=o.vec3.create(),a=o.quat.create(),u=o.quat.create();s[2]=1;var l={x:e,y:t,z:-n},h=Math.cos(l.x/2),c=Math.cos(l.y/2),f=Math.cos(l.z/2),d=Math.sin(l.x/2),p=Math.sin(l.y/2),m=Math.sin(l.z/2),v=d*c*f+h*p*m,y=h*p*f-d*c*m,_=h*c*m-d*p*f,g=h*c*f+d*p*m;o.quat.set(r,v,y,_,g),o.quat.set(u,Math.sqrt(.5),0,0,-Math.sqrt(.5)),o.quat.setAxisAngle(a,s,-i),o.quat.multiply(r,r,u),o.quat.multiply(r,r,a),o.quat.invert(r,r),o.mat4.fromQuat(this._camera._mtxView,r),o.mat4.fromQuat(this._rotation,r),o.mat4.invert(this._camera._mtxInvertView,this._camera._mtxView)},t.prototype._onScreenOrientationChange=function(t){this.screenOrientation=window.orientation||0},t.prototype._onDeviceOrientationChange=function(t){this.deviceOrientation=event},r(t,[{key:"rotation",get:function(){return this._rotation}},{key:"uiOrientation",get:function(){return this._screenRotation}}]),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(6),a=i(s),u=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;r(this,t),this.easing=i,this._value=e,this._targetValue=e,this._efIndex=a.default.addEF(function(){return n._update()})}return t.prototype._update=function(){var t=1e-4;this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<t&&(this._value=this._targetValue)},t.prototype.setTo=function(t){this._targetValue=this._value=t},t.prototype.add=function(t){this._targetValue+=t},t.prototype.limit=function(t,e){return t>e?void this.limit(e,t):(this._min=t,this._max=e,void this._checkLimit())},t.prototype._checkLimit=function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)},t.prototype.destroy=function(){a.default.removeEF(this._efIndex)},o(t,[{key:"value",set:function(t){this._targetValue=t},get:function(){return this._value}},{key:"targetValue",get:function(){return this._targetValue}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(141),a=i(s),u=n(143),l=i(u),h=n(9),c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;r(this,t),this._camera=e,this._listenerTarget=n,this._isDown=!1,this._rotation=h.mat4.create(),this.rx=new a.default(0),this.ry=new a.default(0);var i=Math.PI/2-.1;this.rx.limit(-i,i),this._rx=0,this._ry=0,this._mouseDown={x:0,y:0},this._mouse={x:0,y:0},this.senstivity=.01,this._init(),this._screenRotation=0,this._isLocked=!1}return t.prototype.lock=function(t){this._isLocked=t},t.prototype._init=function(){var t=this;this._listenerTarget.addEventListener("mousedown",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("mouseup",function(){return t._onUp()}),this._listenerTarget.addEventListener("mousemove",function(e){return t._onMove(e)}),this._listenerTarget.addEventListener("touchstart",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("touchend",function(){return t._onUp()}),this._listenerTarget.addEventListener("touchmove",function(e){return t._onMove(e)})},t.prototype._onDown=function(t){this._isLocked||(this._isDown=!0,this._mouseDown=(0,l.default)(t),this._mouse=(0,l.default)(t),this._rx=this.rx.value,this.rx.setTo(this._rx),this._ry=this.ry.value,this.ry.setTo(this._ry))},t.prototype._onMove=function(t){this._isLocked||this._isDown&&(this._mouse=(0,l.default)(t))},t.prototype._onUp=function(){this._isLocked||(this._isDown=!1)},t.prototype.update=function(){if(!this._isLocked){var t=this._mouse.x-this._mouseDown.x,e=this._mouse.y-this._mouseDown.y;this.ry.value=this._ry+t*this.senstivity,this.rx.value=this._rx+e*this.senstivity;var n=h.quat.create();h.quat.rotateX(n,n,this.rx.value),h.quat.rotateY(n,n,this.ry.value),h.mat4.fromQuat(this._camera._mtxView,n),h.mat4.fromQuat(this._rotation,n),h.mat4.invert(this._camera._mtxInvertView,this._camera._mtxView)}},o(t,[{key:"rotation",get:function(){return this._rotation}},{key:"uiOrientation",get:function(){return this._screenRotation}}]),t}();e.default=c,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var n=function(t){return t.touches?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.clientX,y:t.clientY}};e.default=n,t.exports=e.default},function(t,e,n){"use strict";var i=n(179),r=window.Util||{};r.MIN_TIMESTEP=.001,r.MAX_TIMESTEP=1,r.base64=function(t,e){return"data:"+t+";base64,"+e},r.clamp=function(t,e,n){return Math.min(Math.max(e,t),n)},r.lerp=function(t,e,n){return t+(e-t)*n},r.isIOS=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),r.isSafari=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return t}}(),r.isFirefoxAndroid=function(){var t=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return t}}(),r.isLandscapeMode=function(){return 90==window.orientation||window.orientation==-90},r.isTimestampDeltaValid=function(t){return!isNaN(t)&&(!(t<=r.MIN_TIMESTEP)&&!(t>r.MAX_TIMESTEP))},r.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},r.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},r.requestFullscreen=function(t){if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0},r.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},r.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},r.linkProgram=function(t,e,n,i){var r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e),t.compileShader(r);var o=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(o,n),t.compileShader(o);var s=t.createProgram();t.attachShader(s,r),t.attachShader(s,o);for(var a in i)t.bindAttribLocation(s,i[a],a);return t.linkProgram(s),t.deleteShader(r),t.deleteShader(o),s},r.getProgramUniforms=function(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r="",o=0;o<i;o++){var s=t.getActiveUniform(e,o);r=s.name.replace("[0]",""),n[r]=t.getUniformLocation(e,r)}return n},r.orthoMatrix=function(t,e,n,i,r,o,s){var a=1/(e-n),u=1/(i-r),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*u,t[14]=(s+o)*l,t[15]=1,t},r.copyArray=function(t,e){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]},r.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},r.extend=i,r.safariCssSizeWorkaround=function(t){if(r.isIOS()){var e=t.style.width,n=t.style.height;t.style.width=parseInt(e)+1+"px",t.style.height=parseInt(n)+"px",setTimeout(function(){t.style.width=e,t.style.height=n},100)}window.Util=r,window.canvas=t},r.isDebug=function(){return r.getQueryParameter("debug")},r.getQueryParameter=function(t){var t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=e.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},r.frameDataFromPose=function(){function t(t,e,n,i){var r=Math.tan(e?e.upDegrees*o:s),a=Math.tan(e?e.downDegrees*o:s),u=Math.tan(e?e.leftDegrees*o:s),l=Math.tan(e?e.rightDegrees*o:s),h=2/(u+l),c=2/(r+a);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((u-l)*h*.5),t[9]=(r-a)*c*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}function e(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=i+i,u=r+r,l=o+o,h=i*a,c=i*u,f=i*l,d=r*u,p=r*l,m=o*l,v=s*a,y=s*u,_=s*l;return t[0]=1-(d+m),t[1]=c+_,t[2]=f-y,t[3]=0,t[4]=c-_,t[5]=1-(h+m),t[6]=p+v,t[7]=0,t[8]=f+y,t[9]=p-v,t[10]=1-(h+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function n(t,e,n){var i,r,o,s,a,u,l,h,c,f,d,p,m=n[0],v=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*y+e[12],t[13]=e[1]*m+e[5]*v+e[9]*y+e[13],t[14]=e[2]*m+e[6]*v+e[10]*y+e[14],t[15]=e[3]*m+e[7]*v+e[11]*y+e[15]):(i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],d=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=l,t[7]=h,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=i*m+a*v+c*y+e[12],t[13]=r*m+u*v+f*y+e[13],t[14]=o*m+l*v+d*y+e[14],t[15]=s*m+h*v+p*y+e[15]),t}function i(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],y=e[15],_=n*a-i*s,g=n*u-r*s,b=n*l-o*s,x=i*u-r*a,w=i*l-o*a,T=r*l-o*u,S=h*m-c*p,M=h*v-f*p,E=h*y-d*p,P=c*v-f*m,O=c*y-d*m,A=f*y-d*v,C=_*A-g*O+b*P+x*E-w*M+T*S;return C?(C=1/C,t[0]=(a*A-u*O+l*P)*C,t[1]=(r*O-i*A-o*P)*C,t[2]=(m*T-v*w+y*x)*C,t[3]=(f*w-c*T-d*x)*C,t[4]=(u*E-s*A-l*M)*C,t[5]=(n*A-r*E+o*M)*C,t[6]=(v*b-p*T-y*g)*C,t[7]=(h*T-f*b+d*g)*C,t[8]=(s*O-a*E+l*S)*C,t[9]=(i*E-n*O-o*S)*C,t[10]=(p*w-m*b+y*_)*C,t[11]=(c*b-h*w-d*_)*C,t[12]=(a*M-s*P-u*S)*C,t[13]=(n*P-i*M+r*S)*C,t[14]=(m*g-p*x-v*_)*C,t[15]=(h*x-c*g+f*_)*C,t):null}function r(r,o,s,l,h){t(r,l?l.fieldOfView:null,h.depthNear,h.depthFar);var c=s.orientation||a,f=s.position||u;e(o,c,f),l&&n(o,o,l.offset),i(o,o)}var o=Math.PI/180,s=.25*Math.PI,a=new Float32Array([0,0,0,1]),u=new Float32Array([0,0,0]);return function(t,e,n){return!(!t||!e)&&(t.pose=e,t.timestamp=e.timestamp,r(t.leftProjectionMatrix,t.leftViewMatrix,e,n.getEyeParameters("left"),n),r(t.rightProjectionMatrix,t.rightViewMatrix,e,n.getEyeParameters("right"),n),!0)}}(),r.isInsideCrossDomainIFrame=function(){var t=window.self!==window.top,e=r.getDomainFromUrl(document.referrer),n=r.getDomainFromUrl(window.location.href);return t&&e!==n},r.getDomainFromUrl=function(t){var e;return e=t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0],e=e.split(":")[0]},t.exports=r},function(t,e,n){"use strict";function i(){function t(t,e,n){var i=document.createElement("source");i.src=n,i.type="video/"+e,t.appendChild(i)}var e=document.createElement("video");e.setAttribute("loop",""),t(e,"webm",s.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),t(e,"mp4",s.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){e.paused&&e.play()},this.release=function(){e.pause()}}function r(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},2e4))},this.release=function(){t&&(clearInterval(t),t=null)}}function o(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)||t.match(/iPad/i)?r:i}var s=n(144);t.exports=o()},function(t,e,n){e=t.exports=n(148)(),e.push([t.id,"body{font-family:helvetica}",""])},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t){if("string"!=typeof t)return"";if("data:"===t.slice(0,5)){var e=t.match(/data:audio\/(ogg|mp3|opus|wav|m4a)/i);if(e&&e.length>1)return e[1].toLowerCase()}t=t.split("?")[0],t=t.slice(t.lastIndexOf("/")+1);var n=t.split(".");return 1===n.length||""===n[0]&&2===n.length?"":n.pop().toLowerCase()}function e(e){var n=void 0;if(Array.isArray(e))for(var i=0;i<e.length;i++){n=e[i];var r=t(n);if(et.indexOf(r)>-1)break}else"object"===("undefined"==typeof e?"undefined":Q(e))&&Object.keys(e).some(function(i){n=e[i];var r=t(n);return et.indexOf(r)>-1});return n||e}function n(t){return!!(t&&window.AudioBuffer&&t instanceof window.AudioBuffer)}function i(t){return!!(t&&window.ArrayBuffer&&t instanceof window.ArrayBuffer)}function r(t){return!!(t&&window.HTMLMediaElement&&t instanceof window.HTMLMediaElement)}function o(t){return!!(t&&"function"==typeof t.getAudioTracks&&t.getAudioTracks().length&&window.MediaStreamTrack&&t.getAudioTracks()[0]instanceof window.MediaStreamTrack)}function s(t){return!(!t||"string"!=typeof t||"sine"!==t&&"square"!==t&&"sawtooth"!==t&&"triangle"!==t)}function a(t){return!!(t&&"object"===("undefined"==typeof t?"undefined":Q(t))&&t.bufferSize&&t.channels&&t.callback)}function u(t){return!(!t||"string"!=typeof t||!(t.indexOf(".")>-1||"data:"===t.slice(0,5)))}function l(t){if(!t||r(t))return!1;var e=t.src||t.url||t.data||t;return u(e)||i(e)||Array.isArray(e)&&u(e[0])}function h(t,e){function n(t){var e=12*(Math.log(t/440)/Math.log(2));return Math.round(e)+69}function i(t){return 440*Math.pow(2,(t-69)/12)}function r(t,e){return Math.floor(1200*Math.log(t/i(e))/Math.log(2))}function o(t,e){return!t||(a.fftSize!==u||(!!(e&&t instanceof Uint8Array)||!e&&t instanceof Float32Array))}function s(t,e){return t?new Float32Array(e):new Uint8Array(e)}e=e||{};var a=t.createAnalyser(),u=e.fftSize||512,l=!!e.float,h=!!e.float,c=void 0,f=void 0;a.fftSize=u,a.smoothingTimeConstant=e.smoothing||e.smoothingTimeConstant||a.smoothingTimeConstant,a.minDecibels=e.minDecibels||a.minDecibels,a.maxDecibels=e.maxDecibels||a.maxDecibels;var d=new Blob(["onmessage=function(e){var data=e.data;var f=new Float32Array(data.b);for(var i=0;i<f.length;i++){data.sum+=f[i]}data.sum/=f.length;postMessage(Math.max(1.0-(data.sum/data.numSamples*-1.0),0))};"]),p=new Blob(["onmessage=function(e){var data=e.data;var sampleRate=data.sampleRate;var buf=new Float32Array(data.b);var SIZE=buf.length;var MAX_SAMPLES=Math.floor(SIZE/2);var best_offset=-1;var best_correlation=0;var rms=0;var foundGoodCorrelation=false;var correlations=new Array(MAX_SAMPLES);for(var i=0;i<SIZE;i++){var val=buf[i];rms+=val*val}rms=Math.sqrt(rms/SIZE);if (rms<0.01){postMessage(-1)}else{var lastCorrelation=1;for(var offset=0;offset<MAX_SAMPLES;offset++){var correlation=0;for(var i=0;i<MAX_SAMPLES;i++){correlation+=Math.abs((buf[i])-(buf[i+offset]))}correlation=1-(correlation/MAX_SAMPLES);correlations[offset]=correlation;if ((correlation>0.9)&&(correlation>lastCorrelation)){foundGoodCorrelation=true;if (correlation>best_correlation){best_correlation=correlation;best_offset=offset}}else if (foundGoodCorrelation){var shift=(correlations[best_offset+1]-correlations[best_offset-1])/correlations[best_offset];postMessage(sampleRate/(best_offset+(8*shift)))}lastCorrelation=correlation}if (best_correlation>0.01){postMessage(sampleRate/best_offset)}else{postMessage(-1)}}};"]),m=URL.createObjectURL(d),v=new Worker(m),y=URL.createObjectURL(p),_=new Worker(y),g=null,b=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],x=null,w={
hertz:null,note:null,noteIndex:null,detuneCents:null,detune:null};return v.onmessage=function(t){g&&g(t.data)},_.onmessage=function(t){if(x){var e=t.data;if(e!==-1){var i=n(e),o=r(e,i);w.hertz=e,w.noteIndex=i%12,w.note=b[i%12],w.detuneCents=o,0===o?w.detune="":o<0?w.detune="flat":w.detune="sharp"}x(w)}},a.getWaveform=function(t){return arguments.length||(t=h),o(c,t)&&(u=a.fftSize,h=t,c=s(t,u)),t&&this.getFloatTimeDomainData?this.getFloatTimeDomainData(c):this.getByteTimeDomainData(c),c},a.getPitch=function(e){x=x||e;var n=new Float32Array(a.fftSize);n.set(a.getWaveform(!0)),_.postMessage({sampleRate:t.sampleRate,b:n.buffer},[n.buffer])},a.getFrequencies=function(t){return arguments.length||(t=l),o(f,t)&&(u=a.fftSize,l=t,f=s(t,a.frequencyBinCount)),t?this.getFloatFrequencyData(f):this.getByteFrequencyData(f),f},a.getAmplitude=function(t){g=g||t;var e=new Float32Array(a.fftSize);e.set(a.getFrequencies(!0)),v.postMessage({sum:0,length:e.byteLength,numSamples:a.fftSize/2,b:e.buffer},[e.buffer])},a.update=function(){a.getWaveform(),a.getFrequencies()},Object.defineProperties(a,{smoothing:{get:function(){return a.smoothingTimeConstant},set:function(t){a.smoothingTimeConstant=t}}}),a}function c(t,e){return arguments.length<2&&(e=0),"number"!=typeof t||isNaN(t)?e:t}function f(t,e){e=c(e,1);var n=t.createWaveShaper(),i=new Float32Array(st);return n.update=function(t){if(e=t,e<=0)return e=0,void(this.curve=null);for(var n=100*t,r=Math.PI/180,o=void 0,s=0;s<st;s++)o=2*s/st-1,i[s]=(3+n)*o*20*r/(Math.PI+n*Math.abs(o));this.curve=i},Object.defineProperties(n,{amount:{get:function(){return e},set:function(t){this.update(t)}}}),"undefined"!=typeof e&&n.update(e),n}function d(t,e){e=e||{};var n=t.createGain(),i=t.createDelay(),r=t.createGain(),o=t.createGain();i.delayTime.value=c(e.delayTime,.5),r.gain.value=c(e.feedback,.5),n.connect(i),n.connect(o),i.connect(r),r.connect(i),r.connect(o);var s=n;return s.name="Echo",s._output=o,Object.defineProperties(s,{delay:{get:function(){return i.delayTime.value},set:function(t){i.delayTime.value=t}},feedback:{get:function(){return r.gain.value},set:function(t){r.gain.value=t}}}),s}function p(){function t(){}function e(){return{value:1,defaultValue:1,linearRampToValueAtTime:t,setValueAtTime:t,exponentialRampToValueAtTime:t,setTargetAtTime:t,setValueCurveAtTime:t,cancelScheduledValues:t}}function n(){return{connect:t,disconnect:t,frequencyBinCount:0,smoothingTimeConstant:0,fftSize:0,minDecibels:0,maxDecibels:0,getByteTimeDomainData:t,getByteFrequencyData:t,getFloatTimeDomainData:t,getFloatFrequencyData:t,gain:e(),panningModel:0,setPosition:t,setOrientation:t,setVelocity:t,distanceModel:0,refDistance:0,maxDistance:0,rolloffFactor:0,coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,type:0,frequency:e(),Q:e(),detune:e(),delayTime:e(),buffer:0,threshold:e(),knee:e(),ratio:e(),attack:e(),release:e(),reduction:e(),oversample:0,curve:0,sampleRate:1,length:0,duration:0,numberOfChannels:0,getChannelData:function(){return[]},copyFromChannel:t,copyToChannel:t,dopplerFactor:0,speedOfSound:0,start:t}}var i=Date.now();return window.Uint8Array||(window.Uint8Array=window.Float32Array=Array),{createAnalyser:n,createBuffer:n,createBiquadFilter:n,createChannelMerger:n,createChannelSplitter:n,createDynamicsCompressor:n,createConvolver:n,createDelay:n,createGain:n,createOscillator:n,createPanner:n,createScriptProcessor:n,createWaveShaper:n,listener:n(),get currentTime(){return(Date.now()-i)/1e3}}}function m(t){function e(t){var e=Math.log(r/i)/Math.LN2,n=Math.pow(2,e*(t-1));return r*n}var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=40,r=t.sampleRate/2,o=t.createBiquadFilter();return o.type=n.type,o.set=function(t,e,n){return"undefined"!=typeof t&&"number"==typeof t&&(o.frequency.value=t),"undefined"!=typeof e&&"number"==typeof e&&(o.Q.value=e),"undefined"!=typeof n&&"number"==typeof n&&(o.gain.value=n),o},o.setByPercent=function(t,n,i){return o.set(e(t),n,i)},o.set(n.frequency,n.q,n.gain)}function v(t,e){var n=t.createGain(),i=t.createDelay(),r=t.createGain(),o=t.createOscillator(),s=t.createGain(),a=t.createGain();i.delayTime.value=c(e.delay,.005),r.gain.value=c(e.feedback,.5),o.type="sine",o.frequency.value=c(e.frequency,.002),s.gain.value=c(e.gain,.25),n.connect(a),n.connect(i),i.connect(a),i.connect(r),r.connect(n),o.connect(s),s.connect(i.delayTime),o.start(0);var u=n;return u.name="Flanger",u._output=a,Object.defineProperties(u,{delay:{get:function(){return i.delayTime.value},set:function(t){i.delayTime.value=t}},lfoFrequency:{get:function(){return o.frequency.value},set:function(t){o.frequency.value=t}},lfoGain:{get:function(){return s.gain.value},set:function(t){s.gain.value=t}},feedback:{get:function(){return r.gain.value},set:function(t){r.gain.value=t}}}),u}function y(t,e){var n=t.createGain(),i=t.createChannelSplitter(2),r=t.createChannelMerger(2),o=t.createGain(),s=t.createGain(),a=t.createOscillator(),u=t.createGain(),l=t.createGain(),h=t.createDelay(),f=t.createDelay(),d=t.createGain();o.gain.value=s.gain.value=c(e.feedback,.5),h.delayTime.value=f.delayTime.value=c(e.delay,.003),a.type="sine",a.frequency.value=c(e.frequency,.5),u.gain.value=c(e.gain,.005),l.gain.value=0-u.gain.value,n.connect(i),i.connect(h,0),i.connect(f,1),h.connect(o),f.connect(s),o.connect(f),s.connect(h),h.connect(r,0,0),f.connect(r,0,1),r.connect(d),n.connect(d),a.connect(u),a.connect(l),u.connect(h.delayTime),l.connect(f.delayTime),a.start(0);var p=n;return p.name="StereoFlanger",p._output=d,Object.defineProperties(p,{delay:{get:function(){return h.delayTime.value},set:function(t){h.delayTime.value=f.delayTime.value=t}},lfoFrequency:{get:function(){return a.frequency.value},set:function(t){a.frequency.value=t}},lfoGain:{get:function(){return u.gain.value},set:function(t){u.gain.value=l.gain.value=t}},feedback:{get:function(){return o.gain.value},set:function(t){o.gain.value=s.gain.value=t}}}),p}function _(t,e){return e=e||{},e.stereo?new y(t,e):new v(t,e)}function g(t){function e(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,s=e.y,a=e.z;t.x=i*a-r*s,t.y=r*o-n*a,t.z=n*s-i*o}function n(t){if(0===t.x&&0===t.y&&0===t.z)return t;var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),n=1/e;return t.x*=n,t.y*=n,t.z*=n,t}function i(t,i){var r=s.get(i.x,i.y,i.z);e(r,a),e(r,i),n(r),n(i),t.setOrientation(i.x,i.y,i.z,r.x,r.y,r.z),s.dispose(i),s.dispose(r)}function r(t,e){t.setPosition(e.x,e.y,e.z),s.dispose(e)}var o=t.createPanner();o.panningModel=g.defaults.panningModel,o.distanceModel=g.defaults.distanceModel,o.refDistance=g.defaults.refDistance,o.maxDistance=g.defaults.maxDistance,o.rolloffFactor=g.defaults.rolloffFactor,o.coneInnerAngle=g.defaults.coneInnerAngle,o.coneOuterAngle=g.defaults.coneOuterAngle,o.coneOuterGain=g.defaults.coneOuterGain,o.setPosition(0,0,1),o.setOrientation(0,0,0);var s={pool:[],get:function(t,e,n){var i=this.pool.length?this.pool.pop():{x:0,y:0,z:0};return"undefined"!=typeof t&&isNaN(t)&&"x"in t&&"y"in t&&"z"in t?(i.x=c(t.x),i.y=c(t.y),i.z=c(t.z)):(i.x=c(t),i.y=c(e),i.z=c(n)),i},dispose:function(t){this.pool.push(t)}},a=s.get(0,1,0),u=Math.PI/4,l=Math.PI/2;return o.set=function(t,e,n){var i=s.get(t,e,n);1===arguments.length&&i.x&&(t=i.x,t>1&&(t=1),t<-1&&(t=-1),t*=u,n=t+l,n>l&&(n=Math.PI-n),i.x=Math.sin(t),i.z=Math.sin(n)),r(o,i)},o.setSourcePosition=function(t,e,n){r(o,s.get(t,e,n))},o.setSourceOrientation=function(t,e,n){i(o,s.get(t,e,n))},o.setListenerPosition=function(e,n,i){r(t.listener,s.get(e,n,i))},o.setListenerOrientation=function(e,n,r){i(t.listener,s.get(e,n,r))},o.getDefaults=function(){return g.defaults},o.setDefaults=function(t){Object.keys(t).forEach(function(e){g.defaults[e]=t[e]})},o}function b(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=c(e.stages,8),i=[],r=void 0,o=t.createGain(),s=t.createGain(),a=t.createOscillator(),u=t.createGain(),l=t.createGain();s.gain.value=c(e.feedback,.5),a.type="sine",a.frequency.value=c(e.frequency,.5),u.gain.value=c(e.gain,300);for(var h=0;h<n;h++)r=t.createBiquadFilter(),r.type="allpass",r.frequency.value=1e3*h,h>0&&i[h-1].connect(r),u.connect(r.frequency),i.push(r);var f=i[0],d=i[i.length-1];o.connect(f),o.connect(l),d.connect(l),d.connect(s),s.connect(f),a.connect(u),a.start(0);var p=o;return p.name="Phaser",p._output=l,Object.defineProperties(p,{lfoFrequency:{get:function(){return a.frequency.value},set:function(t){a.frequency.value=t}},lfoGain:{get:function(){return u.gain.value},set:function(t){u.gain.value=t}},feedback:{get:function(){return s.gain.value},set:function(t){s.gain.value=t}}}),p}function x(t,e){function n(t,e){for(var n=new Float32Array(e),i=0,r=0;r<t.length;r++)n.set(t[r],i),i+=t[r].length;return n}function i(){if(!a.length)return t.createBuffer(2,s,t.sampleRate);var e=a.length*s,i=t.createBuffer(2,e,t.sampleRate);return i.getChannelData(0).set(n(a,e)),i.getChannelData(1).set(n(u,e)),i}function r(){d&&(d.onaudioprocess=null,c.disconnect(),d.disconnect())}function o(){r(),d=t.createScriptProcessor(s,2,2),c.connect(d),d.connect(t.destination),d.connect(f),d.onaudioprocess=function(t){var n=t.inputBuffer.getChannelData(0),i=t.inputBuffer.getChannelData(1);if(e){var r=t.outputBuffer.getChannelData(0),o=t.outputBuffer.getChannelData(1);r.set(n),o.set(i)}p.isRecording&&(a.push(new Float32Array(n)),u.push(new Float32Array(i)))}}var s=4096,a=[],u=[],l=0,h=0,c=t.createGain(),f=t.createGain(),d=void 0,p=c;return p.name="Recorder",p._output=f,p.isRecording=!1,p.start=function(){o(),a.length=0,u.length=0,l=t.currentTime,h=0,this.isRecording=!0},p.stop=function(){return h=t.currentTime,this.isRecording=!1,r(),i()},p.getDuration=function(){return this.isRecording?t.currentTime-l:h-l},p}function w(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.sampleRate,i=c(e.time,1),r=c(e.decay,5),o=!!e.reverse,s=void 0,a=void 0,u=t.createGain(),l=t.createConvolver(),h=t.createGain();u.connect(l),u.connect(h),l.connect(h);var f=u;return f.name="Reverb",f._output=h,f.update=function(e){if("undefined"!=typeof e.time&&(i=e.time,s=Math.floor(n*i),a=s?t.createBuffer(2,s,n):null),"undefined"!=typeof e.decay&&(r=e.decay),"undefined"!=typeof e.reverse&&(o=e.reverse),!a)return void(l.buffer=null);for(var u=a.getChannelData(0),h=a.getChannelData(1),c=void 0,f=void 0,d=0;d<s;d++)c=o?s-d:d,f=Math.pow(1-c/s,r),u[d]=(2*Math.random()-1)*f,h[d]=(2*Math.random()-1)*f;l.buffer=a},f.update({time:i,decay:r,reverse:o}),Object.defineProperties(f,{time:{get:function(){return i},set:function(t){t!==i&&this.update({time:t})}},decay:{get:function(){return r},set:function(t){t!==r&&this.update({decay:t})}},reverse:{get:function(){return o},set:function(t){t!==o&&this.update({reverse:!!t})}}}),f}function T(t){function e(t,e){var n=t._output||t;n.disconnect(),n.connect(e)}function n(t){var n=W.length,i=n?W[n-1]:q;i&&e(i,t),Y=t}function i(){if(q){for(var t=void 0,i=void 0,r=0;r<W.length;r++)t=W[r],i=0===r?q:W[r-1],e(i,t);Y&&n(Y)}}function r(t){return!!t&&W.indexOf(t)>-1}function o(t){return t?r(t)?t:(W.push(t),i(),t):null}function s(t){if(!t)return null;if(!r(t))return t;for(var e=W.length,n=0;n<e;n++)if(t===W[n]){W.splice(n,1);break}var o=t._output||t;return o.disconnect(),i(),t}function a(t,e){e=!!e;var n=r(t);return arguments.length>1&&n===e?H:(n?s(t):o(t),H)}function u(){for(;W.length;)W.pop().disconnect();return i(),H}function l(){u(),t=null,Y=null,W=[],q&&q.disconnect(),q=null}function c(e){return o(new h(t,e))}function v(e){var n=t.createDynamicsCompressor();return n.update=function(t){n.threshold.value="undefined"!=typeof t.threshold?t.threshold:-24,n.knee.value="undefined"!=typeof t.knee?t.knee:30,n.ratio.value="undefined"!=typeof t.ratio?t.ratio:12,n.attack.value="undefined"!=typeof t.attack?t.attack:3e-4,n.release.value="undefined"!=typeof t.release?t.release:.25},n.update(e||{}),o(n)}function y(e){var n=t.createConvolver();return n.buffer=e,o(n)}function T(e){var n=t.createDelay();return"undefined"!=typeof e&&(n.delayTime.value=e),o(n)}function S(e){return o(new d(t,e))}function M(e){return o(new f(t,e))}function E(e,n,i,r){return o(new m(t,{type:e,frequency:n,q:i,gain:r}))}function P(t,e){return E("lowpass",{frequency:t,q:e})}function O(t,e){return E("highpass",{frequency:t,q:e})}function A(t,e){return E("bandpass",{frequency:t,q:e})}function C(t,e){return E("lowshelf",{frequency:t,q:0,gain:e})}function I(t,e){return E("highshelf",{frequency:t,q:0,gain:e})}function R(t,e,n){return E("peaking",{frequency:t,q:e,gain:n})}function D(t,e,n){return E("notch",{frequency:t,q:e,gain:n})}function k(t,e){return E("allpass",{frequency:t,q:e})}function L(e){return o(new _(t,e))}function F(e){var n=t.createGain();return"undefined"!=typeof e&&(n.gain.value=e),n}function j(){return o(new g(t))}function B(e){return o(new b(t,e))}function N(e){return o(new x(t,e))}function U(e,n,i){return o(new w(t,e,n,i))}function z(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.bufferSize||1024,i="undefined"==typeof e.inputChannels?0:e.inputChannels,r="undefined"==typeof e.outputChannels?1:e.outputChannels,s=t.createScriptProcessor(n,i,r),a=e.thisArg||e.context||s,u=e.callback||function(){};return s.onaudioprocess=u.bind(a),o(s)}function V(t){return q=t,i(),t}function X(t){return n(t),t}t=t||new p;var G=new g(t),H=null,Y=void 0,W=[],q=void 0;return H={context:t,nodeList:W,panning:G,has:r,add:o,remove:s,toggle:a,removeAll:u,destroy:l,setSource:V,setDestination:X,analyser:c,compressor:v,convolver:y,delay:T,echo:S,distortion:M,filter:E,lowpass:P,highpass:O,bandpass:A,lowshelf:C,highshelf:I,peaking:R,notch:D,allpass:k,flanger:L,gain:F,panner:j,phaser:B,recorder:N,reverb:U,script:z},Object.freeze(H)}function S(t,e){function n(t,e){var n=void 0;return t||0===t?(y.some(function(e){return(e===t||e.id===t)&&(n=e,!0)}),n&&e?e(n):n):n}function i(t){return n(t,function(t){return y.splice(y.indexOf(t),1)}),x}function r(t){return t.gain.disconnect(),t.gain.connect(g),y.push(t),t.once("destroy",i),x}function o(t,e){return y.forEach(function(n){return n.play(t,e)}),x}function s(){return y.forEach(function(t){t.playing&&t.pause()}),x}function a(){return y.forEach(function(t){t.paused&&t.play()}),x}function u(){return y.forEach(function(t){return t.stop()}),x}function l(t){return y.forEach(function(e){return e.seek(t)}),x}function h(){return b=x.volume,x.volume=0,x}function c(){return x.volume=b||1,x}function f(t){return x.volume=t,x}function d(e,n){if(t){var i=g.gain,r=t.currentTime;i.cancelScheduledValues(r),i.setValueAtTime(i.value,r),i.linearRampToValueAtTime(e,r+n)}else y.forEach(function(t){return t.fade(e,n)});return x}function p(){y.forEach(function(t){return t.load(null,!0)})}function m(){y.forEach(function(t){return t.unload()})}function v(){for(;y.length;)y.pop().destroy()}var y=[],_=new T(t),g=_.gain(),b=1,x=null;return t&&(_.setSource(g),_.setDestination(e||t.destination)),x={add:r,find:n,remove:i,play:o,pause:s,resume:a,stop:u,seek:l,setVolume:f,mute:h,unMute:c,fade:d,load:p,unload:m,destroy:v},Object.defineProperties(x,{effect:{value:_},gain:{value:g},sounds:{value:y},volume:{get:function(){return g.gain.value},set:function(e){isNaN(e)||(e=Math.min(Math.max(e,0),1),t?(g.gain.cancelScheduledValues(t.currentTime),g.gain.value=e,g.gain.setValueAtTime(e,t.currentTime)):g.gain.value=e,y.forEach(function(t){t.context||(t.groupVolume=e)}))}}}),x}function M(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function E(t){return"function"==typeof t}function P(t){return"number"==typeof t}function O(t){return"object"==typeof t&&null!==t}function A(t){return void 0===t}function C(t,e){function n(){v.off("error"),v.off("progress"),v.off("complete"),v.off("loaded"),w&&"function"==typeof w.removeEventListener&&(w.removeEventListener("canplaythrough",u),w.removeEventListener("error",o)),b&&(b.removeEventListener("progress",r),b.removeEventListener("load",a),b.removeEventListener("error",o))}function i(t){v.emit("progress",1),v.emit("loaded",t),v.emit("complete",t),n()}function r(t){t.lengthComputable&&(y=t.loaded/t.total,v.emit("progress",y))}function o(e){window.clearTimeout(x);var i=e;w&&w.error&&(i="Media Error: "+m[w.error.code]+" "+t),b&&(i="XHR Error: "+b.status+" "+b.statusText+" "+t),v.emit("error",i),n()}function s(t){_.decodeAudioData(t,function(t){w=t,b=null,y=1,i(t)},o)}function a(){s(b.response)}function u(){window.clearTimeout(x),w&&(y=1,i(w))}function l(){n(),b&&4!==b.readyState&&b.abort(),b=null,window.clearTimeout(x)}function h(){l(),b=null,w=null,_=null}function c(){return t instanceof window.ArrayBuffer?void s(t):(b=new XMLHttpRequest,b.open("GET",t,!0),b.responseType="arraybuffer",b.addEventListener("progress",r),b.addEventListener("load",a),b.addEventListener("error",o),void b.send())}function f(){w&&w.tagName||(w=document.createElement("audio")),g||(window.clearTimeout(x),x=window.setTimeout(u,2e3),w.addEventListener("canplaythrough",u,!1)),w.addEventListener("error",o,!1),w.preload="auto",w.src=t,w.load(),g&&i(w)}function d(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];e&&!t||(_?c():f())}function p(e){t=e,d()}var m=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"],v=new lt,y=0,_=void 0,g=void 0,b=void 0,x=void 0,w=void 0,T={on:v.on.bind(v),once:v.once.bind(v),off:v.off.bind(v),load:p,start:d,cancel:l,destroy:h};return Object.defineProperties(T,{data:{get:function(){return w}},progress:{get:function(){return y}},audioContext:{set:function(t){_=t}},isTouchLocked:{set:function(t){g=t}}}),Object.freeze(T)}function I(t,e,n){function i(){return!y&&e&&(y=e.createBufferSource(),y.buffer=t),y}function r(){if(y){y.onended=null;try{y.disconnect(),y.stop(0)}catch(t){}y=null}d=!1,p=0,v=!1,_=0}function o(){var t=e.currentTime-_;r(),p=t,v=!1,d=!0}function s(){r(),h=!0,"function"==typeof c&&c(l)}function a(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(!v){for(t=t?e.currentTime+t:0,n&&(p=0),p&&(n=p);n>l.duration;)n%=l.duration;i(),y.onended=s,y.start(t,n),y.loop=f,y.playbackRate.value=m,_=e.currentTime-n,h=!1,d=!1,p=0,v=!0}}function u(){r(),t=null,e=null,c=null,y=null}var l={},h=!1,c=n,f=!1,d=!1,p=0,m=1,v=!1,y=null,_=0;return Object.defineProperties(l,{play:{value:a},pause:{value:o},stop:{value:r},destroy:{value:u},currentTime:{get:function(){if(p)return p;if(_){var t=e.currentTime-_;return t>l.duration&&(t%=l.duration),t}return 0}},duration:{get:function(){return t?t.duration:0}},ended:{get:function(){return h}},loop:{get:function(){return f},set:function(t){f=!!t,y&&(y.loop=f)}},paused:{get:function(){return d}},playbackRate:{get:function(){return m},set:function(t){m=t,y&&(y.playbackRate.value=m)}},playing:{get:function(){return v}},progress:{get:function(){return l.duration?l.currentTime/l.duration:0}},sourceNode:{get:function(){return i()}}}),Object.freeze(l)}function R(t,e,n){function i(){return!x&&e&&(x=e.createMediaElementSource(t)),x}function r(e){t.src=e,t.load(),d=!1,_=!1,b=!1}function o(){t.removeEventListener("canplaythrough",o),b&&t.play()}function s(){return y?(t.currentTime=0,t.currentTime>0&&t.load(),void t.play()):(d=!0,_=!1,b=!1,void("function"==typeof p&&p(f)))}function a(e,n){clearTimeout(m),t.volume=T*w,t.playbackRate=g,n&&(t.currentTime=n),e?m=setTimeout(a,e):t.play(),d=!1,_=!1,b=!0,t.removeEventListener("ended",s),t.addEventListener("ended",s,!1),t.readyState<1&&(t.removeEventListener("canplaythrough",o),t.addEventListener("canplaythrough",o,!1),t.load(),t.play())}function u(){clearTimeout(m),t&&(t.pause(),b=!1,_=!0)}function l(){if(clearTimeout(m),t){t.pause();try{t.currentTime=0,t.currentTime>0&&t.load()}catch(t){}b=!1,_=!1}}function h(t,n){function i(t,e){v=window.setTimeout(function(){return f.volume=f.volume+.2*(t-f.volume),Math.abs(f.volume-t)>.05?void i(t,e):void(f.volume=t)},1e3*e)}return e?f:(window.clearTimeout(v),i(t,n/10),f)}function c(){t.removeEventListener("ended",s),t.removeEventListener("canplaythrough",o),l(),t=null,e=null,p=null,x=null}var f={},d=!1,p=n,m=void 0,v=void 0,y=!1,_=!1,g=1,b=!1,x=null,w=1,T=1;return Object.defineProperties(f,{play:{value:a},pause:{value:u},stop:{value:l},load:{value:r},fade:{value:h},destroy:{value:c},currentTime:{get:function(){return t?t.currentTime:0}},duration:{get:function(){return t?t.duration:0}},ended:{get:function(){return d}},loop:{get:function(){return y},set:function(t){y=!!t}},paused:{get:function(){return _}},playbackRate:{get:function(){return g},set:function(e){g=e,t&&(t.playbackRate=g)}},playing:{get:function(){return b}},progress:{get:function(){return t&&t.duration?t.currentTime/t.duration:0}},sourceNode:{get:function(){return i()}},volume:{get:function(){return T},set:function(e){window.clearTimeout(v),T=e,t&&(t.volume=T*w)}},groupVolume:{get:function(){return w},set:function(e){w=e,t&&(t.volume=T*w)}}}),Object.freeze(f)}function D(t,e){function n(){return!c&&e&&(c=e.createMediaStreamSource(t),navigator.mozGetUserMedia&&(window.mozHack=c)),c}function i(t){t=t?e.currentTime+t:0,n(),c.start(t),f=e.currentTime-l,a=!1,h=!0,u=!1,l=0}function r(){if(c){try{c.stop(0)}catch(t){}c=null}a=!0,u=!1,l=0,h=!1,f=0}function o(){var t=e.currentTime-f;r(),l=t,h=!1,u=!0}function s(){r(),e=null,c=null,t=null,window.mozHack=null}var a=!1,u=!1,l=0,h=!1,c=null,f=0,d={play:i,pause:o,stop:r,destroy:s,duration:0,progress:0};return Object.defineProperties(d,{currentTime:{get:function(){return l?l:f?e.currentTime-f:0}},ended:{get:function(){return a}},paused:{get:function(){return u}},playing:{get:function(){return h}},sourceNode:{get:function(){return n()}}}),Object.freeze(d)}function k(t,e){function n(){return!c&&e&&(c=e.createOscillator(),c.type=t,c.frequency.value=d),c}function i(t){t=t||0,t&&(t=e.currentTime+t),n(),c.start(t),f=l?e.currentTime-l:e.currentTime,a=!1,h=!0,u=!1,l=0}function r(){if(c){try{c.stop(0)}catch(t){}c=null}a=!0,u=!1,l=0,h=!1,f=0}function o(){var t=e.currentTime-f;r(),l=t,h=!1,u=!0}function s(){r(),e=null,c=null}var a=!1,u=!1,l=0,h=!1,c=null,f=0,d=200,p=null;return p={play:i,pause:o,stop:r,destroy:s},Object.defineProperties(p,{currentTime:{get:function(){return l?l:f?e.currentTime-f:0}},duration:{value:0},ended:{get:function(){return a}},frequency:{get:function(){return d},set:function(t){d=t,c&&(c.frequency.value=t)}},paused:{get:function(){return u}},playing:{get:function(){return h}},progress:{value:0},sourceNode:{get:function(){return n()}}}),Object.freeze(p)}function L(t,e){function n(){return!m&&e&&(m=e.createScriptProcessor(u,0,l)),m}function i(){n(),m.onaudioprocess=c,v=e.currentTime-d,h=!1,f=!1,d=0,p=!0}function r(t){for(var e=t.outputBuffer,n=0;n<e.numberOfChannels;n++)for(var i=e.getChannelData(n),r=0;r<i.length;r++)i[r]=0}function o(){m&&(m.onaudioprocess=r),h=!0,f=!1,d=0,p=!1,v=0}function s(){var t=e.currentTime-v;o(),d=t,p=!1,f=!0}function a(){o(),e=null,c=null,m=null}var u=t.bufferSize||1024,l=t.channels||1,h=!1,c=t.callback.bind(t.thisArg||this),f=!1,d=0,p=!1,m=null,v=0,y=null;return y={play:i,pause:s,stop:o,destroy:a,duration:0,progress:0},Object.defineProperties(y,{currentTime:{get:function(){return d?d:v?e.currentTime-v:0}},ended:{get:function(){return h}},paused:{get:function(){return f}},playing:{get:function(){return p}},sourceNode:{get:function(){return n()}}}),Object.freeze(y)}function F(){var t=void 0,e=void 0;return function(n,i){if(!window.Float32Array||!window.AudioBuffer)return[];var r=t===n,o=e&&e.length===i;if(r&&o)return e;if(e&&e.length===i||(e=new Float32Array(i)),!n)return e;t=n;for(var s=Math.floor(t.length/i),a=5,u=Math.max(Math.floor(s/a),1),l=0,h=0;h<t.numberOfChannels;h++)for(var c=t.getChannelData(h),f=0;f<i;f++)for(var d=f*s,p=d+s;d<p;d+=u){var m=c[d];m<0&&(m=-m),m>e[f]&&(e[f]=m),m>l&&(l=m)}for(var v=1/l,y=0;y<e.length;y++)e[y]*=v;return e}}function j(t){function e(t){if(g=t,ot.isAudioBuffer(g))E=new I(g,d,function(){return P.emit("ended",P)});else if(ot.isMediaElement(g))E=new R(g,d,function(){return P.emit("ended",P)});else if(ot.isMediaStream(g))E=new D(g,d);else if(ot.isOscillatorType(g&&g.type||g))E=new k(g.type||g,d);else{if(!ot.isScriptConfig(g))throw new Error("Cannot detect data type: "+g);E=new L(g,d)}m.setSource(E.sourceNode),P.emit("ready",P),M&&M()}function n(t){e(t),P.emit("loaded",P)}function i(t){P.emit("error",P,t)}function r(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],r=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],o=!r&&!E&&!!t.deferLoad;if(e){var s=ot.getSupportedFile(t.src||t.url||t.data||t)||t.src;t=Object.assign(t,e,{src:s})}return E&&g&&g.tagName?E.load(t.src):(x=x||new C(t.src,o),x.audioContext=t.asMediaElement?null:d,x.isTouchLocked=b,x.off("loaded",n),x.once("loaded",n),x.off("error",i),x.on("error",i)),P}function o(e,n){return!E||b?(M=function(){E&&o(e,n)},t.deferLoad&&(x||r(null,!0),x.start(!0)),P):(M=null,m.setSource(E.sourceNode),d||(P.volume=v.gain.value),E.play(e,n),E.hasOwnProperty("loop")&&(E.loop=w),P.emit("play",P),P)}function s(){return E&&E.pause(),P.emit("pause",P),P}function a(t){return E&&E.stop(t||0),P.emit("stop",P),P}function u(t){return E&&(E.stop(),o(0,E.duration*t)),P}function l(t,e){if(!E)return P;var n=v.gain;if(d){var i=d.currentTime;n.cancelScheduledValues(i),n.setValueAtTime(n.value,i),n.linearRampToValueAtTime(t,i+e)}else"function"==typeof E.fade&&(E.fade(t,e),n.value=t);return P.emit("fade",P,t),P}function h(){E&&E.destroy(),x&&x.destroy(),g=null,M=null,E=null,x=null,t.deferLoad=!0,P.emit("unload",P)}function c(){r(null,!0)}function f(){E&&E.destroy(),m&&m.destroy(),v&&v.disconnect(),x&&x.off("loaded"),x&&x.off("error"),x&&x.destroy(),P.off("loaded"),P.off("ended"),P.off("error"),v=null,d=null,p=null,g=null,M=null,E=null,m=null,x=null,y=null,t=null,P.emit("destroy",P),P.off("destroy")}var d=t.context,p=t.destination,m=new T(d),v=m.gain(),y=F(),_=null,g=null,b=!1,x=null,w=!1,S=1,M=null,E=null,P=null;return d&&(m.setDestination(v),v.connect(p||d.destination)),P=Object.create(lt.prototype,{_events:{value:{}},constructor:{value:j},play:{value:o},pause:{value:s},load:{value:r},seek:{value:u},stop:{value:a},fade:{value:l},unload:{value:h},reload:{value:c},destroy:{value:f},context:{value:d},currentTime:{get:function(){return E?E.currentTime:0},set:function(t){E&&E.stop(),o(0,t)}},data:{get:function(){return g},set:function(t){t&&e(t)}},duration:{get:function(){return E?E.duration:0}},effect:{value:m},ended:{get:function(){return!!E&&E.ended}},frequency:{get:function(){return E?E.frequency:0},set:function(t){E&&E.hasOwnProperty("frequency")&&(E.frequency=t)}},gain:{value:v},id:{get:function(){return _},set:function(t){_=t}},isTouchLocked:{set:function(t){b=t,x&&(x.isTouchLocked=t),!t&&M&&M()}},loader:{get:function(){return x}},loop:{get:function(){return w},set:function(t){w=!!t,E&&E.hasOwnProperty("loop")&&E.loop!==w&&(E.loop=w)}},config:{get:function(){return t}},paused:{get:function(){return!!E&&E.paused}},playing:{get:function(){return!!E&&E.playing}},playbackRate:{get:function(){return S},set:function(t){S=t,E&&(E.playbackRate=S)}},progress:{get:function(){return E?E.progress:0}},sourceNode:{get:function(){return E?E.sourceNode:null}},volume:{get:function(){return d?v.gain.value:E&&E.hasOwnProperty("volume")?E.volume:1},set:function(t){if(!isNaN(t)){t=Math.min(Math.max(t,0),1);var e=v.gain;if(d){var n=d.currentTime;e.cancelScheduledValues(n),e.value=t,e.setValueAtTime(t,n)}else e.value=t,E&&E.hasOwnProperty("volume")&&(E.volume=t)}}},groupVolume:{get:function(){return E.groupVolume},set:function(t){E&&E.hasOwnProperty("groupVolume")&&(E.groupVolume=t)}},waveform:{value:function(t){return g||P.once("ready",function(){return y(g,t)}),y(g,t)}},userData:{value:{}}})}function B(t,e){function n(){r.length&&(a=r.slice(0).sort(function(t,e){return e.duration-t.duration})[0])}var i=new S(t,e),r=i.sounds,o=1,s=!1,a=void 0,u=i.add;i.add=function(t){return u(t),n(),i};var l=i.rmeove;return i.remove=function(t){return l(t),n(),i},Object.defineProperties(i,{currentTime:{get:function(){return a?a.currentTime:0},set:function(t){this.stop(),this.play(0,t)}},duration:{get:function(){return a?a.duration:0}},loop:{get:function(){return s},set:function(t){s=!!t,r.forEach(function(t){t.loop=s})}},paused:{get:function(){return!!a&&a.paused}},progress:{get:function(){return a?a.progress:0}},playbackRate:{get:function(){return o},set:function(t){o=t,r.forEach(function(t){t.playbackRate=o})}},playing:{get:function(){return!!a&&a.playing}}}),i}function N(t,e,n){function i(){return o?(navigator.getUserMedia({audio:!0},function(e){a=e,t(a)},function(t){e&&"PermissionDeniedError"===t.name||"PERMISSION_DENIED"===t?e():n(t.message||t)}),s):s}function r(){return a&&(a.stop(),a=null),s}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,n=n||function(){};var o=!!navigator.getUserMedia,s={},a=null;return Object.defineProperties(s,{connect:{value:i},disconnect:{value:r},isSupported:{value:o},stream:{get:function(){return a}}}),Object.freeze(s)}function U(t){function e(){l?(_.fillStyle=l,_.fillRect(f,d,v,y)):_.clearRect(f,d,v,y),_.lineWidth=h,g=null,"function"!=typeof u&&(_.strokeStyle=u,_.beginPath())}function n(t,e,n){if("function"==typeof u){var i=u(t,e,n);i!==g&&(g=i,_.stroke(),_.strokeStyle=g,_.beginPath())}}function i(t,e,n){return"function"==typeof p?p(t,e,n):t}function r(e,n){return e&&"function"==typeof e.waveform?e.waveform(n):e?e:t.waveform?t.waveform:t.sound?t.sound.waveform(n):null}function o(t){if(e(),"circular"===a){var o=r(t,360),u=Math.floor(o.length*c),l=ct/u,p=void 0,m=void 0,g=void 0,P=void 0;for(b=0;b<u;b++){var O=i(o[b],b,u);n(b,u,O),p=b*l-ht,P=Math.cos(p),g=Math.sin(p),"fill"===s&&(x=M+S*P,w=E+S*g,_.moveTo(x,w)),m=S+(T-S)*O,x=M+m*P,w=E+m*g,"line"===s&&0===b&&_.moveTo(x,w),_.lineTo(x,w)}"line"===s&&_.closePath()}else{var A=r(t,v),C=Math.min(A.length,v-h/2);for(C=Math.floor(C*c),b=0;b<C;b++){var I=i(A[b],b,C);n(b,C,I),"line"===s&&b>0&&_.lineTo(x,w),x=f+b,w=d+y-Math.round(y*I),w=Math.floor(Math.min(w,d+y-h/2)),"fill"===s?(_.moveTo(x,w),_.lineTo(x,d+y)):_.lineTo(x,w)}}_.stroke()}var s=t.style||"fill",a=t.shape||"linear",u=t.color||0,l=t.bgColor,h=t.lineWidth||1,c=t.percent||1,f=t.x||0,d=t.y||0,p=t.transform,m=t.canvas,v=t.width||m&&m.width,y=t.height||m&&m.height,_=null,g=void 0,b=void 0,x=void 0,w=void 0,T=void 0,S=void 0,M=void 0,E=void 0;return m||t.context||(m=document.createElement("canvas"),v=v||m.width,y=y||m.height,m.width=y,m.height=y),"circular"===a&&(T=t.radius||Math.min(y/2,v/2),S=t.innerRadius||T/2,M=f+v/2,E=d+y/2),_=t.context||m.getContext("2d"),o.canvas=m,(t.waveform||t.sound)&&o(),o}function z(){if(ft)return ft;var t=44100,e=window.AudioContext||window.webkitAudioContext;if(ft=e?new e:null,/(iPhone|iPad)/i.test(navigator.userAgent)&&ft.sampleRate!==t){var n=ft.createBuffer(1,1,t),i=ft.createBufferSource();i.buffer=n,i.connect(ft.destination),i.start(0),i.disconnect(),ft.close(),ft=e?new e:null}var r=ft&&"suspended"===ft.state;return r&&"function"==typeof ft.resume&&window.setTimeout(function(){ft.resume()},1e3),ft}function V(t,e,n){if(dt)return dt;t=t||2,n=n||44100,e=n||t;var i=window.OfflineAudioContext||window.webkitOfflineAudioContext;return dt=i?new i(t,e,n):null}function X(t){if(!ft)return t;for(var e=t.numberOfChannels,n=ft.createBuffer(e,t.length,t.sampleRate),i=0;i<e;i++)n.getChannelData(i).set(t.getChannelData(i));return n}function G(t){for(var e=t.numberOfChannels,n=0;n<e;n++)Array.prototype.reverse.call(t.getChannelData(n));return t}function H(t,e,n,i,r){ft&&(t.setValueAtTime(e,ft.currentTime),r?t.linearRampToValueAtTime(n,ft.currentTime+i):t.exponentialRampToValueAtTime(n,ft.currentTime+i))}function Y(t){if(!ft)return 0;var e=40,n=ft.sampleRate/2,i=Math.log(n/e)/Math.LN2,r=Math.pow(2,i*(t-1));return n*r}function W(t,e,n){return new N(t,e,n)}function q(t){var e=arguments.length<=1||void 0===arguments[1]?":":arguments[1],n=Math.floor(t/60),i=Math.floor(t%3600%60),r=(n<10?"0"+n:n)+e,o=i<10?"0"+i:i;return r+o}function Z(){function t(t){return x.find(t)}function e(t){var e=new B(g,x.gain);return t&&t.forEach(function(t){return e.add(t)}),e}function n(t){
var e=t&&t.webAudio===!1?null:g,n=ot.getSupportedFile(t.src||t.url||t.data||t),i=new j(Object.assign({},t||{},{src:n,context:e,destination:x.gain}));return i.isTouchLocked=T,t&&(i.id=t.id||t.name||"",i.loop=!!t.loop,i.volume=t.volume),x.add(i),i}function i(t,e){var i=n(t).load();return e&&e.add(i.loader),i}function r(t){var e=t.src||t.url||t.data||t,n=void 0,r=void 0;if(ot.containsURL(e))n=i(t),r=n.loader;else{if(!Array.isArray(e)||!ot.containsURL(e[0].src||e[0].url)){var o="sono.load: No audio file URLs found in config.";if(!t.onError)throw new Error(o);return t.onError("[ERROR] "+o),null}n=[],r=new C.Group,e.forEach(function(t){return n.push(i(t,r))})}return t.onProgress&&r.on("progress",function(e){return t.onProgress(e)}),t.onComplete&&r.once("complete",function(){r.off("progress"),t.onComplete(n)}),r.once("error",function(e){r.off("error"),t.onError&&t.onError(e)}),r.start(),n}function o(t){if(ot.containsURL(t))return r(t);var e=n(t);return e.data=t.data||t,e}function s(t){return x.find(t,function(t){return t.destroy()}),w}function a(){return x.destroy(),w}function u(){return x.mute(),w}function l(){return x.unMute(),w}function h(t,e){return x.fade(t,e),w}function c(){return x.pause(),w}function f(){return x.resume(),w}function d(){return x.stop(),w}function p(t,e,n){return x.find(t,function(t){return t.play(e,n)}),w}function m(t){return x.find(t,function(t){return t.pause()}),w}function v(t){return x.find(t,function(t){return t.stop()}),w}function y(){"Supported:"+w.isSupported+" WebAudioAPI:"+w.hasWebAudio+" TouchLocked:"+T+" State:"+(g&&g.state)+" Extensions:"+ot.extensions;if(navigator.userAgent.indexOf("Chrome")>-1);else window.console&&window.console.log.call}var _="0.1.85",g=pt.getContext(),b=g?g.destination:null,x=new S(g,b),w=null,T=!1;return T=K.handleTouchLock(g,function(){T=!1,x.sounds.forEach(function(t){return t.isTouchLocked=!1})}),function(){function t(){x.sounds.forEach(function(t){t.playing&&(t.pause(),n.push(t))})}function e(){for(;n.length;)n.pop().play()}var n=[];K.handlePageVisibility(t,e)}(),w={createSound:o,create:o,destroySound:s,destroyAll:a,getSound:t,createGroup:e,file:ot,load:r,mute:u,unMute:l,fade:h,pauseAll:c,resumeAll:f,stopAll:d,play:p,pause:m,stop:v,log:y,canPlay:ot.canPlay,context:g,getOfflineContext:pt.getOfflineContext,effect:x.effect,extensions:ot.extensions,hasWebAudio:!!g,isSupported:ot.extensions.length>0,gain:x.gain,utils:pt,VERSION:_,Sound:j,Group:S},Object.defineProperties(w,{isTouchLocked:{get:function(){return T}},sounds:{get:function(){return x.sounds.slice(0)}},volume:{get:function(){return x.volume},set:function(t){x.volume=t}}}),Object.freeze(w)}var K={};K.handlePageVisibility=function(t,e){function n(){document[i]?t():e()}var i=void 0,r=void 0;"undefined"!=typeof document.hidden?(i="hidden",r="visibilitychange"):"undefined"!=typeof document.mozHidden?(i="mozHidden",r="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(i="msHidden",r="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",r="webkitvisibilitychange"),"undefined"!=typeof r&&document.addEventListener(r,n,!1)},K.handleTouchLock=function(t,e){function n(){t&&"suspended"===t.state?t.resume().then(function(){var i=t.createBuffer(1,1,44100),r=t.createBufferSource();r.buffer=i,r.connect(t.destination),r.start(0),r.stop(0),r.disconnect(),document.body.removeEventListener("touchend",n),e()}):(document.body.removeEventListener("touchend",n),e())}var i=navigator.userAgent,r=!!i.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|SymbianOS/i);return r&&document.body.addEventListener("touchend",n,!1),r};var Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},J=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},$=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},tt=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},et=[],nt={},it=[{ext:"ogg",type:'audio/ogg; codecs="vorbis"'},{ext:"mp3",type:"audio/mpeg;"},{ext:"opus",type:'audio/ogg; codecs="opus"'},{ext:"wav",type:'audio/wav; codecs="1"'},{ext:"m4a",type:"audio/x-m4a;"},{ext:"m4a",type:"audio/aac;"}],rt=document.createElement("audio");rt&&(it.forEach(function(t){var e=!!rt.canPlayType(t.type);e&&et.indexOf(t.ext)===-1&&et.push(t.ext),nt[t.ext]=e}),rt=null);var ot={canPlay:nt,containsURL:l,extensions:et,getFileExtension:t,getSupportedFile:e,isAudioBuffer:n,isMediaElement:r,isMediaStream:o,isOscillatorType:s,isScriptConfig:a,isURL:u},st=22050;g.defaults={panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:1e3,rolloffFactor:1,coneInnerAngle:360,coneOuterAngle:0,coneOuterGain:0},S.Effect=T;var at=M;M.EventEmitter=M,M.prototype._events=void 0,M.prototype._maxListeners=void 0,M.defaultMaxListeners=10,M.prototype.setMaxListeners=function(t){if(!P(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},M.prototype.emit=function(t){var e,n,i,r,o,s;if(this._events||(this._events={}),"error"===t&&(!this._events.error||O(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var a=new Error('Uncaught, unspecified "error" event. ('+e+")");throw a.context=e,a}if(n=this._events[t],A(n))return!1;if(E(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(O(n))for(r=Array.prototype.slice.call(arguments,1),s=n.slice(),i=s.length,o=0;o<i;o++)s[o].apply(this,r);return!0},M.prototype.addListener=function(t,e){var n;if(!E(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,E(e.listener)?e.listener:e),this._events[t]?O(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,O(this._events[t])&&!this._events[t].warned&&(n=A(this._maxListeners)?M.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,"function"==typeof console.trace)),this},M.prototype.on=M.prototype.addListener,M.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!E(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},M.prototype.removeListener=function(t,e){var n,i,r,o;if(!E(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],r=n.length,i=-1,n===e||E(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(O(n)){for(o=r;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){i=o;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},M.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],E(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},M.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?E(this._events[t])?[this._events[t]]:this._events[t].slice():[]},M.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(E(e))return 1;if(e)return e.length}return 0},M.listenerCount=function(t,e){return t.listenerCount(e)};var ut=at.EventEmitter,lt=function(t){function e(){return J(this,e),tt(this,t.call(this))}return $(e,t),e.prototype.off=function(t,e){return e?this.removeListener(t,e):t?this.removeAllListeners(t):this.removeAllListeners()},e}(ut);C.Group=function(){function t(t){var e=l+t;a.emit("progress",e/h)}function e(){l++,r(),a.emit("progress",l/h),i()}function n(t){r(),a.emit("error",t),i()}function i(){return 0===u.length?(c=null,void a.emit("complete")):(c=u.pop(),c.on("progress",t),c.once("loaded",e),c.once("error",n),void c.start())}function r(){c.off("progress",t),c.off("loaded",e),c.off("error",n)}function o(t){return u.push(t),h++,t}function s(){h=u.length,i()}var a=new lt,u=[],l=0,h=0,c=void 0;return Object.freeze({on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),add:o,start:s})},j.__source={BufferSource:I,MediaSource:R,MicrophoneSource:D,OscillatorSource:k,ScriptSource:L};var ht=Math.PI/2,ct=2*Math.PI,ft=void 0,dt=void 0,pt=Object.freeze({getContext:z,getOfflineContext:V,cloneBuffer:X,reverseBuffer:G,ramp:H,getFrequency:Y,microphone:W,timeCode:q,waveformer:U}),mt=new Z;return mt})},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(2),u=r(a),l=n(165),h=i(l),c=n(53),f=i(c),d=n(13),p=i(d),m=n(3),v=i(m),y=n(151),_=i(y),g=n(152),b=i(g),x=n(153),w=i(x),T=n(4),S=i(T),M=function(){function t(e){o(this,t),e=e||t.defaultOptions,this.options={};for(var n in t.defaultOptions)this.options[n]=e[n]||t.defaultOptions[n];this.setupPixi(),p.default.instance.start(),p.default.instance.add(this.update,this),this.screenManager=new f.default(null,300,300),this.preloader=new h.default,this.loader=new h.default,this.translation=new w.default(this,e),this.onReady=new S.default,this.options.orientationMode!==t.orientationModes.BOTH&&(this.orientationManager=new b.default(this.options.orientationMode)),this.stage.addChild(this.screenManager.container)}return s(t,[{key:"setupPixi",value:function(){var t=this.options;if(t.forceCanvas||v.default.instance.android&&!v.default.instance.chrome)this.renderer=new u.CanvasRenderer(t.width,t.height),this.renderer.clearBeforeRender=!0;else{var e={resolution:1,backgroundColor:t.backgroundColor};this.renderer=u.autoDetectRenderer(t.width,t.height,e)}window.WEBGL=u.isWebGL=this.renderer instanceof u.WebGLRenderer,window.renderer=this.renderer,this.view=this.renderer.view,this.stage=new u.Container,this.view.style.position="absolute",this.view.addEventListener("mousedown",function(){window.focus()},!0),u.stage=this.stage}},{key:"update",value:function(){this.renderer.render(this.stage)}},{key:"startup",value:function(){this.options.config&&this.preloader.addJson(this.options.config,"config"),this.preloader.onComplete.addOnce(this.onPreloadComplete,this),this.preloader.load()}},{key:"onPreloadComplete",value:function(){this.loaderScreen=new this.options.loaderScreen(this),this.loaderScreen.onReady.addOnce(this.onLoaderScreenReady,this),this.loaderScreen.onComplete.addOnce(this.onLoaderScreenComplete,this),this.onPreload&&this.onPreload(),this.screenManager.addScreen(this.loaderScreen,"loader"),this.screenManager.gotoScreenByID("loader")}},{key:"onLoaderScreenReady",value:function(){this.loader.onComplete.addOnce(this.onAssetsLoaded,this),this.loader.onProgress.add(this.onProgresss,this),this.loader.load()}},{key:"onAssetsLoaded",value:function(){}},{key:"onProgresss",value:function(t){this.loaderScreen.updateProgress(t)}},{key:"onLoaderScreenComplete",value:function(){this.onReady.dispatch()}},{key:"resize",value:function(e,n){this.orientationManager&&this.orientationManager.check(e,n),this.options.resizeMode===t.resizeModes.DEFUALT?(this.renderer.resize(e,n),this.view.style.width="auto",this.view.style.height="auto"):this.this.options.resizeMode===t.resizeModes.CSS_RESIZE_PRESERVE_RATIO||this.options.resizeMode===t.resizeModes.CSS_RESIZE&&(this.view.style.width=e+"px",this.view.style.height=n+"px")}}]),t}();M.resizeModes={DEFUALT:0,CSS_RESIZE_PRESERVE_RATIO:1,CSS_RESIZE:2},M.orientationModes={LANDSCAPE:0,PORTRAIT:1,BOTH:2},M.defaultOptions={width:800,height:600,forceCanvas:!1,backgroundColor:0,resizeMode:M.resizeModes.DEFUALT,orientationMode:M.orientationModes.LANDSCAPE,loaderScreen:_.default,config:null},e.default=M,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(13),a=i(s),u=n(3),l=i(u),h=function(){function t(){r(this,t)}return o(t,[{key:"init",value:function(){if(l.default.instance.isMobile&&l.default.instance.safari&&l.default.instance.webGL){var t=this.getSpec();t&&(this.activeCache=!1,this.height=t[0],window.addEventListener("resize",this.onResize.bind(this)),this.div=document.createElement("div"),this.div.style.backgroundColor="#000000",this.div.style.position="absolute",this.div.style.top="0",this.div.style.left="0",this.div.style.width="100%",this.div.style.height="9999999999999999px",this.image=new Image,this.image.src=window.ASSET_URL+"image/high/device/brim.jpg",this.image.style.position="absolute",this.image.style.top="-40px",this.image.width=500,this.div.appendChild(this.image),this.brimMode=!0,this.p=document.createElement("div"),this.p.innerHTML="oops! swipe up to keep playing!",this.p.style.position="absolute",this.p.style.top="100px",this.p.style.left=0,this.p.style.width="100%",this.p.style.fontSize="1.5rem",this.p.style.fontFamily="Exo2, sans-serif",this.p.style.color="white",this.p.style.textAlign="center",this.p.style.position="absolute",this.p.style.padding=0,document.body.appendChild(this.div),function(){var t;document.addEventListener("touchstart",function(e){this.brimMode&&(t=!0,e.preventDefault(),e.returnValue=!1)},!1),document.addEventListener("touchmove",function(e){this.brimMode&&(t&&(e.preventDefault(),e.returnValue=!1),t=!1)},!1)}(),this.onResize())}}},{key:"resetImageSrc",value:function(){this.image.src=window.ASSET_URL+"img/device/brim.jpg",this.image.style.position="absolute",this.image.style.top="-40px",this.image.width=500}},{key:"getSpec",value:function(){for(var t=[[320,480,2,"iPhone 4"],[320,568,2,"iPhone 5 or 5s"],[375,667,2,"iPhone 6"],[414,736,3,"iPhone 6 plus"]],e=null,n=0;n<t.length;n++){var i=t[n],r=window.screen.height==i[0]&&window.screen.width==i[1]||window.screen.width==i[0]&&window.screen.height==i[1];if(r){e=i;break}}return e}},{key:"showBrim",value:function(){this.div.style.visibility="visible",this.div.style.height="9999999999999999px",a.default.game&&(this.activeCache=a.default.game.active),a.default.game.stop()}},{key:"showGame",value:function(){this.div.style.visibility="hidden",a.default.game&&this.activeCache&&a.default.game.start(),this.div.style.height=this.height+1+"px",window.scrollTo(0,0)}},{key:"onResize",value:function(){window.innerHeight>window.innerWidth||window.innerHeight===this.height?this.showGame():this.showBrim(),this.image.width=window.innerWidth,window.scrollTo(0,0)}}]),t}();e.default=new h,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(2),c=r(h),f=n(13),d=i(f),p=n(35),m=i(p),v=n(4),y=i(v),_=function(t){function e(t){o(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.app=t,n.easeLoad=0,n.targetLoad=0,n.onReady=new y.default,n.onComplete=new y.default,n.initLoader(),n}return a(e,t),l(e,[{key:"initLoader",value:function(){d.default.instance.add(this.update,this),this.resize(this.w,this.h),m.default.wait(this.showLoader.bind(this))}},{key:"showLoader",value:function(){this.onReady.dispatch()}},{key:"update",value:function(){this.easeLoad+=.3*(this.targetLoad-this.easeLoad),this.easeLoad>.99&&(this.easeLoad=1,d.default.instance.remove(this.update,this),this.onComplete.dispatch())}},{key:"updateProgress",value:function(t){this.targetLoad=t}},{key:"onHide",value:function(){d.default.instance.remove(this.update,this)}},{key:"resize",value:function(t,e){this.w=t,this.h=e,this.barBg}}]),e}(c.Container);e.default=_,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(13),a=i(s),u=n(3),l=i(u),h=n(4),c=i(h),f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/high/device/rotate.jpg";if(r(this,t),this.mode=e,this.onRotationChanged=new c.default,this.rotationWarning=!0,this.orientation,this.rotateScreen=document.createElement("div"),this.rotateScreen.style.backgroundPosition="50% 50%",this.rotateScreen.style.backgroundColor="#3b3b3b",this.rotateScreen.style.backgroundRepeat="no-repeat",this.rotateScreen.style.position="absolute",this.rotateScreen.style.backgroundSize="cover",this.rotateScreen.style.top="0",this.rotateScreen.style.left="0",this.rotateScreen.style.bottom="0",this.rotateScreen.style.right="0",this.rotateScreen.style.zIndex=1e7,this.rotateScreen.style.display="none",this.rotateScreen.height="100%",this.rotateScreen.width="100%",this.changeRotationImage(window.ASSET_URL+n),l.default.instance.iPad&&this.changeRotationImage(window.ASSET_URL+n),document.body.appendChild(this.rotateScreen),l.default.instance.firefox){var i=window.matchMedia("(orientation: portrait)");i.addListener(this.checkOrientationChangesFirefox.bind(this))}window.addEventListener("resize",function(){this.resize(window.innerWidth,window.innerHeight)}.bind(this)),this.resize(window.innerWidth,window.innerHeight)}return o(t,[{key:"checkOrientationResize",value:function(){}},{key:"changeRotationImage",value:function(t){this.rotateScreen.style.backgroundImage="url("+t+")"}},{key:"checkOrientationChangesFirefox",value:function(){var t=screen.orientation||screen.mozOrientation||screen.msOrientation;"landscape-primary"===t?this.orientation=90:"landscape-secondary"===t&&(this.orientation=-90),this.onRotationChanged.dispatch(this.orientation)}},{key:"checkOrientationChanges",value:function(){this.orientation=window.orientation,this.onRotationChanged.dispatch(window.orientation),0===this.orientation||180===this.orientation?(a.default.instance.stop(),this.rotateScreen.style.display="block"):(a.default.instance.start(),this.rotateScreen.style.display="none")}},{key:"resize",value:function(t,e){if(!l.default.instance.desktop){var n=0===this.mode?t<e:t>e;n?(a.default.instance.stop(),this.rotateScreen.style.display="block"):(a.default.instance.start(),this.rotateScreen.style.display="none")}}},{key:"updateDeviceOrientation",value:function(t){this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma}}]),t}();e.default=f,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(19),a=i(s),u=function(){function t(e,n){r(this,t),this.debug=n.debug||!1,this.app=e,this.app.preloader.addJson(n.stringsUrl||window.ASSET_URL+"json/strings.json","strings"),this.app.preloader.onComplete.addOnce(this.onPreloaderComplete,this)}return o(t,[{key:"onPreloaderComplete",value:function(){if(window.translations=a.default.getJson("strings").strings,this.debug)for(var t in window.translations)window.translations[t]+=window.translations[t]}}]),t}();e.default=u,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.imgUrl=e,this.supported=!1,this.experimental=!1,this.check()}return i(t,[{key:"check",value:function(){var t=document.createElement("canvas"),e=void 0;try{e=t.getContext("webgl"),this.supported=!0,this.experimental=!1}catch(t){}try{e=t.getContext("experimental-webgl"),this.supported=!0,this.experimental=!0}catch(t){}return t=null,this.supported||this.fallback(),e}},{key:"hasWebgl",value:function(){return this.supported}},{key:"fallback",value:function(){var t=document.createElement("div");t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.right=0,t.style.bottom=0,t.style.zIndex=1e3,t.style.backgroundColor="black",t.style.backgroundSize="contain",t.style.backgroundPosition="center center",t.style.backgroundRepeat="no-repeat",this.imgUrl?t.style.backgroundImage="url("+this.imgUrl+")":t.style.backgroundImage="url("+window.ASSET_URL+"image/high/preload/old_browser.jpg)",document.body.appendChild(t)}}]),t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),a=i(s),u=function(){function t(){r(this,t),this.circle=(new a.Graphics).beginFill(1044480).drawCircle(0,0,100)}return o(t,[{key:"begin",value:function(t,e,n){this.screenManager=t,this.currentScreen=e,this.nextScreen=n,t.container.addChild(this.circle),t.container.mask=this.circle,this.circle.scale.set(this.targetScale),this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.circle.scale,1,{x:.001,y:.001,ease:Sine.easeOut,onComplete:this.onFadeout.bind(this)})):this.onFadeout()}},{key:"onFadeout",value:function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen)),this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.screenManager.container.addChild(this.nextScreen),TweenLite.to(this.circle.scale,1.2,{delay:.2,x:this.targetScale,y:this.targetScale,ease:Cubic.easeIn,onComplete:this.onFadein.bind(this)})}},{key:"onFadein",value:function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.container.removeChild(this.circle),this.screenManager.container.mask=null,this.screenManager.onTransitionComplete()}},{key:"onResize",value:function(t,e){this.w=t,this.h=e,this.targetScale=t/100*1.2,this.circle.x=t/2,this.circle.y=e/2}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),a=i(s),u=function(){function t(){r(this,t),this.colorRect=(new a.Graphics).beginFill(0).drawRect(0,0,2e3,1e3),this.colorRect.alpha=0}return o(t,[{key:"begin",value:function(t,e,n){this.screenManager=t,this.currentScreen=e,this.nextScreen=n,this.screenManager.container.addChild(this.colorRect),this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.colorRect,.4,{alpha:1,onComplete:this.onFadeout.bind(this)})):this.onFadeout()}},{key:"onFadeout",value:function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.screenManager.container.addChild(this.nextScreen),this.screenManager.container.addChild(this.colorRect),TweenLite.to(this.colorRect,.4,{alpha:0,onComplete:this.onFadein.bind(this)})}},{key:"onFadein",value:function(){this.screenManager.container.removeChild(this.colorRect),this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()}},{key:"resize",value:function(t,e){this.w===t&&this.h===e||(this.w=t,this.h=e,this.colorRect.scale.x=t/100,this.colorRect.scale.y=e/100)}}]),t}();e.default=u,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t)}return i(t,[{key:"begin",value:function(t,e,n){e&&(e.onHide&&e.onHide(),e.onHidden&&e.onHidden(),t.container.removeChild(e)),t.container.addChildAt(n,0),n.onShow&&n.onShow(),n.onShown&&n.onShown(),t.onTransitionComplete()}},{key:"resize",value:function(t,e){this.width=t,this.height=e}}]),t}();e.default=r,t.exports=e.default},function(t,e,n){var i;i=function(t,e,i){var r=(n(2),n(55)),o=n(13),s=n(4),a=function(){this.allItems=new r,this.updateItems=new r,this.updateComponentItems=new r,this.groups={},this.itemsToRemove=[],this.systems=[],this.signals={}};a.constructor=a,a.prototype.install=function(t,e){this.systems.push(t),t.init(this),this[e]=t},a.prototype.addGroup=function(t){for(var e=0;e<t.children.length;e++)this.add(t.children[e])},a.prototype.initGroups=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=this.groups[n];i||(i=this.groups[n]=new r)}},a.prototype.add=function(t){if(t._gc){var e=this.itemsToRemove.indexOf(t);this.itemsToRemove.splice(e,1),t._gc=!1}t.world&&this.removeItem(t),t.world=this;for(var n=0;n<this.systems.length;n++)this.systems[n].add(t);this.allItems.add(t);for(var n=0;n<t.groups.length;n++){var i=t.groups[n],o=this.groups[i];o||(o=this.groups[i]=new r),o.add(t)}t.update&&this.updateItems.add(t),t._updatableComponents.length&&this.updateComponentItems.add(t),t.addedToWorld&&t.addedToWorld(this),t.signals.onAddedToWorld.dispatch()},a.prototype.remove=function(t){!t._gc&&t.world&&(t._gc=!0,this.itemsToRemove.push(t))},a.prototype.update=function(){var t=Math.round(o.instance.deltaTime/o.instance.speed);t>2&&(t=2);for(var e=0;e<t;e++){this.removeItems();for(var n=0;n<this.systems.length;n++)this.systems[n].preupdate();for(var i=this.updateComponentItems.children,n=0;n<i.length;n++)i[n].updateComponents();for(var i=this.updateItems.children,n=0;n<i.length;n++)i[n].update();for(var n=0;n<this.systems.length;n++)this.systems[n].update();for(var n=0;n<this.systems.length;n++)this.systems[n].postupdate()}},a.prototype.removeItems=function(){this.itemsToRemove.length;for(var t=0;t<this.itemsToRemove.length;t++){var e=this.itemsToRemove[t];this.removeItem(e)}this.itemsToRemove.length=0},a.prototype.removeItem=function(t){t._gc=!1;for(var e=0;e<this.systems.length;e++)this.systems[e].remove(t);t.update&&this.updateItems.remove(t),t.removedFromWorld&&t.removedFromWorld(this),t.signals.onRemovedFromWorld.dispatch(),t.world=null,this.allItems.remove(t);for(var e=0;e<t.groups.length;e++){var n=t.groups[e];this.groups[n].remove(t)}},a.prototype.clear=function(){this.removeItems();for(var t=0;t<this.systems.length;t++)this.systems[t].clear();for(var t=0;t<this.allItems.children.length;t++)this.allItems.children[t].world=null;this.allItems.empty(),this.updateItems.empty(),this.updateComponentItems.empty(),this.groups={},this.collisionHash={}},a.prototype.find=function(t,e){if(!this.groups[t])return null;for(var n=this.groups[t].children,i=0;i<n.length;i++)if(n[i].data.name===e)return n[i]};var u=[];a.prototype.findAll=function(t,e){if(!this.groups[t])return null;var n=this.groups[t].children;u.length=0;for(var i=0;i<n.length;i++)n[i].data.name===e&&u.push(n[i]);return u},a.prototype.registerSignal=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.registerSignal(arguments[n]);else this.signals[t]||(this.signals[t]=new s)},a.prototype.resetSignals=function(){for(var t in this.signals)this.signals[t].removeAll();
},i.exports=a}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(t,e,r){var o=n(30),s=function(){};s.solve=function(t,e){for(i=0;i<t.length;i++){var n=t[i],r=n.object1,s=n.object2,a=n.projection,u=n.penetration;if(s.body.type===o.DYNAMIC){r.position.x-=a.x*u*.5,r.position.y-=a.y*u*.5,s.position.x+=a.x*u*.5,s.position.y+=a.y*u*.5;var l=r.body.velocity.x-s.body.velocity.x,h=r.body.velocity.y-s.body.velocity.y;0!==a.x?l*a.x<=0&&(r.body.velocity.x-=.5*l,s.body.velocity.x+=.5*l):h*a.y<=0&&(r.body.velocity.y-=.5*h,s.body.velocity.y+=.5*h)}else{r.position.x-=a.x*u,r.position.y-=a.y*u;var l=r.body.velocity.x-s.body.velocity.x,h=r.body.velocity.y-s.body.velocity.y;0!==a.x?l*a.x<=0&&(r.body.velocity.x-=l):(h*a.y<=0&&(r.body.velocity.y-=h),r.body.position.x+=s.body.velocity.x)}}},s.solve3=function(t){var e=t.object1,n=t.object2,i=t.projection,r=t.penetration;if(n.body.type===o.DYNAMIC){e.position.x-=i.x*r*.5,e.position.y-=i.y*r*.5,n.position.x+=i.x*r*.5,n.position.y+=i.y*r*.5;var s=e.body.velocity.x-n.body.velocity.x,a=e.body.velocity.y-n.body.velocity.y;0!==i.x?s*i.x<=0&&(e.body.velocity.x-=.5*s,n.body.velocity.x+=.5*s):a*i.y<=0&&(e.body.velocity.y-=.5*a,n.body.velocity.y+=.5*a)}else{e.position.x-=i.x*r,e.position.y-=i.y*r;var s=e.body.velocity.x-n.body.velocity.x,a=e.body.velocity.y-n.body.velocity.y;0!==i.x?s*i.x<=0&&(e.body.velocity.x-=s):(a*i.y<=0&&(e.body.velocity.y-=a),e.body.position.x+=n.body.velocity.x)}},s.solve2=function(t,e){for(i=0;i<t.length;i++){var n=t[i],r=n.object1,s=n.object2,a=n.object2,u=n.projection,l=n.penetration,h=r.body,c=a.body,f=h.shape,d=c.shape,p=f.x+r.position.x,m=f.y+r.position.y,v=d.x+a.position.x,y=d.y+a.position.y,_=m+f.height-y,g=y+d.height-m,b=p+f.width-v,x=v+d.width-p,w=999999;if(a.passthrough,b<w&&(w=b),x<w&&(w=x),_<w&&(w=_),g<w&&(w=g),w>0)if(w==b?(u.x=-1,u.y=0):w==x?(u.x=1,u.y=0):w==_?(u.x=0,u.y=-1):w==g&&(u.x=0,u.y=1),l=-w,s.body.type===o.DYNAMIC){r.position.x-=u.x*l*.5,r.position.y-=u.y*l*.5,s.position.x+=u.x*l*.5,s.position.y+=u.y*l*.5;var T=r.body.velocity.x-s.body.velocity.x,S=r.body.velocity.y-s.body.velocity.y;0!==u.x?T*u.x<=0&&(r.body.velocity.x-=.5*T,s.body.velocity.x+=.5*T):S*u.y<=0&&(r.body.velocity.y-=.5*S,s.body.velocity.y+=.5*S)}else{r.position.x-=u.x*l,r.position.y-=u.y*l;var T=r.body.velocity.x-s.body.velocity.x,S=r.body.velocity.y-s.body.velocity.y;0!==u.x?T*u.x<=0&&(r.body.velocity.x-=T):(S*u.y<=0&&(r.body.velocity.y-=S),r.body.position.x+=s.body.velocity.x)}}},r.exports=s}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var i;i=function(t,e,i){var r=(n(2),n(18)),o=function(){};o.hitTestItemGroup=function(t,e,n,i){for(var r=e.children,s=0;s<r.length;s++)o.hitTestAABBAABB(t,r[s],n,i)},o.hitTestItemItem=function(t,e,n,i){o.hitTestAABBAABB(t,e,n,i)},o.hitTestGroup=function(t,e,n){for(var i=t.children,r=0;r<i.length-1;r++)for(var s=r+1;s<i.length;s++)o.hitTestAABBAABB(i[r],i[s],e,n)},o.hitTestGroupGroup=function(t,e,n,i){for(var r=t.children,s=e.children,a=0;a<r.length;a++)for(var u=0;u<s.length;u++)o.hitTestAABBAABB(r[a],s[u],n,i);o.hitTestAABBAABB(item,r[a],n,i)},o.hitTestAABBAABB=function(t,e,n,i){var o=t.body,s=e.body,a=o.shape,u=s.shape,l=a.x+t.position.x,h=a.y+t.position.y,c=u.x+e.position.x,f=u.y+e.position.y,d=h+a.height-f,p=f+u.height-h,m=l+a.width-c,v=c+u.width-l,y=999999;if(m<y&&(y=m),v<y&&(y=v),d<y&&(y=d),p<y&&(y=p),y>=0){var _=new r;y==m?(_.x=-1,_.y=0):y==v?(_.x=1,_.y=0):y==d?(_.x=0,_.y=-1):y==p&&(_.x=0,_.y=1);var g=-y;n&&n(t,e,g,_)}else i&&i(t,e)},i.exports=o}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(t,e,i){var r=(n(2),n(18),n(56)),o=n(30),s=(n(159),n(163),n(58),n(164),n(9)),a=s.vec3,u=function(){this.collisions={},this.pool=[],this.tickId=0,this.currentCollisions=[],this.collisionDatas=[],this.startCollision=this.startCollision.bind(this)};u.prototype.hitTest=function(t){this.tickId++;for(var e=0;e<2;e++)for(var n=0;n<t.length;n+=2){var i=this.hitTestSphere(t[n],t[n+1],this.startCollision);i&&i.object1.body.solid&&i.object2.body.solid&&this.solve(i)}for(var n=0;n<this.currentCollisions.length;n++){var r=this.currentCollisions[n];r._tickId!==this.tickId&&(this.endCollision(r),this.currentCollisions.splice(n,1),n--)}},u.prototype.hitTestSphere=function(t,e){function n(t,e){var n=t.x-e.x,i=t.y-e.y,r=t.z-e.z;return Math.sqrt(n*n+i*i+r*r)}var i=(Math.random()>.9,t.body),r=e.body,o=t.position,s=e.position,u=i.shape,l=r.shape,h=Math.max(u.width,u.height),c=Math.max(l.width,l.height),f=n(o,s);if(f<h+c){var d=a.create(),p=a.fromValues(o.x,o.y,o.z),m=a.fromValues(s.x,s.y,s.z);a.sub(d,p,m),a.normalize(d,d);var v=h+c-f,y=this.startCollision(t,e,v,d);if(!y.ignore)return y}return null},u.prototype.solve=function(t){var e=t.object1,n=t.object2,i=t.projection,r=t.penetration;if(n.body.type===o.DYNAMIC){e.position.x-=i.x*r*.5,e.position.y-=i.y*r*.5,n.position.x+=i.x*r*.5,n.position.y+=i.y*r*.5;var s=e.body.velocity.x-n.body.velocity.x,a=e.body.velocity.y-n.body.velocity.y;0!==i.x?s*i.x<=0:a*i.y<=0}else{e.position.x-=i.x*r,e.position.y-=i.y*r;var s=e.body.velocity.x-n.body.velocity.x,a=e.body.velocity.y-n.body.velocity.y;0!==i.x?s*i.x<=0&&(e.body.velocity.x-=s):a*i.y<=0&&(e.body.velocity.y-=a)}},u.prototype.startCollision=function(t,e,n,i){var o;o=t.UID>e.UID?(e.UID<<12)+t.UID:(t.UID<<12)+e.UID;var s=this.collisions[o];return s?(s.penetration=n,s.projection=i,s._tickId=this.tickId,s):(s=this.pool.pop(),s?(s.object1=t,s.object2=e,s.penetration=n,s.projection=i,s.ignore=!1):s=new r(t,e,n,i,!1),s._key=o,s._tickId=this.tickId,t.onCollideBegin&&t.onCollideBegin(s),e.onCollideBegin&&e.onCollideBegin(s),this.collisions[o]=s,this.currentCollisions.push(s),s)},u.prototype.endCollision=function(t){var e=t._key,t=this.collisions[e];return t&&(this.pool.push(t),this.collisions[e]=null),t.object1.world&&(t.object1.onCollideEnd&&t.object1.onCollideEnd(t),t.object2.onCollideEnd&&t.object2.onCollideEnd(t)),t},u.prototype.reset=function(){this.collisions={},this.tickId=0,this.currentCollisions=[]},i.exports=u}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(t,e,i){var r=(n(4),0),o=function(t,e,n){this.hash=[],this.width=300,this.height=300,this.size=96,this.halfHeight=this.height/2*this.size.y,this.buildHash(),this.cache={}};o.prototype.buildHash=function(){for(var t=this.width,e=this.height,n=t*e,i=0;i<n;i++)this.hash[i]=[];this.cache={}},o.prototype.add=function(t){this.cache={};var e,n,i=t.body.shape,r=(t.position.x+i.x+this.halfHeight)/this.size|0,o=(t.position.y+i.y+this.halfHeight)/this.size|0,s=(t.position.x+i.x+i.width+this.halfHeight)/this.size|0,a=(t.position.y+i.y+i.height+this.halfHeight)/this.size|0;for(n=o;n<=a;n++)for(e=r;e<=s;e++){var u=n*this.width+e;this.hash[u]&&this.hash[u].push(t)}},o.prototype.retrieve=function(t){var e=(t.position.x+this.halfHeight)/this.size|0,n=(t.position.y+this.halfHeight)/this.size|0,i=this.cache[e+":"+n];return i||(i=[],i=this.addSquare(e-1,n-1,i),i=this.addSquare(e,n-1,i),i=this.addSquare(e+1,n-1,i),i=this.addSquare(e-1,n,i),i=this.addSquare(e,n,i),i=this.addSquare(e+1,n,i),i=this.addSquare(e,n+1,i),i=this.addSquare(e,n+1,i),i=this.addSquare(e+1,n+1,i),i=this.removeDuplicates(i),this.cache[e+":"+n]=i),i},o.prototype.addSquare=function(t,e,n){var i=e*this.width+t;return this.hash[i]&&(n=n.concat(this.hash[i])),n};var s=[];o.prototype.retrieveArea=function(t){var e,n,i=t.body.shape,o=(t.position.x+i.x+this.halfHeight)/this.size|0,a=(t.position.y+i.y+this.halfHeight)/this.size|0,u=(t.position.x+i.x+i.width+this.halfHeight)/this.size|0,l=(t.position.y+i.y+i.height+this.halfHeight)/this.size|0,h=s;s.length=0;var c=r++,f=0;for(n=a;n<=l;n++)for(e=o;e<=u;e++){var d=n*this.width+e,p=this.hash[d];if(p)for(var m=0;m<p.length;m++){var v=p[m];v._TICK!==c&&(v._TICK=c,h[f++]=v)}}return h},o.prototype.removeDuplicates=function(t){for(var e={},n=[],i=t.length,r=0,o=0;o<i;o++){var s=t[o];1!==e[s.UID]&&(e[s.UID]=1,n[r++]=s)}return n},o.prototype.remove=function(t){var e,n,i=t.body.shape,r=(t.position.x+i.x+this.halfHeight)/this.size|0,o=(t.position.y+i.y+this.halfHeight)/this.size|0,s=(t.position.x+i.x+i.width+this.halfHeight)/this.size|0,a=(t.position.y+i.y+i.height+this.halfHeight)/this.size|0;for(n=o;n<=a;n++)for(e=r;e<=s;e++){var u=n*this.width+e;if(u>0){var l=this.hash[u].indexOf(t);l!==-1&&this.hash[u].splice(l,1)}this.cache={}}},o.prototype.empty=function(){this.buildHash()},i.exports=o}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var i=(n(2),n(18)),r=new i,o=function(t,e,n){var i=t.body,o=e.body,s=i.shape,a=o.shape,u=s.x+t.position.x,l=s.y+t.position.y,h=a.x+e.position.x,c=a.y+e.position.y,f=l+s.height-c,d=c+a.height-l,p=u+s.width-h,m=h+a.width-u,v=999999,y=0;if(f<v&&(v=f,y=2),d<v&&(v=d,y=3),p<v&&(v=p,y=0),m<v&&(v=m,y=1),v>0){var _=r;0===y?(_.x=-1,_.y=1e-4):1===y?(_.x=1,_.y=1e-4):2===y?(_.x=1e-4,_.y=-1):3===y&&(_.x=1e-4,_.y=1);var g=-v,b=n(t,e,g,_);if(!b.ignore)return b}return null};t.exports=o},function(t,e,n){"use strict";var i=(n(2),n(18)),r=new i,o=function(t,e,n){var i=t.body,o=e.body,s=i.shape,a=o.shape,u=s.x+t.position.x,l=s.y+t.position.y,h=a.x+e.position.x,c=a.y+e.position.y,f=u-h,d=l-c;0===f&&(f+=.001),0===d&&(d+=.001);var p=Math.sqrt(f*f+d*d),m=s.radius+a.radius;if(p<m){0===p&&(p+=.001);var v=r;v.x=f/p,v.y=d/p;var y=-p-m,_=n(t,e,y,v);if(!_.ignore)return _}return null};t.exports=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(2),u=r(a),l=n(4),h=i(l),c=n(181),f=i(c),d=n(19),p=i(d),m=n(172),v=i(m),y=function(){function t(){o(this,t),this.crossdomain=!1,window.XDomainRequest&&this.crossdomain?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){},this.ajaxRequest.ontimeout=function(){},this.ajaxRequest.onprogress=function(){}):window.XMLHttpRequest&&(this.ajaxRequest=new window.XMLHttpRequest),this.ajaxRequest.onload=this._onFileLoaded.bind(this),this.ajaxRequest.onreadystatechange=function(){},this.fileCount=0,this.indexFontToLoad=0,this.filesToLoad=[],this.fontsToLoad=[],this.pixiAssetsToLoad=[],this.soundsToLoad=[],this.customToLoad=[],this.onComplete=new h.default,this.onProgress=new h.default}return s(t,[{key:"_loadFont",value:function(t){var e=new v.default(t);e.load().then(function(){this._loadFonts()}.bind(this))}},{key:"_loadFonts",value:function(){return 0===this.fontsToLoad.length?void this._loadFiles():(this._loadFont(this.fontsToLoad[0]),void this.fontsToLoad.shift())}},{key:"addFonts",value:function(t){return this.fontsToLoad=this.fontsToLoad.concat(t),this}},{key:"addText",value:function(e,n){n=n||f.default.basename(e,f.default.extname(e));var i={url:e,id:n,type:t.TEXT};return this.filesToLoad.push(i),this}},{key:"addJson",value:function(e,n){n=n||f.default.basename(e,f.default.extname(e));var i={url:e,id:n,type:t.JSON};return this.filesToLoad.push(i),this}},{key:"addAndFilterManifest",value:function(t,e,n){return n=n||"@0.5x",this.addManifest(t.filter(function(t){return!t.includes(n)}),e),this}},{key:"addManifest",value:function(t,e){var n=t.map(function(t){return e+t});return this.addPixiAssets(n),this}},{key:"addPixiAssets",value:function(t){return this.pixiAssetsToLoad=this.pixiAssetsToLoad.concat(t),this}},{key:"addCSS",value:function(t){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e),this}},{key:"addCustom",value:function(e){var n={object:e,type:t.CUSTOM};return this.filesToLoad.push(n),this}},{key:"load",value:function(){this._loadFonts()}},{key:"_loadFiles",value:function(){this.fileCount=0,this.filesToLoad.length?this._loadNextFile():this._loadPixiAssets()}},{key:"_loadNextFile",value:function(){var e=this.filesToLoad[this.fileCount];e.type===t.CUSTOM?(e.object.onLoaded.addOnce(this._onFileLoaded,this),e.object.load()):(this.ajaxRequest.open("GET",e.url,!0),this.ajaxRequest.send())}},{key:"_onFileLoaded",value:function(){var e=this.filesToLoad[this.fileCount];if(e.type===t.CUSTOM);else if(0===this.ajaxRequest.status||200===this.ajaxRequest.status)switch(e.type){case t.TEXT:var n=this.ajaxRequest.responseText;p.default.addText(n,e.id);break;case t.JSON:var i=JSON.parse(this.ajaxRequest.responseText);p.default.addJson(i,e.id)}this.fileCount++,this._onProgress(),this.fileCount===this.filesToLoad.length?this._loadPixiAssets():this._loadNextFile()}},{key:"_loadPixiAssets",value:function(){return 0===this.pixiAssetsToLoad.length?void this._onComplete():(this.pixiAssetLoader=u.loader,this.pixiAssetLoader.add(this.pixiAssetsToLoad),this.pixiAssetLoader.on("progress",this._onProgress,this),void this.pixiAssetLoader.load(this._onComplete.bind(this)))}},{key:"_onComplete",value:function(t,e){u.loadedResources=e,this.onProgress.dispatch(1),this.onComplete.dispatch()}},{key:"_onProgress",value:function(){var t=this.fileCount;this.pixiAssetLoader&&(t=this.pixiAssetLoader.progress),this.onProgress.dispatch(.01*t)}}]),t}();y.TEXT=0,y.JSON=1,y.CUSTOM=2,e.default=y,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0,this.max=30,this.damp=.75,this.springiness=.09,this.max=160,this.damp=.85,this.springiness=.29}return i(t,[{key:"update",value:function(){this.ax=(this.tx-this.x)*this.springiness,this.dx+=this.ax,this.dx*=this.damp,this.dx<-this.max?this.dx=-this.max:this.dx>this.max&&(this.dx=this.max),this.x+=this.dx,this.ay=(this.ty-this.y)*this.springiness,this.dy+=this.ay,this.dy*=this.damp,this.dy<-this.max?this.dy=-this.max:this.dy>this.max&&(this.dy=this.max),this.y+=this.dy}},{key:"reset",value:function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0}}]),t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},c=n(2),f=r(c),d=n(170),p=i(d),m=function(t){function e(t,n){o(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i.itemWidth=n.itemWidth,i.offset=n.offset||0,i.padding=n.padding,i.useMask=n.useMask,i.bounds=n.bounds,i.edgePadding=30,i.hitArea=i.bounds,i.trackpad=new p.default({target:i}),i.trackpad.snapTo=!0,i.trackpad.size=i.itemWidth+i.padding,i.trackpad.maxSlots=t.length-1,i.trackpad.spring.damp=.6,i.trackpad.capMovement=!0,n.fitBounds?(i.trackpad.scrollMin=-t.length*i.trackpad.size+i.bounds.width/2+i.itemWidth/2-i.edgePadding,i.trackpad.scrollMax=-i.bounds.width/2+i.itemWidth/2+i.edgePadding):(i.trackpad.scrollMin=-t.length*i.trackpad.size,i.trackpad.scrollMax=0),i.trackpad.cap(),i.lastIndex=0,i.items=t,i.itemContainer=new f.Container,i.addChild(i.itemContainer);for(var r=0;r<t.length;r++){var a=t[r];i.itemContainer.addChild(a)}if(i.useMask){var u=(new f.Graphics).beginFill(16711680).drawRect(i.bounds.x,i.bounds.y,i.bounds.width,i.bounds.height);i.addChildAt(u,0),i.itemContainer.mask=u}return i}return a(e,t),l(e,[{key:"updateTransform",value:function(){if(this.visible){this.trackpad.update(),this.scrollPosition=-this.trackpad.value;var t=0|-(this.trackpad.spring.tx/this.trackpad.size);this.dots&&this.lastIndex!=t&&(this.dots.select(t),this.lastIndex=t),this.trackpad.didMove&&(this.userActive=!0),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateTransform",this).call(this)}}},{key:"setDots",value:function(t){this.dots=t,this.dots.onSelect.add(this.onDotSelected,this)}},{key:"setButtons",value:function(t,e){this.leftButton=t,this.rightButton=e,this.leftButton.onPress.add(this.onButtonPressed,this),this.rightButton.onPress.add(this.onButtonPressed,this)}},{key:"onButtonPressed",value:function(t){t===this.leftButton?this.trackpad.previousSlot():t===this.rightButton&&this.trackpad.nextSlot()}},{key:"onDotSelected",value:function(t){this.userActive=!0,this.trackpad.setSlot(t)}},{key:"scrollPosition",get:function(){return this._scrollPosition},set:function(t){this._scrollPosition=t;for(var e=this.itemWidth+this.padding,n=0;n<this.items.length;n++){var i=this.items[n];i.x=e*n-this._scrollPosition,i.x+=this.bounds.width/2-this.itemWidth/2+this.bounds.x,i.x+=this.offset}}}]),e}(f.Container);e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(2),c=r(h),f=n(4),d=i(f),p=function(t){function e(t){o(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.deselectedAlpha=.5,n.dots=[],n.currentDot=null,n.build(t),n.onSelect=new d.default,n}return a(e,t),l(e,[{key:"build",value:function(t){this.deselectedAlpha=t.alpha||.5;for(var e=0;e<this.dots.length;e++)this.removeChild(this.dots[e]);this.dots=[];var n=(t.size-1)*t.padding;for(e=0;e<t.size;e++){var i=new c.Sprite(t.texture);i.id=e,i.alpha=this.deselectedAlpha,i.anchor.set(.5),this.addChild(i),i.x=e*t.padding-n/2,t.interactive&&(i.interactive=!0,i.buttonMode=!0,i.click=this.onDotSelected.bind(this)),this.dots.push(i)}this.select(0)}},{key:"onDotSelected",value:function(t){this.onSelect.dispatch(t.target.id)}},{key:"select",value:function(t){if(this.currentDot){if(this.currentDot.id===t)return;TweenLite.to(this.currentDot,.3,{alpha:this.deselectedAlpha,ease:Sine.easeOut})}this.currentDot=this.dots[t],TweenLite.to(this.currentDot,.3,{alpha:1,ease:Sine.easeOut})}}]),e}(c.Container);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(2),u=r(a),l=n(13),h=i(l),c=function(){function t(e){o(this,t),this.topMargin=15,this.bottomMargin=15,this.yTouchOffset=0,this.dragging=!1,this.trackpad=e.trackpad,this.targetPosition={x:0,y:0},this.container=e.target,this.guideLine=new u.Sprite,this.guideLine.anchor.set(1,0),this.guideLine.position.x=630,this.guideLine.position.y=1,this.guideLine.height=229,this.guideLine.hitArea=new u.Rectangle(-10,0,40,300),this.guideLine.interactive=!1,this.guideLine.buttonMode=!1,this.guideButton=new u.Sprite,this.guideButton.anchor.set(1,.5),this.guideButton.position.x=642,this.guideButton.hitArea=new u.Rectangle(-100,-100,400,300),this.guideButton.position.y=this.topMargin+.5*this.guideButton.height,this.guideButton.interactive=!0,this.guideButton.buttonMode=!0,this.container.addChild(this.guideLine),this.container.addChild(this.guideButton),this.guideButton.touchstart=this.guideButton.mousedown=this.onDown.bind(this),this.guideButton.touchend=this.guideButton.touchendoutside=this.guideButton.mouseup=this.guideButton.mouseupoutside=this.onUp.bind(this),this.guideButton.mousemove=this.guideButton.touchmove=this.onMove.bind(this),this.panelHeight=this.container.viewHeight,this.scrollHeight=this.container.scrollHeight-this.panelHeight,this.scrollableDistance=this.panelHeight-this.topMargin-this.bottomMargin-this.guideButton.height,this.scrollBarRatio=this.scrollHeight/this.scrollableDistance,h.default.instance.add(this.update,this)}return s(t,[{key:"onDown",value:function(t){alert(2),this.dragging=!0,this.yTouchOffset=t.data.getLocalPosition(this.guideButton).y,this.onMove(t)}},{key:"onUp",value:function(){alert(2434),this.dragging=!1,this.yTouchOffset=0}},{key:"onMove",value:function(t){this.dragging===!0&&(this.targetPosition=t.data.getLocalPosition(this.container),this.targetPosition.y<this.topMargin+.5*this.guideButton.height&&(this.targetPosition.y=this.topMargin+.5*this.guideButton.height),this.targetPosition.y>this.scrollableDistance+this.topMargin+.5*this.guideButton.height&&(this.targetPosition.y=this.scrollableDistance+this.topMargin+.5*this.guideButton.height))}},{key:"update",value:function(){if(this.dragging){var t=-((this.guideButton.position.y-this.topMargin-.5*this.guideButton.height)*this.scrollBarRatio);this.trackpad.easeToPosition(0,t),this.guideButton.position.y=this.targetPosition.y}else this.guideButton.position.y=this.trackpad.valueY*-1/this.scrollBarRatio+this.topMargin+.5*this.guideButton.height}}]),t}();e.default=c,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(166),a=i(s),u=n(169),l=i(u),h=n(3),c=i(h),f=n(4),d=i(f),p=function(){function t(e){r(this,t),this.spring=new a.default,this.onScrollUpdate=new d.default;var n=e.scrollbarClass||l.default;this.target=e.target,this.value=0,this.easingValue=0,this.dragOffset=0,this.dragging=!1,this.speed=0,this.size=1024,this.maxSlots=1,this.capMovement=!0,this.prevPosition=0,this.valueY=0,this.easingValueY=0,this.dragOffsetY=0,this.speedY=0,this.prevPositionY=0,this.didMove=!1,this.didMoveY=!1,this.target.interactive=!0,this.scrollMin=-(1/0),this.scrollMax=0,this.scrollMinY=-(1/0),this.scrollMaxY=0,this.snapTo=!1,e.scrollbar===!0&&c.default.instance.mobile===!1&&c.default.instance.iPad===!1&&(this.scrollBar=new n({target:e.scrollTarget,trackpad:this})),this._onDownBinded=this.onDown.bind(this),this._onUpBinded=this.onUp.bind(this),this._onMoveBinded=this.onMove.bind(this),this.target.on("touchstart",this._onDownBinded).on("mousedown",this._onDownBinded)}return o(t,[{key:"unlock",value:function(){this.locked=!1,this.speed=0,this.easingValue=this.value,this.easingValueY=this.valueY,this.speedY=0,this.speedX=0,window.onmousewheel=this.onMouseWheel.bind(this)}},{key:"lock",value:function(){this.locked=!0,window.onmousewheel=null}},{key:"update",value:function(){if(this.value+=.3*(this.easingValue-this.value),this.valueY+=.3*(this.easingValueY-this.valueY),!this.locked)if(this.dragging){var t=this.easingValue-this.prevPosition;t*=.7,this.speed+=.5*(t-this.speed),this.prevPosition=this.easingValue;var e=this.easingValueY-this.prevPositionY;e*=.7,this.speedY+=.5*(e-this.speedY),this.prevPositionY=this.easingValueY}else this.snapTo?(this.spring.update(),this.easingValue=this.spring.x,this.easingValueY=this.spring.y,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue+=.3*(this.scrollMax-this.easingValue):this.easingValue<this.scrollMin&&(this.easingValue+=.3*(this.scrollMin-this.easingValue)),this.easingValueY>this.scrollMaxY?this.easingValueY+=.3*(this.scrollMaxY-this.easingValueY):this.easingValueY<this.scrollMinY&&(this.easingValueY+=.3*(this.scrollMinY-this.easingValueY)))):(this.speed*=.95,this.easingValue+=this.speed,this.speedY*=.95,this.easingValueY+=this.speedY,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue+=.3*(this.scrollMax-this.easingValue):this.easingValue<this.scrollMin&&(this.easingValue+=.3*(this.scrollMin-this.easingValue)),this.easingValueY>this.scrollMaxY?this.easingValueY+=.3*(this.scrollMaxY-this.easingValueY):this.easingValueY<this.scrollMinY&&(this.easingValueY+=.3*(this.scrollMinY-this.easingValueY))))}},{key:"stop",value:function(){this.speed=0,this.speedY=0,this.value=this.prevPosition=this.easingValue,this.valueY=this.prevPositionY=this.easingValueY}},{key:"setPosition",value:function(t,e){this.value=this.easingValue=t,this.valueY=this.easingValueY=e}},{key:"easeToPosition",value:function(t,e){this.easingValue=t,this.easingValueY=e}},{key:"onDown",value:function(t){this.locked||(this.speed=0,this.speedY=0,this.stop(),this.didMove=!1,this.didMoveY=!1,this.checkX=t.data.global.x,this.checkY=t.data.global.y,this.dragging=!0,this.dragOffset=t.data.global.x-this.value,this.dragOffsetY=t.data.global.y-this.valueY,this.target.on("touchend",this._onUpBinded).on("touchendoutside",this._onUpBinded).on("mouseup",this._onUpBinded).on("mouseupoutside",this._onUpBinded).on("touchmove",this._onMoveBinded).on("mousemove",this._onMoveBinded))}},{key:"onMouseWheel",value:function(t){this.target.interactive&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.locked||(this.speed=.15*t.wheelDeltaX,this.speedY=.15*t.wheelDeltaY))}},{key:"onUp",value:function(){if(!this.locked){if(this.dragging=!1,this.snapTo){if(this.didMove){this.spring.dx=this.speed;var t;t=this.speed<0?Math.floor(this.easingValue/this.size):Math.ceil(this.easingValue/this.size),this.capMovement&&(t>0?t=0:t<-this.maxSlots&&(t=-this.maxSlots)),this.spring.tx=t*this.size,this.spring.dy=this.speedY,t=this.speedY<0?Math.floor(this.easingValueY/this.size):Math.ceil(this.easingValueY/this.size),this.capMovement&&(t>0?t=0:t<-this.maxSlots&&(t=-this.maxSlots)),this.spring.ty=t*this.size}this.spring.x=this.easingValue,this.spring.y=this.easingValueY}this.cap(),this.target.off("touchend",this._onUpBinded).off("touchendoutside",this._onUpBinded).off("mouseup",this._onUpBinded).off("mouseupoutside",this._onUpBinded).off("touchmove",this._onMoveBinded).off("mousemove",this._onMoveBinded)}}},{key:"cap",value:function(){this.capMovement&&(this.snapTo&&(this.spring.tx>this.scrollMax?this.spring.tx=this.scrollMax:this.spring.tx<this.scrollMin&&(this.spring.tx=this.scrollMin)),this.snapTo&&(this.spring.ty>this.scrollMaxY?this.spring.ty=this.scrollMaxY:this.spring.ty<this.scrollMinY&&(this.spring.ty=this.scrollMinY)))}},{key:"setSlot",value:function(t,e){this.spring.tx=t*-this.size,e&&(this.value=this.easingValue=this.spring.x=this.spring.tx),this.cap()}},{key:"setSlotY",value:function(t){this.spring.ty=t*-this.size,this.cap()}},{key:"nextSlot",value:function(){this.spring.tx-=this.size,this.spring.tx<-(this.maxSlots*this.size)&&(this.spring.tx=-(this.maxSlots*this.size)),this.cap()}},{key:"nextSlotY",value:function(){this.spring.ty-=this.size,this.spring.ty<-(this.maxSlots*this.size)&&(this.spring.ty=-(this.maxSlots*this.size)),this.cap()}},{key:"previousSlot",value:function(){this.spring.tx+=this.size,this.cap()}},{key:"previousSlotY",value:function(){this.spring.ty+=this.size,this.cap()}},{key:"setSize",value:function(t){this.size=t,this.scrollbar&&this.scrollBar.setSize(t)}},{key:"setSlots",value:function(t){this.maxSlots=t-1}},{key:"onMove",value:function(t){if(!this.locked){var e;e=Math.abs(this.checkX-t.data.global.x),e>10&&(this.didMove=!0),e=Math.abs(this.checkY-t.data.global.y),e>10&&(this.didMove=!0),this.easingValue=t.data.global.x-this.dragOffset,this.easingValueY=t.data.global.y-this.dragOffsetY,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue=this.scrollMax+.3*(this.easingValue-this.scrollMax):this.easingValue<this.scrollMin&&(this.easingValue=this.scrollMin+.3*(this.easingValue-this.scrollMin)),this.easingValueY>this.scrollMaxY?this.easingValueY=this.scrollMaxY+.3*(this.easingValueY-this.scrollMaxY):this.easingValueY<this.scrollMinY&&(this.easingValueY=this.scrollMinY+.3*(this.easingValueY-this.scrollMinY)))}}}]),t}();e.default=p,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};n.TWO_PI=2*Math.PI,n.random=function(t,e){return t=t||0,e=void 0===e?1:e,t+Math.random()*(e-t)},n.randomInt=function(t,e){return t+Math.random()*(e-t)|0},n.randomSeed=function(t,e,n){var i=t,r=e;n=n||1,n=(9301*n+49297)%233280;var o=n/233280;return i+o*(r-i)},n.randomChance=function(t,e){return n.randomSeed(0,1,e)>t},n.cap=function(t,e,n){return t<e?e:t>n?n:t},n.sign=function(t){return t<0?-1:t>0?1:0},n.randomSign=function(t){return Math.random()<(t||.5)?-1:1},n.randomChoice=function(t,e){return Math.random()<.5?t:e},n.map=function(t,e,n,i,r){return(r-i)*((t-e)/(n-e))+i},n.smallestAngle=function(t,e){t%=2*Math.PI,t<0&&(t+=2*Math.PI);var n=e-t,i=e+2*Math.PI-t,r=e-2*Math.PI-t,o=Math.abs(n),s=Math.abs(i),a=Math.abs(r),u=n;return s<o&&s<a?u=i:a<o&&a<s&&(u=r),u},n.wrap=function(t,e,n){var i=n-e;return t-=e,t%=i,t<0&&(t+=i),t+=e},n.floor=function(t,e){
return(t/e|0)*e},n.round=function(t,e){return Math.round(t/e)*e},n.ceil=function(t,e){return Math.ceil(t/e)*e},e.default=n,t.exports=e.default},function(t,e,n){!function(){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function n(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())})}function i(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function o(t){var e=t.a.offsetWidth,n=e+100;return t.f.style.width=n+"px",t.c.scrollLeft=n,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function s(t,n){function i(){var t=r;o(t)&&t.a.parentNode&&n(t.g)}var r=t;e(t.b,i),e(t.c,i),o(t)}function a(t,e){var n=e||{};this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function u(){if(null===f){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}f=""!==t.style.font}return f}function l(t,e){return[t.style,t.weight,u()?t.stretch:"","100px",e].join(" ")}var h=null,c=null,f=null,d=null;a.prototype.load=function(t,e){var o=this,a=t||"BESbswy",u=0,f=e||3e3,p=(new Date).getTime();return new Promise(function(t,e){var m;if(null===d&&(d=!!document.fonts),(m=d)&&(null===c&&(c=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),m=!c),m){m=new Promise(function(t,e){function n(){(new Date).getTime()-p>=f?e():document.fonts.load(l(o,'"'+o.family+'"'),a).then(function(e){1<=e.length?t():setTimeout(n,25)},function(){e()})}n()});var v=new Promise(function(t,e){u=setTimeout(e,f)});Promise.race([v,m]).then(function(){clearTimeout(u),t(o)},function(){e(o)})}else n(function(){function n(){var e;(e=-1!=y&&-1!=_||-1!=y&&-1!=g||-1!=_&&-1!=g)&&((e=y!=_&&y!=g&&_!=g)||(null===h&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),h=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=h&&(y==b&&_==b&&g==b||y==x&&_==x&&g==x||y==w&&_==w&&g==w)),e=!e),e&&(T.parentNode&&T.parentNode.removeChild(T),clearTimeout(u),t(o))}function c(){if((new Date).getTime()-p>=f)T.parentNode&&T.parentNode.removeChild(T),e(o);else{var t=document.hidden;!0!==t&&void 0!==t||(y=d.a.offsetWidth,_=m.a.offsetWidth,g=v.a.offsetWidth,n()),u=setTimeout(c,50)}}var d=new i(a),m=new i(a),v=new i(a),y=-1,_=-1,g=-1,b=-1,x=-1,w=-1,T=document.createElement("div");T.dir="ltr",r(d,l(o,"sans-serif")),r(m,l(o,"serif")),r(v,l(o,"monospace")),T.appendChild(d.a),T.appendChild(m.a),T.appendChild(v.a),document.body.appendChild(T),b=d.a.offsetWidth,x=m.a.offsetWidth,w=v.a.offsetWidth,c(),s(d,function(t){y=t,n()}),r(d,l(o,'"'+o.family+'",sans-serif')),s(m,function(t){_=t,n()}),r(m,l(o,'"'+o.family+'",serif')),s(v,function(t){g=t,n()}),r(v,l(o,'"'+o.family+'",monospace'))})})},t.exports=a}()},function(t,e,n){var i=n(15),r={};r.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,e,n,r){var o=new i.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o},r.set=function(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t},r.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},r.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*o-r*i;return s?(s=1/s,t[0]=o*s,t[1]=-i*s,t[2]=-r*s,t[3]=n*s,t):null},r.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],u=n[1],l=n[2],h=n[3];return t[0]=i*a+o*u,t[1]=r*a+s*u,t[2]=i*l+o*h,t[3]=r*l+s*h,t},r.mul=r.multiply,r.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*a,t[1]=r*u+s*a,t[2]=i*-a+o*u,t[3]=r*-a+s*u,t},r.scale=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],u=n[1];return t[0]=i*a,t[1]=r*a,t[2]=o*u,t[3]=s*u,t},r.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},r.LDU=function(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},r.sub=r.subtract,r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=e[0],u=e[1],l=e[2],h=e[3];return Math.abs(n-a)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-l)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-h)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))},r.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},r.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},t.exports=r},function(t,e,n){var i=n(15),r={};r.create=function(){var t=new i.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.clone=function(t){var e=new i.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,e,n,r,o,s){var a=new i.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=o,a[5]=s,a},r.set=function(t,e,n,i,r,o,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t},r.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=n*o-i*r;return u?(u=1/u,t[0]=o*u,t[1]=-i*u,t[2]=-r*u,t[3]=n*u,t[4]=(r*a-o*s)*u,t[5]=(i*s-n*a)*u,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=n[0],h=n[1],c=n[2],f=n[3],d=n[4],p=n[5];return t[0]=i*l+o*h,t[1]=r*l+s*h,t[2]=i*c+o*f,t[3]=r*c+s*f,t[4]=i*d+o*p+a,t[5]=r*d+s*p+u,t},r.mul=r.multiply,r.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=Math.sin(n),h=Math.cos(n);return t[0]=i*h+o*l,t[1]=r*h+s*l,t[2]=i*-l+o*h,t[3]=r*-l+s*h,t[4]=a,t[5]=u,t},r.scale=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=n[0],h=n[1];return t[0]=i*l,t[1]=r*l,t[2]=o*h,t[3]=s*h,t[4]=a,t[5]=u,t},r.translate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=n[0],h=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=i*l+o*h+a,t[5]=r*l+s*h+u,t},r.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},r.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},r.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],u=t[5],l=e[0],h=e[1],c=e[2],f=e[3],d=e[4],p=e[5];return Math.abs(n-l)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-c)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(s-f)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(a-d)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(u-p)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))},t.exports=r},function(t,e,n){var i=n(15),r={scalar:{},SIMD:{}};r.create=function(){var t=new i.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.clone=function(t){var e=new i.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.fromValues=function(t,e,n,r,o,s,a,u,l,h,c,f,d,p,m,v){var y=new i.ARRAY_TYPE(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=r,y[4]=o,y[5]=s,y[6]=a,y[7]=u,y[8]=l,y[9]=h,y[10]=c,y[11]=f,y[12]=d,y[13]=p,y[14]=m,y[15]=v,y},r.set=function(t,e,n,i,r,o,s,a,u,l,h,c,f,d,p,m,v){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=l,t[9]=h,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=v,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.scalar.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},r.SIMD.transpose=function(t,e){var n,i,r,o,s,a,u,l,h,c;return n=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.shuffle(n,i,0,1,4,5),a=SIMD.Float32x4.shuffle(r,o,0,1,4,5),u=SIMD.Float32x4.shuffle(s,a,0,2,4,6),l=SIMD.Float32x4.shuffle(s,a,1,3,5,7),SIMD.Float32x4.store(t,0,u),SIMD.Float32x4.store(t,4,l),s=SIMD.Float32x4.shuffle(n,i,2,3,6,7),a=SIMD.Float32x4.shuffle(r,o,2,3,6,7),h=SIMD.Float32x4.shuffle(s,a,0,2,4,6),c=SIMD.Float32x4.shuffle(s,a,1,3,5,7),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,c),t},r.transpose=i.USE_SIMD?r.SIMD.transpose:r.scalar.transpose,r.scalar.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],y=e[15],_=n*a-i*s,g=n*u-r*s,b=n*l-o*s,x=i*u-r*a,w=i*l-o*a,T=r*l-o*u,S=h*m-c*p,M=h*v-f*p,E=h*y-d*p,P=c*v-f*m,O=c*y-d*m,A=f*y-d*v,C=_*A-g*O+b*P+x*E-w*M+T*S;return C?(C=1/C,t[0]=(a*A-u*O+l*P)*C,t[1]=(r*O-i*A-o*P)*C,t[2]=(m*T-v*w+y*x)*C,t[3]=(f*w-c*T-d*x)*C,t[4]=(u*E-s*A-l*M)*C,t[5]=(n*A-r*E+o*M)*C,t[6]=(v*b-p*T-y*g)*C,t[7]=(h*T-f*b+d*g)*C,t[8]=(s*O-a*E+l*S)*C,t[9]=(i*E-n*O-o*S)*C,t[10]=(p*w-m*b+y*_)*C,t[11]=(c*b-h*w-d*_)*C,t[12]=(a*M-s*P-u*S)*C,t[13]=(n*P-i*M+r*S)*C,t[14]=(m*g-p*x-v*_)*C,t[15]=(h*x-c*g+f*_)*C,t):null},r.SIMD.invert=function(t,e){var n,i,r,o,s,a,u,l,h,c,f=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),p=SIMD.Float32x4.load(e,8),m=SIMD.Float32x4.load(e,12);return s=SIMD.Float32x4.shuffle(f,d,0,1,4,5),i=SIMD.Float32x4.shuffle(p,m,0,1,4,5),n=SIMD.Float32x4.shuffle(s,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,s,1,3,5,7),s=SIMD.Float32x4.shuffle(f,d,2,3,6,7),o=SIMD.Float32x4.shuffle(p,m,2,3,6,7),r=SIMD.Float32x4.shuffle(s,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,s,1,3,5,7),s=SIMD.Float32x4.mul(r,o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),a=SIMD.Float32x4.mul(i,s),u=SIMD.Float32x4.mul(n,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,s),a),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.mul(i,r),s=SIMD.Float32x4.swizzle(s,1,0,3,2),a=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),a),h=SIMD.Float32x4.mul(n,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.sub(a,SIMD.Float32x4.mul(o,s)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),s=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),r=SIMD.Float32x4.swizzle(r,2,3,0,1),a=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,s),a),l=SIMD.Float32x4.mul(n,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.sub(a,SIMD.Float32x4.mul(r,s)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),s=SIMD.Float32x4.mul(n,i),s=SIMD.Float32x4.swizzle(s,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),l),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,s),h),s=SIMD.Float32x4.swizzle(s,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,s),l),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(r,s)),s=SIMD.Float32x4.mul(n,o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,s)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,s),l),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,s),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,s)),s=SIMD.Float32x4.mul(n,r),s=SIMD.Float32x4.swizzle(s,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),u),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(i,s)),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,s)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,s),h),c=SIMD.Float32x4.mul(n,a),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),s=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(s,s),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(s,s))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,a)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,h)),t):null},r.invert=i.USE_SIMD?r.SIMD.invert:r.scalar.invert,r.scalar.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],y=e[15];return t[0]=a*(f*y-d*v)-c*(u*y-l*v)+m*(u*d-l*f),t[1]=-(i*(f*y-d*v)-c*(r*y-o*v)+m*(r*d-o*f)),t[2]=i*(u*y-l*v)-a*(r*y-o*v)+m*(r*l-o*u),t[3]=-(i*(u*d-l*f)-a*(r*d-o*f)+c*(r*l-o*u)),t[4]=-(s*(f*y-d*v)-h*(u*y-l*v)+p*(u*d-l*f)),t[5]=n*(f*y-d*v)-h*(r*y-o*v)+p*(r*d-o*f),t[6]=-(n*(u*y-l*v)-s*(r*y-o*v)+p*(r*l-o*u)),t[7]=n*(u*d-l*f)-s*(r*d-o*f)+h*(r*l-o*u),t[8]=s*(c*y-d*m)-h*(a*y-l*m)+p*(a*d-l*c),t[9]=-(n*(c*y-d*m)-h*(i*y-o*m)+p*(i*d-o*c)),t[10]=n*(a*y-l*m)-s*(i*y-o*m)+p*(i*l-o*a),t[11]=-(n*(a*d-l*c)-s*(i*d-o*c)+h*(i*l-o*a)),t[12]=-(s*(c*v-f*m)-h*(a*v-u*m)+p*(a*f-u*c)),t[13]=n*(c*v-f*m)-h*(i*v-r*m)+p*(i*f-r*c),t[14]=-(n*(a*v-u*m)-s*(i*v-r*m)+p*(i*u-r*a)),t[15]=n*(a*f-u*c)-s*(i*f-r*c)+h*(i*u-r*a),t},r.SIMD.adjoint=function(t,e){var n,i,r,o,s,a,u,l,h,c,f,d,p,n=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return h=SIMD.Float32x4.shuffle(n,i,0,1,4,5),a=SIMD.Float32x4.shuffle(r,o,0,1,4,5),s=SIMD.Float32x4.shuffle(h,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,h,1,3,5,7),h=SIMD.Float32x4.shuffle(n,i,2,3,6,7),l=SIMD.Float32x4.shuffle(r,o,2,3,6,7),u=SIMD.Float32x4.shuffle(h,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,h,1,3,5,7),h=SIMD.Float32x4.mul(u,l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.mul(a,h),f=SIMD.Float32x4.mul(s,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,h),c),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,h),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.mul(a,u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),c),p=SIMD.Float32x4.mul(s,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,h)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,h),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),h=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,3,0,1),l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),c),d=SIMD.Float32x4.mul(s,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(u,h)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,h),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),h=SIMD.Float32x4.mul(s,a),h=SIMD.Float32x4.swizzle(h,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),d),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,h),p),h=SIMD.Float32x4.swizzle(h,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,h),d),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,h)),h=SIMD.Float32x4.mul(s,l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,h)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,h),d),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),f),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(a,h)),h=SIMD.Float32x4.mul(s,u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),f),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(a,h)),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,h)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,h),p),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,p),t},r.adjoint=i.USE_SIMD?r.SIMD.adjoint:r.scalar.adjoint,r.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],u=t[7],l=t[8],h=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15],y=e*s-n*o,_=e*a-i*o,g=e*u-r*o,b=n*a-i*s,x=n*u-r*s,w=i*u-r*a,T=l*p-h*d,S=l*m-c*d,M=l*v-f*d,E=h*m-c*p,P=h*v-f*p,O=c*v-f*m;return y*O-_*P+g*E+b*M-x*S+w*T},r.SIMD.multiply=function(t,e,n){var i=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),s=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4.load(n,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,3,3,3,3),s))));SIMD.Float32x4.store(t,0,u);var l=SIMD.Float32x4.load(n,4),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),s))));SIMD.Float32x4.store(t,4,h);var c=SIMD.Float32x4.load(n,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),s))));SIMD.Float32x4.store(t,8,f);var d=SIMD.Float32x4.load(n,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),s))));return SIMD.Float32x4.store(t,12,p),t},r.scalar.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],d=e[10],p=e[11],m=e[12],v=e[13],y=e[14],_=e[15],g=n[0],b=n[1],x=n[2],w=n[3];return t[0]=g*i+b*a+x*c+w*m,t[1]=g*r+b*u+x*f+w*v,t[2]=g*o+b*l+x*d+w*y,t[3]=g*s+b*h+x*p+w*_,g=n[4],b=n[5],x=n[6],w=n[7],t[4]=g*i+b*a+x*c+w*m,t[5]=g*r+b*u+x*f+w*v,t[6]=g*o+b*l+x*d+w*y,t[7]=g*s+b*h+x*p+w*_,g=n[8],b=n[9],x=n[10],w=n[11],t[8]=g*i+b*a+x*c+w*m,t[9]=g*r+b*u+x*f+w*v,t[10]=g*o+b*l+x*d+w*y,t[11]=g*s+b*h+x*p+w*_,g=n[12],b=n[13],x=n[14],w=n[15],t[12]=g*i+b*a+x*c+w*m,t[13]=g*r+b*u+x*f+w*v,t[14]=g*o+b*l+x*d+w*y,t[15]=g*s+b*h+x*p+w*_,t},r.multiply=i.USE_SIMD?r.SIMD.multiply:r.scalar.multiply,r.mul=r.multiply,r.scalar.translate=function(t,e,n){var i,r,o,s,a,u,l,h,c,f,d,p,m=n[0],v=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*y+e[12],t[13]=e[1]*m+e[5]*v+e[9]*y+e[13],t[14]=e[2]*m+e[6]*v+e[10]*y+e[14],t[15]=e[3]*m+e[7]*v+e[11]*y+e[15]):(i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],d=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=l,t[7]=h,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=i*m+a*v+c*y+e[12],t[13]=r*m+u*v+f*y+e[13],t[14]=o*m+l*v+d*y+e[14],t[15]=s*m+h*v+p*y+e[15]),t},r.SIMD.translate=function(t,e,n){var i=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),s=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,0,0,0,0)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,2,2,2,2));var u=SIMD.Float32x4.add(i,SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,s)));return SIMD.Float32x4.store(t,12,u),t},r.translate=i.USE_SIMD?r.SIMD.translate:r.scalar.translate,r.scalar.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.SIMD.scale=function(t,e,n){var i,r,o,s=SIMD.Float32x4(n[0],n[1],n[2],0);return i=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,0,0,0,0))),r=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.scale=i.USE_SIMD?r.SIMD.scale:r.scalar.scale,r.rotate=function(t,e,n,r){var o,s,a,u,l,h,c,f,d,p,m,v,y,_,g,b,x,w,T,S,M,E,P,O,A=r[0],C=r[1],I=r[2],R=Math.sqrt(A*A+C*C+I*I);return Math.abs(R)<i.EPSILON?null:(R=1/R,A*=R,C*=R,I*=R,o=Math.sin(n),s=Math.cos(n),a=1-s,u=e[0],l=e[1],h=e[2],c=e[3],f=e[4],d=e[5],p=e[6],m=e[7],v=e[8],y=e[9],_=e[10],g=e[11],b=A*A*a+s,x=C*A*a+I*o,w=I*A*a-C*o,T=A*C*a-I*o,S=C*C*a+s,M=I*C*a+A*o,E=A*I*a+C*o,P=C*I*a-A*o,O=I*I*a+s,t[0]=u*b+f*x+v*w,t[1]=l*b+d*x+y*w,t[2]=h*b+p*x+_*w,t[3]=c*b+m*x+g*w,t[4]=u*T+f*S+v*M,t[5]=l*T+d*S+y*M,t[6]=h*T+p*S+_*M,t[7]=c*T+m*S+g*M,t[8]=u*E+f*P+v*O,t[9]=l*E+d*P+y*O,t[10]=h*E+p*P+_*O,t[11]=c*E+m*P+g*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},r.scalar.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],l=e[8],h=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=s*r+h*i,t[6]=a*r+c*i,t[7]=u*r+f*i,t[8]=l*r-o*i,t[9]=h*r-s*i,t[10]=c*r-a*i,t[11]=f*r-u*i,t},r.SIMD.rotateX=function(t,e,n){var i=SIMD.Float32x4.splat(Math.sin(n)),r=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),s=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(s,i))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,r),SIMD.Float32x4.mul(o,i))),t},r.rotateX=i.USE_SIMD?r.SIMD.rotateX:r.scalar.rotateX,r.scalar.rotateY=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[8],h=e[9],c=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-l*i,t[1]=s*r-h*i,t[2]=a*r-c*i,t[3]=u*r-f*i,t[8]=o*i+l*r,t[9]=s*i+h*r,t[10]=a*i+c*r,t[11]=u*i+f*r,t},r.SIMD.rotateY=function(t,e,n){var i=SIMD.Float32x4.splat(Math.sin(n)),r=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),s=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(s,i))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(s,r))),t},r.rotateY=i.USE_SIMD?r.SIMD.rotateY:r.scalar.rotateY,r.scalar.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[4],h=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=s*r+h*i,t[2]=a*r+c*i,t[3]=u*r+f*i,t[4]=l*r-o*i,t[5]=h*r-s*i,t[6]=c*r-a*i,t[7]=f*r-u*i,t},r.SIMD.rotateZ=function(t,e,n){var i=SIMD.Float32x4.splat(Math.sin(n)),r=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),s=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(s,i))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,r),SIMD.Float32x4.mul(o,i))),t},r.rotateZ=i.USE_SIMD?r.SIMD.rotateZ:r.scalar.rotateZ,r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,e,n){var r,o,s,a=n[0],u=n[1],l=n[2],h=Math.sqrt(a*a+u*u+l*l);return Math.abs(h)<i.EPSILON?null:(h=1/h,a*=h,u*=h,l*=h,r=Math.sin(e),o=Math.cos(e),s=1-o,t[0]=a*a*s+o,t[1]=u*a*s+l*r,t[2]=l*a*s-u*r,t[3]=0,t[4]=a*u*s-l*r,t[5]=u*u*s+o,t[6]=l*u*s+a*r,t[7]=0,t[8]=a*l*s+u*r,t[9]=u*l*s-a*r,t[10]=l*l*s+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},r.fromXRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=i+i,u=r+r,l=o+o,h=i*a,c=i*u,f=i*l,d=r*u,p=r*l,m=o*l,v=s*a,y=s*u,_=s*l;return t[0]=1-(d+m),t[1]=c+_,t[2]=f-y,t[3]=0,t[4]=c-_,t[5]=1-(h+m),t[6]=p+v,t[7]=0,t[8]=f+y,t[9]=p-v,t[10]=1-(h+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},r.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},r.getRotation=function(t,e){var n=e[0]+e[5]+e[10],i=0;return n>0?(i=2*Math.sqrt(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t},r.fromRotationTranslationScale=function(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3],u=r+r,l=o+o,h=s+s,c=r*u,f=r*l,d=r*h,p=o*l,m=o*h,v=s*h,y=a*u,_=a*l,g=a*h,b=i[0],x=i[1],w=i[2];return t[0]=(1-(p+v))*b,t[1]=(f+g)*b,t[2]=(d-_)*b,t[3]=0,t[4]=(f-g)*x,t[5]=(1-(c+v))*x,t[6]=(m+y)*x,t[7]=0,t[8]=(d+_)*w,t[9]=(m-y)*w,t[10]=(1-(c+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,e,n,i,r){var o=e[0],s=e[1],a=e[2],u=e[3],l=o+o,h=s+s,c=a+a,f=o*l,d=o*h,p=o*c,m=s*h,v=s*c,y=a*c,_=u*l,g=u*h,b=u*c,x=i[0],w=i[1],T=i[2],S=r[0],M=r[1],E=r[2];return t[0]=(1-(m+y))*x,t[1]=(d+b)*x,t[2]=(p-g)*x,t[3]=0,t[4]=(d-b)*w,t[5]=(1-(f+y))*w,t[6]=(v+_)*w,t[7]=0,t[8]=(p+g)*T,t[9]=(v-_)*T,t[10]=(1-(f+m))*T,t[11]=0,t[12]=n[0]+S-(t[0]*S+t[4]*M+t[8]*E),t[13]=n[1]+M-(t[1]*S+t[5]*M+t[9]*E),t[14]=n[2]+E-(t[2]*S+t[6]*M+t[10]*E),t[15]=1,t},r.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,u=r+r,l=n*s,h=i*s,c=i*a,f=r*s,d=r*a,p=r*u,m=o*s,v=o*a,y=o*u;return t[0]=1-c-p,t[1]=h+y,t[2]=f-v,t[3]=0,t[4]=h-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+v,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,e,n,i,r,o,s){var a=1/(n-e),u=1/(r-i),l=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*u,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0,t},r.perspective=function(t,e,n,i,r){var o=1/Math.tan(e/2),s=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*s,t[15]=0,t},r.perspectiveFromFieldOfView=function(t,e,n,i){var r=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+a),l=2/(r+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((s-a)*u*.5),t[9]=(r-o)*l*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t},r.ortho=function(t,e,n,i,r,o,s){var a=1/(e-n),u=1/(i-r),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*u,t[14]=(s+o)*l,t[15]=1,t},r.lookAt=function(t,e,n,o){var s,a,u,l,h,c,f,d,p,m,v=e[0],y=e[1],_=e[2],g=o[0],b=o[1],x=o[2],w=n[0],T=n[1],S=n[2];return Math.abs(v-w)<i.EPSILON&&Math.abs(y-T)<i.EPSILON&&Math.abs(_-S)<i.EPSILON?r.identity(t):(f=v-w,d=y-T,p=_-S,m=1/Math.sqrt(f*f+d*d+p*p),f*=m,d*=m,p*=m,s=b*p-x*d,a=x*f-g*p,u=g*d-b*f,m=Math.sqrt(s*s+a*a+u*u),m?(m=1/m,s*=m,a*=m,u*=m):(s=0,a=0,u=0),l=d*u-p*a,h=p*s-f*u,c=f*a-d*s,m=Math.sqrt(l*l+h*h+c*c),m?(m=1/m,l*=m,h*=m,c*=m):(l=0,h=0,c=0),t[0]=s,t[1]=l,t[2]=f,t[3]=0,t[4]=a,t[5]=h,t[6]=d,t[7]=0,t[8]=u,t[9]=c,t[10]=p,t[11]=0,t[12]=-(s*v+a*y+u*_),t[13]=-(l*v+h*y+c*_),t[14]=-(f*v+d*y+p*_),t[15]=1,t)},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2));
},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},r.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},r.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],u=t[5],l=t[6],h=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],v=t[13],y=t[14],_=t[15],g=e[0],b=e[1],x=e[2],w=e[3],T=e[4],S=e[5],M=e[6],E=e[7],P=e[8],O=e[9],A=e[10],C=e[11],I=e[12],R=e[13],D=e[14],k=e[15];return Math.abs(n-g)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-b)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-x)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-w)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(a-T)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(u-S)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-M)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(h-E)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(c-P)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-O)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(d-A)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(p-C)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(m-I)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(v-R)<=i.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(y-D)<=i.EPSILON*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(_-k)<=i.EPSILON*Math.max(1,Math.abs(_),Math.abs(k))},t.exports=r},function(t,e,n){var i=n(15),r=n(62),o=n(63),s=n(64),a={};a.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(i,r,s){var u=o.dot(r,s);return u<-.999999?(o.cross(t,e,r),o.length(t)<1e-6&&o.cross(t,n,r),o.normalize(t,t),a.setAxisAngle(i,t,Math.PI),i):u>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(o.cross(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+u,a.normalize(i,i))}}(),a.setAxes=function(){var t=r.create();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],a.normalize(e,a.fromMat3(e,t))}}(),a.clone=s.clone,a.fromValues=s.fromValues,a.copy=s.copy,a.set=s.set,a.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.setAxisAngle=function(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t},a.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),i=Math.sin(n/2);return 0!=i?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n},a.add=s.add,a.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],u=n[1],l=n[2],h=n[3];return t[0]=i*h+s*a+r*l-o*u,t[1]=r*h+s*u+o*a-i*l,t[2]=o*h+s*l+i*u-r*a,t[3]=s*h-i*a-r*u-o*l,t},a.mul=a.multiply,a.scale=s.scale,a.rotateX=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+s*a,t[1]=r*u+o*a,t[2]=o*u-r*a,t[3]=s*u-i*a,t},a.rotateY=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u-o*a,t[1]=r*u+s*a,t[2]=o*u+i*a,t[3]=s*u-r*a,t},a.rotateZ=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+r*a,t[1]=r*u-i*a,t[2]=o*u+s*a,t[3]=s*u-o*a,t},a.calculateW=function(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t},a.dot=s.dot,a.lerp=s.lerp,a.slerp=function(t,e,n,i){var r,o,s,a,u,l=e[0],h=e[1],c=e[2],f=e[3],d=n[0],p=n[1],m=n[2],v=n[3];return o=l*d+h*p+c*m+f*v,o<0&&(o=-o,d=-d,p=-p,m=-m,v=-v),1-o>1e-6?(r=Math.acos(o),s=Math.sin(r),a=Math.sin((1-i)*r)/s,u=Math.sin(i*r)/s):(a=1-i,u=i),t[0]=a*l+u*d,t[1]=a*h+u*p,t[2]=a*c+u*m,t[3]=a*f+u*v,t},a.sqlerp=function(){var t=a.create(),e=a.create();return function(n,i,r,o,s,u){return a.slerp(t,i,s,u),a.slerp(e,r,o,u),a.slerp(n,t,e,2*u*(1-u)),n}}(),a.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=o*a,t},a.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},a.length=s.length,a.len=a.length,a.squaredLength=s.squaredLength,a.sqrLen=a.squaredLength,a.normalize=s.normalize,a.fromMat3=function(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*o+s]-e[3*s+o])*n,t[o]=(e[3*o+r]+e[3*r+o])*n,t[s]=(e[3*s+r]+e[3*r+s])*n}return t},a.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=s.exactEquals,a.equals=s.equals,t.exports=a},function(t,e,n){var i=n(15),r={};r.create=function(){var t=new i.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},r.clone=function(t){var e=new i.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},r.fromValues=function(t,e){var n=new i.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},r.set=function(t,e,n){return t[0]=e,t[1]=n,t},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},r.sub=r.subtract,r.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},r.mul=r.multiply,r.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},r.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},r.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},r.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},r.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},r.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},r.dist=r.distance,r.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},r.len=r.length,r.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},r.normalize=function(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},r.cross=function(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t},r.lerp=function(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t},r.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},r.transformMat2=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t},r.transformMat2d=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t},r.transformMat3=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t},r.transformMat4=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t},r.forEach=function(){var t=r.create();return function(e,n,i,r,o,s){var a,u;for(n||(n=2),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,a=i;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}(),r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},r.equals=function(t,e){var n=t[0],r=t[1],o=e[0],s=e[1];return Math.abs(n-o)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))},t.exports=r},function(t,e,n){var i,r;(function(o){/*!
	 * VERSION: 1.19.1
	 * DATE: 2017-01-17
	 * UPDATES AND DOCS AT: http://greensock.com
	 * 
	 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
	 *
	 * @license Copyright (c) 2008-2017, GreenSock. All rights reserved.
	 * This work is subject to the terms at http://greensock.com/standard-license or for
	 * Club GreenSock members, the software agreement that was issued with your membership.
	 * 
	 * @author: Jack Doyle, jack@greensock.com
	 **/
var s="undefined"!=typeof t&&t.exports&&"undefined"!=typeof o?o:this||window;(s._gsQueue||(s._gsQueue=[])).push(function(){"use strict";s._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,n){var i=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},r=function(t,e,n){var i,r,o=t.cycle;for(i in o)r=o[i],t[i]="function"==typeof r?r(n,e[n]):r[n%r.length];delete t.cycle},o=function(t,e,i){n.call(this,t,e,i),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=o.prototype.render},s=1e-10,a=n._internals,u=a.isSelector,l=a.isArray,h=o.prototype=n.to({},.1,{}),c=[];o.version="1.19.1",h.constructor=o,h.kill()._gc=!1,o.killTweensOf=o.killDelayedCallsTo=n.killTweensOf,o.getTweensOf=n.getTweensOf,o.lagSmoothing=n.lagSmoothing,o.ticker=n.ticker,o.render=n.render,h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),n.prototype.invalidate.call(this)},h.updateTo=function(t,e){var i,r=this.ratio,o=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(i in t)this.vars[i]=t[i];if(this._initted||o)if(e)this._initted=!1,o&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&n._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var s=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||o)for(var a,u=1/(1-r),l=this._firstPT;l;)a=l.s+l.c,l.c*=u,l.s=a-l.c,l=l._next;return this},h.render=function(t,e,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,r,o,u,l,h,c,f,d=this._dirty?this.totalDuration():this._totalDuration,p=this._time,m=this._totalTime,v=this._cycle,y=this._duration,_=this._rawPrevTime;if(t>=d-1e-7&&t>=0?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=y,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===y&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(_<0||t<=0&&t>=-1e-7||_===s&&"isPause"!==this.data)&&_!==t&&(n=!0,_>s&&(r="onReverseComplete")),this._rawPrevTime=f=!e||t||_===t?t:s)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===y&&_>0)&&(r="onReverseComplete",i=this._reversed),t<0&&(this._active=!1,0===y&&(this._initted||!this.vars.lazy||n)&&(_>=0&&(n=!0),this._rawPrevTime=f=!e||t||_===t?t:s)),this._initted||(n=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(u=y+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&m<=t&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=y-this._time),this._time>y?this._time=y:this._time<0&&(this._time=0)),this._easeType?(l=this._time/y,h=this._easeType,c=this._easePower,(1===h||3===h&&l>=.5)&&(l=1-l),3===h&&(l*=2),1===c?l*=l:2===c?l*=l*l:3===c?l*=l*l*l:4===c&&(l*=l*l*l*l),1===h?this.ratio=1-l:2===h?this.ratio=l:this._time/y<.5?this.ratio=l/2:this.ratio=1-l/2):this.ratio=this._ease.getRatio(this._time/y)),p===this._time&&!n&&v===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=m,this._rawPrevTime=_,this._cycle=v,a.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/y):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==p&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==y||e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,e,n),e||(this._totalTime!==m||r)&&this._callback("onUpdate")),this._cycle!==v&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(this._gc&&!n||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===y&&this._rawPrevTime===s&&f!==s&&(this._rawPrevTime=0)))},o.to=function(t,e,n){return new o(t,e,n)},o.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new o(t,e,n)},o.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new o(t,e,i)},o.staggerTo=o.allTo=function(t,e,s,a,h,f,d){a=a||0;var p,m,v,y,_=0,g=[],b=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),h.apply(d||s.callbackScope||this,f||c)},x=s.cycle,w=s.startAt&&s.startAt.cycle;for(l(t)||("string"==typeof t&&(t=n.selector(t)||t),u(t)&&(t=i(t))),t=t||[],a<0&&(t=i(t),t.reverse(),a*=-1),p=t.length-1,v=0;v<=p;v++){m={};for(y in s)m[y]=s[y];if(x&&(r(m,t,v),null!=m.duration&&(e=m.duration,delete m.duration)),w){w=m.startAt={};for(y in s.startAt)w[y]=s.startAt[y];r(m.startAt,t,v)}m.delay=_+(m.delay||0),v===p&&h&&(m.onComplete=b),g[v]=new o(t[v],e,m),_+=a}return g},o.staggerFrom=o.allFrom=function(t,e,n,i,r,s,a){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,o.staggerTo(t,e,n,i,r,s,a)},o.staggerFromTo=o.allFromTo=function(t,e,n,i,r,s,a,u){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,o.staggerTo(t,e,i,r,s,a,u)},o.delayedCall=function(t,e,n,i,r){return new o(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,useFrames:r,overwrite:0})},o.set=function(t,e){return new o(t,0,e)},o.isTweening=function(t){return n.getTweensOf(t,!0).length>0};var f=function(t,e){for(var i=[],r=0,o=t._first;o;)o instanceof n?i[r++]=o:(e&&(i[r++]=o),i=i.concat(f(o,e)),r=i.length),o=o._next;return i},d=o.getAllTweens=function(e){return f(t._rootTimeline,e).concat(f(t._rootFramesTimeline,e))};o.killAll=function(t,n,i,r){null==n&&(n=!0),null==i&&(i=!0);var o,s,a,u=d(0!=r),l=u.length,h=n&&i&&r;for(a=0;a<l;a++)s=u[a],(h||s instanceof e||(o=s.target===s.vars.onComplete)&&i||n&&!o)&&(t?s.totalTime(s._reversed?0:s.totalDuration()):s._enabled(!1,!1))},o.killChildTweensOf=function(t,e){if(null!=t){var r,s,h,c,f,d=a.tweenLookup;if("string"==typeof t&&(t=n.selector(t)||t),u(t)&&(t=i(t)),l(t))for(c=t.length;--c>-1;)o.killChildTweensOf(t[c],e);else{r=[];for(h in d)for(s=d[h].target.parentNode;s;)s===t&&(r=r.concat(d[h].tweens)),s=s.parentNode;for(f=r.length,c=0;c<f;c++)e&&r[c].totalTime(r[c].totalDuration()),r[c]._enabled(!1,!1)}}};var p=function(t,n,i,r){n=n!==!1,i=i!==!1,r=r!==!1;for(var o,s,a=d(r),u=n&&i&&r,l=a.length;--l>-1;)s=a[l],(u||s instanceof e||(o=s.target===s.vars.onComplete)&&i||n&&!o)&&s.paused(t)};return o.pauseAll=function(t,e,n){p(!0,t,e,n)},o.resumeAll=function(t,e,n){p(!1,t,e,n)},o.globalTimeScale=function(e){var i=t._rootTimeline,r=n.ticker.time;return arguments.length?(e=e||s,i._startTime=r-(r-i._startTime)*i._timeScale/e,i=t._rootFramesTimeline,r=n.ticker.frame,i._startTime=r-(r-i._startTime)*i._timeScale/e,i._timeScale=t._rootTimeline._timeScale=e,e):i._timeScale},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},h.totalDuration=function(t){return arguments.length?this._repeat===-1?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},o},!0),s._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,n){var i=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n,i,r=this.vars;for(i in r)n=r[i],l(n)&&n.join("").indexOf("{self}")!==-1&&(r[i]=this._swapSelfInParams(n));l(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,o=n._internals,a=i._internals={},u=o.isSelector,l=o.isArray,h=o.lazyTweens,c=o.lazyRender,f=s._gsDefine.globals,d=function(t){var e,n={};for(e in t)n[e]=t[e];return n},p=function(t,e,n){var i,r,o=t.cycle;for(i in o)r=o[i],t[i]="function"==typeof r?r(n,e[n]):r[n%r.length];delete t.cycle},m=a.pauseCallback=function(){},v=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},y=i.prototype=new e;return i.version="1.19.1",y.constructor=i,y.kill()._gc=y._forcingPlayhead=y._hasPause=!1,y.to=function(t,e,i,r){var o=i.repeat&&f.TweenMax||n;return e?this.add(new o(t,e,i),r):this.set(t,i,r)},y.from=function(t,e,i,r){return this.add((i.repeat&&f.TweenMax||n).from(t,e,i),r)},y.fromTo=function(t,e,i,r,o){var s=r.repeat&&f.TweenMax||n;return e?this.add(s.fromTo(t,e,i,r),o):this.set(t,r,o)},y.staggerTo=function(t,e,r,o,s,a,l,h){var c,f,m=new i({onComplete:a,onCompleteParams:l,callbackScope:h,smoothChildTiming:this.smoothChildTiming}),y=r.cycle;for("string"==typeof t&&(t=n.selector(t)||t),t=t||[],u(t)&&(t=v(t)),o=o||0,o<0&&(t=v(t),t.reverse(),o*=-1),f=0;f<t.length;f++)c=d(r),c.startAt&&(c.startAt=d(c.startAt),c.startAt.cycle&&p(c.startAt,t,f)),y&&(p(c,t,f),null!=c.duration&&(e=c.duration,delete c.duration)),m.to(t[f],e,c,f*o);return this.add(m,s)},y.staggerFrom=function(t,e,n,i,r,o,s,a){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(t,e,n,i,r,o,s,a)},y.staggerFromTo=function(t,e,n,i,r,o,s,a,u){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,this.staggerTo(t,e,i,r,o,s,a,u)},y.call=function(t,e,i,r){return this.add(n.delayedCall(0,t,e,i),r)},y.set=function(t,e,i){return i=this._parseTimeOrLabel(i,0,!0),null==e.immediateRender&&(e.immediateRender=i===this._time&&!this._paused),this.add(new n(t,0,e),i)},i.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,o,s=new i(t),a=s._timeline;for(null==e&&(e=!0),a._remove(s,!0),s._startTime=0,s._rawPrevTime=s._time=s._totalTime=a._time,r=a._first;r;)o=r._next,e&&r instanceof n&&r.target===r.vars.onComplete||s.add(r,r._startTime-r._delay),r=o;return a.add(s,0),s},y.add=function(r,o,s,a){var u,h,c,f,d,p;if("number"!=typeof o&&(o=this._parseTimeOrLabel(o,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&l(r)){for(s=s||"normal",a=a||0,u=o,h=r.length,c=0;c<h;c++)l(f=r[c])&&(f=new i({tweens:f})),this.add(f,u),"string"!=typeof f&&"function"!=typeof f&&("sequence"===s?u=f._startTime+f.totalDuration()/f._timeScale:"start"===s&&(f._startTime-=f.delay())),u+=a;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,o);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=n.delayedCall(0,r)}if(e.prototype.add.call(this,r,o),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(d=this,p=d.rawTime()>r._startTime;d._timeline;)p&&d._timeline.smoothChildTiming?d.totalTime(d._totalTime,!0):d._gc&&d._enabled(!0,!1),d=d._timeline;return this},y.remove=function(e){if(e instanceof t){this._remove(e,!1);var n=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:n._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&l(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},y._remove=function(t,n){e.prototype._remove.call(this,t,n);var i=this._last;return i?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},y.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},y.insert=y.insertMultiple=function(t,e,n,i){return this.add(t,e||0,n,i)},y.appendMultiple=function(t,e,n,i){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),n,i)},y.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},y.addPause=function(t,e,i,r){var o=n.delayedCall(0,m,i,r||this);return o.vars.onComplete=o.vars.onReverseComplete=e,o.data="isPause",this._hasPause=!0,this.add(o,t)},y.removeLabel=function(t){return delete this._labels[t],this},y.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},y._parseTimeOrLabel=function(e,n,i,r){var o;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&l(r)))for(o=r.length;--o>-1;)r[o]instanceof t&&r[o].timeline===this&&this.remove(r[o]);if("string"==typeof n)return this._parseTimeOrLabel(n,i&&"number"==typeof e&&null==this._labels[n]?e-this.duration():0,i);if(n=n||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(o=e.indexOf("="),o===-1)return null==this._labels[e]?i?this._labels[e]=this.duration()+n:n:this._labels[e]+n;n=parseInt(e.charAt(o-1)+"1",10)*Number(e.substr(o+1)),e=o>1?this._parseTimeOrLabel(e.substr(0,o-1),0,i):this.duration()}return Number(e)+n},y.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},y.stop=function(){return this.paused(!0)},y.gotoAndPlay=function(t,e){return this.play(t,e)},y.gotoAndStop=function(t,e){return this.pause(t,e)},y.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,o,s,a,u,l,f,d=this._dirty?this.totalDuration():this._totalDuration,p=this._time,m=this._startTime,v=this._timeScale,y=this._paused;if(t>=d-1e-7&&t>=0)this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(o=!0,a="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(u=!0,this._rawPrevTime>r&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=d+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(a="onReverseComplete",o=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=o=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(u=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,0===t&&o)for(i=this._first;i&&0===i._startTime;)i._duration||(o=!1),i=i._next;t=0,this._initted||(u=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=p)for(i=this._first;i&&i._startTime<=t&&!l;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(l=i),i=i._next;else for(i=this._last;i&&i._startTime>=t&&!l;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(l=i),i=i._prev;l&&(this._time=t=l._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==p&&this._first||n||u||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),f=this._time,f>=p)for(i=this._first;i&&(s=i._next,f===this._time&&(!this._paused||y));)(i._active||i._startTime<=f&&!i._paused&&!i._gc)&&(l===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=s;else for(i=this._last;i&&(s=i._prev,f===this._time&&(!this._paused||y));){if(i._active||i._startTime<=p&&!i._paused&&!i._gc){if(l===i){for(l=i._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(t-l._startTime)*l._timeScale:(t-l._startTime)*l._timeScale,e,n),l=l._prev;l=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)}i=s}this._onUpdate&&(e||(h.length&&c(),this._callback("onUpdate"))),a&&(this._gc||m!==this._startTime&&v===this._timeScale||(0===this._time||d>=this.totalDuration())&&(o&&(h.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},y._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof i&&t._hasPausedChild())return!0;t=t._next}return!1},y.getChildren=function(t,e,i,r){r=r||-9999999999;for(var o=[],s=this._first,a=0;s;)s._startTime<r||(s instanceof n?e!==!1&&(o[a++]=s):(i!==!1&&(o[a++]=s),t!==!1&&(o=o.concat(s.getChildren(!0,e,i)),a=o.length))),s=s._next;return o},y.getTweensOf=function(t,e){var i,r,o=this._gc,s=[],a=0;for(o&&this._enabled(!0,!0),i=n.getTweensOf(t),r=i.length;--r>-1;)(i[r].timeline===this||e&&this._contains(i[r]))&&(s[a++]=i[r]);return o&&this._enabled(!1,!0),s},y.recent=function(){return this._recent},y._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},y.shiftChildren=function(t,e,n){n=n||0;for(var i,r=this._first,o=this._labels;r;)r._startTime>=n&&(r._startTime+=t),r=r._next;if(e)for(i in o)o[i]>=n&&(o[i]+=t);return this._uncache(!0)},y._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var n=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),i=n.length,r=!1;--i>-1;)n[i]._kill(t,e)&&(r=!0);return r},y.clear=function(t){var e=this.getChildren(!1,!0,!0),n=e.length;for(this._time=this._totalTime=0;--n>-1;)e[n]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},y.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},y._enabled=function(t,n){if(t===this._gc)for(var i=this._first;i;)i._enabled(t,!0),i=i._next;return e.prototype._enabled.call(this,t,n)},y.totalTime=function(e,n,i){this._forcingPlayhead=!0;var r=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},y.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},y.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,n,i=0,r=this._last,o=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>o&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):o=r._startTime,r._startTime<0&&!r._paused&&(i-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),o=0),n=r._startTime+r._totalDuration/r._timeScale,n>i&&(i=n),r=e;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},y.paused=function(e){if(!e)for(var n=this._first,i=this._time;n;)n._startTime===i&&"isPause"===n.data&&(n._rawPrevTime=0),n=n._next;return t.prototype.paused.apply(this,arguments)},y.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},y.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},i},!0),s._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,n){var i=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,o=e._internals,a=o.lazyTweens,u=o.lazyRender,l=s._gsDefine.globals,h=new n(null,null,1,0),c=i.prototype=new t;return c.constructor=i,c.kill()._gc=!1,i.version="1.19.1",c.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},c.addCallback=function(t,n,i,r){return this.add(e.delayedCall(0,t,i,r),n)},c.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var n=this.getTweensOf(t,!1),i=n.length,r=this._parseTimeOrLabel(e);--i>-1;)n[i]._startTime===r&&n[i]._enabled(!1,!1);return this},c.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},c.tweenTo=function(t,n){n=n||{};var i,r,o,s={ease:h,useFrames:this.usesFrames(),immediateRender:!1},a=n.repeat&&l.TweenMax||e;for(r in n)s[r]=n[r];return s.time=this._parseTimeOrLabel(t),i=Math.abs(Number(s.time)-this._time)/this._timeScale||.001,o=new a(this,i,s),s.onStart=function(){o.target.paused(!0),o.vars.time!==o.target.time()&&i===o.duration()&&o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale),n.onStart&&n.onStart.apply(n.onStartScope||n.callbackScope||o,n.onStartParams||[])},o},c.tweenFromTo=function(t,e,n){n=n||{},t=this._parseTimeOrLabel(t),n.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},n.immediateRender=n.immediateRender!==!1;var i=this.tweenTo(e,n);return i.duration(Math.abs(i.vars.time-t)/this._timeScale||.001)},c.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,o,s,l,h,c,f,d,p=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,v=this._time,y=this._totalTime,_=this._startTime,g=this._timeScale,b=this._rawPrevTime,x=this._paused,w=this._cycle;if(t>=p-1e-7&&t>=0)this._locked||(this._totalTime=p,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(o=!0,l="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||b<0||b===r)&&b!==t&&this._first&&(h=!0,b>r&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=m,t=m+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==v||0===m&&b!==r&&(b>0||t<0&&b>=0)&&!this._locked)&&(l="onReverseComplete",o=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=o=!0,l="onReverseComplete"):b>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=m||!e||t||this._rawPrevTime===t?t:r,0===t&&o)for(i=this._first;i&&0===i._startTime;)i._duration||(o=!1),i=i._next;t=0,this._initted||(h=!0)}else if(0===m&&b<0&&(h=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(c=m+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&y<=t&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!==(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,t=m+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e&&t<m){if(t=this._time,t>=v||this._repeat&&w!==this._cycle)for(i=this._first;i&&i._startTime<=t&&!f;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(f=i),i=i._next;else for(i=this._last;i&&i._startTime>=t&&!f;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(f=i),i=i._prev;f&&(this._time=t=f._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==w&&!this._locked){var T=this._yoyo&&0!==(1&w),S=T===(this._yoyo&&0!==(1&this._cycle)),M=this._totalTime,E=this._cycle,P=this._rawPrevTime,O=this._time;if(this._totalTime=w*m,this._cycle<w?T=!T:this._totalTime+=m,this._time=v,this._rawPrevTime=0===m?b-1e-4:b,this._cycle=w,this._locked=!0,v=T?0:m,this.render(v,e,0===m),e||this._gc||this.vars.onRepeat&&(this._cycle=E,this._locked=!1,this._callback("onRepeat")),v!==this._time)return;if(S&&(this._cycle=w,this._locked=!0,v=T?m+1e-4:-1e-4,this.render(v,!0,!1)),this._locked=!1,this._paused&&!x)return;this._time=O,this._totalTime=M,this._cycle=E,this._rawPrevTime=P}if(!(this._time!==v&&this._first||n||h||f))return void(y!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==y&&t>0&&(this._active=!0),0===y&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),d=this._time,d>=v)for(i=this._first;i&&(s=i._next,d===this._time&&(!this._paused||x));)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(f===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=s;else for(i=this._last;i&&(s=i._prev,d===this._time&&(!this._paused||x));){if(i._active||i._startTime<=v&&!i._paused&&!i._gc){if(f===i){for(f=i._prev;f&&f.endTime()>this._time;)f.render(f._reversed?f.totalDuration()-(t-f._startTime)*f._timeScale:(t-f._startTime)*f._timeScale,e,n),f=f._prev;f=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)}i=s}this._onUpdate&&(e||(a.length&&u(),this._callback("onUpdate"))),l&&(this._locked||this._gc||_!==this._startTime&&g===this._timeScale||(0===this._time||p>=this.totalDuration())&&(o&&(a.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},c.getActive=function(t,e,n){null==t&&(t=!0),null==e&&(e=!0),null==n&&(n=!1);var i,r,o=[],s=this.getChildren(t,e,n),a=0,u=s.length;for(i=0;i<u;i++)r=s[i],r.isActive()&&(o[a++]=r);return o},c.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,n=this.getLabelsArray(),i=n.length;for(e=0;e<i;e++)if(n[e].time>t)return n[e].name;return null},c.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),n=e.length;--n>-1;)if(e[n].time<t)return e[n].name;return null},c.getLabelsArray=function(){var t,e=[],n=0;for(t in this._labels)e[n++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},c.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},c.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},c.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},c.totalDuration=function(e){return arguments.length?this._repeat!==-1&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},c.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},c.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},c.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},c.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},c.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},i},!0),function(){var t=180/Math.PI,e=[],n=[],i=[],r={},o=s._gsDefine.globals,a=function(t,e,n,i){n===i&&(n=i-(i-e)/1e6),t===e&&(e=t+(n-t)/1e6),this.a=t,this.b=e,this.c=n,this.d=i,this.da=i-t,this.ca=n-t,this.ba=e-t},u=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",l=function(t,e,n,i){var r={a:t},o={},s={},a={c:i},u=(t+e)/2,l=(e+n)/2,h=(n+i)/2,c=(u+l)/2,f=(l+h)/2,d=(f-c)/8;return r.b=u+(t-u)/4,o.b=c+d,r.c=o.a=(r.b+o.b)/2,o.c=s.a=(c+f)/2,s.b=f-d,a.b=h+(i-h)/4,s.c=a.a=(s.b+a.b)/2,[r,o,s,a]},h=function(t,r,o,s,a){var u,h,c,f,d,p,m,v,y,_,g,b,x,w=t.length-1,T=0,S=t[0].a;for(u=0;u<w;u++)d=t[T],h=d.a,c=d.d,f=t[T+1].d,a?(g=e[u],b=n[u],x=(b+g)*r*.25/(s?.5:i[u]||.5),p=c-(c-h)*(s?.5*r:0!==g?x/g:0),m=c+(f-c)*(s?.5*r:0!==b?x/b:0),v=c-(p+((m-p)*(3*g/(g+b)+.5)/4||0))):(p=c-(c-h)*r*.5,m=c+(f-c)*r*.5,v=c-(p+m)/2),p+=v,m+=v,d.c=y=p,0!==u?d.b=S:d.b=S=d.a+.6*(d.c-d.a),d.da=c-h,d.ca=y-h,d.ba=S-h,o?(_=l(h,S,y,c),t.splice(T,1,_[0],_[1],_[2],_[3]),T+=4):T++,S=m;d=t[T],d.b=S,d.c=S+.4*(d.d-S),d.da=d.d-d.a,d.ca=d.c-d.a,d.ba=S-d.a,o&&(_=l(d.a,S,d.c,d.d),t.splice(T,1,_[0],_[1],_[2],_[3]))},c=function(t,i,r,o){var s,u,l,h,c,f,d=[];if(o)for(t=[o].concat(t),u=t.length;--u>-1;)"string"==typeof(f=t[u][i])&&"="===f.charAt(1)&&(t[u][i]=o[i]+Number(f.charAt(0)+f.substr(2)));if(s=t.length-2,s<0)return d[0]=new a(t[0][i],0,0,t[s<-1?0:1][i]),d;for(u=0;u<s;u++)l=t[u][i],h=t[u+1][i],d[u]=new a(l,0,0,h),r&&(c=t[u+2][i],e[u]=(e[u]||0)+(h-l)*(h-l),n[u]=(n[u]||0)+(c-h)*(c-h));return d[u]=new a(t[u][i],0,0,t[u+1][i]),d},f=function(t,o,s,a,l,f){var d,p,m,v,y,_,g,b,x={},w=[],T=f||t[0];l="string"==typeof l?","+l+",":u,null==o&&(o=1);for(p in t[0])w.push(p);if(t.length>1){for(b=t[t.length-1],g=!0,d=w.length;--d>-1;)if(p=w[d],Math.abs(T[p]-b[p])>.05){g=!1;break}g&&(t=t.concat(),f&&t.unshift(f),t.push(t[1]),f=t[t.length-3])}for(e.length=n.length=i.length=0,d=w.length;--d>-1;)p=w[d],r[p]=l.indexOf(","+p+",")!==-1,x[p]=c(t,p,r[p],f);for(d=e.length;--d>-1;)e[d]=Math.sqrt(e[d]),n[d]=Math.sqrt(n[d]);if(!a){for(d=w.length;--d>-1;)if(r[p])for(m=x[w[d]],_=m.length-1,v=0;v<_;v++)y=m[v+1].da/n[v]+m[v].da/e[v]||0,i[v]=(i[v]||0)+y*y;for(d=i.length;--d>-1;)i[d]=Math.sqrt(i[d])}for(d=w.length,v=s?4:1;--d>-1;)p=w[d],m=x[p],h(m,o,s,a,r[p]),g&&(m.splice(0,v),m.splice(m.length-v,v));return x},d=function(t,e,n){e=e||"soft";var i,r,o,s,u,l,h,c,f,d,p,m={},v="cubic"===e?3:2,y="soft"===e,_=[];if(y&&n&&(t=[n].concat(t)),null==t||t.length<v+1)throw"invalid Bezier data";for(f in t[0])_.push(f);for(l=_.length;--l>-1;){for(f=_[l],m[f]=u=[],d=0,c=t.length,h=0;h<c;h++)i=null==n?t[h][f]:"string"==typeof(p=t[h][f])&&"="===p.charAt(1)?n[f]+Number(p.charAt(0)+p.substr(2)):Number(p),y&&h>1&&h<c-1&&(u[d++]=(i+u[d-2])/2),u[d++]=i;for(c=d-v+1,d=0,h=0;h<c;h+=v)i=u[h],r=u[h+1],o=u[h+2],s=2===v?0:u[h+3],u[d++]=p=3===v?new a(i,r,o,s):new a(i,(2*r+i)/3,(2*r+o)/3,o);u.length=d}return m},p=function(t,e,n){for(var i,r,o,s,a,u,l,h,c,f,d,p=1/n,m=t.length;--m>-1;)for(f=t[m],o=f.a,s=f.d-o,a=f.c-o,u=f.b-o,i=r=0,h=1;h<=n;h++)l=p*h,c=1-l,i=r-(r=(l*l*s+3*c*(l*a+c*u))*l),d=m*n+h-1,
e[d]=(e[d]||0)+i*i},m=function(t,e){e=e>>0||6;var n,i,r,o,s=[],a=[],u=0,l=0,h=e-1,c=[],f=[];for(n in t)p(t[n],s,e);for(r=s.length,i=0;i<r;i++)u+=Math.sqrt(s[i]),o=i%e,f[o]=u,o===h&&(l+=u,o=i/e>>0,c[o]=f,a[o]=l,u=0,f=[]);return{length:l,lengths:a,segments:c}},v=s._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(t,e,n){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var i,r,o,s,a,u=e.values||[],l={},h=u[0],c=e.autoRotate||n.vars.orientToBezier;this._autoRotate=c?c instanceof Array?c:[["x","y","rotation",c===!0?0:Number(c)||0]]:null;for(i in h)this._props.push(i);for(o=this._props.length;--o>-1;)i=this._props[o],this._overwriteProps.push(i),r=this._func[i]="function"==typeof t[i],l[i]=r?t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(t[i]),a||l[i]!==u[0][i]&&(a=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?f(u,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):d(u,e.type,l),this._segCount=this._beziers[i].length,this._timeRes){var p=m(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(c=this._autoRotate)for(this._initialRotations=[],c[0]instanceof Array||(this._autoRotate=c=[c]),o=c.length;--o>-1;){for(s=0;s<3;s++)i=c[o][s],this._func[i]="function"==typeof t[i]&&t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)];i=c[o][2],this._initialRotations[o]=(this._func[i]?this._func[i].call(this._target):this._target[i])||0,this._overwriteProps.push(i)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(e){var n,i,r,o,s,a,u,l,h,c,f=this._segCount,d=this._func,p=this._target,m=e!==this._startRatio;if(this._timeRes){if(h=this._lengths,c=this._curSeg,e*=this._length,r=this._li,e>this._l2&&r<f-1){for(l=f-1;r<l&&(this._l2=h[++r])<=e;);this._l1=h[r-1],this._li=r,this._curSeg=c=this._segments[r],this._s2=c[this._s1=this._si=0]}else if(e<this._l1&&r>0){for(;r>0&&(this._l1=h[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=h[r],this._li=r,this._curSeg=c=this._segments[r],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(n=r,e-=this._l1,r=this._si,e>this._s2&&r<c.length-1){for(l=c.length-1;r<l&&(this._s2=c[++r])<=e;);this._s1=c[r-1],this._si=r}else if(e<this._s1&&r>0){for(;r>0&&(this._s1=c[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=c[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else n=e<0?0:e>=1?f-1:f*e>>0,a=(e-n*(1/f))*f;for(i=1-a,r=this._props.length;--r>-1;)o=this._props[r],s=this._beziers[o][n],u=(a*a*s.da+3*i*(a*s.ca+i*s.ba))*a+s.a,this._mod[o]&&(u=this._mod[o](u,p)),d[o]?p[o](u):p[o]=u;if(this._autoRotate){var v,y,_,g,b,x,w,T=this._autoRotate;for(r=T.length;--r>-1;)o=T[r][2],x=T[r][3]||0,w=T[r][4]===!0?1:t,s=this._beziers[T[r][0]],v=this._beziers[T[r][1]],s&&v&&(s=s[n],v=v[n],y=s.a+(s.b-s.a)*a,g=s.b+(s.c-s.b)*a,y+=(g-y)*a,g+=(s.c+(s.d-s.c)*a-g)*a,_=v.a+(v.b-v.a)*a,b=v.b+(v.c-v.b)*a,_+=(b-_)*a,b+=(v.c+(v.d-v.c)*a-b)*a,u=m?Math.atan2(b-_,g-y)*w+x:this._initialRotations[r],this._mod[o]&&(u=this._mod[o](u,p)),d[o]?p[o](u):p[o]=u)}}}),y=v.prototype;v.bezierThrough=f,v.cubicToQuadratic=l,v._autoCSS=!0,v.quadraticToCubic=function(t,e,n){return new a(t,(2*e+t)/3,(2*e+n)/3,n)},v._cssRegister=function(){var t=o.CSSPlugin;if(t){var e=t._internals,n=e._parseToProxy,i=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,o,s,a,u){e instanceof Array&&(e={values:e}),u=new v;var l,h,c,f=e.values,d=f.length-1,p=[],m={};if(d<0)return a;for(l=0;l<=d;l++)c=n(t,f[l],s,a,u,d!==l),p[l]=c.end;for(h in e)m[h]=e[h];return m.values=p,a=new r(t,"bezier",0,0,c.pt,2),a.data=c,a.plugin=u,a.setRatio=i,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(l=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x&&[["x","y","rotation",l,!1]]),m.autoRotate&&(s._transform||s._enableTransforms(!1),c.autoRotate=s._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,s._overwriteProps.push("rotation")),u._onInitTween(c.proxy,m,s._tween),a}})}},y._mod=function(t){for(var e,n=this._overwriteProps,i=n.length;--i>-1;)e=t[n[i]],e&&"function"==typeof e&&(this._mod[n[i]]=e)},y._kill=function(t){var e,n,i=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],n=i.length;--n>-1;)i[n]===e&&i.splice(n,1);if(i=this._autoRotate)for(n=i.length;--n>-1;)t[i[n][2]]&&i.splice(n,1);return this._super._kill.call(this,t)}}(),s._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var n,i,r,o,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},u=s._gsDefine.globals,l={},h=a.prototype=new t("css");h.constructor=a,a.version="1.19.1",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,h="px",a.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h,lineHeight:""};var c,f,d,p,m,v,y,_,g=/(?:\-|\.|\b)(\d|\.|e\-)+/g,b=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,w=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,T=/(?:\d|\-|\+|=|#|\.)*/g,S=/opacity *= *([^)]*)/i,M=/opacity:([^;]*)/i,E=/alpha\(opacity *=.+?\)/i,P=/^(rgb|hsl)/,O=/([A-Z])/g,A=/-([a-z])/gi,C=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,I=function(t,e){return e.toUpperCase()},R=/(?:Left|Right|Width)/i,D=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,k=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,L=/,(?=[^\)]*(?:\(|$))/gi,F=/[\s,\(]/i,j=Math.PI/180,B=180/Math.PI,N={},U={style:{}},z=s.document||{createElement:function(){return U}},V=function(t,e){return z.createElementNS?z.createElementNS(e||"http://www.w3.org/1999/xhtml",t):z.createElement(t)},X=V("div"),G=V("img"),H=a._internals={_specialProps:l},Y=(s.navigator||{}).userAgent||"",W=function(){var t=Y.indexOf("Android"),e=V("a");return d=Y.indexOf("Safari")!==-1&&Y.indexOf("Chrome")===-1&&(t===-1||parseFloat(Y.substr(t+8,2))>3),m=d&&parseFloat(Y.substr(Y.indexOf("Version/")+8,2))<6,p=Y.indexOf("Firefox")!==-1,(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Y)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Y))&&(v=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),q=function(t){return S.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Z=function(t){s.console},K="",Q="",J=function(t,e){e=e||X;var n,i,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),n=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===r[n[i]+t];);return i>=0?(Q=3===i?"ms":n[i],K="-"+Q.toLowerCase()+"-",Q+t):null},$=z.defaultView?z.defaultView.getComputedStyle:function(){},tt=a.getStyle=function(t,e,n,i,r){var o;return W||"opacity"!==e?(!i&&t.style[e]?o=t.style[e]:(n=n||$(t))?o=n[e]||n.getPropertyValue(e)||n.getPropertyValue(e.replace(O,"-$1").toLowerCase()):t.currentStyle&&(o=t.currentStyle[e]),null==r||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:r):q(t)},et=H.convertToPixels=function(t,n,i,r,o){if("px"===r||!r)return i;if("auto"===r||!i)return 0;var s,u,l,h=R.test(n),c=t,f=X.style,d=i<0,p=1===i;if(d&&(i=-i),p&&(i*=100),"%"===r&&n.indexOf("border")!==-1)s=i/100*(h?t.clientWidth:t.clientHeight);else{if(f.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==r&&c.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)f[h?"borderLeftWidth":"borderTopWidth"]=i+r;else{if(c=t.parentNode||z.body,u=c._gsCache,l=e.ticker.frame,u&&h&&u.time===l)return u.width*i/100;f[h?"width":"height"]=i+r}c.appendChild(X),s=parseFloat(X[h?"offsetWidth":"offsetHeight"]),c.removeChild(X),h&&"%"===r&&a.cacheWidths!==!1&&(u=c._gsCache=c._gsCache||{},u.time=l,u.width=s/i*100),0!==s||o||(s=et(t,n,i,r,!0))}return p&&(s/=100),d?-s:s},nt=H.calculateOffset=function(t,e,n){if("absolute"!==tt(t,"position",n))return 0;var i="left"===e?"Left":"Top",r=tt(t,"margin"+i,n);return t["offset"+i]-(et(t,e,parseFloat(r),r.replace(T,""))||0)},it=function(t,e){var n,i,r,o={};if(e=e||$(t,null))if(n=e.length)for(;--n>-1;)r=e[n],r.indexOf("-transform")!==-1&&Ct!==r||(o[r.replace(A,I)]=e.getPropertyValue(r));else for(n in e)n.indexOf("Transform")!==-1&&At!==n||(o[n]=e[n]);else if(e=t.currentStyle||t.style)for(n in e)"string"==typeof n&&void 0===o[n]&&(o[n.replace(A,I)]=e[n]);return W||(o.opacity=q(t)),i=Gt(t,e,!1),o.rotation=i.rotation,o.skewX=i.skewX,o.scaleX=i.scaleX,o.scaleY=i.scaleY,o.x=i.x,o.y=i.y,Rt&&(o.z=i.z,o.rotationX=i.rotationX,o.rotationY=i.rotationY,o.scaleZ=i.scaleZ),o.filters&&delete o.filters,o},rt=function(t,e,n,i,r){var o,s,a,u={},l=t.style;for(s in n)"cssText"!==s&&"length"!==s&&isNaN(s)&&(e[s]!==(o=n[s])||r&&r[s])&&s.indexOf("Origin")===-1&&("number"!=typeof o&&"string"!=typeof o||(u[s]="auto"!==o||"left"!==s&&"top"!==s?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof e[s]||""===e[s].replace(w,"")?o:0:nt(t,s),void 0!==l[s]&&(a=new gt(l,s,l[s],a))));if(i)for(s in i)"className"!==s&&(u[s]=i[s]);return{difs:u,firstMPT:a}},ot={width:["Left","Right"],height:["Top","Bottom"]},st=["marginLeft","marginRight","marginTop","marginBottom"],at=function(t,e,n){if("svg"===(t.nodeName+"").toLowerCase())return(n||$(t))[e]||0;if(t.getCTM&&zt(t))return t.getBBox()[e]||0;var i=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=ot[e],o=r.length;for(n=n||$(t,null);--o>-1;)i-=parseFloat(tt(t,"padding"+r[o],n,!0))||0,i-=parseFloat(tt(t,"border"+r[o]+"Width",n,!0))||0;return i},ut=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var n,i=t.split(" "),r=t.indexOf("left")!==-1?"0%":t.indexOf("right")!==-1?"100%":i[0],o=t.indexOf("top")!==-1?"0%":t.indexOf("bottom")!==-1?"100%":i[1];if(i.length>3&&!e){for(i=t.split(", ").join(",").split(","),t=[],n=0;n<i.length;n++)t.push(ut(i[n]));return t.join(",")}return null==o?o="center"===r?"50%":"0":"center"===o&&(o="50%"),("center"===r||isNaN(parseFloat(r))&&(r+"").indexOf("=")===-1)&&(r="50%"),t=r+" "+o+(i.length>2?" "+i[2]:""),e&&(e.oxp=r.indexOf("%")!==-1,e.oyp=o.indexOf("%")!==-1,e.oxr="="===r.charAt(1),e.oyr="="===o.charAt(1),e.ox=parseFloat(r.replace(w,"")),e.oy=parseFloat(o.replace(w,"")),e.v=t),e||t},lt=function(t,e){return"function"==typeof t&&(t=t(_,y)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ht=function(t,e){return"function"==typeof t&&(t=t(_,y)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ct=function(t,e,n,i){var r,o,s,a,u,l=1e-6;return"function"==typeof t&&(t=t(_,y)),null==t?a=e:"number"==typeof t?a=t:(r=360,o=t.split("_"),u="="===t.charAt(1),s=(u?parseInt(t.charAt(0)+"1",10)*parseFloat(o[0].substr(2)):parseFloat(o[0]))*(t.indexOf("rad")===-1?1:B)-(u?0:e),o.length&&(i&&(i[n]=e+s),t.indexOf("short")!==-1&&(s%=r,s!==s%(r/2)&&(s=s<0?s+r:s-r)),t.indexOf("_cw")!==-1&&s<0?s=(s+9999999999*r)%r-(s/r|0)*r:t.indexOf("ccw")!==-1&&s>0&&(s=(s-9999999999*r)%r-(s/r|0)*r)),a=e+s),a<l&&a>-l&&(a=0),a},ft={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},dt=function(t,e,n){return t=t<0?t+1:t>1?t-1:t,255*(6*t<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)+.5|0},pt=a.parseColor=function(t,e){var n,i,r,o,s,a,u,l,h,c,f;if(t)if("number"==typeof t)n=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ft[t])n=ft[t];else if("#"===t.charAt(0))4===t.length&&(i=t.charAt(1),r=t.charAt(2),o=t.charAt(3),t="#"+i+i+r+r+o+o),t=parseInt(t.substr(1),16),n=[t>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(n=f=t.match(g),e){if(t.indexOf("=")!==-1)return t.match(b)}else s=Number(n[0])%360/360,a=Number(n[1])/100,u=Number(n[2])/100,r=u<=.5?u*(a+1):u+a-u*a,i=2*u-r,n.length>3&&(n[3]=Number(t[3])),n[0]=dt(s+1/3,i,r),n[1]=dt(s,i,r),n[2]=dt(s-1/3,i,r);else n=t.match(g)||ft.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),n.length>3&&(n[3]=Number(n[3]))}else n=ft.black;return e&&!f&&(i=n[0]/255,r=n[1]/255,o=n[2]/255,l=Math.max(i,r,o),h=Math.min(i,r,o),u=(l+h)/2,l===h?s=a=0:(c=l-h,a=u>.5?c/(2-l-h):c/(l+h),s=l===i?(r-o)/c+(r<o?6:0):l===r?(o-i)/c+2:(i-r)/c+4,s*=60),n[0]=s+.5|0,n[1]=100*a+.5|0,n[2]=100*u+.5|0),n},mt=function(t,e){var n,i,r,o=t.match(vt)||[],s=0,a=o.length?"":t;for(n=0;n<o.length;n++)i=o[n],r=t.substr(s,t.indexOf(i,s)-s),s+=r.length+i.length,i=pt(i,e),3===i.length&&i.push(1),a+=r+(e?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return a+t.substr(s)},vt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(h in ft)vt+="|"+h+"\\b";vt=new RegExp(vt+")","gi"),a.colorStringFilter=function(t){var e,n=t[0]+t[1];vt.test(n)&&(e=n.indexOf("hsl(")!==-1||n.indexOf("hsla(")!==-1,t[0]=mt(t[0],e),t[1]=mt(t[1],e)),vt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=a.colorStringFilter);var yt=function(t,e,n,i){if(null==t)return function(t){return t};var r,o=e?(t.match(vt)||[""])[0]:"",s=t.split(o).join("").match(x)||[],a=t.substr(0,t.indexOf(s[0])),u=")"===t.charAt(t.length-1)?")":"",l=t.indexOf(" ")!==-1?" ":",",h=s.length,c=h>0?s[0].replace(g,""):"";return h?r=e?function(t){var e,f,d,p;if("number"==typeof t)t+=c;else if(i&&L.test(t)){for(p=t.replace(L,"|").split("|"),d=0;d<p.length;d++)p[d]=r(p[d]);return p.join(",")}if(e=(t.match(vt)||[o])[0],f=t.split(e).join("").match(x)||[],d=f.length,h>d--)for(;++d<h;)f[d]=n?f[(d-1)/2|0]:s[d];return a+f.join(l)+l+e+u+(t.indexOf("inset")!==-1?" inset":"")}:function(t){var e,o,f;if("number"==typeof t)t+=c;else if(i&&L.test(t)){for(o=t.replace(L,"|").split("|"),f=0;f<o.length;f++)o[f]=r(o[f]);return o.join(",")}if(e=t.match(x)||[],f=e.length,h>f--)for(;++f<h;)e[f]=n?e[(f-1)/2|0]:s[f];return a+e.join(l)+u}:function(t){return t}},_t=function(t){return t=t.split(","),function(e,n,i,r,o,s,a){var u,l=(n+"").split(" ");for(a={},u=0;u<4;u++)a[t[u]]=l[u]=l[u]||l[(u-1)/2>>0];return r.parse(e,a,o,s)}},gt=(H._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,n,i,r,o,s=this.data,a=s.proxy,u=s.firstMPT,l=1e-6;u;)e=a[u.v],u.r?e=Math.round(e):e<l&&e>-l&&(e=0),u.t[u.p]=e,u=u._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod(a.rotation,this.t):a.rotation),1===t||0===t)for(u=s.firstMPT,o=1===t?"e":"b";u;){if(n=u.t,n.type){if(1===n.type){for(r=n.xs0+n.s+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n[o]=r}}else n[o]=n.s+n.xs0;u=u._next}},function(t,e,n,i,r){this.t=t,this.p=e,this.v=n,this.r=r,i&&(i._prev=this,this._next=i)}),bt=(H._parseToProxy=function(t,e,n,i,r,o){var s,a,u,l,h,c=i,f={},d={},p=n._transform,m=N;for(n._transform=null,N=e,i=h=n.parse(t,e,i,r),N=m,o&&(n._transform=p,c&&(c._prev=null,c._prev&&(c._prev._next=null)));i&&i!==c;){if(i.type<=1&&(a=i.p,d[a]=i.s+i.c,f[a]=i.s,o||(l=new gt(i,"s",a,l,i.r),i.c=0),1===i.type))for(s=i.l;--s>0;)u="xn"+s,a=i.p+"_"+u,d[a]=i.data[u],f[a]=i[u],o||(l=new gt(i,u,a,l,i.rxp[u]));i=i._next}return{proxy:f,end:d,firstMPT:l,pt:h}},H.CSSPropTween=function(t,e,i,r,s,a,u,l,h,c,f){this.t=t,this.p=e,this.s=i,this.c=r,this.n=u||e,t instanceof bt||o.push(this.n),this.r=l,this.type=a||0,h&&(this.pr=h,n=!0),this.b=void 0===c?i:c,this.e=void 0===f?i+r:f,s&&(this._next=s,s._prev=this)}),xt=function(t,e,n,i,r,o){var s=new bt(t,e,n,i-n,r,-1,o);return s.b=n,s.e=s.xs0=i,s},wt=a.parseComplex=function(t,e,n,i,r,o,s,u,l,h){n=n||o||"","function"==typeof i&&(i=i(_,y)),s=new bt(t,e,0,0,s,h?2:1,null,!1,u,n,i),i+="",r&&vt.test(i+n)&&(i=[n,i],a.colorStringFilter(i),n=i[0],i=i[1]);var f,d,p,m,v,x,w,T,S,M,E,P,O,A=n.split(", ").join(",").split(" "),C=i.split(", ").join(",").split(" "),I=A.length,R=c!==!1;for(i.indexOf(",")===-1&&n.indexOf(",")===-1||(A=A.join(" ").replace(L,", ").split(" "),C=C.join(" ").replace(L,", ").split(" "),I=A.length),I!==C.length&&(A=(o||"").split(" "),I=A.length),s.plugin=l,s.setRatio=h,vt.lastIndex=0,f=0;f<I;f++)if(m=A[f],v=C[f],T=parseFloat(m),T||0===T)s.appendXtra("",T,lt(v,T),v.replace(b,""),R&&v.indexOf("px")!==-1,!0);else if(r&&vt.test(m))P=v.indexOf(")")+1,P=")"+(P?v.substr(P):""),O=v.indexOf("hsl")!==-1&&W,m=pt(m,O),v=pt(v,O),S=m.length+v.length>6,S&&!W&&0===v[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(C[f]).join("transparent")):(W||(S=!1),O?s.appendXtra(S?"hsla(":"hsl(",m[0],lt(v[0],m[0]),",",!1,!0).appendXtra("",m[1],lt(v[1],m[1]),"%,",!1).appendXtra("",m[2],lt(v[2],m[2]),S?"%,":"%"+P,!1):s.appendXtra(S?"rgba(":"rgb(",m[0],v[0]-m[0],",",!0,!0).appendXtra("",m[1],v[1]-m[1],",",!0).appendXtra("",m[2],v[2]-m[2],S?",":P,!0),S&&(m=m.length<4?1:m[3],s.appendXtra("",m,(v.length<4?1:v[3])-m,P,!1))),vt.lastIndex=0;else if(x=m.match(g)){if(w=v.match(b),!w||w.length!==x.length)return s;for(p=0,d=0;d<x.length;d++)E=x[d],M=m.indexOf(E,p),s.appendXtra(m.substr(p,M-p),Number(E),lt(w[d],E),"",R&&"px"===m.substr(M+E.length,2),0===d),p=M+E.length;s["xs"+s.l]+=m.substr(p)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+v:v;if(i.indexOf("=")!==-1&&s.data){for(P=s.xs0+s.data.s,f=1;f<s.l;f++)P+=s["xs"+f]+s.data["xn"+f];s.e=P+s["xs"+f]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},Tt=9;for(h=bt.prototype,h.l=h.pr=0;--Tt>0;)h["xn"+Tt]=0,h["xs"+Tt]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,n,i,r,o){var s=this,a=s.l;return s["xs"+a]+=o&&(a||s["xs"+a])?" "+t:t||"",n||0===a||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=i||"",a>0?(s.data["xn"+a]=e+n,s.rxp["xn"+a]=r,s["xn"+a]=e,s.plugin||(s.xfirst=new bt(s,"xn"+a,e,n,s.xfirst||s,0,s.n,r,s.pr),s.xfirst.xs0=0),s):(s.data={s:e+n},s.rxp={},s.s=e,s.c=n,s.r=r,s)):(s["xs"+a]+=e+(i||""),s)};var St=function(t,e){e=e||{},this.p=e.prefix?J(t)||t:t,l[t]=l[this.p]=this,this.format=e.formatter||yt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},Mt=H._registerComplexSpecialProp=function(t,e,n){"object"!=typeof e&&(e={parser:n});var i,r,o=t.split(","),s=e.defaultValue;for(n=n||[s],i=0;i<o.length;i++)e.prefix=0===i&&e.prefix,e.defaultValue=n[i]||s,r=new St(o[i],e)},Et=H._registerPluginProp=function(t){if(!l[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";Mt(t,{parser:function(t,n,i,r,o,s,a){var h=u.com.greensock.plugins[e];return h?(h._cssRegister(),l[i].parse(t,n,i,r,o,s,a)):(Z("Error: "+e+" js file not loaded."),o)}})}};h=St.prototype,h.parseComplex=function(t,e,n,i,r,o){var s,a,u,l,h,c,f=this.keyword;if(this.multi&&(L.test(n)||L.test(e)?(a=e.replace(L,"|").split("|"),u=n.replace(L,"|").split("|")):f&&(a=[e],u=[n])),u){for(l=u.length>a.length?u.length:a.length,s=0;s<l;s++)e=a[s]=a[s]||this.dflt,n=u[s]=u[s]||this.dflt,f&&(h=e.indexOf(f),c=n.indexOf(f),h!==c&&(c===-1?a[s]=a[s].split(f).join(""):h===-1&&(a[s]+=" "+f)));e=a.join(", "),n=u.join(", ")}return wt(t,this.p,e,n,this.clrs,this.dflt,i,this.pr,r,o)},h.parse=function(t,e,n,i,o,s,a){return this.parseComplex(t.style,this.format(tt(t,this.p,r,!1,this.dflt)),this.format(e),o,s)},a.registerSpecialProp=function(t,e,n){Mt(t,{parser:function(t,i,r,o,s,a,u){var l=new bt(t,r,0,0,s,2,r,!1,n);return l.plugin=a,l.setRatio=e(t,i,o._tween,r),l},priority:n})},a.useSVGTransformAttr=!0;var Pt,Ot="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),At=J("transform"),Ct=K+"transform",It=J("transformOrigin"),Rt=null!==J("perspective"),Dt=H.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(a.defaultForce3D===!1||!Rt)&&(a.defaultForce3D||"auto")},kt=s.SVGElement,Lt=function(t,e,n){var i,r=z.createElementNS("http://www.w3.org/2000/svg",t),o=/([a-z])([A-Z])/g;for(i in n)r.setAttributeNS(null,i.replace(o,"$1-$2").toLowerCase(),n[i]);return e.appendChild(r),r},Ft=z.documentElement||{},jt=function(){var t,e,n,i=v||/Android/i.test(Y)&&!s.chrome;return z.createElementNS&&!i&&(t=Lt("svg",Ft),e=Lt("rect",t,{width:100,height:50,x:100}),n=e.getBoundingClientRect().width,e.style[It]="50% 50%",e.style[At]="scaleX(0.5)",i=n===e.getBoundingClientRect().width&&!(p&&Rt),Ft.removeChild(t)),i}(),Bt=function(t,e,n,i,r,o){var s,u,l,h,c,f,d,p,m,v,y,_,g,b,x=t._gsTransform,w=Xt(t,!0);x&&(g=x.xOrigin,b=x.yOrigin),(!i||(s=i.split(" ")).length<2)&&(d=t.getBBox(),0===d.x&&0===d.y&&d.width+d.height===0&&(d={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),e=ut(e).split(" "),s=[(e[0].indexOf("%")!==-1?parseFloat(e[0])/100*d.width:parseFloat(e[0]))+d.x,(e[1].indexOf("%")!==-1?parseFloat(e[1])/100*d.height:parseFloat(e[1]))+d.y]),n.xOrigin=h=parseFloat(s[0]),n.yOrigin=c=parseFloat(s[1]),i&&w!==Vt&&(f=w[0],d=w[1],p=w[2],m=w[3],v=w[4],y=w[5],_=f*m-d*p,_&&(u=h*(m/_)+c*(-p/_)+(p*y-m*v)/_,l=h*(-d/_)+c*(f/_)-(f*y-d*v)/_,h=n.xOrigin=s[0]=u,c=n.yOrigin=s[1]=l)),x&&(o&&(n.xOffset=x.xOffset,n.yOffset=x.yOffset,x=n),r||r!==!1&&a.defaultSmoothOrigin!==!1?(u=h-g,l=c-b,x.xOffset+=u*w[0]+l*w[2]-u,x.yOffset+=u*w[1]+l*w[3]-l):x.xOffset=x.yOffset=0),o||t.setAttribute("data-svg-origin",s.join(" "))},Nt=function(t){var e,n=V("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,o=this.style.cssText;if(Ft.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Nt}catch(t){}else this._originalGetBBox&&(e=this._originalGetBBox());return r?i.insertBefore(this,r):i.appendChild(this),Ft.removeChild(n),this.style.cssText=o,e},Ut=function(t){try{return t.getBBox()}catch(e){return Nt.call(t,!0)}},zt=function(t){return!(!(kt&&t.getCTM&&Ut(t))||t.parentNode&&!t.ownerSVGElement)},Vt=[1,0,0,1,0,0],Xt=function(t,e){var n,i,r,o,s,a,u=t._gsTransform||new Dt,l=1e5,h=t.style;if(At?i=tt(t,Ct,null,!0):t.currentStyle&&(i=t.currentStyle.filter.match(D),i=i&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),u.x||0,u.y||0].join(","):""),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,n&&At&&((a="none"===$(t).display)||!t.parentNode)&&(a&&(o=h.display,h.display="block"),t.parentNode||(s=1,Ft.appendChild(t)),i=tt(t,Ct,null,!0),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,o?h.display=o:a&&qt(h,"display"),s&&Ft.removeChild(t)),(u.svg||t.getCTM&&zt(t))&&(n&&(h[At]+"").indexOf("matrix")!==-1&&(i=h[At],n=0),r=t.getAttribute("transform"),n&&r&&(r.indexOf("matrix")!==-1?(i=r,n=0):r.indexOf("translate")!==-1&&(i="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",n=0))),n)return Vt;for(r=(i||"").match(g)||[],Tt=r.length;--Tt>-1;)o=Number(r[Tt]),r[Tt]=(s=o-(o|=0))?(s*l+(s<0?-.5:.5)|0)/l+o:o;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Gt=H.getTransform=function(t,n,i,r){if(t._gsTransform&&i&&!r)return t._gsTransform;var o,s,u,l,h,c,f=i?t._gsTransform||new Dt:new Dt,d=f.scaleX<0,p=2e-5,m=1e5,v=Rt?parseFloat(tt(t,It,n,!1,"0 0 0").split(" ")[2])||f.zOrigin||0:0,y=parseFloat(a.defaultTransformPerspective)||0;if(f.svg=!(!t.getCTM||!zt(t)),f.svg&&(Bt(t,tt(t,It,n,!1,"50% 50%")+"",f,t.getAttribute("data-svg-origin")),Pt=a.useSVGTransformAttr||jt),o=Xt(t),o!==Vt){if(16===o.length){var _,g,b,x,w,T=o[0],S=o[1],M=o[2],E=o[3],P=o[4],O=o[5],A=o[6],C=o[7],I=o[8],R=o[9],D=o[10],k=o[12],L=o[13],F=o[14],j=o[11],N=Math.atan2(A,D);f.zOrigin&&(F=-f.zOrigin,k=I*F-o[12],L=R*F-o[13],F=D*F+f.zOrigin-o[14]),f.rotationX=N*B,N&&(x=Math.cos(-N),w=Math.sin(-N),_=P*x+I*w,g=O*x+R*w,b=A*x+D*w,I=P*-w+I*x,R=O*-w+R*x,D=A*-w+D*x,j=C*-w+j*x,P=_,O=g,A=b),N=Math.atan2(-M,D),f.rotationY=N*B,N&&(x=Math.cos(-N),w=Math.sin(-N),_=T*x-I*w,g=S*x-R*w,b=M*x-D*w,R=S*w+R*x,D=M*w+D*x,j=E*w+j*x,T=_,S=g,M=b),N=Math.atan2(S,T),f.rotation=N*B,N&&(x=Math.cos(-N),w=Math.sin(-N),T=T*x+P*w,g=S*x+O*w,O=S*-w+O*x,A=M*-w+A*x,S=g),f.rotationX&&Math.abs(f.rotationX)+Math.abs(f.rotation)>359.9&&(f.rotationX=f.rotation=0,f.rotationY=180-f.rotationY),f.scaleX=(Math.sqrt(T*T+S*S)*m+.5|0)/m,f.scaleY=(Math.sqrt(O*O+R*R)*m+.5|0)/m,f.scaleZ=(Math.sqrt(A*A+D*D)*m+.5|0)/m,f.rotationX||f.rotationY?f.skewX=0:(f.skewX=P||O?Math.atan2(P,O)*B+f.rotation:f.skewX||0,Math.abs(f.skewX)>90&&Math.abs(f.skewX)<270&&(d?(f.scaleX*=-1,f.skewX+=f.rotation<=0?180:-180,f.rotation+=f.rotation<=0?180:-180):(f.scaleY*=-1,f.skewX+=f.skewX<=0?180:-180))),f.perspective=j?1/(j<0?-j:j):0,f.x=k,f.y=L,f.z=F,f.svg&&(f.x-=f.xOrigin-(f.xOrigin*T-f.yOrigin*P),f.y-=f.yOrigin-(f.yOrigin*S-f.xOrigin*O))}else if(!Rt||r||!o.length||f.x!==o[4]||f.y!==o[5]||!f.rotationX&&!f.rotationY){var U=o.length>=6,z=U?o[0]:1,V=o[1]||0,X=o[2]||0,G=U?o[3]:1;f.x=o[4]||0,f.y=o[5]||0,u=Math.sqrt(z*z+V*V),l=Math.sqrt(G*G+X*X),h=z||V?Math.atan2(V,z)*B:f.rotation||0,c=X||G?Math.atan2(X,G)*B+h:f.skewX||0,Math.abs(c)>90&&Math.abs(c)<270&&(d?(u*=-1,c+=h<=0?180:-180,h+=h<=0?180:-180):(l*=-1,c+=c<=0?180:-180)),f.scaleX=u,f.scaleY=l,f.rotation=h,f.skewX=c,Rt&&(f.rotationX=f.rotationY=f.z=0,f.perspective=y,f.scaleZ=1),f.svg&&(f.x-=f.xOrigin-(f.xOrigin*z+f.yOrigin*X),f.y-=f.yOrigin-(f.xOrigin*V+f.yOrigin*G))}f.zOrigin=v;for(s in f)f[s]<p&&f[s]>-p&&(f[s]=0)}return i&&(t._gsTransform=f,f.svg&&(Pt&&t.style[At]?e.delayedCall(.001,function(){qt(t.style,At)}):!Pt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),f},Ht=function(t){var e,n,i=this.data,r=-i.rotation*j,o=r+i.skewX*j,s=1e5,a=(Math.cos(r)*i.scaleX*s|0)/s,u=(Math.sin(r)*i.scaleX*s|0)/s,l=(Math.sin(o)*-i.scaleY*s|0)/s,h=(Math.cos(o)*i.scaleY*s|0)/s,c=this.t.style,f=this.t.currentStyle;if(f){n=u,u=-l,l=-n,e=f.filter,c.filter="";var d,p,m=this.t.offsetWidth,y=this.t.offsetHeight,_="absolute"!==f.position,g="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+u+", M21="+l+", M22="+h,b=i.x+m*i.xPercent/100,x=i.y+y*i.yPercent/100;if(null!=i.ox&&(d=(i.oxp?m*i.ox*.01:i.ox)-m/2,p=(i.oyp?y*i.oy*.01:i.oy)-y/2,b+=d-(d*a+p*u),x+=p-(d*l+p*h)),_?(d=m/2,p=y/2,g+=", Dx="+(d-(d*a+p*u)+b)+", Dy="+(p-(d*l+p*h)+x)+")"):g+=", sizingMethod='auto expand')",e.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1?c.filter=e.replace(k,g):c.filter=g+" "+e,0!==t&&1!==t||1===a&&0===u&&0===l&&1===h&&(_&&g.indexOf("Dx=0, Dy=0")===-1||S.test(e)&&100!==parseFloat(RegExp.$1)||e.indexOf(e.indexOf("Alpha"))===-1&&c.removeAttribute("filter")),!_){var w,M,E,P=v<8?1:-1;for(d=i.ieOffsetX||0,p=i.ieOffsetY||0,i.ieOffsetX=Math.round((m-((a<0?-a:a)*m+(u<0?-u:u)*y))/2+b),i.ieOffsetY=Math.round((y-((h<0?-h:h)*y+(l<0?-l:l)*m))/2+x),Tt=0;Tt<4;Tt++)M=st[Tt],w=f[M],n=w.indexOf("px")!==-1?parseFloat(w):et(this.t,M,parseFloat(w),w.replace(T,""))||0,E=n!==i[M]?Tt<2?-i.ieOffsetX:-i.ieOffsetY:Tt<2?d-i.ieOffsetX:p-i.ieOffsetY,c[M]=(i[M]=Math.round(n-E*(0===Tt||2===Tt?1:P)))+"px"}}},Yt=H.set3DTransformRatio=H.setTransformRatio=function(t){var e,n,i,r,o,s,a,u,l,h,c,f,d,m,v,y,_,g,b,x,w,T,S,M=this.data,E=this.t.style,P=M.rotation,O=M.rotationX,A=M.rotationY,C=M.scaleX,I=M.scaleY,R=M.scaleZ,D=M.x,k=M.y,L=M.z,F=M.svg,B=M.perspective,N=M.force3D,U=M.skewY,z=M.skewX;if(U&&(z+=U,P+=U),((1===t||0===t)&&"auto"===N&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!N)&&!L&&!B&&!A&&!O&&1===R||Pt&&F||!Rt)return void(P||z||F?(P*=j,T=z*j,S=1e5,n=Math.cos(P)*C,o=Math.sin(P)*C,i=Math.sin(P-T)*-I,s=Math.cos(P-T)*I,T&&"simple"===M.skewType&&(e=Math.tan(T-U*j),e=Math.sqrt(1+e*e),i*=e,s*=e,U&&(e=Math.tan(U*j),e=Math.sqrt(1+e*e),n*=e,o*=e)),F&&(D+=M.xOrigin-(M.xOrigin*n+M.yOrigin*i)+M.xOffset,k+=M.yOrigin-(M.xOrigin*o+M.yOrigin*s)+M.yOffset,Pt&&(M.xPercent||M.yPercent)&&(v=this.t.getBBox(),D+=.01*M.xPercent*v.width,k+=.01*M.yPercent*v.height),v=1e-6,D<v&&D>-v&&(D=0),k<v&&k>-v&&(k=0)),b=(n*S|0)/S+","+(o*S|0)/S+","+(i*S|0)/S+","+(s*S|0)/S+","+D+","+k+")",F&&Pt?this.t.setAttribute("transform","matrix("+b):E[At]=(M.xPercent||M.yPercent?"translate("+M.xPercent+"%,"+M.yPercent+"%) matrix(":"matrix(")+b):E[At]=(M.xPercent||M.yPercent?"translate("+M.xPercent+"%,"+M.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+I+","+D+","+k+")");if(p&&(v=1e-4,C<v&&C>-v&&(C=R=2e-5),I<v&&I>-v&&(I=R=2e-5),!B||M.z||M.rotationX||M.rotationY||(B=0)),P||z)P*=j,y=n=Math.cos(P),_=o=Math.sin(P),z&&(P-=z*j,y=Math.cos(P),_=Math.sin(P),"simple"===M.skewType&&(e=Math.tan((z-U)*j),e=Math.sqrt(1+e*e),y*=e,_*=e,M.skewY&&(e=Math.tan(U*j),e=Math.sqrt(1+e*e),n*=e,o*=e))),i=-_,s=y;else{if(!(A||O||1!==R||B||F))return void(E[At]=(M.xPercent||M.yPercent?"translate("+M.xPercent+"%,"+M.yPercent+"%) translate3d(":"translate3d(")+D+"px,"+k+"px,"+L+"px)"+(1!==C||1!==I?" scale("+C+","+I+")":""));n=s=1,i=o=0}h=1,r=a=u=l=c=f=0,d=B?-1/B:0,m=M.zOrigin,v=1e-6,x=",",w="0",P=A*j,P&&(y=Math.cos(P),_=Math.sin(P),u=-_,c=d*-_,r=n*_,a=o*_,h=y,d*=y,n*=y,o*=y),P=O*j,P&&(y=Math.cos(P),_=Math.sin(P),e=i*y+r*_,g=s*y+a*_,l=h*_,f=d*_,r=i*-_+r*y,a=s*-_+a*y,h*=y,d*=y,i=e,s=g),1!==R&&(r*=R,a*=R,h*=R,d*=R),1!==I&&(i*=I,s*=I,l*=I,f*=I),1!==C&&(n*=C,o*=C,u*=C,c*=C),(m||F)&&(m&&(D+=r*-m,k+=a*-m,L+=h*-m+m),F&&(D+=M.xOrigin-(M.xOrigin*n+M.yOrigin*i)+M.xOffset,k+=M.yOrigin-(M.xOrigin*o+M.yOrigin*s)+M.yOffset),D<v&&D>-v&&(D=w),k<v&&k>-v&&(k=w),L<v&&L>-v&&(L=0)),b=M.xPercent||M.yPercent?"translate("+M.xPercent+"%,"+M.yPercent+"%) matrix3d(":"matrix3d(",b+=(n<v&&n>-v?w:n)+x+(o<v&&o>-v?w:o)+x+(u<v&&u>-v?w:u),b+=x+(c<v&&c>-v?w:c)+x+(i<v&&i>-v?w:i)+x+(s<v&&s>-v?w:s),O||A||1!==R?(b+=x+(l<v&&l>-v?w:l)+x+(f<v&&f>-v?w:f)+x+(r<v&&r>-v?w:r),b+=x+(a<v&&a>-v?w:a)+x+(h<v&&h>-v?w:h)+x+(d<v&&d>-v?w:d)+x):b+=",0,0,0,0,1,0,",b+=D+x+k+x+L+x+(B?1+-L/B:1)+")",E[At]=b};h=Dt.prototype,h.x=h.y=h.z=h.skewX=h.skewY=h.rotation=h.rotationX=h.rotationY=h.zOrigin=h.xPercent=h.yPercent=h.xOffset=h.yOffset=0,h.scaleX=h.scaleY=h.scaleZ=1,Mt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,n,i,o,s,u){if(i._lastParsedTransform===u)return o;i._lastParsedTransform=u;var l,h=u.scale&&"function"==typeof u.scale?u.scale:0;"function"==typeof u[n]&&(l=u[n],u[n]=e),h&&(u.scale=h(_,t));var c,f,d,p,m,v,g,b,x,w=t._gsTransform,T=t.style,S=1e-6,M=Ot.length,E=u,P={},O="transformOrigin",A=Gt(t,r,!0,E.parseTransform),C=E.transform&&("function"==typeof E.transform?E.transform(_,y):E.transform);if(i._transform=A,C&&"string"==typeof C&&At)f=X.style,f[At]=C,f.display="block",f.position="absolute",z.body.appendChild(X),c=Gt(X,null,!1),A.svg&&(v=A.xOrigin,g=A.yOrigin,c.x-=A.xOffset,c.y-=A.yOffset,(E.transformOrigin||E.svgOrigin)&&(C={},Bt(t,ut(E.transformOrigin),C,E.svgOrigin,E.smoothOrigin,!0),v=C.xOrigin,g=C.yOrigin,c.x-=C.xOffset-A.xOffset,c.y-=C.yOffset-A.yOffset),(v||g)&&(b=Xt(X,!0),c.x-=v-(v*b[0]+g*b[2]),c.y-=g-(v*b[1]+g*b[3]))),z.body.removeChild(X),c.perspective||(c.perspective=A.perspective),null!=E.xPercent&&(c.xPercent=ht(E.xPercent,A.xPercent)),null!=E.yPercent&&(c.yPercent=ht(E.yPercent,A.yPercent));else if("object"==typeof E){if(c={scaleX:ht(null!=E.scaleX?E.scaleX:E.scale,A.scaleX),scaleY:ht(null!=E.scaleY?E.scaleY:E.scale,A.scaleY),scaleZ:ht(E.scaleZ,A.scaleZ),x:ht(E.x,A.x),y:ht(E.y,A.y),z:ht(E.z,A.z),xPercent:ht(E.xPercent,A.xPercent),yPercent:ht(E.yPercent,A.yPercent),perspective:ht(E.transformPerspective,A.perspective)},m=E.directionalRotation,null!=m)if("object"==typeof m)for(f in m)E[f]=m[f];else E.rotation=m;
"string"==typeof E.x&&E.x.indexOf("%")!==-1&&(c.x=0,c.xPercent=ht(E.x,A.xPercent)),"string"==typeof E.y&&E.y.indexOf("%")!==-1&&(c.y=0,c.yPercent=ht(E.y,A.yPercent)),c.rotation=ct("rotation"in E?E.rotation:"shortRotation"in E?E.shortRotation+"_short":"rotationZ"in E?E.rotationZ:A.rotation,A.rotation,"rotation",P),Rt&&(c.rotationX=ct("rotationX"in E?E.rotationX:"shortRotationX"in E?E.shortRotationX+"_short":A.rotationX||0,A.rotationX,"rotationX",P),c.rotationY=ct("rotationY"in E?E.rotationY:"shortRotationY"in E?E.shortRotationY+"_short":A.rotationY||0,A.rotationY,"rotationY",P)),c.skewX=ct(E.skewX,A.skewX),c.skewY=ct(E.skewY,A.skewY)}for(Rt&&null!=E.force3D&&(A.force3D=E.force3D,p=!0),A.skewType=E.skewType||A.skewType||a.defaultSkewType,d=A.force3D||A.z||A.rotationX||A.rotationY||c.z||c.rotationX||c.rotationY||c.perspective,d||null==E.scale||(c.scaleZ=1);--M>-1;)x=Ot[M],C=c[x]-A[x],(C>S||C<-S||null!=E[x]||null!=N[x])&&(p=!0,o=new bt(A,x,A[x],C,o),x in P&&(o.e=P[x]),o.xs0=0,o.plugin=s,i._overwriteProps.push(o.n));return C=E.transformOrigin,A.svg&&(C||E.svgOrigin)&&(v=A.xOffset,g=A.yOffset,Bt(t,ut(C),c,E.svgOrigin,E.smoothOrigin),o=xt(A,"xOrigin",(w?A:c).xOrigin,c.xOrigin,o,O),o=xt(A,"yOrigin",(w?A:c).yOrigin,c.yOrigin,o,O),v===A.xOffset&&g===A.yOffset||(o=xt(A,"xOffset",w?v:A.xOffset,A.xOffset,o,O),o=xt(A,"yOffset",w?g:A.yOffset,A.yOffset,o,O)),C="0px 0px"),(C||Rt&&d&&A.zOrigin)&&(At?(p=!0,x=It,C=(C||tt(t,x,r,!1,"50% 50%"))+"",o=new bt(T,x,0,0,o,-1,O),o.b=T[x],o.plugin=s,Rt?(f=A.zOrigin,C=C.split(" "),A.zOrigin=(C.length>2&&(0===f||"0px"!==C[2])?parseFloat(C[2]):f)||0,o.xs0=o.e=C[0]+" "+(C[1]||"50%")+" 0px",o=new bt(A,"zOrigin",0,0,o,-1,o.n),o.b=f,o.xs0=o.e=A.zOrigin):o.xs0=o.e=C):ut(C+"",A)),p&&(i._transformType=A.svg&&Pt||!d&&3!==this._transformType?2:3),l&&(u[n]=l),h&&(u.scale=h),o},prefix:!0}),Mt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Mt("borderRadius",{defaultValue:"0px",parser:function(t,e,n,o,s,a){e=this.format(e);var u,l,h,c,f,d,p,m,v,y,_,g,b,x,w,T,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],M=t.style;for(v=parseFloat(t.offsetWidth),y=parseFloat(t.offsetHeight),u=e.split(" "),l=0;l<S.length;l++)this.p.indexOf("border")&&(S[l]=J(S[l])),f=c=tt(t,S[l],r,!1,"0px"),f.indexOf(" ")!==-1&&(c=f.split(" "),f=c[0],c=c[1]),d=h=u[l],p=parseFloat(f),g=f.substr((p+"").length),b="="===d.charAt(1),b?(m=parseInt(d.charAt(0)+"1",10),d=d.substr(2),m*=parseFloat(d),_=d.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(d),_=d.substr((m+"").length)),""===_&&(_=i[n]||g),_!==g&&(x=et(t,"borderLeft",p,g),w=et(t,"borderTop",p,g),"%"===_?(f=x/v*100+"%",c=w/y*100+"%"):"em"===_?(T=et(t,"borderLeft",1,"em"),f=x/T+"em",c=w/T+"em"):(f=x+"px",c=w+"px"),b&&(d=parseFloat(f)+m+_,h=parseFloat(c)+m+_)),s=wt(M,S[l],f+" "+c,d+" "+h,!1,"0px",s);return s},prefix:!0,formatter:yt("0px 0px 0px 0px",!1,!0)}),Mt("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,n,i,o,s){return wt(t.style,n,this.format(tt(t,n,r,!1,"0px 0px")),this.format(e),!1,"0px",o)},prefix:!0,formatter:yt("0px 0px",!1,!0)}),Mt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,n,i,o,s){var a,u,l,h,c,f,d="background-position",p=r||$(t,null),m=this.format((p?v?p.getPropertyValue(d+"-x")+" "+p.getPropertyValue(d+"-y"):p.getPropertyValue(d):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),y=this.format(e);if(m.indexOf("%")!==-1!=(y.indexOf("%")!==-1)&&y.split(",").length<2&&(f=tt(t,"backgroundImage").replace(C,""),f&&"none"!==f)){for(a=m.split(" "),u=y.split(" "),G.setAttribute("src",f),l=2;--l>-1;)m=a[l],h=m.indexOf("%")!==-1,h!==(u[l].indexOf("%")!==-1)&&(c=0===l?t.offsetWidth-G.width:t.offsetHeight-G.height,a[l]=h?parseFloat(m)/100*c+"px":parseFloat(m)/c*100+"%");m=a.join(" ")}return this.parseComplex(t.style,m,y,o,s)},formatter:ut}),Mt("backgroundSize",{defaultValue:"0 0",formatter:function(t){return t+="",ut(t.indexOf(" ")===-1?t+" "+t:t)}}),Mt("perspective",{defaultValue:"0px",prefix:!0}),Mt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Mt("transformStyle",{prefix:!0}),Mt("backfaceVisibility",{prefix:!0}),Mt("userSelect",{prefix:!0}),Mt("margin",{parser:_t("marginTop,marginRight,marginBottom,marginLeft")}),Mt("padding",{parser:_t("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Mt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,n,i,o,s){var a,u,l;return v<9?(u=t.currentStyle,l=v<8?" ":",",a="rect("+u.clipTop+l+u.clipRight+l+u.clipBottom+l+u.clipLeft+")",e=this.format(e).split(",").join(l)):(a=this.format(tt(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,o,s)}}),Mt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Mt("autoRound,strictUnits",{parser:function(t,e,n,i,r){return r}}),Mt("border",{defaultValue:"0px solid #000",parser:function(t,e,n,i,o,s){var a=tt(t,"borderTopWidth",r,!1,"0px"),u=this.format(e).split(" "),l=u[0].replace(T,"");return"px"!==l&&(a=parseFloat(a)/et(t,"borderTopWidth",1,l)+l),this.parseComplex(t.style,this.format(a+" "+tt(t,"borderTopStyle",r,!1,"solid")+" "+tt(t,"borderTopColor",r,!1,"#000")),u.join(" "),o,s)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(vt)||["#000"])[0]}}),Mt("borderWidth",{parser:_t("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Mt("float,cssFloat,styleFloat",{parser:function(t,e,n,i,r,o){var s=t.style,a="cssFloat"in s?"cssFloat":"styleFloat";return new bt(s,a,0,0,r,-1,n,!1,0,s[a],e)}});var Wt=function(t){var e,n=this.t,i=n.filter||tt(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(i.indexOf("atrix(")===-1&&i.indexOf("radient(")===-1&&i.indexOf("oader(")===-1?(n.removeAttribute("filter"),e=!tt(this.data,"filter")):(n.filter=i.replace(E,""),e=!0)),e||(this.xn1&&(n.filter=i=i||"alpha(opacity="+r+")"),i.indexOf("pacity")===-1?0===r&&this.xn1||(n.filter=i+" alpha(opacity="+r+")"):n.filter=i.replace(S,"opacity="+r))};Mt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,n,i,o,s){var a=parseFloat(tt(t,"opacity",r,!1,"1")),u=t.style,l="autoAlpha"===n;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),l&&1===a&&"hidden"===tt(t,"visibility",r)&&0!==e&&(a=0),W?o=new bt(u,"opacity",a,e-a,o):(o=new bt(u,"opacity",100*a,100*(e-a),o),o.xn1=l?1:0,u.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=t,o.plugin=s,o.setRatio=Wt),l&&(o=new bt(u,"visibility",0,0,o,-1,null,!1,0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),o.xs0="inherit",i._overwriteProps.push(o.n),i._overwriteProps.push(n)),o}});var qt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(O,"-$1").toLowerCase())):t.removeAttribute(e))},Zt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,n=this.t.style;e;)e.v?n[e.p]=e.v:qt(n,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Mt("className",{parser:function(t,e,i,o,s,a,u){var l,h,c,f,d,p=t.getAttribute("class")||"",m=t.style.cssText;if(s=o._classNamePT=new bt(t,i,0,0,s,2),s.setRatio=Zt,s.pr=-11,n=!0,s.b=p,h=it(t,r),c=t._gsClassPT){for(f={},d=c.data;d;)f[d.p]=1,d=d._next;c.setRatio(1)}return t._gsClassPT=s,s.e="="!==e.charAt(1)?e:p.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",s.e),l=rt(t,h,it(t),u,f),t.setAttribute("class",p),s.data=l.firstMPT,t.style.cssText=m,s=s.xfirst=o.parse(t,l.difs,s,a)}});var Kt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,n,i,r,o,s=this.t.style,a=l.transform.parse;if("all"===this.e)s.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),i=e.length;--i>-1;)n=e[i],l[n]&&(l[n].parse===a?r=!0:n="transformOrigin"===n?It:l[n].p),qt(s,n);r&&(qt(s,At),o=this.t._gsTransform,o&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Mt("clearProps",{parser:function(t,e,i,r,o){return o=new bt(t,i,0,0,o,2),o.setRatio=Kt,o.e=e,o.pr=-10,o.data=r._tween,n=!0,o}}),h="bezier,throwProps,physicsProps,physics2D".split(","),Tt=h.length;Tt--;)Et(h[Tt]);h=a.prototype,h._firstPT=h._lastParsedTransform=h._transform=null,h._onInitTween=function(t,e,s,u){if(!t.nodeType)return!1;this._target=y=t,this._tween=s,this._vars=e,_=u,c=e.autoRound,n=!1,i=e.suffixMap||a.suffixMap,r=$(t,""),o=this._overwriteProps;var h,p,v,g,b,x,w,T,S,E=t.style;if(f&&""===E.zIndex&&(h=tt(t,"zIndex",r),"auto"!==h&&""!==h||this._addLazySet(E,"zIndex",0)),"string"==typeof e&&(g=E.cssText,h=it(t,r),E.cssText=g+";"+e,h=rt(t,h,it(t)).difs,!W&&M.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,E.cssText=g),e.className?this._firstPT=p=l.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=p=this.parse(t,e,null),this._transformType){for(S=3===this._transformType,At?d&&(f=!0,""===E.zIndex&&(w=tt(t,"zIndex",r),"auto"!==w&&""!==w||this._addLazySet(E,"zIndex",0)),m&&this._addLazySet(E,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(S?"visible":"hidden"))):E.zoom=1,v=p;v&&v._next;)v=v._next;T=new bt(t,"transform",0,0,null,2),this._linkCSSP(T,null,v),T.setRatio=At?Yt:Ht,T.data=this._transform||Gt(t,r,!0),T.tween=s,T.pr=-1,o.pop()}if(n){for(;p;){for(x=p._next,v=g;v&&v.pr>p.pr;)v=v._next;(p._prev=v?v._prev:b)?p._prev._next=p:g=p,(p._next=v)?v._prev=p:b=p,p=x}this._firstPT=g}return!0},h.parse=function(t,e,n,o){var s,a,u,h,f,d,p,m,v,g,b=t.style;for(s in e)d=e[s],"function"==typeof d&&(d=d(_,y)),a=l[s],a?n=a.parse(t,d,s,this,n,o,e):(f=tt(t,s,r)+"",v="string"==typeof d,"color"===s||"fill"===s||"stroke"===s||s.indexOf("Color")!==-1||v&&P.test(d)?(v||(d=pt(d),d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"),n=wt(b,s,f,d,!0,"transparent",n,0,o)):v&&F.test(d)?n=wt(b,s,f,d,!0,null,n,0,o):(u=parseFloat(f),p=u||0===u?f.substr((u+"").length):"",""!==f&&"auto"!==f||("width"===s||"height"===s?(u=at(t,s,r),p="px"):"left"===s||"top"===s?(u=nt(t,s,r),p="px"):(u="opacity"!==s?0:1,p="")),g=v&&"="===d.charAt(1),g?(h=parseInt(d.charAt(0)+"1",10),d=d.substr(2),h*=parseFloat(d),m=d.replace(T,"")):(h=parseFloat(d),m=v?d.replace(T,""):""),""===m&&(m=s in i?i[s]:p),d=h||0===h?(g?h+u:h)+m:e[s],p!==m&&""!==m&&(h||0===h)&&u&&(u=et(t,s,u,p),"%"===m?(u/=et(t,s,100,"%")/100,e.strictUnits!==!0&&(f=u+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?u/=et(t,s,1,m):"px"!==m&&(h=et(t,s,h,m),m="px"),g&&(h||0===h)&&(d=h+u+m)),g&&(h+=u),!u&&0!==u||!h&&0!==h?void 0!==b[s]&&(d||d+""!="NaN"&&null!=d)?(n=new bt(b,s,h||u||0,0,n,-1,s,!1,0,f,d),n.xs0="none"!==d||"display"!==s&&s.indexOf("Style")===-1?d:f):Z("invalid "+s+" tween value: "+e[s]):(n=new bt(b,s,u,h-u,n,0,s,c!==!1&&("px"===m||"zIndex"===s),0,f,d),n.xs0=m))),o&&n&&!n.plugin&&(n.plugin=o);return n},h.setRatio=function(t){var e,n,i,r=this._firstPT,o=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):e<o&&e>-o&&(e=0),r.type)if(1===r.type)if(i=r.l,2===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}else r.type===-1?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&r.type!==-1)if(e=Math.round(r.s+r.c),r.type){if(1===r.type){for(i=r.l,n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},h._enableTransforms=function(t){this._transform=this._transform||Gt(this._target,r,!0),this._transformType=this._transform.svg&&Pt||!t&&3!==this._transformType?2:3};var Qt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};h._addLazySet=function(t,e,n){var i=this._firstPT=new bt(t,e,0,0,this._firstPT,2);i.e=n,i.setRatio=Qt,i.data=this},h._linkCSSP=function(t,e,n,i){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,i=!0),n?n._next=t:i||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=n),t},h._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},h._kill=function(e){var n,i,r,o=e;if(e.autoAlpha||e.alpha){o={};for(i in e)o[i]=e[i];o.opacity=1,o.autoAlpha&&(o.visibility=1)}for(e.className&&(n=this._classNamePT)&&(r=n.xfirst,r&&r._prev?this._linkCSSP(r._prev,n._next,r._prev._prev):r===this._firstPT&&(this._firstPT=n._next),n._next&&this._linkCSSP(n._next,n._next._next,r._prev),this._classNamePT=null),n=this._firstPT;n;)n.plugin&&n.plugin!==i&&n.plugin._kill&&(n.plugin._kill(e),i=n.plugin),n=n._next;return t.prototype._kill.call(this,o)};var Jt=function(t,e,n){var i,r,o,s;if(t.slice)for(r=t.length;--r>-1;)Jt(t[r],e,n);else for(i=t.childNodes,r=i.length;--r>-1;)o=i[r],s=o.type,o.style&&(e.push(it(o)),n&&n.push(o)),1!==s&&9!==s&&11!==s||!o.childNodes.length||Jt(o,e,n)};return a.cascadeTo=function(t,n,i){var r,o,s,a,u=e.to(t,n,i),l=[u],h=[],c=[],f=[],d=e._internals.reservedProps;for(t=u._targets||u.target,Jt(t,h,f),u.render(n,!0,!0),Jt(t,c),u.render(0,!0,!0),u._enabled(!0),r=f.length;--r>-1;)if(o=rt(f[r],h[r],c[r]),o.firstMPT){o=o.difs;for(s in i)d[s]&&(o[s]=i[s]);a={};for(s in o)a[s]=h[r][s];l.push(e.fromTo(f[r],n,a,o))}return l},t.activate([a]),a},!0),function(){var t=s._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,n){return this._tween=n,!0}}),e=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},n=t.prototype;n._onInitAllProps=function(){for(var t,n,i,r=this._tween,o=r.vars.roundProps.join?r.vars.roundProps:r.vars.roundProps.split(","),s=o.length,a={},u=r._propLookup.roundProps;--s>-1;)a[o[s]]=Math.round;for(s=o.length;--s>-1;)for(t=o[s],n=r._firstPT;n;)i=n._next,n.pg?n.t._mod(a):n.n===t&&(2===n.f&&n.t?e(n.t._firstPT):(this._add(n.t,t,n.s,n.c),i&&(i._prev=n._prev),n._prev?n._prev._next=i:r._firstPT===n&&(r._firstPT=i),n._next=n._prev=null,r._propLookup[t]=u)),n=i;return!1},n._add=function(t,e,n,i){this._addTween(t,e,n,n+i,e,Math.round),this._overwriteProps.push(e)}}(),function(){s._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(t,e,n,i){var r,o;if("function"!=typeof t.setAttribute)return!1;for(r in e)o=e[r],"function"==typeof o&&(o=o(i,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",o+"",r,!1,r),this._overwriteProps.push(r);return!0}})}(),s._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(t,e,n,i){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,o,s,a,u,l,h=e.useRadians===!0?2*Math.PI:360,c=1e-6;for(r in e)"useRadians"!==r&&(a=e[r],"function"==typeof a&&(a=a(i,t)),l=(a+"").split("_"),o=l[0],s=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),a=this.finals[r]="string"==typeof o&&"="===o.charAt(1)?s+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0,u=a-s,l.length&&(o=l.join("_"),o.indexOf("short")!==-1&&(u%=h,u!==u%(h/2)&&(u=u<0?u+h:u-h)),o.indexOf("_cw")!==-1&&u<0?u=(u+9999999999*h)%h-(u/h|0)*h:o.indexOf("ccw")!==-1&&u>0&&(u=(u-9999999999*h)%h-(u/h|0)*h)),(u>c||u<-c)&&(this._addTween(t,r,s,s+u,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,s._gsDefine("easing.Back",["easing.Ease"],function(t){var e,n,i,r=s.GreenSockGlobals||s,o=r.com.greensock,a=2*Math.PI,u=Math.PI/2,l=o._class,h=function(e,n){var i=l("easing."+e,function(){},!0),r=i.prototype=new t;return r.constructor=i,r.getRatio=n,i},c=t.register||function(){},f=function(t,e,n,i,r){var o=l("easing."+t,{easeOut:new e,easeIn:new n,easeInOut:new i},!0);return c(o,t),o},d=function(t,e,n){this.t=t,this.v=e,n&&(this.next=n,n.prev=this,this.c=n.v-e,this.gap=n.t-t)},p=function(e,n){var i=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=i.prototype=new t;return r.constructor=i,r.getRatio=n,r.config=function(t){return new i(t)},i},m=f("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),v=l("easing.SlowMo",function(t,e,n){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=n===!0},!0),y=v.prototype=new t;return y.constructor=v,y.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},v.ease=new v(.7,.7),y.config=v.config=function(t,e,n){return new v(t,e,n)},e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),y=e.prototype=new t,y.constructor=e,y.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},y.config=e.config=function(t){return new e(t)},n=l("easing.RoughEase",function(e){e=e||{};for(var n,i,r,o,s,a,u=e.taper||"none",l=[],h=0,c=0|(e.points||20),f=c,p=e.randomize!==!1,m=e.clamp===!0,v=e.template instanceof t?e.template:null,y="number"==typeof e.strength?.4*e.strength:.4;--f>-1;)n=p?Math.random():1/c*f,i=v?v.getRatio(n):n,"none"===u?r=y:"out"===u?(o=1-n,r=o*o*y):"in"===u?r=n*n*y:n<.5?(o=2*n,r=o*o*.5*y):(o=2*(1-n),r=o*o*.5*y),p?i+=Math.random()*r-.5*r:f%2?i+=.5*r:i-=.5*r,m&&(i>1?i=1:i<0&&(i=0)),l[h++]={x:n,y:i};for(l.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),f=c;--f>-1;)s=l[f],a=new d(s.x,s.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),y=n.prototype=new t,y.constructor=n,y.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},y.config=function(t){return new n(t)},n.ease=new n,f("Bounce",h("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),h("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),h("BounceInOut",function(t){var e=t<.5;return t=e?1-2*t:2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),f("Circ",h("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),h("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),h("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),i=function(e,n,i){var r=l("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||i)/(t<1?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),o=r.prototype=new t;return o.constructor=r,o.getRatio=n,o.config=function(t,e){return new r(t,e)},r},f("Elastic",i("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),i("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),i("ElasticInOut",function(t){return(t*=2)<1?-.5*(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),f("Expo",h("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),h("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),h("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),f("Sine",h("SineOut",function(t){return Math.sin(t*u)}),h("SineIn",function(t){return-Math.cos(t*u)+1}),h("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(r.SlowMo,"SlowMo","ease,"),c(n,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),m},!0)}),s._gsDefine&&s._gsQueue.pop()(),function(o,s){"use strict";var a={},u=o.document,l=o.GreenSockGlobals=o.GreenSockGlobals||o;if(!l.TweenLite){var h,c,f,d,p,m=function(t){var e,n=t.split("."),i=l;for(e=0;e<n.length;e++)i[n[e]]=i=i[n[e]]||{};return i},v=m("com.greensock"),y=1e-10,_=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},g=function(){},b=function(){var t=Object.prototype.toString,e=t.call([]);return function(n){return null!=n&&(n instanceof Array||"object"==typeof n&&!!n.push&&t.call(n)===e)}}(),x={},w=function(o,u,h,c){this.sc=x[o]?x[o].sc:[],x[o]=this,this.gsClass=null,this.func=h;var f=[];this.check=function(d){for(var p,v,y,_,g,b=u.length,T=b;--b>-1;)(p=x[u[b]]||new w(u[b],[])).gsClass?(f[b]=p.gsClass,T--):d&&p.sc.push(this);if(0===T&&h){if(v=("com.greensock."+o).split("."),y=v.pop(),_=m(v.join("."))[y]=this.gsClass=h.apply(h,f),c)if(l[y]=a[y]=_,g="undefined"!=typeof t&&t.exports,!g&&n(208))i=[],r=function(){return _}.apply(e,i),!(void 0!==r&&(t.exports=r));else if(g)if(o===s){t.exports=a[s]=_;for(b in a)_[b]=a[b]}else a[s]&&(a[s][y]=_);for(b=0;b<this.sc.length;b++)this.sc[b].check()}},this.check(!0)},T=o._gsDefine=function(t,e,n,i){return new w(t,e,n,i)},S=v._class=function(t,e,n){return e=e||function(){},T(t,[],function(){return e},n),e};T.globals=l;var M=[0,0,1,1],E=S("easing.Ease",function(t,e,n,i){this._func=t,this._type=n||0,this._power=i||0,this._params=e?M.concat(e):M},!0),P=E.map={},O=E.register=function(t,e,n,i){for(var r,o,s,a,u=e.split(","),l=u.length,h=(n||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(o=u[l],r=i?S("easing."+o,null,!0):v.easing[o]||{},s=h.length;--s>-1;)a=h[s],P[o+"."+a]=P[a+o]=r[a]=t.getRatio?t:t[a]||new t};for(f=E.prototype,f._calcEnd=!1,f.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,n=this._power,i=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===n?i*=i:2===n?i*=i*i:3===n?i*=i*i*i:4===n&&(i*=i*i*i*i),1===e?1-i:2===e?i:t<.5?i/2:1-i/2},h=["Linear","Quad","Cubic","Quart","Quint,Strong"],c=h.length;--c>-1;)f=h[c]+",Power"+c,O(new E(null,null,1,c),f,"easeOut",!0),O(new E(null,null,2,c),f,"easeIn"+(0===c?",easeNone":"")),O(new E(null,null,3,c),f,"easeInOut");P.linear=v.easing.Linear.easeIn,P.swing=v.easing.Quad.easeInOut;var A=S("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});f=A.prototype,f.addEventListener=function(t,e,n,i,r){r=r||0;var o,s,a=this._listeners[t],u=0;for(this!==d||p||d.wake(),null==a&&(this._listeners[t]=a=[]),s=a.length;--s>-1;)o=a[s],o.c===e&&o.s===n?a.splice(s,1):0===u&&o.pr<r&&(u=s+1);a.splice(u,0,{c:e,s:n,up:i,pr:r})},f.removeEventListener=function(t,e){var n,i=this._listeners[t];if(i)for(n=i.length;--n>-1;)if(i[n].c===e)return void i.splice(n,1)},f.dispatchEvent=function(t){var e,n,i,r=this._listeners[t];if(r)for(e=r.length,e>1&&(r=r.slice(0)),n=this._eventTarget;--e>-1;)i=r[e],i&&(i.up?i.c.call(i.s||n,{type:t,target:n}):i.c.call(i.s||n))};var C=o.requestAnimationFrame,I=o.cancelAnimationFrame,R=Date.now||function(){return(new Date).getTime()},D=R();for(h=["ms","moz","webkit","o"],c=h.length;--c>-1&&!C;)C=o[h[c]+"RequestAnimationFrame"],I=o[h[c]+"CancelAnimationFrame"]||o[h[c]+"CancelRequestAnimationFrame"];S("Ticker",function(t,e){var n,i,r,o,s,a=this,l=R(),h=!(e===!1||!C)&&"auto",c=500,f=33,m="tick",v=function(t){var e,u,h=R()-D;h>c&&(l+=h-f),D+=h,a.time=(D-l)/1e3,e=a.time-s,(!n||e>0||t===!0)&&(a.frame++,s+=e+(e>=o?.004:o-e),u=!0),t!==!0&&(r=i(v)),u&&a.dispatchEvent(m)};A.call(a),a.time=a.frame=0,a.tick=function(){v(!0)},a.lagSmoothing=function(t,e){c=t||1/y,f=Math.min(e,c,0)},a.sleep=function(){null!=r&&(h&&I?I(r):clearTimeout(r),i=g,r=null,a===d&&(p=!1))},a.wake=function(t){null!==r?a.sleep():t?l+=-D+(D=R()):a.frame>10&&(D=R()-c+5),i=0===n?g:h&&C?C:function(t){return setTimeout(t,1e3*(s-a.time)+1|0)},a===d&&(p=!0),v(2)},a.fps=function(t){return arguments.length?(n=t,o=1/(n||60),s=this.time+o,void a.wake()):n},a.useRAF=function(t){return arguments.length?(a.sleep(),h=t,void a.fps(n)):h},a.fps(t),setTimeout(function(){"auto"===h&&a.frame<5&&"hidden"!==u.visibilityState&&a.useRAF(!1)},1500)}),f=v.Ticker.prototype=new v.events.EventDispatcher,f.constructor=v.Ticker;var k=S("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,$){p||d.wake();var n=this.vars.useFrames?J:$;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});d=k.ticker=new v.Ticker,f=k.prototype,f._dirty=f._gc=f._initted=f._paused=!1,f._totalTime=f._time=0,f._rawPrevTime=-1,f._next=f._last=f._onUpdate=f._timeline=f.timeline=null,f._paused=!1;var L=function(){p&&R()-D>2e3&&d.wake(),setTimeout(L,2e3)};L(),f.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},f.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},f.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},f.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},f.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},f.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},f.render=function(t,e,n){},f.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},f.isActive=function(){var t,e=this._timeline,n=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<n+this.totalDuration()/this._timeScale},f._enabled=function(t,e){return p||d.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},f._kill=function(t,e){return this._enabled(!1,!1)},f.kill=function(t,e){return this._kill(t,e),this},f._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},f._swapSelfInParams=function(t){for(var e=t.length,n=t.concat();--e>-1;)"{self}"===t[e]&&(n[e]=this);return n},f._callback=function(t){var e=this.vars,n=e[t],i=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this,o=i?i.length:0;switch(o){case 0:n.call(r);break;case 1:n.call(r,i[0]);break;case 2:n.call(r,i[0],i[1]);break;default:n.apply(r,i)}},f.eventCallback=function(t,e,n,i){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=b(n)&&n.join("").indexOf("{self}")!==-1?this._swapSelfInParams(n):n,r[t+"Scope"]=i),"onUpdate"===t&&(this._onUpdate=e)}return this},f.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},f.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},f.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},f.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},f.totalTime=function(t,e,n){if(p||d.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!n&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,r=this._timeline;if(t>i&&!n&&(t=i),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?i-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(U.length&&et(),this.render(t,e,!1),U.length&&et())}return this},f.progress=f.totalProgress=function(t,e){var n=this.duration();return arguments.length?this.totalTime(n*t,e):n?this._time/n:this.ratio},f.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},f.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},f.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||y,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,n=e||0===e?e:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},f.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},f.paused=function(t){if(!arguments.length)return this._paused;var e,n,i=this._timeline;return t!=this._paused&&i&&(p||t||d.wake(),e=i.rawTime(),n=e-this._pauseTime,!t&&i.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==n&&this._initted&&this.duration()&&(e=i.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var F=S("core.SimpleTimeline",function(t){k.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});f=F.prototype=new k,f.constructor=F,f.kill()._gc=!1,f._first=f._last=f._recent=null,f._sortChildren=!1,f.add=f.insert=function(t,e,n,i){var r,o;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(o=t._startTime;r&&r._startTime>o;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},f._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},f.render=function(t,e,n){var i,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)i=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,n):r.render((t-r._startTime)*r._timeScale,e,n)),r=i},f.rawTime=function(){return p||d.wake(),this._totalTime};var j=S("TweenLite",function(t,e,n){if(k.call(this,e,n),this.render=j.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:j.selector(t)||t;var i,r,s,a=t.jquery||t.length&&t!==o&&t[0]&&(t[0]===o||t[0].nodeType&&t[0].style&&!t.nodeType),u=this.vars.overwrite;if(this._overwrite=u=null==u?Q[j.defaultOverwrite]:"number"==typeof u?u>>0:Q[u],
(a||t instanceof Array||t.push&&b(t))&&"number"!=typeof t[0])for(this._targets=s=_(t),this._propLookup=[],this._siblings=[],i=0;i<s.length;i++)r=s[i],r?"string"!=typeof r?r.length&&r!==o&&r[0]&&(r[0]===o||r[0].nodeType&&r[0].style&&!r.nodeType)?(s.splice(i--,1),this._targets=s=s.concat(_(r))):(this._siblings[i]=nt(r,this,!1),1===u&&this._siblings[i].length>1&&rt(r,this,null,1,this._siblings[i])):(r=s[i--]=j.selector(r),"string"==typeof r&&s.splice(i+1,1)):s.splice(i--,1);else this._propLookup={},this._siblings=nt(t,this,!1),1===u&&this._siblings.length>1&&rt(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-y,this.render(Math.min(0,-this._delay)))},!0),B=function(t){return t&&t.length&&t!==o&&t[0]&&(t[0]===o||t[0].nodeType&&t[0].style&&!t.nodeType)},N=function(t,e){var n,i={};for(n in t)K[n]||n in e&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!W[n]||W[n]&&W[n]._autoCSS)||(i[n]=t[n],delete t[n]);t.css=i};f=j.prototype=new k,f.constructor=j,f.kill()._gc=!1,f.ratio=0,f._firstPT=f._targets=f._overwrittenProps=f._startAt=null,f._notifyPluginsOfEnabled=f._lazy=!1,j.version="1.19.1",j.defaultEase=f._ease=new E(null,null,1,1),j.defaultOverwrite="auto",j.ticker=d,j.autoSleep=120,j.lagSmoothing=function(t,e){d.lagSmoothing(t,e)},j.selector=o.$||o.jQuery||function(t){var e=o.$||o.jQuery;return e?(j.selector=e,e(t)):"undefined"==typeof u?t:u.querySelectorAll?u.querySelectorAll(t):u.getElementById("#"===t.charAt(0)?t.substr(1):t)};var U=[],z={},V=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,X=function(t){for(var e,n=this._firstPT,i=1e-6;n;)e=n.blob?1===t?this.end:t?this.join(""):this.start:n.c*t+n.s,n.m?e=n.m(e,this._target||n.t):e<i&&e>-i&&!n.blob&&(e=0),n.f?n.fp?n.t[n.p](n.fp,e):n.t[n.p](e):n.t[n.p]=e,n=n._next},G=function(t,e,n,i){var r,o,s,a,u,l,h,c=[],f=0,d="",p=0;for(c.start=t,c.end=e,t=c[0]=t+"",e=c[1]=e+"",n&&(n(c),t=c[0],e=c[1]),c.length=0,r=t.match(V)||[],o=e.match(V)||[],i&&(i._next=null,i.blob=1,c._firstPT=c._applyPT=i),u=o.length,a=0;a<u;a++)h=o[a],l=e.substr(f,e.indexOf(h,f)-f),d+=l||!a?l:",",f+=l.length,p?p=(p+1)%5:"rgba("===l.substr(-5)&&(p=1),h===r[a]||r.length<=a?d+=h:(d&&(c.push(d),d=""),s=parseFloat(r[a]),c.push(s),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:s,c:("="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*parseFloat(h.substr(2)):parseFloat(h)-s)||0,f:0,m:p&&p<4?Math.round:0}),f+=h.length;return d+=e.substr(f),d&&c.push(d),c.setRatio=X,c},H=function(t,e,n,i,r,o,s,a,u){"function"==typeof i&&(i=i(u||0,t));var l,h=typeof t[e],c="function"!==h?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),f="get"!==n?n:c?s?t[c](s):t[c]():t[e],d="string"==typeof i&&"="===i.charAt(1),p={t:t,p:e,s:f,f:"function"===h,pg:0,n:r||e,m:o?"function"==typeof o?o:Math.round:0,pr:0,c:d?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-f||0};if(("number"!=typeof f||"number"!=typeof i&&!d)&&(s||isNaN(f)||!d&&isNaN(i)||"boolean"==typeof f||"boolean"==typeof i?(p.fp=s,l=G(f,d?p.s+p.c:i,a||j.defaultStringFilter,p),p={t:l,p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(p.s=parseFloat(f),d||(p.c=parseFloat(i)-p.s||0))),p.c)return(p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p},Y=j._internals={isArray:b,isSelector:B,lazyTweens:U,blobDif:G},W=j._plugins={},q=Y.tweenLookup={},Z=0,K=Y.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},Q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},J=k._rootFramesTimeline=new F,$=k._rootTimeline=new F,tt=30,et=Y.lazyRender=function(){var t,e=U.length;for(z={};--e>-1;)t=U[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);U.length=0};$._startTime=d.time,J._startTime=d.frame,$._active=J._active=!0,setTimeout(et,1),k._updateRoot=j.render=function(){var t,e,n;if(U.length&&et(),$.render((d.time-$._startTime)*$._timeScale,!1,!1),J.render((d.frame-J._startTime)*J._timeScale,!1,!1),U.length&&et(),d.frame>=tt){tt=d.frame+(parseInt(j.autoSleep,10)||120);for(n in q){for(e=q[n].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete q[n]}if(n=$._first,(!n||n._paused)&&j.autoSleep&&!J._first&&1===d._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||d.sleep()}}},d.addEventListener("tick",k._updateRoot);var nt=function(t,e,n){var i,r,o=t._gsTweenID;if(q[o||(t._gsTweenID=o="t"+Z++)]||(q[o]={target:t,tweens:[]}),e&&(i=q[o].tweens,i[r=i.length]=e,n))for(;--r>-1;)i[r]===e&&i.splice(r,1);return q[o].tweens},it=function(t,e,n,i){var r,o,s=t.vars.onOverwrite;return s&&(r=s(t,e,n,i)),s=j.onOverwrite,s&&(o=s(t,e,n,i)),r!==!1&&o!==!1},rt=function(t,e,n,i,r){var o,s,a,u;if(1===i||i>=4){for(u=r.length,o=0;o<u;o++)if((a=r[o])!==e)a._gc||a._kill(null,t,e)&&(s=!0);else if(5===i)break;return s}var l,h=e._startTime+y,c=[],f=0,d=0===e._duration;for(o=r.length;--o>-1;)(a=r[o])===e||a._gc||a._paused||(a._timeline!==e._timeline?(l=l||ot(e,0,d),0===ot(a,l,d)&&(c[f++]=a)):a._startTime<=h&&a._startTime+a.totalDuration()/a._timeScale>h&&((d||!a._initted)&&h-a._startTime<=2e-10||(c[f++]=a)));for(o=f;--o>-1;)if(a=c[o],2===i&&a._kill(n,t,e)&&(s=!0),2!==i||!a._firstPT&&a._initted){if(2!==i&&!it(a,e))continue;a._enabled(!1,!1)&&(s=!0)}return s},ot=function(t,e,n){for(var i=t._timeline,r=i._timeScale,o=t._startTime;i._timeline;){if(o+=i._startTime,r*=i._timeScale,i._paused)return-100;i=i._timeline}return o/=r,o>e?o-e:n&&o===e||!t._initted&&o-e<2*y?y:(o+=t.totalDuration()/t._timeScale/r)>e+y?0:o-e-y};f._init=function(){var t,e,n,i,r,o,s=this.vars,a=this._overwrittenProps,u=this._duration,l=!!s.immediateRender,h=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(i in s.startAt)r[i]=s.startAt[i];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=l&&s.lazy!==!1,r.startAt=r.delay=null,this._startAt=j.to(this.target,0,r),l)if(this._time>0)this._startAt=null;else if(0!==u)return}else if(s.runBackwards&&0!==u)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),n={};for(i in s)K[i]&&"autoCSS"!==i||(n[i]=s[i]);if(n.overwrite=0,n.data="isFromStart",n.lazy=l&&s.lazy!==!1,n.immediateRender=l,this._startAt=j.to(this.target,0,n),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=h=h?h instanceof E?h:"function"==typeof h?new E(h,s.easeParams):P[h]||j.defaultEase:j.defaultEase,s.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,t=0;t<o;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(e&&j._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=s.onUpdate,this._initted=!0},f._initProps=function(t,e,n,i,r){var s,a,u,l,h,c;if(null==t)return!1;z[t._gsTweenID]&&et(),this.vars.css||t.style&&t!==o&&t.nodeType&&W.css&&this.vars.autoCSS!==!1&&N(this.vars,t);for(s in this.vars)if(c=this.vars[s],K[s])c&&(c instanceof Array||c.push&&b(c))&&c.join("").indexOf("{self}")!==-1&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(W[s]&&(l=new W[s])._onInitTween(t,this.vars[s],this,r)){for(this._firstPT=h={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:l._priority,m:0},a=l._overwriteProps.length;--a>-1;)e[l._overwriteProps[a]]=this._firstPT;(l._priority||l._onInitAllProps)&&(u=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),h._next&&(h._next._prev=h)}else e[s]=H.call(this,t,s,"get",c,s,0,null,this.vars.stringFilter,r);return i&&this._kill(i,t)?this._initProps(t,e,n,i,r):this._overwrite>1&&this._firstPT&&n.length>1&&rt(t,this,e,this._overwrite,n)?(this._kill(e,t),this._initProps(t,e,n,i,r)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(z[t._gsTweenID]=!0),u)},f.render=function(t,e,n){var i,r,o,s,a=this._time,u=this._duration,l=this._rawPrevTime;if(t>=u-1e-7&&t>=0)this._totalTime=this._time=u,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===u&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(l<0||t<=0&&t>=-1e-7||l===y&&"isPause"!==this.data)&&l!==t&&(n=!0,l>y&&(r="onReverseComplete")),this._rawPrevTime=s=!e||t||l===t?t:y);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===u&&l>0)&&(r="onReverseComplete",i=this._reversed),t<0&&(this._active=!1,0===u&&(this._initted||!this.vars.lazy||n)&&(l>=0&&(l!==y||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=s=!e||t||l===t?t:y)),this._initted||(n=!0);else if(this._totalTime=this._time=t,this._easeType){var h=t/u,c=this._easeType,f=this._easePower;(1===c||3===c&&h>=.5)&&(h=1-h),3===c&&(h*=2),1===f?h*=h:2===f?h*=h*h:3===f?h*=h*h*h:4===f&&(h*=h*h*h*h),1===c?this.ratio=1-h:2===c?this.ratio=h:t/u<.5?this.ratio=h/2:this.ratio=1-h/2}else this.ratio=this._ease.getRatio(t/u);if(this._time!==a||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=l,U.push(this),void(this._lazy=[t,e]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/u):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==u||e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,n),e||(this._time!==a||i||n)&&this._callback("onUpdate")),r&&(this._gc&&!n||(t<0&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===u&&this._rawPrevTime===y&&s!==y&&(this._rawPrevTime=0)))}},f._kill=function(t,e,n){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:j.selector(e)||e;var i,r,o,s,a,u,l,h,c,f=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline;if((b(e)||B(e))&&"number"!=typeof e[0])for(i=e.length;--i>-1;)this._kill(t,e[i],n)&&(u=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(e===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(l=t||a,h=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),n&&(j.onOverwrite||this.vars.onOverwrite)){for(o in l)a[o]&&(c||(c=[]),c.push(o));if((c||!t)&&!it(this,n,e,c))return!1}for(o in l)(s=a[o])&&(f&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,u=!0),s.pg&&s.t._kill(l)&&(u=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[o]),h&&(r[o]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return u},f.invalidate=function(){return this._notifyPluginsOfEnabled&&j._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],k.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-y,this.render(Math.min(0,-this._delay))),this},f._enabled=function(t,e){if(p||d.wake(),t&&this._gc){var n,i=this._targets;if(i)for(n=i.length;--n>-1;)this._siblings[n]=nt(i[n],this,!0);else this._siblings=nt(this.target,this,!0)}return k.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&j._onPluginEvent(t?"_onEnable":"_onDisable",this)},j.to=function(t,e,n){return new j(t,e,n)},j.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new j(t,e,n)},j.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new j(t,e,i)},j.delayedCall=function(t,e,n,i,r){return new j(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},j.set=function(t,e){return new j(t,0,e)},j.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:j.selector(t)||t;var n,i,r,o;if((b(t)||B(t))&&"number"!=typeof t[0]){for(n=t.length,i=[];--n>-1;)i=i.concat(j.getTweensOf(t[n],e));for(n=i.length;--n>-1;)for(o=i[n],r=n;--r>-1;)o===i[r]&&i.splice(n,1)}else for(i=nt(t).concat(),n=i.length;--n>-1;)(i[n]._gc||e&&!i[n].isActive())&&i.splice(n,1);return i},j.killTweensOf=j.killDelayedCallsTo=function(t,e,n){"object"==typeof e&&(n=e,e=!1);for(var i=j.getTweensOf(t,e),r=i.length;--r>-1;)i[r]._kill(n,t)};var st=S("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=st.prototype},!0);if(f=st.prototype,st.version="1.19.0",st.API=2,f._firstPT=null,f._addTween=H,f.setRatio=X,f._kill=function(t){var e,n=this._overwriteProps,i=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=n.length;--e>-1;)null!=t[n[e]]&&n.splice(e,1);for(;i;)null!=t[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},f._mod=f._roundProps=function(t){for(var e,n=this._firstPT;n;)e=t[this._propName]||null!=n.n&&t[n.n.split(this._propName+"_").join("")],e&&"function"==typeof e&&(2===n.f?n.t._applyPT.m=e:n.m=e),n=n._next},j._onPluginEvent=function(t,e){var n,i,r,o,s,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(s=a._next,i=r;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:o)?a._prev._next=a:r=a,(a._next=i)?i._prev=a:o=a,a=s}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(n=!0),a=a._next;return n},st.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===st.API&&(W[(new t[e])._propName]=t[e]);return!0},T.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,n=t.propName,i=t.priority||0,r=t.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=S("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){st.call(this,n,i),this._overwriteProps=r||[]},t.global===!0),a=s.prototype=new st(n);a.constructor=s,s.API=t.API;for(e in o)"function"==typeof t[e]&&(a[o[e]]=t[e]);return s.version=t.version,st.activate([s]),s},h=o._gsQueue){for(c=0;c<h.length;c++)h[c]();for(f in x)x[f].func||o.console.log("GSAP encountered missing dependency: "+f)}p=!1}}("undefined"!=typeof t&&t.exports&&"undefined"!=typeof o?o:this||window,"TweenMax")}).call(e,function(){return this}())},function(t,e){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function i(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=i()?Object.assign:function(t,e){for(var i,a,u=n(t),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var h in i)o.call(i,h)&&(u[h]=i[h]);if(r){a=r(i);for(var c=0;c<a.length;c++)s.call(i,a[c])&&(u[a[c]]=i[a[c]])}}return u}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(9),s=function(t){return t.touches?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.clientX,y:t.clientY}},a=o.vec3.fromValues(0,1,0),u=(Math.PI/2-.01,function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;i(this,t),this._mtxTarget=e,this._radius=n,this._targetRadius=n,this._listenerTarget=r,this._isDown=!1,this._rotation=o.mat4.create(),this.center=o.vec3.create(),this.easing=.1,this.senstivity=1,this.senstivityRotation=1,this._isLocked=!1,this._isZoomLocked=!1,this._rx=0,this._trx=0,this._prevx=0,this._ry=0,this._try=0,this._prevy=0,this._quat=o.quat.create(),this._vec=o.vec3.create(),this._mtx=o.mat4.create(),this._mouseDown={x:0,y:0},this._mouse={x:0,y:0},this._init()}return r(t,[{key:"_init",value:function(){var t=this;this._listenerTarget.addEventListener("mousedown",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("mouseup",function(){return t._onUp()}),this._listenerTarget.addEventListener("mousemove",function(e){return t._onMove(e)}),this._listenerTarget.addEventListener("touchstart",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("touchend",function(){return t._onUp()}),this._listenerTarget.addEventListener("touchmove",function(e){return t._onMove(e)}),this._listenerTarget.addEventListener("mousewheel",function(e){return t._onWheel(e)}),this._listenerTarget.addEventListener("DOMMouseScroll",function(e){return t._onWheel(e)})}},{key:"lock",value:function(t){this._isLocked=t}},{key:"lockZoom",value:function(t){this._isZoomLocked=t}},{key:"_onWheel",value:function(t){if(!this._isZoomLocked){var e=t.wheelDelta,n=t.detail,i=0;i=n?e?e/n/40*n>0?1:-1:-n/3:e/120,this._targetRadius+=2*-i*this.senstivity,this._targetRadius<.01&&(this._targetRadius=.01)}}},{key:"_onDown",value:function(t){this._isLocked||(this._isDown=!0,this._mouseDown=s(t),this._mouse=s(t),this._prevx=this._trx=this._rx,this._prevy=this._try=this._ry)}},{key:"_onMove",value:function(t){this._isLocked||this._isDown&&(this._mouse=s(t))}},{key:"_onUp",value:function(){this._isLocked||(this._isDown=!1)}},{key:"update",value:function(){var t=this._mouse.x-this._mouseDown.x,e=this._mouse.y-this._mouseDown.y,n=.02*this.senstivityRotation;this._try=this._prevy-t*n,this._trx=this._prevx-e*n,this._trx<-Math.PI/2+.01?this._trx=-Math.PI/2+.01:this._trx>Math.PI/2-.01&&(this._trx=Math.PI/2-.01),this._rx+=(this._trx-this._rx)*this.easing,this._ry+=(this._try-this._ry)*this.easing,this._radius+=(this._targetRadius-this._radius)*this.easing,o.quat.identity(this._quat),o.quat.rotateY(this._quat,this._quat,this._ry),o.quat.rotateX(this._quat,this._quat,this._rx),o.vec3.set(this._vec,0,0,this._radius),o.vec3.transformQuat(this._vec,this._vec,this._quat),o.mat4.identity(this._mtx),o.mat4.lookAt(this._mtx,this._vec,this.center,a),this._mtxTarget&&o.mat4.copy(this._mtxTarget,this._mtx)}}]),t}());e.default=u,t.exports=e.default},function(t,e,n){(function(e){"use strict";function i(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i];r&&"."!==r&&(".."===r?n.length&&".."!==n[n.length-1]?n.pop():e&&n.push(".."):n.push(r))}return n}function r(t){for(var e=t.length-1,n=0;n<=e&&!t[n];n++);for(var i=e;i>=0&&!t[i];i--);return 0===n&&i===e?t:n>i?[]:t.slice(n,i+1)}function o(t){var e=c.exec(t),n=(e[1]||"")+(e[2]||""),i=e[3]||"",r=f.exec(i),o=r[1],s=r[2],a=r[3];return[n,o,s,a]}function s(t){var e=c.exec(t),n=e[1]||"",i=!!n&&":"!==n[1];return{device:n,isUnc:i,isAbsolute:i||!!e[2],tail:e[3]}}function a(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}function u(t){return p.exec(t).slice(1)}var l="win32"===e.platform,h=n(184),c=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,f=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,d={};d.resolve=function(){for(var t="",n="",r=!1,o=arguments.length-1;o>=-1;o--){var u;if(o>=0?u=arguments[o]:t?(u=e.env["="+t],u&&u.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(u=t+"\\")):u=e.cwd(),!h.isString(u))throw new TypeError("Arguments to path.resolve must be strings");if(u){var l=s(u),c=l.device,f=l.isUnc,d=l.isAbsolute,p=l.tail;if((!c||!t||c.toLowerCase()===t.toLowerCase())&&(t||(t=c),r||(n=p+"\\"+n,r=d),t&&r))break}}return f&&(t=a(t)),n=i(n.split(/[\\\/]+/),!r).join("\\"),t+(r?"\\":"")+n||"."},d.normalize=function(t){var e=s(t),n=e.device,r=e.isUnc,o=e.isAbsolute,u=e.tail,l=/[\\\/]$/.test(u);return u=i(u.split(/[\\\/]+/),!o).join("\\"),u||o||(u="."),u&&l&&(u+="\\"),r&&(n=a(n)),n+(o?"\\":"")+u},d.isAbsolute=function(t){return s(t).isAbsolute},d.join=function(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(!h.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&t.push(n)}var i=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(i=i.replace(/^[\\\/]{2,}/,"\\")),d.normalize(i)},d.relative=function(t,e){t=d.resolve(t),e=d.resolve(e);for(var n=t.toLowerCase(),i=e.toLowerCase(),o=r(e.split("\\")),s=r(n.split("\\")),a=r(i.split("\\")),u=Math.min(s.length,a.length),l=u,h=0;h<u;h++)if(s[h]!==a[h]){l=h;break}if(0==l)return e;for(var c=[],h=l;h<s.length;h++)c.push("..");return c=c.concat(o.slice(l)),c.join("\\")},d._makeLong=function(t){if(!h.isString(t))return t;if(!t)return"";var e=d.resolve(t);return/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t},d.dirname=function(t){var e=o(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},d.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},d.extname=function(t){return o(t)[3]},d.format=function(t){if(!h.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!h.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir,i=t.base||"";return n?n[n.length-1]===d.sep?n+i:n+d.sep+i:i},d.parse=function(t){if(!h.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=o(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},d.sep="\\",d.delimiter=";";var p=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,m={};m.resolve=function(){for(var t="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var o=r>=0?arguments[r]:e.cwd();if(!h.isString(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,n="/"===o[0])}return t=i(t.split("/"),!n).join("/"),(n?"/":"")+t||"."},m.normalize=function(t){var e=m.isAbsolute(t),n=t&&"/"===t[t.length-1];return t=i(t.split("/"),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},m.isAbsolute=function(t){return"/"===t.charAt(0)},m.join=function(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];if(!h.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(t+=t?"/"+n:n)}return m.normalize(t)},m.relative=function(t,e){t=m.resolve(t).substr(1),e=m.resolve(e).substr(1);for(var n=r(t.split("/")),i=r(e.split("/")),o=Math.min(n.length,i.length),s=o,a=0;a<o;a++)if(n[a]!==i[a]){s=a;break}for(var u=[],a=s;a<n.length;a++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")},m._makeLong=function(t){return t},m.dirname=function(t){var e=u(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},m.basename=function(t,e){var n=u(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},m.extname=function(t){return u(t)[3]},m.format=function(t){if(!h.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!h.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir?t.dir+m.sep:"",i=t.base||"";return n+i},m.parse=function(t){if(!h.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=u(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},m.sep="/",m.delimiter=":",l?t.exports=d:t.exports=m,t.exports.posix=m,t.exports.win32=d}).call(e,n(65))},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t,i){function r(t,n){var i={seen:[],stylize:s};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&e._extend(i,n),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),u(i,t,i.depth)}function o(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,i){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return g(r)||(r=u(t,r,i)),r}var o=l(t,n);if(o)return o;var s=Object.keys(n),m=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),M(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(n);if(0===s.length){if(E(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return t.stylize(Date.prototype.toString.call(n),"date");if(M(n))return h(n)}var y="",_=!1,b=["{","}"];if(p(n)&&(_=!0,b=["[","]"]),E(n)){var x=n.name?": "+n.name:"";y=" [Function"+x+"]"}if(w(n)&&(y=" "+RegExp.prototype.toString.call(n)),S(n)&&(y=" "+Date.prototype.toUTCString.call(n)),M(n)&&(y=" "+h(n)),0===s.length&&(!_||0==n.length))return b[0]+y+b[1];if(i<0)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var T;return T=_?c(t,n,i,m,s):s.map(function(e){return f(t,n,i,m,e,_)}),t.seen.pop(),d(T,y,b)}function l(t,e){if(x(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return _(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)A(e,String(s))?o.push(f(t,e,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))}),o}function f(t,e,n,i,r,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),A(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(l.value)<0?(a=v(n)?u(t,l.value,null):u(t,l.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t,e,n){var i=0,r=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function _(t){return"number"==typeof t}function g(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function x(t){return void 0===t}function w(t){return T(t)&&"[object RegExp]"===O(t)}function T(t){return"object"==typeof t&&null!==t}function S(t){return T(t)&&"[object Date]"===O(t)}function M(t){return T(t)&&("[object Error]"===O(t)||t instanceof Error)}function E(t){return"function"==typeof t}function P(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function O(t){return Object.prototype.toString.call(t)}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,s=String(t).replace(C,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),a=i[n];n<o;a=i[++n])s+=v(a)||!T(a)?" "+a:" "+r(a);return s},e.deprecate=function(n,r){function o(){if(!s){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation,s=!0}return n.apply(this,arguments)}if(x(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var s=!1;return o};var I,R={};e.debuglog=function(t){if(x(I)&&(I=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!R[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){i.pid;R[t]=function(){e.format.apply(e,arguments)}}else R[t]=function(){};return R[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=m,e.isNull=v,e.isNullOrUndefined=y,e.isNumber=_,e.isString=g,e.isSymbol=b,e.isUndefined=x,e.isRegExp=w,e.isObject=T,e.isDate=S,e.isError=M,e.isFunction=E,e.isPrimitive=P,e.isBuffer=n(183);e.log=function(){},e.inherits=n(182),e._extend=function(t,e){if(!e||!T(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(e,function(){return this}(),n(65))},function(t,e){t.exports="// vortex.frag\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform float brightness;\nuniform float frame;\nuniform float numSeg;\nuniform vec2 uvOffset;\nuniform float opacity;\n\nvoid main(void) {\n\tvec2 uv = vTextureCoord / numSeg;\n\tvec4 color = texture2D(texture, uv + uvOffset);\n\tif(color.a < 0.01) discard;\n\n\tcolor *= brightness - 0.5;\n    gl_FragColor = color * opacity;\n}"},function(t,e){t.exports="// basic.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\n// attribute vec2 aTextureCoord;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec3 uPosition;\nuniform vec3 uScale;\nuniform float uFlip;\n\nvoid main(void) {\n\tvec3 position = aVertexPosition * vec3(1.0, 1.0, uFlip) * uScale + uPosition;\n\t// position.xy += aTextureCoord * 0.0;\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n}"},function(t,e){t.exports="// crystal.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nuniform sampler2D texture;\nuniform sampler2D textureHit;\nuniform float brightness;\n\nfloat diffuse(vec3 N, vec3 L) {\n\treturn max(dot(N, normalize(L)), 0.0);\n}\n\n\nvec3 diffuse(vec3 N, vec3 L, vec3 C) {\n\treturn diffuse(N, L) * C;\n}\n\nconst vec3 L = vec3(1.0, 1.0, 1.0);\n\nvoid main(void) {\n    float diff = diffuse(vNormal, L);\n\tdiff = mix(diff, 1.0, .25);\n    vec4 color = texture2D(texture, vTextureCoord);\n    vec4 colorHit = texture2D(textureHit, vTextureCoord);\n\n    color.rgb = mix(color.rgb, colorHit.rgb, brightness);\n\n    color.rgb *= diff;\n\n    // color.rgb *= brightness;\n\n    gl_FragColor = color;\n}"},function(t,e){t.exports="// crystal.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uProjectionMatrix;\nuniform mat4 uViewMatrix;\n\n\nuniform vec3 uPosition;\nuniform vec3 uScale;\nuniform vec3 uRotation;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\n\nvec3 rotate(vec3 v, vec3 r) {\n\tv.yz = rotate(v.yz, r.x);\n\tv.xz = rotate(v.xz, r.y);\n\tv.xy = rotate(v.xy, r.z);\n\n\treturn v;\n}\n\n\n\nvoid main(void) {\n\tvec3 position = rotate(aVertexPosition, uRotation) * uScale + uPosition;\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n    // gl_Position = uProjectionMatrix * uViewMatrix * vec4(aVertexPosition + uPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = rotate(aNormal, uRotation);\n}"},function(t,e){t.exports="// healthBar.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nuniform vec3 color;\nuniform float opacity;\n\nfloat diffuse(vec3 N, vec3 L) {\n\treturn max(dot(N, normalize(L)), 0.0);\n}\n\n\nvec3 diffuse(vec3 N, vec3 L, vec3 C) {\n\treturn diffuse(N, L) * C;\n}\n\n\n\nvoid main(void) {\n\tfloat d = diffuse(vNormal, vec3(0.0, 0.8, 1.6));\n\td = mix(d, 1.0, 0.25) * 1.25;\n    gl_FragColor = vec4(color * d * opacity, opacity);\n    // gl_FragColor = vec4(vec3(d), 1.0);\n}"},function(t,e){t.exports="// healthBar.vert\n\n// basic.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uInvertViewMatrix;\n\nuniform vec3 uPosition;\nuniform vec3 uScale;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    vec3 position = aVertexPosition;\n    position.xy += aTextureCoord * 0.001;\n\tposition = position * uScale + uPosition;\n    // finalPos = uProjectionMatrix * uViewMatrix * uInvertViewMatrix * vec4(position, 1.0);\n\n    gl_Position = uProjectionMatrix * uViewMatrix * uInvertViewMatrix * vec4(position, 1.0);\n    \n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}"},function(t,e){t.exports="// pass.vert\n\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n// attribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tvec3 position = aVertexPosition;\n\tposition.xy += aTextureCoord * 0.001;\n    gl_Position = vec4(position, 1.0);\n    vTextureCoord = aTextureCoord;\n    // vNormal = aNormal;\n}"},function(t,e){t.exports="// scoreText.vert\n\n// basic.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uInvertViewMatrix;\n\nuniform vec3 uPosition;\nuniform vec3 uScale;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    vec3 position = aVertexPosition;\n    position.xy += aTextureCoord * 0.001;\n\tposition = position * uScale + uPosition;\n    // finalPos = uProjectionMatrix * uViewMatrix * uInvertViewMatrix * vec4(position, 1.0);\n\n    gl_Position = uProjectionMatrix * uViewMatrix * uInvertViewMatrix * vec4(position, 1.0);\n    \n    vTextureCoord = aTextureCoord;\n}"},function(t,e){t.exports="// shootinglines.frag\n\n#define SHADER_NAME SHOOTING_LINES\n\nprecision highp float;\nvarying vec3 vColor;\nuniform float opacity;\n\nvoid main(void) {\n\tif(opacity <= 0.01) {\n\t\tdiscard;\n\t}\n    gl_FragColor = vec4(vColor, 1.0) * opacity;\n}"},function(t,e){t.exports="// shootinglines.vert\n\n#define SHADER_NAME SHOOTING_LINES\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec3 aPosOffset;\nattribute vec3 aColor;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float time;\nuniform float uDepth;\n\nuniform vec3 uPosition;\nuniform vec3 uScale;\n\nvarying vec3 vColor;\n\nvoid main(void) {\n\tvec3 position = aVertexPosition * uScale;\n\tposition.xy += uPosition.xy;\n\tfloat zOffset = mod(aPosOffset.z + uDepth + time, uDepth*2.0) - uDepth;\n\tposition.z += zOffset;\n\tposition.xy += aPosOffset.xy;\n\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n\n    vColor = aColor;\n}"},function(t,e){t.exports="// skybox.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}"},function(t,e){t.exports="// basic.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float time;\n\nvarying vec2 vTextureCoord;\n\n\nmat4 rotationMatrix(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nvec3 rotate(vec3 v, vec3 axis, float angle) {\n\tmat4 m = rotationMatrix(axis, angle);\n\treturn (m * vec4(v, 1.0)).xyz;\n}\n\n\nvoid main(void) {\n    vec3 AXIS = vec3(1.0, .5, .5);\n    AXIS = normalize(AXIS);\n\n\tvec3 position = rotate(aVertexPosition, AXIS, time);\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n    vTextureCoord = aTextureCoord;\n}"},function(t,e){t.exports="// tardis.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nuniform float uAngle;\nuniform vec3 uCircleColor;\nuniform float uDirection;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec3 vFront;\n\nconst vec3 FRONT = vec3(0.0, 0.0, -1.0);\nconst float PI = 3.141592653;\nconst float uRange = 0.2;\n\nfloat diffuse(vec3 N, vec3 L) {\n\treturn max(dot(N, normalize(L)), 0.0);\n}\n\n\nvec3 diffuse(vec3 N, vec3 L, vec3 C) {\n\treturn diffuse(N, L) * C;\n}\n\n\nvoid main(void) {\n\n\tfloat a = acos(dot(normalize(vPosition), vFront))/PI;\n\n\tfloat d = abs(a - uAngle);\n\td = smoothstep(uRange, 0.0, d);\n\n\t\n\tvec3 L = vec3(1.0, 1.0, uDirection);\n\n\tfloat diff = diffuse(vNormal, L);\n\tdiff = mix(diff, 1.0, .25);\n\n    vec4 color = texture2D(texture, vTextureCoord);\n    color.rgb *= diff;\n    color.rgb += vec3(d) * uCircleColor;\n\n    gl_FragColor = color;\n}"},function(t,e){t.exports="// basic.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec3 aNormal;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec3 uPosition;\nuniform vec3 uScale;\nuniform vec3 uRotation;\nuniform float uPosOffset;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec3 vFront;\n\n\nconst vec3 FRONT = vec3(0.0, 0.0, -1.0);\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\n\nvec3 rotate(vec3 v, vec3 r) {\n\tv.yz = rotate(v.yz, r.x);\n\tv.xz = rotate(v.xz, r.y);\n\tv.xy = rotate(v.xy, r.z);\n\n\treturn v;\n}\n\nvoid main(void) {\n\tvec3 position = rotate(aVertexPosition, uRotation);\n\tvPosition = aVertexPosition;\n\n\tposition = position * uScale + uPosition;\n\tposition.z += uPosOffset;\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vNormal = rotate(aNormal, uRotation);\n\n    // vFront = FRONT;\n    vFront = rotate(FRONT, -uRotation);\n}"},function(t,e){t.exports="// color.frag\n\nprecision highp float;\nuniform vec3 color;\nuniform float opacity;\nuniform sampler2D texture;\n\nvarying vec3 vExtra;\n\nvoid main(void) {\n\t// float d = distance(gl_PointCoord, vec2(.5));\n\t// if(d > .5) {\n\t// \tdiscard;\n\t// }\n\n\t// float offset = mix(vExtra.b, 1.0, .58);\n    // gl_FragColor = vec4(color*opacity * offset, opacity);\n\n    vec4 color = texture2D(texture, gl_PointCoord);\n    if(color.a < 0.05) {\n    \tdiscard;\n    }\n\n    gl_FragColor = color;\n}"},function(t,e){t.exports="// tardisSheild.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec3 aExtra;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec3 uPosition;\nuniform vec3 uScale;\nuniform float time;\nuniform float uRadius;\nuniform float offset;\n\nvarying vec3 vExtra;\n\n\nconst float PI = 3.141592653;\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nvoid main(void) {\n\tvec3 position = aVertexPosition;\n\tposition.y += time * mix(1.0, aExtra.r, .5);\n\tposition.y = mod(position.y + uRadius, uRadius* 2.0) - uRadius;\n\n\tfloat t = abs(position.y / uRadius);\n\tif(offset < 0.5) {\n\t\tt = 1.0 - sin(t * PI * 0.5);\n\t} else {\n\t\tt = 1.0 - pow(t, 3.0);\n\t}\n\t\n\t\n\n\tposition.xz *= t;\n\tposition.xz = rotate(position.xz, time * 0.25 + position.y * 0.2);\n\tposition = position * uScale + uPosition;\n\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n\n    gl_PointSize = (4.0 + aExtra.y * 4.0) * 2.0;\n\n    vExtra = aExtra;\n}"},function(t,e){t.exports="// title.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nuniform sampler2D texture;\nuniform float opacity;\n\nconst float PI = 3.141592653;\nconst float TwoPI = PI * 2.0;\n\nvec2 envMapEquirect(vec3 wcNormal, float flipEnvMap) {\n\t//I assume envMap texture has been flipped the WebGL way (pixel 0,0 is a the bottom)\n\t//therefore we flip wcNorma.y as acos(1) = 0\n\tfloat phi = acos(-wcNormal.y);\n\tfloat theta = atan(flipEnvMap * wcNormal.x, wcNormal.z) + PI;\n\treturn vec2(theta / TwoPI, phi / PI);\n}\n\nvec2 envMapEquirect(vec3 wcNormal) {\n\t\t//-1.0 for left handed coordinate system oriented texture (usual case)\n\t\treturn envMapEquirect(wcNormal, -1.0);\n}\n\nfloat diffuse(vec3 N, vec3 L) {\n\treturn max(dot(N, normalize(L)), 0.0);\n}\n\n\nvec3 diffuse(vec3 N, vec3 L, vec3 C) {\n\treturn diffuse(N, L) * C;\n}\n\nconst vec3 LIGHT = vec3(1.0, .8, .6);\n\n\nvoid main(void) {\n\tif(opacity <= 0.01) discard;\n\tvec3 N = vNormal;\n\tN.xy += vTextureCoord * 0.005;\n\tvec2 uv = envMapEquirect(N);\n\t\n\tvec4 color = texture2D(texture, uv) * opacity;\n\tfloat d = diffuse(N, LIGHT);\n\t// d = mix(d, 1.0, .75);\n\t// color.rgb *= d;\n\tcolor.rgb *= 0.9;\n\tcolor.rgb += d * 0.2;\n\n\tgl_FragColor = color;\n\n\n\n}"},function(t,e){t.exports="// basic.vert\n\nprecision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uInvertViewMatrix;\nuniform float time;\n\nuniform vec3 uPosition;\nuniform vec3 uPositionOffset;\nuniform vec3 uScale;\nuniform float isFacingFront;\nuniform float theta;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nmat4 rotationMatrix(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nvec3 rotate(vec3 v, vec3 axis, float angle) {\n\tmat4 m = rotationMatrix(axis, angle);\n\treturn (m * vec4(v, 1.0)).xyz;\n}\n\nvec2 rotate(vec2 v, float a) {\n    float s = sin(a);\n    float c = cos(a);\n    mat2 m = mat2(c, -s, s, c);\n    return m * v;\n}\n\nvoid main(void) {\n\n\tvec3 AXIS = vec3(1.0, .5, .5);\n    AXIS = normalize(AXIS);\n\n    vec3 position = aVertexPosition;\n    float t = time * 3.0;\n    position.xz = rotate(position.xz, sin(t) * theta);\n    position.xy = rotate(position.xy, cos(t * 0.632492) * theta * 0.2);\n\tposition = position * uScale + uPosition + uPositionOffset;\n\n    vec4 finalPos = vec4(0.0);\n\n    if(isFacingFront > 0.5) {\n        finalPos = uProjectionMatrix * uViewMatrix * uInvertViewMatrix * vec4(position, 1.0);\n    } else {\n        finalPos = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n    }\n\n    gl_Position = finalPos;\n    // gl_Position = uProjectionMatrix * uViewMatrix * uInvertViewMatrix * vec4(position, 1.0);\n    \n    vTextureCoord = aTextureCoord;\n    vec3 N = rotate(aNormal, AXIS, time);\n\n    vNormal = N;\n}"},function(t,e){t.exports="precision highp float;\n\nvarying vec2 vScreenUV;\nvarying vec2 vTextureCoord;\nvarying vec3 vPosition;\nvarying vec2 vNoiseOffset;\n\nuniform sampler2D texture;\nuniform sampler2D textureNext;\nuniform sampler2D textureHue;\nuniform float uUVOffset;\nuniform float uTime;\nuniform float uOffset;\nuniform float uRevelOffset;\nuniform float uSwirling;\nuniform float tunnelDepth;\nuniform float isFront;\n\nvec4 permute(vec4 x) {  return mod(((x*34.0)+1.0)*x, 289.0);    }\nvec4 taylorInvSqrt(vec4 r) {    return 1.79284291400159 - 0.85373472095314 * r; }\n\n\nconst float PI = 3.141592653;\n\nvec2 rotate(vec2 v, float a) {\n    float s = sin(a);\n    float c = cos(a);\n    mat2 m = mat2(c, -s, s, c);\n    return m * v;\n}\n\nvoid main(void) {\n\tvec2 uv = vTextureCoord + vec2(0.0, uUVOffset);\n\tuv.y = mod(uv.y, 1.0);\n\n    uv.x += sin(uv.y * PI) * uSwirling + uTime * 0.2;\n    uv.x = mod(uv.x, 1.0);\n\n    vec4 color = texture2D(texture, uv);\n    vec4 colorNext = texture2D(textureNext, uv);\n\n    // gl_FragColor = mix(color, colorNext, uOffset);\n    // gl_FragColor = uv.y > uOffset ? color : colorNext;\n\n    // float tz = vPosition.z + 100.0;\n    // float t = uOffset * 250.0;\n    // float p = smoothstep(t, t-50.0, tz);\n    // float br = 0.0;\n    // if(p < t-50.0) {\n    //     br = 0.0;\n    // } else if(p < t) {\n    //     br = sin(PI * p);\n    // } else {\n    //     br = 0.0;\n    // }\n\n    float tz = (vPosition.z + tunnelDepth)/(tunnelDepth * 2.0);\n    const float r = 0.2;\n    float p = smoothstep(uOffset-r, uOffset, tz * (1.0 - r));\n    float br = sin(p * PI);\n\n    color = mix(color, colorNext, 1.0-p);\n    color.rgb += br;\n\n\n    float alphaOffset = smoothstep(uRevelOffset-r, uRevelOffset, tz * (1.0 - r));\n\n    vec2 uvHue = rotate(vScreenUV - vec2(0.5), uTime) + vec2(.5);\n    vec4 colorOverlay = texture2D(textureHue, uvHue);\n    color.rgb += colorOverlay.rgb;\n\n\n    float l = length(vNoiseOffset);\n    color.rgb *= (1.0 - pow(l * 0.1, 2.0));\n\n    float z = abs(vPosition.z) / tunnelDepth;\n    float a = smoothstep(1.0, 0.8, z);\n    color *= a * (1.0 - alphaOffset);\n\n    gl_FragColor = color;\n\n    // l = 1.0 - pow(l * 0.1, 3.0);\n    // l = pow(l, 3.0);\n\n    // gl_FragColor = vec4(br + p);\n    // gl_FragColor = vec4((vPosition.z + 100.0)/200.0);\n}";
},function(t,e){t.exports="// tunnel.vert\n\n\nconst int NUM = ${NUM};\n\nprecision highp float;\nattribute vec3 aVertexPosition;\n// attribute vec3 aCenter;\nattribute vec2 aTextureCoord;\nattribute vec2 aExtra;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec2 uNoiseOffset[NUM];\nuniform float uTime;\nuniform float tunnelDepth;\nuniform float uOffset;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vScreenUV;\nvarying vec3 vPosition;\nvarying vec3 vCenter;\nvarying vec3 vNoise;\nvarying vec2 vNoiseOffset;\n\nconst vec3 FRONT = vec3(0.0, 0.0, 1.0);\n\nmat4 rotationMatrix(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nvec3 rotate(vec3 v, vec3 axis, float angle) {\n\tmat4 m = rotationMatrix(axis, angle);\n\treturn (m * vec4(v, 1.0)).xyz;\n}\n\nconst float PI = 3.141592653;\n\nvoid main(void) {\n\n\tvec2 noiseOffset = uNoiseOffset[int(aExtra.x)];\n\tvNoiseOffset = noiseOffset;\n\t\n\t// vec3 relativePos = aVertexPosition - aCenter;\n\t//\teffect 1\n\t// relativePos *= sin(aTextureCoord.y + uTime * 5.0) * 0.5 + .5;\n\t// vec3 position = aCenter + relativePos;\n\n\t// vec3 vToCenter = normalize(aCenter * vec3(1.0, 1.0, 0.0));\n\t// vec3 axis = normalize(cross(FRONT, vToCenter));\n\t// float theta = aTextureCoord.y * 2.0 + uTime * 5.5 + noiseOffset.x * noiseOffset.y * 2.0;\n\n\t// vec3 position = rotate(relativePos, axis, theta) + aCenter;\n\n\t// vec2 tmp = vec2(0.05, 1.0);\n\t// vec3 position = aCenter + relativePos * tmp.xxy;\n\n\tfloat tz = (aVertexPosition.z + tunnelDepth)/(tunnelDepth * 2.0);\n\tconst float r = 0.2;\n\tfloat p = smoothstep(uOffset-r, uOffset, tz * (1.0 - r));\n\tfloat br = sin(p * PI);\n\n\n\tvec3 position = aVertexPosition;\n\tposition.xy *= 1.0 + br;\n\tposition.xy += noiseOffset;\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n    vScreenUV = gl_Position.xy/gl_Position.w * 0.5 + 0.5;\n    \n    vTextureCoord = aTextureCoord;\n    vPosition = aVertexPosition;\n}"},function(t,e){t.exports="// tunnelEnd.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform sampler2D textureNext;\nuniform sampler2D textureEnd;\nuniform float uTime;\nuniform float uOffset;\nuniform float uOpacity;\nuniform float isFront;\n\nconst vec2 center = vec2(.5);\n\nconst float PI = 3.141592653;\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nvoid main(void) {\n\tfloat d = distance(vTextureCoord, center) + uTime;\n\td = mod(d, 1.0);\n\tvec2 dUV = vTextureCoord - center;\n\tfloat a = atan(dUV.y, dUV.x);\n\tif(a < 0.0) a += PI * 2.0;\n\ta = a / ( PI * 2.0);\n\n\tvec2 uv = vec2(d, a);\n    \n\tvec4 color = texture2D(texture, uv);\n\tvec4 colorNext = texture2D(textureNext, uv);\n\n    color = mix(color, colorNext, uOffset);\n    color *= uOpacity;\n\n    float distToCenter = distance(vTextureCoord, vec2(.5));\n    float p = smoothstep(0.35, 0.0, distToCenter);\n    p = pow(p, 2.0);\n\n\n    vec2 uvEnd = vTextureCoord - center;\n    uvEnd = rotate(uvEnd, uTime) + center;\n\n    vec3 colorCenter;\n    if(isFront > 0.5) {\n    \tcolorCenter = texture2D(textureEnd, uvEnd).rgb;\n    \t// color.rgb += colorCenter;\n    } else {\n    \tcolorCenter = vec3(isFront * 2.0 * uOpacity);\n    \t\n    }\n\n    color.rgb = mix(color.rgb, colorCenter, p);\n    color *= uOpacity;\n    \n\n    gl_FragColor = color;\n\n}"},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=d[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(l(i.parts[o],e))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(l(i.parts[o],e));d[i.id]={id:i.id,refs:1,parts:s}}}}function r(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],o=r[0],s=r[1],a=r[2],u=r[3],l={css:s,media:a,sourceMap:u};n[o]?n[o].parts.push(l):e.push(n[o]={id:o,parts:[l]})}return e}function o(t,e){var n=v(),i=g[g.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function s(t){t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function u(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function l(t,e){var n,i,r;if(e.singleton){var o=_++;n=y||(y=a(e)),i=h.bind(null,n,o,!1),r=h.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(e),i=f.bind(null,n),r=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),i=c.bind(null,n),r=function(){s(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function h(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=b(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function c(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e){var n=e.css,i=e.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var d={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},m=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=p(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,_=0,g=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=m()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=r(t);return i(n,e),function(t){for(var o=[],s=0;s<n.length;s++){var a=n[s],u=d[a.id];u.refs--,o.push(u)}if(t){var l=r(t);i(l,e)}for(var s=0;s<o.length;s++){var u=o[s];if(0===u.refs){for(var h=0;h<u.parts.length;h++)u.parts[h]();delete d[u.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var i=n(146);"string"==typeof i&&(i=[[t.id,i,""]]);n(206)(i,{});i.locals&&(t.exports=i.locals)},function(t,e){(function(e){t.exports=e}).call(e,{})}]);
//# sourceMappingURL=main.js.map